var wF=Object.defineProperty;var EF=(t,e,n)=>e in t?wF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var it=(t,e,n)=>(EF(t,typeof e!="symbol"?e+"":e,n),n);function TF(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Vx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function IF(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ve={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yf=Symbol.for("react.element"),SF=Symbol.for("react.portal"),CF=Symbol.for("react.fragment"),bF=Symbol.for("react.strict_mode"),kF=Symbol.for("react.profiler"),xF=Symbol.for("react.provider"),NF=Symbol.for("react.context"),AF=Symbol.for("react.forward_ref"),DF=Symbol.for("react.suspense"),PF=Symbol.for("react.memo"),RF=Symbol.for("react.lazy"),OC=Symbol.iterator;function OF(t){return t===null||typeof t!="object"?null:(t=OC&&t[OC]||t["@@iterator"],typeof t=="function"?t:null)}var Bx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jx=Object.assign,qx={};function eh(t,e,n){this.props=t,this.context=e,this.refs=qx,this.updater=n||Bx}eh.prototype.isReactComponent={};eh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};eh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zx(){}zx.prototype=eh.prototype;function ZE(t,e,n){this.props=t,this.context=e,this.refs=qx,this.updater=n||Bx}var eT=ZE.prototype=new zx;eT.constructor=ZE;jx(eT,eh.prototype);eT.isPureReactComponent=!0;var LC=Array.isArray,Wx=Object.prototype.hasOwnProperty,tT={current:null},Hx={key:!0,ref:!0,__self:!0,__source:!0};function Gx(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Wx.call(e,r)&&!Hx.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),h=0;h<a;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Yf,type:t,key:s,ref:o,props:i,_owner:tT.current}}function LF(t,e){return{$$typeof:Yf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nT(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yf}function MF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var MC=/\/+/g;function R_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MF(""+t.key):e.toString(36)}function Xg(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yf:case SF:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+R_(o,0):r,LC(i)?(n="",t!=null&&(n=t.replace(MC,"$&/")+"/"),Xg(i,e,n,"",function(h){return h})):i!=null&&(nT(i)&&(i=LF(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(MC,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",LC(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+R_(s,a);o+=Xg(s,e,n,u,i)}else if(u=OF(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+R_(s,a++),o+=Xg(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function pg(t,e,n){if(t==null)return t;var r=[],i=0;return Xg(t,r,"","",function(s){return e.call(n,s,i++)}),r}function FF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _r={current:null},Jg={transition:null},$F={ReactCurrentDispatcher:_r,ReactCurrentBatchConfig:Jg,ReactCurrentOwner:tT};Qe.Children={map:pg,forEach:function(t,e,n){pg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return pg(t,function(){e++}),e},toArray:function(t){return pg(t,function(e){return e})||[]},only:function(t){if(!nT(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Qe.Component=eh;Qe.Fragment=CF;Qe.Profiler=kF;Qe.PureComponent=ZE;Qe.StrictMode=bF;Qe.Suspense=DF;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$F;Qe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=jx({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=tT.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)Wx.call(e,u)&&!Hx.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var h=0;h<u;h++)a[h]=arguments[h+2];r.children=a}return{$$typeof:Yf,type:t.type,key:i,ref:s,props:r,_owner:o}};Qe.createContext=function(t){return t={$$typeof:NF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xF,_context:t},t.Consumer=t};Qe.createElement=Gx;Qe.createFactory=function(t){var e=Gx.bind(null,t);return e.type=t,e};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(t){return{$$typeof:AF,render:t}};Qe.isValidElement=nT;Qe.lazy=function(t){return{$$typeof:RF,_payload:{_status:-1,_result:t},_init:FF}};Qe.memo=function(t,e){return{$$typeof:PF,type:t,compare:e===void 0?null:e}};Qe.startTransition=function(t){var e=Jg.transition;Jg.transition={};try{t()}finally{Jg.transition=e}};Qe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Qe.useCallback=function(t,e){return _r.current.useCallback(t,e)};Qe.useContext=function(t){return _r.current.useContext(t)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(t){return _r.current.useDeferredValue(t)};Qe.useEffect=function(t,e){return _r.current.useEffect(t,e)};Qe.useId=function(){return _r.current.useId()};Qe.useImperativeHandle=function(t,e,n){return _r.current.useImperativeHandle(t,e,n)};Qe.useInsertionEffect=function(t,e){return _r.current.useInsertionEffect(t,e)};Qe.useLayoutEffect=function(t,e){return _r.current.useLayoutEffect(t,e)};Qe.useMemo=function(t,e){return _r.current.useMemo(t,e)};Qe.useReducer=function(t,e,n){return _r.current.useReducer(t,e,n)};Qe.useRef=function(t){return _r.current.useRef(t)};Qe.useState=function(t){return _r.current.useState(t)};Qe.useSyncExternalStore=function(t,e,n){return _r.current.useSyncExternalStore(t,e,n)};Qe.useTransition=function(){return _r.current.useTransition()};Qe.version="18.2.0";(function(t){t.exports=Qe})(ve);const Kx=IF(ve.exports),Hw=TF({__proto__:null,default:Kx},[ve.exports]);var Gw={},Qx={exports:{}},ni={},Yx={exports:{}},Xx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(pe,Re){var W=pe.length;pe.push(Re);e:for(;0<W;){var He=W-1>>>1,ut=pe[He];if(0<i(ut,Re))pe[He]=Re,pe[W]=ut,W=He;else break e}}function n(pe){return pe.length===0?null:pe[0]}function r(pe){if(pe.length===0)return null;var Re=pe[0],W=pe.pop();if(W!==Re){pe[0]=W;e:for(var He=0,ut=pe.length,sr=ut>>>1;He<sr;){var or=2*(He+1)-1,Qi=pe[or],rn=or+1,Er=pe[rn];if(0>i(Qi,W))rn<ut&&0>i(Er,Qi)?(pe[He]=Er,pe[rn]=W,He=rn):(pe[He]=Qi,pe[or]=W,He=or);else if(rn<ut&&0>i(Er,W))pe[He]=Er,pe[rn]=W,He=rn;else break e}}return Re}function i(pe,Re){var W=pe.sortIndex-Re.sortIndex;return W!==0?W:pe.id-Re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],h=[],p=1,v=null,w=3,b=!1,k=!1,O=!1,J=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(pe){for(var Re=n(h);Re!==null;){if(Re.callback===null)r(h);else if(Re.startTime<=pe)r(h),Re.sortIndex=Re.expirationTime,e(u,Re);else break;Re=n(h)}}function Q(pe){if(O=!1,M(pe),!k)if(n(u)!==null)k=!0,mo(re);else{var Re=n(h);Re!==null&&Ns(Q,Re.startTime-pe)}}function re(pe,Re){k=!1,O&&(O=!1,N(he),he=-1),b=!0;var W=w;try{for(M(Re),v=n(u);v!==null&&(!(v.expirationTime>Re)||pe&&!Hn());){var He=v.callback;if(typeof He=="function"){v.callback=null,w=v.priorityLevel;var ut=He(v.expirationTime<=Re);Re=t.unstable_now(),typeof ut=="function"?v.callback=ut:v===n(u)&&r(u),M(Re)}else r(u);v=n(u)}if(v!==null)var sr=!0;else{var or=n(h);or!==null&&Ns(Q,or.startTime-Re),sr=!1}return sr}finally{v=null,w=W,b=!1}}var m=!1,le=null,he=-1,Ye=5,Fe=-1;function Hn(){return!(t.unstable_now()-Fe<Ye)}function Kt(){if(le!==null){var pe=t.unstable_now();Fe=pe;var Re=!0;try{Re=le(!0,pe)}finally{Re?Ci():(m=!1,le=null)}}else m=!1}var Ci;if(typeof D=="function")Ci=function(){D(Kt)};else if(typeof MessageChannel<"u"){var xs=new MessageChannel,ja=xs.port2;xs.port1.onmessage=Kt,Ci=function(){ja.postMessage(null)}}else Ci=function(){J(Kt,0)};function mo(pe){le=pe,m||(m=!0,Ci())}function Ns(pe,Re){he=J(function(){pe(t.unstable_now())},Re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(pe){pe.callback=null},t.unstable_continueExecution=function(){k||b||(k=!0,mo(re))},t.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ye=0<pe?Math.floor(1e3/pe):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(pe){switch(w){case 1:case 2:case 3:var Re=3;break;default:Re=w}var W=w;w=Re;try{return pe()}finally{w=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(pe,Re){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var W=w;w=pe;try{return Re()}finally{w=W}},t.unstable_scheduleCallback=function(pe,Re,W){var He=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?He+W:He):W=He,pe){case 1:var ut=-1;break;case 2:ut=250;break;case 5:ut=1073741823;break;case 4:ut=1e4;break;default:ut=5e3}return ut=W+ut,pe={id:p++,callback:Re,priorityLevel:pe,startTime:W,expirationTime:ut,sortIndex:-1},W>He?(pe.sortIndex=W,e(h,pe),n(u)===null&&pe===n(h)&&(O?(N(he),he=-1):O=!0,Ns(Q,W-He))):(pe.sortIndex=ut,e(u,pe),k||b||(k=!0,mo(re))),pe},t.unstable_shouldYield=Hn,t.unstable_wrapCallback=function(pe){var Re=w;return function(){var W=w;w=Re;try{return pe.apply(this,arguments)}finally{w=W}}}})(Xx);(function(t){t.exports=Xx})(Yx);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jx=ve.exports,Qr=Yx.exports;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zx=new Set,Qd={};function su(t,e){bc(t,e),bc(t+"Capture",e)}function bc(t,e){for(Qd[t]=e,t=0;t<e.length;t++)Zx.add(e[t])}var eo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kw=Object.prototype.hasOwnProperty,UF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,FC={},$C={};function VF(t){return Kw.call($C,t)?!0:Kw.call(FC,t)?!1:UF.test(t)?$C[t]=!0:(FC[t]=!0,!1)}function BF(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jF(t,e,n,r){if(e===null||typeof e>"u"||BF(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jn[t]=new wr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jn[e]=new wr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jn[t]=new wr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jn[t]=new wr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jn[t]=new wr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jn[t]=new wr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jn[t]=new wr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jn[t]=new wr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jn[t]=new wr(t,5,!1,t.toLowerCase(),null,!1,!1)});var rT=/[\-:]([a-z])/g;function iT(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rT,iT);jn[e]=new wr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rT,iT);jn[e]=new wr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rT,iT);jn[e]=new wr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jn[t]=new wr(t,1,!1,t.toLowerCase(),null,!1,!1)});jn.xlinkHref=new wr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jn[t]=new wr(t,1,!1,t.toLowerCase(),null,!0,!0)});function sT(t,e,n,r){var i=jn.hasOwnProperty(e)?jn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jF(e,n,i,r)&&(n=null),r||i===null?VF(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var uo=Jx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gg=Symbol.for("react.element"),Xu=Symbol.for("react.portal"),Ju=Symbol.for("react.fragment"),oT=Symbol.for("react.strict_mode"),Qw=Symbol.for("react.profiler"),eN=Symbol.for("react.provider"),tN=Symbol.for("react.context"),aT=Symbol.for("react.forward_ref"),Yw=Symbol.for("react.suspense"),Xw=Symbol.for("react.suspense_list"),lT=Symbol.for("react.memo"),Bo=Symbol.for("react.lazy"),nN=Symbol.for("react.offscreen"),UC=Symbol.iterator;function Gh(t){return t===null||typeof t!="object"?null:(t=UC&&t[UC]||t["@@iterator"],typeof t=="function"?t:null)}var Ut=Object.assign,O_;function md(t){if(O_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);O_=e&&e[1]||""}return`
`+O_+t}var L_=!1;function M_(t,e){if(!t||L_)return"";L_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{L_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?md(t):""}function qF(t){switch(t.tag){case 5:return md(t.type);case 16:return md("Lazy");case 13:return md("Suspense");case 19:return md("SuspenseList");case 0:case 2:case 15:return t=M_(t.type,!1),t;case 11:return t=M_(t.type.render,!1),t;case 1:return t=M_(t.type,!0),t;default:return""}}function Jw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ju:return"Fragment";case Xu:return"Portal";case Qw:return"Profiler";case oT:return"StrictMode";case Yw:return"Suspense";case Xw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tN:return(t.displayName||"Context")+".Consumer";case eN:return(t._context.displayName||"Context")+".Provider";case aT:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lT:return e=t.displayName||null,e!==null?e:Jw(t.type)||"Memo";case Bo:e=t._payload,t=t._init;try{return Jw(t(e))}catch{}}return null}function zF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jw(e);case 8:return e===oT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function WF(t){var e=rN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function mg(t){t._valueTracker||(t._valueTracker=WF(t))}function iN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=rN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Zw(t,e){var n=e.checked;return Ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function VC(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fa(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sN(t,e){e=e.checked,e!=null&&sT(t,"checked",e,!1)}function e0(t,e){sN(t,e);var n=fa(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?t0(t,e.type,n):e.hasOwnProperty("defaultValue")&&t0(t,e.type,fa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function BC(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function t0(t,e,n){(e!=="number"||vm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yd=Array.isArray;function hc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fa(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function n0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return Ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jC(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(se(92));if(yd(n)){if(1<n.length)throw Error(se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fa(n)}}function oN(t,e){var n=fa(e.value),r=fa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function qC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function aN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function r0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?aN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yg,lN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yg=yg||document.createElement("div"),yg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HF=["Webkit","ms","Moz","O"];Object.keys(bd).forEach(function(t){HF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bd[e]=bd[t]})});function uN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bd.hasOwnProperty(t)&&bd[t]?(""+e).trim():e+"px"}function cN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=uN(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var GF=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function i0(t,e){if(e){if(GF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function s0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var o0=null;function uT(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var a0=null,dc=null,fc=null;function zC(t){if(t=Zf(t)){if(typeof a0!="function")throw Error(se(280));var e=t.stateNode;e&&(e=Fy(e),a0(t.stateNode,t.type,e))}}function hN(t){dc?fc?fc.push(t):fc=[t]:dc=t}function dN(){if(dc){var t=dc,e=fc;if(fc=dc=null,zC(t),e)for(t=0;t<e.length;t++)zC(e[t])}}function fN(t,e){return t(e)}function pN(){}var F_=!1;function gN(t,e,n){if(F_)return t(e,n);F_=!0;try{return fN(t,e,n)}finally{F_=!1,(dc!==null||fc!==null)&&(pN(),dN())}}function Xd(t,e){var n=t.stateNode;if(n===null)return null;var r=Fy(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(se(231,e,typeof n));return n}var l0=!1;if(eo)try{var Kh={};Object.defineProperty(Kh,"passive",{get:function(){l0=!0}}),window.addEventListener("test",Kh,Kh),window.removeEventListener("test",Kh,Kh)}catch{l0=!1}function KF(t,e,n,r,i,s,o,a,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var kd=!1,_m=null,wm=!1,u0=null,QF={onError:function(t){kd=!0,_m=t}};function YF(t,e,n,r,i,s,o,a,u){kd=!1,_m=null,KF.apply(QF,arguments)}function XF(t,e,n,r,i,s,o,a,u){if(YF.apply(this,arguments),kd){if(kd){var h=_m;kd=!1,_m=null}else throw Error(se(198));wm||(wm=!0,u0=h)}}function ou(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function mN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function WC(t){if(ou(t)!==t)throw Error(se(188))}function JF(t){var e=t.alternate;if(!e){if(e=ou(t),e===null)throw Error(se(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return WC(i),t;if(s===r)return WC(i),e;s=s.sibling}throw Error(se(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(se(189))}}if(n.alternate!==r)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?t:e}function yN(t){return t=JF(t),t!==null?vN(t):null}function vN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vN(t);if(e!==null)return e;t=t.sibling}return null}var _N=Qr.unstable_scheduleCallback,HC=Qr.unstable_cancelCallback,ZF=Qr.unstable_shouldYield,e$=Qr.unstable_requestPaint,Yt=Qr.unstable_now,t$=Qr.unstable_getCurrentPriorityLevel,cT=Qr.unstable_ImmediatePriority,wN=Qr.unstable_UserBlockingPriority,Em=Qr.unstable_NormalPriority,n$=Qr.unstable_LowPriority,EN=Qr.unstable_IdlePriority,Ry=null,vs=null;function r$(t){if(vs&&typeof vs.onCommitFiberRoot=="function")try{vs.onCommitFiberRoot(Ry,t,void 0,(t.current.flags&128)===128)}catch{}}var ji=Math.clz32?Math.clz32:o$,i$=Math.log,s$=Math.LN2;function o$(t){return t>>>=0,t===0?32:31-(i$(t)/s$|0)|0}var vg=64,_g=4194304;function vd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=vd(a):(s&=o,s!==0&&(r=vd(s)))}else o=n&~i,o!==0?r=vd(o):s!==0&&(r=vd(s));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ji(e),i=1<<n,r|=t[n],e&=~i;return r}function a$(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function l$(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ji(s),a=1<<o,u=i[o];u===-1?((a&n)===0||(a&r)!==0)&&(i[o]=a$(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function c0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function TN(){var t=vg;return vg<<=1,(vg&4194240)===0&&(vg=64),t}function $_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ji(e),t[e]=n}function u$(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ji(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function hT(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ji(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var pt=0;function IN(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var SN,dT,CN,bN,kN,h0=!1,wg=[],ea=null,ta=null,na=null,Jd=new Map,Zd=new Map,qo=[],c$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function GC(t,e){switch(t){case"focusin":case"focusout":ea=null;break;case"dragenter":case"dragleave":ta=null;break;case"mouseover":case"mouseout":na=null;break;case"pointerover":case"pointerout":Jd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zd.delete(e.pointerId)}}function Qh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Zf(e),e!==null&&dT(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function h$(t,e,n,r,i){switch(e){case"focusin":return ea=Qh(ea,t,e,n,r,i),!0;case"dragenter":return ta=Qh(ta,t,e,n,r,i),!0;case"mouseover":return na=Qh(na,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Jd.set(s,Qh(Jd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Zd.set(s,Qh(Zd.get(s)||null,t,e,n,r,i)),!0}return!1}function xN(t){var e=_l(t.target);if(e!==null){var n=ou(e);if(n!==null){if(e=n.tag,e===13){if(e=mN(n),e!==null){t.blockedOn=e,kN(t.priority,function(){CN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=d0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);o0=r,n.target.dispatchEvent(r),o0=null}else return e=Zf(n),e!==null&&dT(e),t.blockedOn=n,!1;e.shift()}return!0}function KC(t,e,n){Zg(t)&&n.delete(e)}function d$(){h0=!1,ea!==null&&Zg(ea)&&(ea=null),ta!==null&&Zg(ta)&&(ta=null),na!==null&&Zg(na)&&(na=null),Jd.forEach(KC),Zd.forEach(KC)}function Yh(t,e){t.blockedOn===e&&(t.blockedOn=null,h0||(h0=!0,Qr.unstable_scheduleCallback(Qr.unstable_NormalPriority,d$)))}function ef(t){function e(i){return Yh(i,t)}if(0<wg.length){Yh(wg[0],t);for(var n=1;n<wg.length;n++){var r=wg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ea!==null&&Yh(ea,t),ta!==null&&Yh(ta,t),na!==null&&Yh(na,t),Jd.forEach(e),Zd.forEach(e),n=0;n<qo.length;n++)r=qo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qo.length&&(n=qo[0],n.blockedOn===null);)xN(n),n.blockedOn===null&&qo.shift()}var pc=uo.ReactCurrentBatchConfig,Im=!0;function f$(t,e,n,r){var i=pt,s=pc.transition;pc.transition=null;try{pt=1,fT(t,e,n,r)}finally{pt=i,pc.transition=s}}function p$(t,e,n,r){var i=pt,s=pc.transition;pc.transition=null;try{pt=4,fT(t,e,n,r)}finally{pt=i,pc.transition=s}}function fT(t,e,n,r){if(Im){var i=d0(t,e,n,r);if(i===null)K_(t,e,r,Sm,n),GC(t,r);else if(h$(i,t,e,n,r))r.stopPropagation();else if(GC(t,r),e&4&&-1<c$.indexOf(t)){for(;i!==null;){var s=Zf(i);if(s!==null&&SN(s),s=d0(t,e,n,r),s===null&&K_(t,e,r,Sm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else K_(t,e,r,null,n)}}var Sm=null;function d0(t,e,n,r){if(Sm=null,t=uT(r),t=_l(t),t!==null)if(e=ou(t),e===null)t=null;else if(n=e.tag,n===13){if(t=mN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sm=t,null}function NN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(t$()){case cT:return 1;case wN:return 4;case Em:case n$:return 16;case EN:return 536870912;default:return 16}default:return 16}}var Go=null,pT=null,em=null;function AN(){if(em)return em;var t,e=pT,n=e.length,r,i="value"in Go?Go.value:Go.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return em=i.slice(t,1<r?1-r:void 0)}function tm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Eg(){return!0}function QC(){return!1}function ri(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Eg:QC,this.isPropagationStopped=QC,this}return Ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Eg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Eg)},persist:function(){},isPersistent:Eg}),e}var th={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gT=ri(th),Jf=Ut({},th,{view:0,detail:0}),g$=ri(Jf),U_,V_,Xh,Oy=Ut({},Jf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mT,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xh&&(Xh&&t.type==="mousemove"?(U_=t.screenX-Xh.screenX,V_=t.screenY-Xh.screenY):V_=U_=0,Xh=t),U_)},movementY:function(t){return"movementY"in t?t.movementY:V_}}),YC=ri(Oy),m$=Ut({},Oy,{dataTransfer:0}),y$=ri(m$),v$=Ut({},Jf,{relatedTarget:0}),B_=ri(v$),_$=Ut({},th,{animationName:0,elapsedTime:0,pseudoElement:0}),w$=ri(_$),E$=Ut({},th,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),T$=ri(E$),I$=Ut({},th,{data:0}),XC=ri(I$),S$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function k$(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=b$[t])?!!e[t]:!1}function mT(){return k$}var x$=Ut({},Jf,{key:function(t){if(t.key){var e=S$[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?C$[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mT,charCode:function(t){return t.type==="keypress"?tm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),N$=ri(x$),A$=Ut({},Oy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JC=ri(A$),D$=Ut({},Jf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mT}),P$=ri(D$),R$=Ut({},th,{propertyName:0,elapsedTime:0,pseudoElement:0}),O$=ri(R$),L$=Ut({},Oy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),M$=ri(L$),F$=[9,13,27,32],yT=eo&&"CompositionEvent"in window,xd=null;eo&&"documentMode"in document&&(xd=document.documentMode);var $$=eo&&"TextEvent"in window&&!xd,DN=eo&&(!yT||xd&&8<xd&&11>=xd),ZC=String.fromCharCode(32),eb=!1;function PN(t,e){switch(t){case"keyup":return F$.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zu=!1;function U$(t,e){switch(t){case"compositionend":return RN(e);case"keypress":return e.which!==32?null:(eb=!0,ZC);case"textInput":return t=e.data,t===ZC&&eb?null:t;default:return null}}function V$(t,e){if(Zu)return t==="compositionend"||!yT&&PN(t,e)?(t=AN(),em=pT=Go=null,Zu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DN&&e.locale!=="ko"?null:e.data;default:return null}}var B$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!B$[t.type]:e==="textarea"}function ON(t,e,n,r){hN(r),e=Cm(e,"onChange"),0<e.length&&(n=new gT("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Nd=null,tf=null;function j$(t){WN(t,0)}function Ly(t){var e=nc(t);if(iN(e))return t}function q$(t,e){if(t==="change")return e}var LN=!1;if(eo){var j_;if(eo){var q_="oninput"in document;if(!q_){var nb=document.createElement("div");nb.setAttribute("oninput","return;"),q_=typeof nb.oninput=="function"}j_=q_}else j_=!1;LN=j_&&(!document.documentMode||9<document.documentMode)}function rb(){Nd&&(Nd.detachEvent("onpropertychange",MN),tf=Nd=null)}function MN(t){if(t.propertyName==="value"&&Ly(tf)){var e=[];ON(e,tf,t,uT(t)),gN(j$,e)}}function z$(t,e,n){t==="focusin"?(rb(),Nd=e,tf=n,Nd.attachEvent("onpropertychange",MN)):t==="focusout"&&rb()}function W$(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ly(tf)}function H$(t,e){if(t==="click")return Ly(e)}function G$(t,e){if(t==="input"||t==="change")return Ly(e)}function K$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hi=typeof Object.is=="function"?Object.is:K$;function nf(t,e){if(Hi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Kw.call(e,i)||!Hi(t[i],e[i]))return!1}return!0}function ib(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sb(t,e){var n=ib(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ib(n)}}function FN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?FN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $N(){for(var t=window,e=vm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vm(t.document)}return e}function vT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Q$(t){var e=$N(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&FN(n.ownerDocument.documentElement,n)){if(r!==null&&vT(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=sb(n,s);var o=sb(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Y$=eo&&"documentMode"in document&&11>=document.documentMode,ec=null,f0=null,Ad=null,p0=!1;function ob(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;p0||ec==null||ec!==vm(r)||(r=ec,"selectionStart"in r&&vT(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ad&&nf(Ad,r)||(Ad=r,r=Cm(f0,"onSelect"),0<r.length&&(e=new gT("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ec)))}function Tg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var tc={animationend:Tg("Animation","AnimationEnd"),animationiteration:Tg("Animation","AnimationIteration"),animationstart:Tg("Animation","AnimationStart"),transitionend:Tg("Transition","TransitionEnd")},z_={},UN={};eo&&(UN=document.createElement("div").style,"AnimationEvent"in window||(delete tc.animationend.animation,delete tc.animationiteration.animation,delete tc.animationstart.animation),"TransitionEvent"in window||delete tc.transitionend.transition);function My(t){if(z_[t])return z_[t];if(!tc[t])return t;var e=tc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in UN)return z_[t]=e[n];return t}var VN=My("animationend"),BN=My("animationiteration"),jN=My("animationstart"),qN=My("transitionend"),zN=new Map,ab="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Aa(t,e){zN.set(t,e),su(e,[t])}for(var W_=0;W_<ab.length;W_++){var H_=ab[W_],X$=H_.toLowerCase(),J$=H_[0].toUpperCase()+H_.slice(1);Aa(X$,"on"+J$)}Aa(VN,"onAnimationEnd");Aa(BN,"onAnimationIteration");Aa(jN,"onAnimationStart");Aa("dblclick","onDoubleClick");Aa("focusin","onFocus");Aa("focusout","onBlur");Aa(qN,"onTransitionEnd");bc("onMouseEnter",["mouseout","mouseover"]);bc("onMouseLeave",["mouseout","mouseover"]);bc("onPointerEnter",["pointerout","pointerover"]);bc("onPointerLeave",["pointerout","pointerover"]);su("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));su("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));su("onBeforeInput",["compositionend","keypress","textInput","paste"]);su("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));su("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));su("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z$=new Set("cancel close invalid load scroll toggle".split(" ").concat(_d));function lb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,XF(r,e,void 0,t),t.currentTarget=null}function WN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,h=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;lb(i,a,h),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,h=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;lb(i,a,h),s=u}}}if(wm)throw t=u0,wm=!1,u0=null,t}function bt(t,e){var n=e[_0];n===void 0&&(n=e[_0]=new Set);var r=t+"__bubble";n.has(r)||(HN(e,t,2,!1),n.add(r))}function G_(t,e,n){var r=0;e&&(r|=4),HN(n,t,r,e)}var Ig="_reactListening"+Math.random().toString(36).slice(2);function rf(t){if(!t[Ig]){t[Ig]=!0,Zx.forEach(function(n){n!=="selectionchange"&&(Z$.has(n)||G_(n,!1,t),G_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ig]||(e[Ig]=!0,G_("selectionchange",!1,e))}}function HN(t,e,n,r){switch(NN(e)){case 1:var i=f$;break;case 4:i=p$;break;default:i=fT}n=i.bind(null,e,n,t),i=void 0,!l0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function K_(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=_l(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}gN(function(){var h=s,p=uT(n),v=[];e:{var w=zN.get(t);if(w!==void 0){var b=gT,k=t;switch(t){case"keypress":if(tm(n)===0)break e;case"keydown":case"keyup":b=N$;break;case"focusin":k="focus",b=B_;break;case"focusout":k="blur",b=B_;break;case"beforeblur":case"afterblur":b=B_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=YC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=y$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=P$;break;case VN:case BN:case jN:b=w$;break;case qN:b=O$;break;case"scroll":b=g$;break;case"wheel":b=M$;break;case"copy":case"cut":case"paste":b=T$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=JC}var O=(e&4)!==0,J=!O&&t==="scroll",N=O?w!==null?w+"Capture":null:w;O=[];for(var D=h,M;D!==null;){M=D;var Q=M.stateNode;if(M.tag===5&&Q!==null&&(M=Q,N!==null&&(Q=Xd(D,N),Q!=null&&O.push(sf(D,Q,M)))),J)break;D=D.return}0<O.length&&(w=new b(w,k,null,n,p),v.push({event:w,listeners:O}))}}if((e&7)===0){e:{if(w=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",w&&n!==o0&&(k=n.relatedTarget||n.fromElement)&&(_l(k)||k[to]))break e;if((b||w)&&(w=p.window===p?p:(w=p.ownerDocument)?w.defaultView||w.parentWindow:window,b?(k=n.relatedTarget||n.toElement,b=h,k=k?_l(k):null,k!==null&&(J=ou(k),k!==J||k.tag!==5&&k.tag!==6)&&(k=null)):(b=null,k=h),b!==k)){if(O=YC,Q="onMouseLeave",N="onMouseEnter",D="mouse",(t==="pointerout"||t==="pointerover")&&(O=JC,Q="onPointerLeave",N="onPointerEnter",D="pointer"),J=b==null?w:nc(b),M=k==null?w:nc(k),w=new O(Q,D+"leave",b,n,p),w.target=J,w.relatedTarget=M,Q=null,_l(p)===h&&(O=new O(N,D+"enter",k,n,p),O.target=M,O.relatedTarget=J,Q=O),J=Q,b&&k)t:{for(O=b,N=k,D=0,M=O;M;M=ju(M))D++;for(M=0,Q=N;Q;Q=ju(Q))M++;for(;0<D-M;)O=ju(O),D--;for(;0<M-D;)N=ju(N),M--;for(;D--;){if(O===N||N!==null&&O===N.alternate)break t;O=ju(O),N=ju(N)}O=null}else O=null;b!==null&&ub(v,w,b,O,!1),k!==null&&J!==null&&ub(v,J,k,O,!0)}}e:{if(w=h?nc(h):window,b=w.nodeName&&w.nodeName.toLowerCase(),b==="select"||b==="input"&&w.type==="file")var re=q$;else if(tb(w))if(LN)re=G$;else{re=W$;var m=z$}else(b=w.nodeName)&&b.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(re=H$);if(re&&(re=re(t,h))){ON(v,re,n,p);break e}m&&m(t,w,h),t==="focusout"&&(m=w._wrapperState)&&m.controlled&&w.type==="number"&&t0(w,"number",w.value)}switch(m=h?nc(h):window,t){case"focusin":(tb(m)||m.contentEditable==="true")&&(ec=m,f0=h,Ad=null);break;case"focusout":Ad=f0=ec=null;break;case"mousedown":p0=!0;break;case"contextmenu":case"mouseup":case"dragend":p0=!1,ob(v,n,p);break;case"selectionchange":if(Y$)break;case"keydown":case"keyup":ob(v,n,p)}var le;if(yT)e:{switch(t){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else Zu?PN(t,n)&&(he="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(he="onCompositionStart");he&&(DN&&n.locale!=="ko"&&(Zu||he!=="onCompositionStart"?he==="onCompositionEnd"&&Zu&&(le=AN()):(Go=p,pT="value"in Go?Go.value:Go.textContent,Zu=!0)),m=Cm(h,he),0<m.length&&(he=new XC(he,t,null,n,p),v.push({event:he,listeners:m}),le?he.data=le:(le=RN(n),le!==null&&(he.data=le)))),(le=$$?U$(t,n):V$(t,n))&&(h=Cm(h,"onBeforeInput"),0<h.length&&(p=new XC("onBeforeInput","beforeinput",null,n,p),v.push({event:p,listeners:h}),p.data=le))}WN(v,e)})}function sf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Xd(t,n),s!=null&&r.unshift(sf(t,s,i)),s=Xd(t,e),s!=null&&r.push(sf(t,s,i))),t=t.return}return r}function ju(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ub(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,h=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&h!==null&&(a=h,i?(u=Xd(n,s),u!=null&&o.unshift(sf(n,u,a))):i||(u=Xd(n,s),u!=null&&o.push(sf(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var eU=/\r\n?/g,tU=/\u0000|\uFFFD/g;function cb(t){return(typeof t=="string"?t:""+t).replace(eU,`
`).replace(tU,"")}function Sg(t,e,n){if(e=cb(e),cb(t)!==e&&n)throw Error(se(425))}function bm(){}var g0=null,m0=null;function y0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var v0=typeof setTimeout=="function"?setTimeout:void 0,nU=typeof clearTimeout=="function"?clearTimeout:void 0,hb=typeof Promise=="function"?Promise:void 0,rU=typeof queueMicrotask=="function"?queueMicrotask:typeof hb<"u"?function(t){return hb.resolve(null).then(t).catch(iU)}:v0;function iU(t){setTimeout(function(){throw t})}function Q_(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ef(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ef(e)}function ra(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function db(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var nh=Math.random().toString(36).slice(2),us="__reactFiber$"+nh,of="__reactProps$"+nh,to="__reactContainer$"+nh,_0="__reactEvents$"+nh,sU="__reactListeners$"+nh,oU="__reactHandles$"+nh;function _l(t){var e=t[us];if(e)return e;for(var n=t.parentNode;n;){if(e=n[to]||n[us]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=db(t);t!==null;){if(n=t[us])return n;t=db(t)}return e}t=n,n=t.parentNode}return null}function Zf(t){return t=t[us]||t[to],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function nc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function Fy(t){return t[of]||null}var w0=[],rc=-1;function Da(t){return{current:t}}function xt(t){0>rc||(t.current=w0[rc],w0[rc]=null,rc--)}function St(t,e){rc++,w0[rc]=t.current,t.current=e}var pa={},ir=Da(pa),Lr=Da(!1),Ml=pa;function kc(t,e){var n=t.type.contextTypes;if(!n)return pa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Mr(t){return t=t.childContextTypes,t!=null}function km(){xt(Lr),xt(ir)}function fb(t,e,n){if(ir.current!==pa)throw Error(se(168));St(ir,e),St(Lr,n)}function GN(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(se(108,zF(t)||"Unknown",i));return Ut({},n,r)}function xm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pa,Ml=ir.current,St(ir,t),St(Lr,Lr.current),!0}function pb(t,e,n){var r=t.stateNode;if(!r)throw Error(se(169));n?(t=GN(t,e,Ml),r.__reactInternalMemoizedMergedChildContext=t,xt(Lr),xt(ir),St(ir,t)):xt(Lr),St(Lr,n)}var qs=null,$y=!1,Y_=!1;function KN(t){qs===null?qs=[t]:qs.push(t)}function aU(t){$y=!0,KN(t)}function Pa(){if(!Y_&&qs!==null){Y_=!0;var t=0,e=pt;try{var n=qs;for(pt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qs=null,$y=!1}catch(i){throw qs!==null&&(qs=qs.slice(t+1)),_N(cT,Pa),i}finally{pt=e,Y_=!1}}return null}var ic=[],sc=0,Nm=null,Am=0,di=[],fi=0,Fl=null,zs=1,Ws="";function ul(t,e){ic[sc++]=Am,ic[sc++]=Nm,Nm=t,Am=e}function QN(t,e,n){di[fi++]=zs,di[fi++]=Ws,di[fi++]=Fl,Fl=t;var r=zs;t=Ws;var i=32-ji(r)-1;r&=~(1<<i),n+=1;var s=32-ji(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,zs=1<<32-ji(e)+i|n<<i|r,Ws=s+t}else zs=1<<s|n<<i|r,Ws=t}function _T(t){t.return!==null&&(ul(t,1),QN(t,1,0))}function wT(t){for(;t===Nm;)Nm=ic[--sc],ic[sc]=null,Am=ic[--sc],ic[sc]=null;for(;t===Fl;)Fl=di[--fi],di[fi]=null,Ws=di[--fi],di[fi]=null,zs=di[--fi],di[fi]=null}var Kr=null,Hr=null,At=!1,Ui=null;function YN(t,e){var n=gi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Kr=t,Hr=ra(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Kr=t,Hr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Fl!==null?{id:zs,overflow:Ws}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Kr=t,Hr=null,!0):!1;default:return!1}}function E0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function T0(t){if(At){var e=Hr;if(e){var n=e;if(!gb(t,e)){if(E0(t))throw Error(se(418));e=ra(n.nextSibling);var r=Kr;e&&gb(t,e)?YN(r,n):(t.flags=t.flags&-4097|2,At=!1,Kr=t)}}else{if(E0(t))throw Error(se(418));t.flags=t.flags&-4097|2,At=!1,Kr=t}}}function mb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Kr=t}function Cg(t){if(t!==Kr)return!1;if(!At)return mb(t),At=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!y0(t.type,t.memoizedProps)),e&&(e=Hr)){if(E0(t))throw XN(),Error(se(418));for(;e;)YN(t,e),e=ra(e.nextSibling)}if(mb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Hr=ra(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Hr=null}}else Hr=Kr?ra(t.stateNode.nextSibling):null;return!0}function XN(){for(var t=Hr;t;)t=ra(t.nextSibling)}function xc(){Hr=Kr=null,At=!1}function ET(t){Ui===null?Ui=[t]:Ui.push(t)}var lU=uo.ReactCurrentBatchConfig;function Fi(t,e){if(t&&t.defaultProps){e=Ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Dm=Da(null),Pm=null,oc=null,TT=null;function IT(){TT=oc=Pm=null}function ST(t){var e=Dm.current;xt(Dm),t._currentValue=e}function I0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function gc(t,e){Pm=t,TT=oc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Ar=!0),t.firstContext=null)}function Ei(t){var e=t._currentValue;if(TT!==t)if(t={context:t,memoizedValue:e,next:null},oc===null){if(Pm===null)throw Error(se(308));oc=t,Pm.dependencies={lanes:0,firstContext:t}}else oc=oc.next=t;return e}var wl=null;function CT(t){wl===null?wl=[t]:wl.push(t)}function JN(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,CT(e)):(n.next=i.next,i.next=n),e.interleaved=n,no(t,r)}function no(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jo=!1;function bT(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ys(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ia(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(tt&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,no(t,n)}return i=r.interleaved,i===null?(e.next=e,CT(r)):(e.next=i.next,i.next=e),r.interleaved=e,no(t,n)}function nm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hT(t,n)}}function yb(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rm(t,e,n,r){var i=t.updateQueue;jo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==o&&(a===null?p.firstBaseUpdate=h:a.next=h,p.lastBaseUpdate=u))}if(s!==null){var v=i.baseState;o=0,p=h=u=null,a=s;do{var w=a.lane,b=a.eventTime;if((r&w)===w){p!==null&&(p=p.next={eventTime:b,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=t,O=a;switch(w=e,b=n,O.tag){case 1:if(k=O.payload,typeof k=="function"){v=k.call(b,v,w);break e}v=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=O.payload,w=typeof k=="function"?k.call(b,v,w):k,w==null)break e;v=Ut({},v,w);break e;case 2:jo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,w=i.effects,w===null?i.effects=[a]:w.push(a))}else b={eventTime:b,lane:w,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(h=p=b,u=v):p=p.next=b,o|=w;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;w=a,a=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(1);if(p===null&&(u=v),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ul|=o,t.lanes=o,t.memoizedState=v}}function vb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(se(191,i));i.call(r)}}}var eA=new Jx.Component().refs;function S0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Uy={isMounted:function(t){return(t=t._reactInternals)?ou(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mr(),i=oa(t),s=Ys(r,i);s.payload=e,n!=null&&(s.callback=n),e=ia(t,s,i),e!==null&&(qi(e,t,i,r),nm(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mr(),i=oa(t),s=Ys(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ia(t,s,i),e!==null&&(qi(e,t,i,r),nm(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mr(),r=oa(t),i=Ys(n,r);i.tag=2,e!=null&&(i.callback=e),e=ia(t,i,r),e!==null&&(qi(e,t,r,n),nm(e,t,r))}};function _b(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!nf(n,r)||!nf(i,s):!0}function tA(t,e,n){var r=!1,i=pa,s=e.contextType;return typeof s=="object"&&s!==null?s=Ei(s):(i=Mr(e)?Ml:ir.current,r=e.contextTypes,s=(r=r!=null)?kc(t,i):pa),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Uy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function wb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Uy.enqueueReplaceState(e,e.state,null)}function C0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=eA,bT(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ei(s):(s=Mr(e)?Ml:ir.current,i.context=kc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(S0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Uy.enqueueReplaceState(i,i.state,null),Rm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Jh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var r=n.stateNode}if(!r)throw Error(se(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===eA&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,t))}return t}function bg(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Eb(t){var e=t._init;return e(t._payload)}function nA(t){function e(N,D){if(t){var M=N.deletions;M===null?(N.deletions=[D],N.flags|=16):M.push(D)}}function n(N,D){if(!t)return null;for(;D!==null;)e(N,D),D=D.sibling;return null}function r(N,D){for(N=new Map;D!==null;)D.key!==null?N.set(D.key,D):N.set(D.index,D),D=D.sibling;return N}function i(N,D){return N=aa(N,D),N.index=0,N.sibling=null,N}function s(N,D,M){return N.index=M,t?(M=N.alternate,M!==null?(M=M.index,M<D?(N.flags|=2,D):M):(N.flags|=2,D)):(N.flags|=1048576,D)}function o(N){return t&&N.alternate===null&&(N.flags|=2),N}function a(N,D,M,Q){return D===null||D.tag!==6?(D=rw(M,N.mode,Q),D.return=N,D):(D=i(D,M),D.return=N,D)}function u(N,D,M,Q){var re=M.type;return re===Ju?p(N,D,M.props.children,Q,M.key):D!==null&&(D.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Bo&&Eb(re)===D.type)?(Q=i(D,M.props),Q.ref=Jh(N,D,M),Q.return=N,Q):(Q=lm(M.type,M.key,M.props,null,N.mode,Q),Q.ref=Jh(N,D,M),Q.return=N,Q)}function h(N,D,M,Q){return D===null||D.tag!==4||D.stateNode.containerInfo!==M.containerInfo||D.stateNode.implementation!==M.implementation?(D=iw(M,N.mode,Q),D.return=N,D):(D=i(D,M.children||[]),D.return=N,D)}function p(N,D,M,Q,re){return D===null||D.tag!==7?(D=Nl(M,N.mode,Q,re),D.return=N,D):(D=i(D,M),D.return=N,D)}function v(N,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return D=rw(""+D,N.mode,M),D.return=N,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case gg:return M=lm(D.type,D.key,D.props,null,N.mode,M),M.ref=Jh(N,null,D),M.return=N,M;case Xu:return D=iw(D,N.mode,M),D.return=N,D;case Bo:var Q=D._init;return v(N,Q(D._payload),M)}if(yd(D)||Gh(D))return D=Nl(D,N.mode,M,null),D.return=N,D;bg(N,D)}return null}function w(N,D,M,Q){var re=D!==null?D.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return re!==null?null:a(N,D,""+M,Q);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case gg:return M.key===re?u(N,D,M,Q):null;case Xu:return M.key===re?h(N,D,M,Q):null;case Bo:return re=M._init,w(N,D,re(M._payload),Q)}if(yd(M)||Gh(M))return re!==null?null:p(N,D,M,Q,null);bg(N,M)}return null}function b(N,D,M,Q,re){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return N=N.get(M)||null,a(D,N,""+Q,re);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case gg:return N=N.get(Q.key===null?M:Q.key)||null,u(D,N,Q,re);case Xu:return N=N.get(Q.key===null?M:Q.key)||null,h(D,N,Q,re);case Bo:var m=Q._init;return b(N,D,M,m(Q._payload),re)}if(yd(Q)||Gh(Q))return N=N.get(M)||null,p(D,N,Q,re,null);bg(D,Q)}return null}function k(N,D,M,Q){for(var re=null,m=null,le=D,he=D=0,Ye=null;le!==null&&he<M.length;he++){le.index>he?(Ye=le,le=null):Ye=le.sibling;var Fe=w(N,le,M[he],Q);if(Fe===null){le===null&&(le=Ye);break}t&&le&&Fe.alternate===null&&e(N,le),D=s(Fe,D,he),m===null?re=Fe:m.sibling=Fe,m=Fe,le=Ye}if(he===M.length)return n(N,le),At&&ul(N,he),re;if(le===null){for(;he<M.length;he++)le=v(N,M[he],Q),le!==null&&(D=s(le,D,he),m===null?re=le:m.sibling=le,m=le);return At&&ul(N,he),re}for(le=r(N,le);he<M.length;he++)Ye=b(le,N,he,M[he],Q),Ye!==null&&(t&&Ye.alternate!==null&&le.delete(Ye.key===null?he:Ye.key),D=s(Ye,D,he),m===null?re=Ye:m.sibling=Ye,m=Ye);return t&&le.forEach(function(Hn){return e(N,Hn)}),At&&ul(N,he),re}function O(N,D,M,Q){var re=Gh(M);if(typeof re!="function")throw Error(se(150));if(M=re.call(M),M==null)throw Error(se(151));for(var m=re=null,le=D,he=D=0,Ye=null,Fe=M.next();le!==null&&!Fe.done;he++,Fe=M.next()){le.index>he?(Ye=le,le=null):Ye=le.sibling;var Hn=w(N,le,Fe.value,Q);if(Hn===null){le===null&&(le=Ye);break}t&&le&&Hn.alternate===null&&e(N,le),D=s(Hn,D,he),m===null?re=Hn:m.sibling=Hn,m=Hn,le=Ye}if(Fe.done)return n(N,le),At&&ul(N,he),re;if(le===null){for(;!Fe.done;he++,Fe=M.next())Fe=v(N,Fe.value,Q),Fe!==null&&(D=s(Fe,D,he),m===null?re=Fe:m.sibling=Fe,m=Fe);return At&&ul(N,he),re}for(le=r(N,le);!Fe.done;he++,Fe=M.next())Fe=b(le,N,he,Fe.value,Q),Fe!==null&&(t&&Fe.alternate!==null&&le.delete(Fe.key===null?he:Fe.key),D=s(Fe,D,he),m===null?re=Fe:m.sibling=Fe,m=Fe);return t&&le.forEach(function(Kt){return e(N,Kt)}),At&&ul(N,he),re}function J(N,D,M,Q){if(typeof M=="object"&&M!==null&&M.type===Ju&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case gg:e:{for(var re=M.key,m=D;m!==null;){if(m.key===re){if(re=M.type,re===Ju){if(m.tag===7){n(N,m.sibling),D=i(m,M.props.children),D.return=N,N=D;break e}}else if(m.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Bo&&Eb(re)===m.type){n(N,m.sibling),D=i(m,M.props),D.ref=Jh(N,m,M),D.return=N,N=D;break e}n(N,m);break}else e(N,m);m=m.sibling}M.type===Ju?(D=Nl(M.props.children,N.mode,Q,M.key),D.return=N,N=D):(Q=lm(M.type,M.key,M.props,null,N.mode,Q),Q.ref=Jh(N,D,M),Q.return=N,N=Q)}return o(N);case Xu:e:{for(m=M.key;D!==null;){if(D.key===m)if(D.tag===4&&D.stateNode.containerInfo===M.containerInfo&&D.stateNode.implementation===M.implementation){n(N,D.sibling),D=i(D,M.children||[]),D.return=N,N=D;break e}else{n(N,D);break}else e(N,D);D=D.sibling}D=iw(M,N.mode,Q),D.return=N,N=D}return o(N);case Bo:return m=M._init,J(N,D,m(M._payload),Q)}if(yd(M))return k(N,D,M,Q);if(Gh(M))return O(N,D,M,Q);bg(N,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,D!==null&&D.tag===6?(n(N,D.sibling),D=i(D,M),D.return=N,N=D):(n(N,D),D=rw(M,N.mode,Q),D.return=N,N=D),o(N)):n(N,D)}return J}var Nc=nA(!0),rA=nA(!1),ep={},_s=Da(ep),af=Da(ep),lf=Da(ep);function El(t){if(t===ep)throw Error(se(174));return t}function kT(t,e){switch(St(lf,e),St(af,t),St(_s,ep),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:r0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=r0(e,t)}xt(_s),St(_s,e)}function Ac(){xt(_s),xt(af),xt(lf)}function iA(t){El(lf.current);var e=El(_s.current),n=r0(e,t.type);e!==n&&(St(af,t),St(_s,n))}function xT(t){af.current===t&&(xt(_s),xt(af))}var Mt=Da(0);function Om(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var X_=[];function NT(){for(var t=0;t<X_.length;t++)X_[t]._workInProgressVersionPrimary=null;X_.length=0}var rm=uo.ReactCurrentDispatcher,J_=uo.ReactCurrentBatchConfig,$l=0,$t=null,on=null,yn=null,Lm=!1,Dd=!1,uf=0,uU=0;function Xn(){throw Error(se(321))}function AT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hi(t[n],e[n]))return!1;return!0}function DT(t,e,n,r,i,s){if($l=s,$t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rm.current=t===null||t.memoizedState===null?fU:pU,t=n(r,i),Dd){s=0;do{if(Dd=!1,uf=0,25<=s)throw Error(se(301));s+=1,yn=on=null,e.updateQueue=null,rm.current=gU,t=n(r,i)}while(Dd)}if(rm.current=Mm,e=on!==null&&on.next!==null,$l=0,yn=on=$t=null,Lm=!1,e)throw Error(se(300));return t}function PT(){var t=uf!==0;return uf=0,t}function ls(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?$t.memoizedState=yn=t:yn=yn.next=t,yn}function Ti(){if(on===null){var t=$t.alternate;t=t!==null?t.memoizedState:null}else t=on.next;var e=yn===null?$t.memoizedState:yn.next;if(e!==null)yn=e,on=t;else{if(t===null)throw Error(se(310));on=t,t={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},yn===null?$t.memoizedState=yn=t:yn=yn.next=t}return yn}function cf(t,e){return typeof e=="function"?e(t):e}function Z_(t){var e=Ti(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var r=on,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,h=s;do{var p=h.lane;if(($l&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var v={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(a=u=v,o=r):u=u.next=v,$t.lanes|=p,Ul|=p}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=a,Hi(r,e.memoizedState)||(Ar=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,$t.lanes|=s,Ul|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ew(t){var e=Ti(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Hi(s,e.memoizedState)||(Ar=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function sA(){}function oA(t,e){var n=$t,r=Ti(),i=e(),s=!Hi(r.memoizedState,i);if(s&&(r.memoizedState=i,Ar=!0),r=r.queue,RT(uA.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||yn!==null&&yn.memoizedState.tag&1){if(n.flags|=2048,hf(9,lA.bind(null,n,r,i,e),void 0,null),Tn===null)throw Error(se(349));($l&30)!==0||aA(n,e,i)}return i}function aA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$t.updateQueue,e===null?(e={lastEffect:null,stores:null},$t.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lA(t,e,n,r){e.value=n,e.getSnapshot=r,cA(e)&&hA(t)}function uA(t,e,n){return n(function(){cA(e)&&hA(t)})}function cA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hi(t,n)}catch{return!0}}function hA(t){var e=no(t,1);e!==null&&qi(e,t,1,-1)}function Tb(t){var e=ls();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cf,lastRenderedState:t},e.queue=t,t=t.dispatch=dU.bind(null,$t,t),[e.memoizedState,t]}function hf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$t.updateQueue,e===null?(e={lastEffect:null,stores:null},$t.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function dA(){return Ti().memoizedState}function im(t,e,n,r){var i=ls();$t.flags|=t,i.memoizedState=hf(1|e,n,void 0,r===void 0?null:r)}function Vy(t,e,n,r){var i=Ti();r=r===void 0?null:r;var s=void 0;if(on!==null){var o=on.memoizedState;if(s=o.destroy,r!==null&&AT(r,o.deps)){i.memoizedState=hf(e,n,s,r);return}}$t.flags|=t,i.memoizedState=hf(1|e,n,s,r)}function Ib(t,e){return im(8390656,8,t,e)}function RT(t,e){return Vy(2048,8,t,e)}function fA(t,e){return Vy(4,2,t,e)}function pA(t,e){return Vy(4,4,t,e)}function gA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function mA(t,e,n){return n=n!=null?n.concat([t]):null,Vy(4,4,gA.bind(null,e,t),n)}function OT(){}function yA(t,e){var n=Ti();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&AT(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vA(t,e){var n=Ti();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&AT(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function _A(t,e,n){return($l&21)===0?(t.baseState&&(t.baseState=!1,Ar=!0),t.memoizedState=n):(Hi(n,e)||(n=TN(),$t.lanes|=n,Ul|=n,t.baseState=!0),e)}function cU(t,e){var n=pt;pt=n!==0&&4>n?n:4,t(!0);var r=J_.transition;J_.transition={};try{t(!1),e()}finally{pt=n,J_.transition=r}}function wA(){return Ti().memoizedState}function hU(t,e,n){var r=oa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},EA(t))TA(e,n);else if(n=JN(t,e,n,r),n!==null){var i=mr();qi(n,t,r,i),IA(n,e,r)}}function dU(t,e,n){var r=oa(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(EA(t))TA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Hi(a,o)){var u=e.interleaved;u===null?(i.next=i,CT(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=JN(t,e,i,r),n!==null&&(i=mr(),qi(n,t,r,i),IA(n,e,r))}}function EA(t){var e=t.alternate;return t===$t||e!==null&&e===$t}function TA(t,e){Dd=Lm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function IA(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hT(t,n)}}var Mm={readContext:Ei,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useInsertionEffect:Xn,useLayoutEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useMutableSource:Xn,useSyncExternalStore:Xn,useId:Xn,unstable_isNewReconciler:!1},fU={readContext:Ei,useCallback:function(t,e){return ls().memoizedState=[t,e===void 0?null:e],t},useContext:Ei,useEffect:Ib,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,im(4194308,4,gA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return im(4194308,4,t,e)},useInsertionEffect:function(t,e){return im(4,2,t,e)},useMemo:function(t,e){var n=ls();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ls();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hU.bind(null,$t,t),[r.memoizedState,t]},useRef:function(t){var e=ls();return t={current:t},e.memoizedState=t},useState:Tb,useDebugValue:OT,useDeferredValue:function(t){return ls().memoizedState=t},useTransition:function(){var t=Tb(!1),e=t[0];return t=cU.bind(null,t[1]),ls().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$t,i=ls();if(At){if(n===void 0)throw Error(se(407));n=n()}else{if(n=e(),Tn===null)throw Error(se(349));($l&30)!==0||aA(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ib(uA.bind(null,r,s,t),[t]),r.flags|=2048,hf(9,lA.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ls(),e=Tn.identifierPrefix;if(At){var n=Ws,r=zs;n=(r&~(1<<32-ji(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=uf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uU++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pU={readContext:Ei,useCallback:yA,useContext:Ei,useEffect:RT,useImperativeHandle:mA,useInsertionEffect:fA,useLayoutEffect:pA,useMemo:vA,useReducer:Z_,useRef:dA,useState:function(){return Z_(cf)},useDebugValue:OT,useDeferredValue:function(t){var e=Ti();return _A(e,on.memoizedState,t)},useTransition:function(){var t=Z_(cf)[0],e=Ti().memoizedState;return[t,e]},useMutableSource:sA,useSyncExternalStore:oA,useId:wA,unstable_isNewReconciler:!1},gU={readContext:Ei,useCallback:yA,useContext:Ei,useEffect:RT,useImperativeHandle:mA,useInsertionEffect:fA,useLayoutEffect:pA,useMemo:vA,useReducer:ew,useRef:dA,useState:function(){return ew(cf)},useDebugValue:OT,useDeferredValue:function(t){var e=Ti();return on===null?e.memoizedState=t:_A(e,on.memoizedState,t)},useTransition:function(){var t=ew(cf)[0],e=Ti().memoizedState;return[t,e]},useMutableSource:sA,useSyncExternalStore:oA,useId:wA,unstable_isNewReconciler:!1};function Dc(t,e){try{var n="",r=e;do n+=qF(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function tw(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function b0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mU=typeof WeakMap=="function"?WeakMap:Map;function SA(t,e,n){n=Ys(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$m||($m=!0,M0=r),b0(t,e)},n}function CA(t,e,n){n=Ys(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){b0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){b0(t,e),typeof r!="function"&&(sa===null?sa=new Set([this]):sa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Sb(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new mU;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=AU.bind(null,t,e,n),e.then(t,t))}function Cb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bb(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ys(-1,1),e.tag=2,ia(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var yU=uo.ReactCurrentOwner,Ar=!1;function hr(t,e,n,r){e.child=t===null?rA(e,null,n,r):Nc(e,t.child,n,r)}function kb(t,e,n,r,i){n=n.render;var s=e.ref;return gc(e,i),r=DT(t,e,n,r,s,i),n=PT(),t!==null&&!Ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ro(t,e,i)):(At&&n&&_T(e),e.flags|=1,hr(t,e,r,i),e.child)}function xb(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!jT(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,bA(t,e,s,r,i)):(t=lm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&i)===0){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:nf,n(o,r)&&t.ref===e.ref)return ro(t,e,i)}return e.flags|=1,t=aa(s,r),t.ref=e.ref,t.return=e,e.child=t}function bA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(nf(s,r)&&t.ref===e.ref)if(Ar=!1,e.pendingProps=r=s,(t.lanes&i)!==0)(t.flags&131072)!==0&&(Ar=!0);else return e.lanes=t.lanes,ro(t,e,i)}return k0(t,e,n,r,i)}function kA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(lc,qr),qr|=n;else{if((n&1073741824)===0)return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,St(lc,qr),qr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,St(lc,qr),qr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,St(lc,qr),qr|=r;return hr(t,e,i,n),e.child}function xA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function k0(t,e,n,r,i){var s=Mr(n)?Ml:ir.current;return s=kc(e,s),gc(e,i),n=DT(t,e,n,r,s,i),r=PT(),t!==null&&!Ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ro(t,e,i)):(At&&r&&_T(e),e.flags|=1,hr(t,e,n,i),e.child)}function Nb(t,e,n,r,i){if(Mr(n)){var s=!0;xm(e)}else s=!1;if(gc(e,i),e.stateNode===null)sm(t,e),tA(e,n,r),C0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ei(h):(h=Mr(n)?Ml:ir.current,h=kc(e,h));var p=n.getDerivedStateFromProps,v=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";v||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==h)&&wb(e,o,r,h),jo=!1;var w=e.memoizedState;o.state=w,Rm(e,r,o,i),u=e.memoizedState,a!==r||w!==u||Lr.current||jo?(typeof p=="function"&&(S0(e,n,p,r),u=e.memoizedState),(a=jo||_b(e,n,a,r,w,u,h))?(v||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ZN(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:Fi(e.type,a),o.props=h,v=e.pendingProps,w=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ei(u):(u=Mr(n)?Ml:ir.current,u=kc(e,u));var b=n.getDerivedStateFromProps;(p=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==v||w!==u)&&wb(e,o,r,u),jo=!1,w=e.memoizedState,o.state=w,Rm(e,r,o,i);var k=e.memoizedState;a!==v||w!==k||Lr.current||jo?(typeof b=="function"&&(S0(e,n,b,r),k=e.memoizedState),(h=jo||_b(e,n,h,r,w,k,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),r=!1)}return x0(t,e,n,r,s,i)}function x0(t,e,n,r,i,s){xA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&pb(e,n,!1),ro(t,e,s);r=e.stateNode,yU.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Nc(e,t.child,null,s),e.child=Nc(e,null,a,s)):hr(t,e,a,s),e.memoizedState=r.state,i&&pb(e,n,!0),e.child}function NA(t){var e=t.stateNode;e.pendingContext?fb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fb(t,e.context,!1),kT(t,e.containerInfo)}function Ab(t,e,n,r,i){return xc(),ET(i),e.flags|=256,hr(t,e,n,r),e.child}var N0={dehydrated:null,treeContext:null,retryLane:0};function A0(t){return{baseLanes:t,cachePool:null,transitions:null}}function AA(t,e,n){var r=e.pendingProps,i=Mt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),St(Mt,i&1),t===null)return T0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=qy(o,r,0,null),t=Nl(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=A0(n),e.memoizedState=N0,t):LT(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return vU(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return(o&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=aa(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=aa(a,s):(s=Nl(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?A0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=N0,r}return s=t.child,t=s.sibling,r=aa(s,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function LT(t,e){return e=qy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kg(t,e,n,r){return r!==null&&ET(r),Nc(e,t.child,null,n),t=LT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vU(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=tw(Error(se(422))),kg(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=qy({mode:"visible",children:r.children},i,0,null),s=Nl(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,(e.mode&1)!==0&&Nc(e,t.child,null,o),e.child.memoizedState=A0(o),e.memoizedState=N0,s);if((e.mode&1)===0)return kg(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(se(419)),r=tw(s,r,void 0),kg(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ar||a){if(r=Tn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|o))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,no(t,i),qi(r,t,i,-1))}return BT(),r=tw(Error(se(421))),kg(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=DU.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Hr=ra(i.nextSibling),Kr=e,At=!0,Ui=null,t!==null&&(di[fi++]=zs,di[fi++]=Ws,di[fi++]=Fl,zs=t.id,Ws=t.overflow,Fl=e),e=LT(e,r.children),e.flags|=4096,e)}function Db(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),I0(t.return,e,n)}function nw(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function DA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(hr(t,e,r.children,n),r=Mt.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Db(t,n,e);else if(t.tag===19)Db(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(St(Mt,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Om(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),nw(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Om(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}nw(e,!0,n,null,s);break;case"together":nw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sm(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ro(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ul|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,n=aa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=aa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _U(t,e,n){switch(e.tag){case 3:NA(e),xc();break;case 5:iA(e);break;case 1:Mr(e.type)&&xm(e);break;case 4:kT(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;St(Dm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(St(Mt,Mt.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?AA(t,e,n):(St(Mt,Mt.current&1),t=ro(t,e,n),t!==null?t.sibling:null);St(Mt,Mt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return DA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),St(Mt,Mt.current),r)break;return null;case 22:case 23:return e.lanes=0,kA(t,e,n)}return ro(t,e,n)}var PA,D0,RA,OA;PA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};D0=function(){};RA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,El(_s.current);var s=null;switch(n){case"input":i=Zw(t,i),r=Zw(t,r),s=[];break;case"select":i=Ut({},i,{value:void 0}),r=Ut({},r,{value:void 0}),s=[];break;case"textarea":i=n0(t,i),r=n0(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bm)}i0(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var a=i[h];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Qd.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(a=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==a&&(u!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Qd.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&bt("scroll",t),s||a===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};OA=function(t,e,n,r){n!==r&&(e.flags|=4)};function Zh(t,e){if(!At)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Jn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function wU(t,e,n){var r=e.pendingProps;switch(wT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(e),null;case 1:return Mr(e.type)&&km(),Jn(e),null;case 3:return r=e.stateNode,Ac(),xt(Lr),xt(ir),NT(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Cg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Ui!==null&&(U0(Ui),Ui=null))),D0(t,e),Jn(e),null;case 5:xT(e);var i=El(lf.current);if(n=e.type,t!==null&&e.stateNode!=null)RA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(se(166));return Jn(e),null}if(t=El(_s.current),Cg(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[us]=e,r[of]=s,t=(e.mode&1)!==0,n){case"dialog":bt("cancel",r),bt("close",r);break;case"iframe":case"object":case"embed":bt("load",r);break;case"video":case"audio":for(i=0;i<_d.length;i++)bt(_d[i],r);break;case"source":bt("error",r);break;case"img":case"image":case"link":bt("error",r),bt("load",r);break;case"details":bt("toggle",r);break;case"input":VC(r,s),bt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},bt("invalid",r);break;case"textarea":jC(r,s),bt("invalid",r)}i0(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Sg(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Sg(r.textContent,a,t),i=["children",""+a]):Qd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&bt("scroll",r)}switch(n){case"input":mg(r),BC(r,s,!0);break;case"textarea":mg(r),qC(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=bm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=aN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[us]=e,t[of]=r,PA(t,e,!1,!1),e.stateNode=t;e:{switch(o=s0(n,r),n){case"dialog":bt("cancel",t),bt("close",t),i=r;break;case"iframe":case"object":case"embed":bt("load",t),i=r;break;case"video":case"audio":for(i=0;i<_d.length;i++)bt(_d[i],t);i=r;break;case"source":bt("error",t),i=r;break;case"img":case"image":case"link":bt("error",t),bt("load",t),i=r;break;case"details":bt("toggle",t),i=r;break;case"input":VC(t,r),i=Zw(t,r),bt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ut({},r,{value:void 0}),bt("invalid",t);break;case"textarea":jC(t,r),i=n0(t,r),bt("invalid",t);break;default:i=r}i0(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?cN(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&lN(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Yd(t,u):typeof u=="number"&&Yd(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qd.hasOwnProperty(s)?u!=null&&s==="onScroll"&&bt("scroll",t):u!=null&&sT(t,s,u,o))}switch(n){case"input":mg(t),BC(t,r,!1);break;case"textarea":mg(t),qC(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fa(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?hc(t,!!r.multiple,s,!1):r.defaultValue!=null&&hc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=bm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Jn(e),null;case 6:if(t&&e.stateNode!=null)OA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(se(166));if(n=El(lf.current),El(_s.current),Cg(e)){if(r=e.stateNode,n=e.memoizedProps,r[us]=e,(s=r.nodeValue!==n)&&(t=Kr,t!==null))switch(t.tag){case 3:Sg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Sg(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[us]=e,e.stateNode=r}return Jn(e),null;case 13:if(xt(Mt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(At&&Hr!==null&&(e.mode&1)!==0&&(e.flags&128)===0)XN(),xc(),e.flags|=98560,s=!1;else if(s=Cg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(se(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(se(317));s[us]=e}else xc(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Jn(e),s=!1}else Ui!==null&&(U0(Ui),Ui=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(Mt.current&1)!==0?un===0&&(un=3):BT())),e.updateQueue!==null&&(e.flags|=4),Jn(e),null);case 4:return Ac(),D0(t,e),t===null&&rf(e.stateNode.containerInfo),Jn(e),null;case 10:return ST(e.type._context),Jn(e),null;case 17:return Mr(e.type)&&km(),Jn(e),null;case 19:if(xt(Mt),s=e.memoizedState,s===null)return Jn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Zh(s,!1);else{if(un!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=Om(t),o!==null){for(e.flags|=128,Zh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return St(Mt,Mt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Yt()>Pc&&(e.flags|=128,r=!0,Zh(s,!1),e.lanes=4194304)}else{if(!r)if(t=Om(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!At)return Jn(e),null}else 2*Yt()-s.renderingStartTime>Pc&&n!==1073741824&&(e.flags|=128,r=!0,Zh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Yt(),e.sibling=null,n=Mt.current,St(Mt,r?n&1|2:n&1),e):(Jn(e),null);case 22:case 23:return VT(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(qr&1073741824)!==0&&(Jn(e),e.subtreeFlags&6&&(e.flags|=8192)):Jn(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function EU(t,e){switch(wT(e),e.tag){case 1:return Mr(e.type)&&km(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ac(),xt(Lr),xt(ir),NT(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return xT(e),null;case 13:if(xt(Mt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));xc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xt(Mt),null;case 4:return Ac(),null;case 10:return ST(e.type._context),null;case 22:case 23:return VT(),null;case 24:return null;default:return null}}var xg=!1,er=!1,TU=typeof WeakSet=="function"?WeakSet:Set,ye=null;function ac(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qt(t,e,r)}else n.current=null}function P0(t,e,n){try{n()}catch(r){qt(t,e,r)}}var Pb=!1;function IU(t,e){if(g0=Im,t=$N(),vT(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,h=0,p=0,v=t,w=null;t:for(;;){for(var b;v!==n||i!==0&&v.nodeType!==3||(a=o+i),v!==s||r!==0&&v.nodeType!==3||(u=o+r),v.nodeType===3&&(o+=v.nodeValue.length),(b=v.firstChild)!==null;)w=v,v=b;for(;;){if(v===t)break t;if(w===n&&++h===i&&(a=o),w===s&&++p===r&&(u=o),(b=v.nextSibling)!==null)break;v=w,w=v.parentNode}v=b}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(m0={focusedElem:t,selectionRange:n},Im=!1,ye=e;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var k=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var O=k.memoizedProps,J=k.memoizedState,N=e.stateNode,D=N.getSnapshotBeforeUpdate(e.elementType===e.type?O:Fi(e.type,O),J);N.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var M=e.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(Q){qt(e,e.return,Q)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return k=Pb,Pb=!1,k}function Pd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&P0(e,n,s)}i=i.next}while(i!==r)}}function By(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function R0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function LA(t){var e=t.alternate;e!==null&&(t.alternate=null,LA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[us],delete e[of],delete e[_0],delete e[sU],delete e[oU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function MA(t){return t.tag===5||t.tag===3||t.tag===4}function Rb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||MA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function O0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bm));else if(r!==4&&(t=t.child,t!==null))for(O0(t,e,n),t=t.sibling;t!==null;)O0(t,e,n),t=t.sibling}function L0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(L0(t,e,n),t=t.sibling;t!==null;)L0(t,e,n),t=t.sibling}var Mn=null,$i=!1;function Mo(t,e,n){for(n=n.child;n!==null;)FA(t,e,n),n=n.sibling}function FA(t,e,n){if(vs&&typeof vs.onCommitFiberUnmount=="function")try{vs.onCommitFiberUnmount(Ry,n)}catch{}switch(n.tag){case 5:er||ac(n,e);case 6:var r=Mn,i=$i;Mn=null,Mo(t,e,n),Mn=r,$i=i,Mn!==null&&($i?(t=Mn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mn.removeChild(n.stateNode));break;case 18:Mn!==null&&($i?(t=Mn,n=n.stateNode,t.nodeType===8?Q_(t.parentNode,n):t.nodeType===1&&Q_(t,n),ef(t)):Q_(Mn,n.stateNode));break;case 4:r=Mn,i=$i,Mn=n.stateNode.containerInfo,$i=!0,Mo(t,e,n),Mn=r,$i=i;break;case 0:case 11:case 14:case 15:if(!er&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&P0(n,e,o),i=i.next}while(i!==r)}Mo(t,e,n);break;case 1:if(!er&&(ac(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){qt(n,e,a)}Mo(t,e,n);break;case 21:Mo(t,e,n);break;case 22:n.mode&1?(er=(r=er)||n.memoizedState!==null,Mo(t,e,n),er=r):Mo(t,e,n);break;default:Mo(t,e,n)}}function Ob(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TU),e.forEach(function(r){var i=PU.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Li(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Mn=a.stateNode,$i=!1;break e;case 3:Mn=a.stateNode.containerInfo,$i=!0;break e;case 4:Mn=a.stateNode.containerInfo,$i=!0;break e}a=a.return}if(Mn===null)throw Error(se(160));FA(s,o,i),Mn=null,$i=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){qt(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$A(e,t),e=e.sibling}function $A(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Li(e,t),as(t),r&4){try{Pd(3,t,t.return),By(3,t)}catch(O){qt(t,t.return,O)}try{Pd(5,t,t.return)}catch(O){qt(t,t.return,O)}}break;case 1:Li(e,t),as(t),r&512&&n!==null&&ac(n,n.return);break;case 5:if(Li(e,t),as(t),r&512&&n!==null&&ac(n,n.return),t.flags&32){var i=t.stateNode;try{Yd(i,"")}catch(O){qt(t,t.return,O)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&sN(i,s),s0(a,o);var h=s0(a,s);for(o=0;o<u.length;o+=2){var p=u[o],v=u[o+1];p==="style"?cN(i,v):p==="dangerouslySetInnerHTML"?lN(i,v):p==="children"?Yd(i,v):sT(i,p,v,h)}switch(a){case"input":e0(i,s);break;case"textarea":oN(i,s);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var b=s.value;b!=null?hc(i,!!s.multiple,b,!1):w!==!!s.multiple&&(s.defaultValue!=null?hc(i,!!s.multiple,s.defaultValue,!0):hc(i,!!s.multiple,s.multiple?[]:"",!1))}i[of]=s}catch(O){qt(t,t.return,O)}}break;case 6:if(Li(e,t),as(t),r&4){if(t.stateNode===null)throw Error(se(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(O){qt(t,t.return,O)}}break;case 3:if(Li(e,t),as(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ef(e.containerInfo)}catch(O){qt(t,t.return,O)}break;case 4:Li(e,t),as(t);break;case 13:Li(e,t),as(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||($T=Yt())),r&4&&Ob(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(er=(h=er)||p,Li(e,t),er=h):Li(e,t),as(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&(t.mode&1)!==0)for(ye=t,p=t.child;p!==null;){for(v=ye=p;ye!==null;){switch(w=ye,b=w.child,w.tag){case 0:case 11:case 14:case 15:Pd(4,w,w.return);break;case 1:ac(w,w.return);var k=w.stateNode;if(typeof k.componentWillUnmount=="function"){r=w,n=w.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(O){qt(r,n,O)}}break;case 5:ac(w,w.return);break;case 22:if(w.memoizedState!==null){Mb(v);continue}}b!==null?(b.return=w,ye=b):Mb(v)}p=p.sibling}e:for(p=null,v=t;;){if(v.tag===5){if(p===null){p=v;try{i=v.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=v.stateNode,u=v.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=uN("display",o))}catch(O){qt(t,t.return,O)}}}else if(v.tag===6){if(p===null)try{v.stateNode.nodeValue=h?"":v.memoizedProps}catch(O){qt(t,t.return,O)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;p===v&&(p=null),v=v.return}p===v&&(p=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Li(e,t),as(t),r&4&&Ob(t);break;case 21:break;default:Li(e,t),as(t)}}function as(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(MA(n)){var r=n;break e}n=n.return}throw Error(se(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Yd(i,""),r.flags&=-33);var s=Rb(t);L0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Rb(t);O0(t,a,o);break;default:throw Error(se(161))}}catch(u){qt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SU(t,e,n){ye=t,UA(t)}function UA(t,e,n){for(var r=(t.mode&1)!==0;ye!==null;){var i=ye,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||xg;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||er;a=xg;var h=er;if(xg=o,(er=u)&&!h)for(ye=i;ye!==null;)o=ye,u=o.child,o.tag===22&&o.memoizedState!==null?Fb(i):u!==null?(u.return=o,ye=u):Fb(i);for(;s!==null;)ye=s,UA(s),s=s.sibling;ye=i,xg=a,er=h}Lb(t)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,ye=s):Lb(t)}}function Lb(t){for(;ye!==null;){var e=ye;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:er||By(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!er)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Fi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&vb(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vb(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var v=p.dehydrated;v!==null&&ef(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}er||e.flags&512&&R0(e)}catch(w){qt(e,e.return,w)}}if(e===t){ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,ye=n;break}ye=e.return}}function Mb(t){for(;ye!==null;){var e=ye;if(e===t){ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ye=n;break}ye=e.return}}function Fb(t){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{By(4,e)}catch(u){qt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){qt(e,i,u)}}var s=e.return;try{R0(e)}catch(u){qt(e,s,u)}break;case 5:var o=e.return;try{R0(e)}catch(u){qt(e,o,u)}}}catch(u){qt(e,e.return,u)}if(e===t){ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ye=a;break}ye=e.return}}var CU=Math.ceil,Fm=uo.ReactCurrentDispatcher,MT=uo.ReactCurrentOwner,_i=uo.ReactCurrentBatchConfig,tt=0,Tn=null,nn=null,Un=0,qr=0,lc=Da(0),un=0,df=null,Ul=0,jy=0,FT=0,Rd=null,xr=null,$T=0,Pc=1/0,js=null,$m=!1,M0=null,sa=null,Ng=!1,Ko=null,Um=0,Od=0,F0=null,om=-1,am=0;function mr(){return(tt&6)!==0?Yt():om!==-1?om:om=Yt()}function oa(t){return(t.mode&1)===0?1:(tt&2)!==0&&Un!==0?Un&-Un:lU.transition!==null?(am===0&&(am=TN()),am):(t=pt,t!==0||(t=window.event,t=t===void 0?16:NN(t.type)),t)}function qi(t,e,n,r){if(50<Od)throw Od=0,F0=null,Error(se(185));Xf(t,n,r),((tt&2)===0||t!==Tn)&&(t===Tn&&((tt&2)===0&&(jy|=n),un===4&&zo(t,Un)),Fr(t,r),n===1&&tt===0&&(e.mode&1)===0&&(Pc=Yt()+500,$y&&Pa()))}function Fr(t,e){var n=t.callbackNode;l$(t,e);var r=Tm(t,t===Tn?Un:0);if(r===0)n!==null&&HC(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&HC(n),e===1)t.tag===0?aU($b.bind(null,t)):KN($b.bind(null,t)),rU(function(){(tt&6)===0&&Pa()}),n=null;else{switch(IN(r)){case 1:n=cT;break;case 4:n=wN;break;case 16:n=Em;break;case 536870912:n=EN;break;default:n=Em}n=GA(n,VA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function VA(t,e){if(om=-1,am=0,(tt&6)!==0)throw Error(se(327));var n=t.callbackNode;if(mc()&&t.callbackNode!==n)return null;var r=Tm(t,t===Tn?Un:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=Vm(t,r);else{e=r;var i=tt;tt|=2;var s=jA();(Tn!==t||Un!==e)&&(js=null,Pc=Yt()+500,xl(t,e));do try{xU();break}catch(a){BA(t,a)}while(1);IT(),Fm.current=s,tt=i,nn!==null?e=0:(Tn=null,Un=0,e=un)}if(e!==0){if(e===2&&(i=c0(t),i!==0&&(r=i,e=$0(t,i))),e===1)throw n=df,xl(t,0),zo(t,r),Fr(t,Yt()),n;if(e===6)zo(t,r);else{if(i=t.current.alternate,(r&30)===0&&!bU(i)&&(e=Vm(t,r),e===2&&(s=c0(t),s!==0&&(r=s,e=$0(t,s))),e===1))throw n=df,xl(t,0),zo(t,r),Fr(t,Yt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(se(345));case 2:cl(t,xr,js);break;case 3:if(zo(t,r),(r&130023424)===r&&(e=$T+500-Yt(),10<e)){if(Tm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){mr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=v0(cl.bind(null,t,xr,js),e);break}cl(t,xr,js);break;case 4:if(zo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ji(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CU(r/1960))-r,10<r){t.timeoutHandle=v0(cl.bind(null,t,xr,js),r);break}cl(t,xr,js);break;case 5:cl(t,xr,js);break;default:throw Error(se(329))}}}return Fr(t,Yt()),t.callbackNode===n?VA.bind(null,t):null}function $0(t,e){var n=Rd;return t.current.memoizedState.isDehydrated&&(xl(t,e).flags|=256),t=Vm(t,e),t!==2&&(e=xr,xr=n,e!==null&&U0(e)),t}function U0(t){xr===null?xr=t:xr.push.apply(xr,t)}function bU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hi(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zo(t,e){for(e&=~FT,e&=~jy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ji(e),r=1<<n;t[n]=-1,e&=~r}}function $b(t){if((tt&6)!==0)throw Error(se(327));mc();var e=Tm(t,0);if((e&1)===0)return Fr(t,Yt()),null;var n=Vm(t,e);if(t.tag!==0&&n===2){var r=c0(t);r!==0&&(e=r,n=$0(t,r))}if(n===1)throw n=df,xl(t,0),zo(t,e),Fr(t,Yt()),n;if(n===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cl(t,xr,js),Fr(t,Yt()),null}function UT(t,e){var n=tt;tt|=1;try{return t(e)}finally{tt=n,tt===0&&(Pc=Yt()+500,$y&&Pa())}}function Vl(t){Ko!==null&&Ko.tag===0&&(tt&6)===0&&mc();var e=tt;tt|=1;var n=_i.transition,r=pt;try{if(_i.transition=null,pt=1,t)return t()}finally{pt=r,_i.transition=n,tt=e,(tt&6)===0&&Pa()}}function VT(){qr=lc.current,xt(lc)}function xl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nU(n)),nn!==null)for(n=nn.return;n!==null;){var r=n;switch(wT(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&km();break;case 3:Ac(),xt(Lr),xt(ir),NT();break;case 5:xT(r);break;case 4:Ac();break;case 13:xt(Mt);break;case 19:xt(Mt);break;case 10:ST(r.type._context);break;case 22:case 23:VT()}n=n.return}if(Tn=t,nn=t=aa(t.current,null),Un=qr=e,un=0,df=null,FT=jy=Ul=0,xr=Rd=null,wl!==null){for(e=0;e<wl.length;e++)if(n=wl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}wl=null}return t}function BA(t,e){do{var n=nn;try{if(IT(),rm.current=Mm,Lm){for(var r=$t.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Lm=!1}if($l=0,yn=on=$t=null,Dd=!1,uf=0,MT.current=null,n===null||n.return===null){un=1,df=e,nn=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=Un,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=a,v=p.tag;if((p.mode&1)===0&&(v===0||v===11||v===15)){var w=p.alternate;w?(p.updateQueue=w.updateQueue,p.memoizedState=w.memoizedState,p.lanes=w.lanes):(p.updateQueue=null,p.memoizedState=null)}var b=Cb(o);if(b!==null){b.flags&=-257,bb(b,o,a,s,e),b.mode&1&&Sb(s,h,e),e=b,u=h;var k=e.updateQueue;if(k===null){var O=new Set;O.add(u),e.updateQueue=O}else k.add(u);break e}else{if((e&1)===0){Sb(s,h,e),BT();break e}u=Error(se(426))}}else if(At&&a.mode&1){var J=Cb(o);if(J!==null){(J.flags&65536)===0&&(J.flags|=256),bb(J,o,a,s,e),ET(Dc(u,a));break e}}s=u=Dc(u,a),un!==4&&(un=2),Rd===null?Rd=[s]:Rd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var N=SA(s,u,e);yb(s,N);break e;case 1:a=u;var D=s.type,M=s.stateNode;if((s.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(sa===null||!sa.has(M)))){s.flags|=65536,e&=-e,s.lanes|=e;var Q=CA(s,a,e);yb(s,Q);break e}}s=s.return}while(s!==null)}zA(n)}catch(re){e=re,nn===n&&n!==null&&(nn=n=n.return);continue}break}while(1)}function jA(){var t=Fm.current;return Fm.current=Mm,t===null?Mm:t}function BT(){(un===0||un===3||un===2)&&(un=4),Tn===null||(Ul&268435455)===0&&(jy&268435455)===0||zo(Tn,Un)}function Vm(t,e){var n=tt;tt|=2;var r=jA();(Tn!==t||Un!==e)&&(js=null,xl(t,e));do try{kU();break}catch(i){BA(t,i)}while(1);if(IT(),tt=n,Fm.current=r,nn!==null)throw Error(se(261));return Tn=null,Un=0,un}function kU(){for(;nn!==null;)qA(nn)}function xU(){for(;nn!==null&&!ZF();)qA(nn)}function qA(t){var e=HA(t.alternate,t,qr);t.memoizedProps=t.pendingProps,e===null?zA(t):nn=e,MT.current=null}function zA(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=wU(n,e,qr),n!==null){nn=n;return}}else{if(n=EU(n,e),n!==null){n.flags&=32767,nn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{un=6,nn=null;return}}if(e=e.sibling,e!==null){nn=e;return}nn=e=t}while(e!==null);un===0&&(un=5)}function cl(t,e,n){var r=pt,i=_i.transition;try{_i.transition=null,pt=1,NU(t,e,n,r)}finally{_i.transition=i,pt=r}return null}function NU(t,e,n,r){do mc();while(Ko!==null);if((tt&6)!==0)throw Error(se(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(u$(t,s),t===Tn&&(nn=Tn=null,Un=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Ng||(Ng=!0,GA(Em,function(){return mc(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=_i.transition,_i.transition=null;var o=pt;pt=1;var a=tt;tt|=4,MT.current=null,IU(t,n),$A(n,t),Q$(m0),Im=!!g0,m0=g0=null,t.current=n,SU(n),e$(),tt=a,pt=o,_i.transition=s}else t.current=n;if(Ng&&(Ng=!1,Ko=t,Um=i),s=t.pendingLanes,s===0&&(sa=null),r$(n.stateNode),Fr(t,Yt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($m)throw $m=!1,t=M0,M0=null,t;return(Um&1)!==0&&t.tag!==0&&mc(),s=t.pendingLanes,(s&1)!==0?t===F0?Od++:(Od=0,F0=t):Od=0,Pa(),null}function mc(){if(Ko!==null){var t=IN(Um),e=_i.transition,n=pt;try{if(_i.transition=null,pt=16>t?16:t,Ko===null)var r=!1;else{if(t=Ko,Ko=null,Um=0,(tt&6)!==0)throw Error(se(331));var i=tt;for(tt|=4,ye=t.current;ye!==null;){var s=ye,o=s.child;if((ye.flags&16)!==0){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var h=a[u];for(ye=h;ye!==null;){var p=ye;switch(p.tag){case 0:case 11:case 15:Pd(8,p,s)}var v=p.child;if(v!==null)v.return=p,ye=v;else for(;ye!==null;){p=ye;var w=p.sibling,b=p.return;if(LA(p),p===h){ye=null;break}if(w!==null){w.return=b,ye=w;break}ye=b}}}var k=s.alternate;if(k!==null){var O=k.child;if(O!==null){k.child=null;do{var J=O.sibling;O.sibling=null,O=J}while(O!==null)}}ye=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,ye=o;else e:for(;ye!==null;){if(s=ye,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Pd(9,s,s.return)}var N=s.sibling;if(N!==null){N.return=s.return,ye=N;break e}ye=s.return}}var D=t.current;for(ye=D;ye!==null;){o=ye;var M=o.child;if((o.subtreeFlags&2064)!==0&&M!==null)M.return=o,ye=M;else e:for(o=D;ye!==null;){if(a=ye,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:By(9,a)}}catch(re){qt(a,a.return,re)}if(a===o){ye=null;break e}var Q=a.sibling;if(Q!==null){Q.return=a.return,ye=Q;break e}ye=a.return}}if(tt=i,Pa(),vs&&typeof vs.onPostCommitFiberRoot=="function")try{vs.onPostCommitFiberRoot(Ry,t)}catch{}r=!0}return r}finally{pt=n,_i.transition=e}}return!1}function Ub(t,e,n){e=Dc(n,e),e=SA(t,e,1),t=ia(t,e,1),e=mr(),t!==null&&(Xf(t,1,e),Fr(t,e))}function qt(t,e,n){if(t.tag===3)Ub(t,t,n);else for(;e!==null;){if(e.tag===3){Ub(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sa===null||!sa.has(r))){t=Dc(n,t),t=CA(e,t,1),e=ia(e,t,1),t=mr(),e!==null&&(Xf(e,1,t),Fr(e,t));break}}e=e.return}}function AU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mr(),t.pingedLanes|=t.suspendedLanes&n,Tn===t&&(Un&n)===n&&(un===4||un===3&&(Un&130023424)===Un&&500>Yt()-$T?xl(t,0):FT|=n),Fr(t,e)}function WA(t,e){e===0&&((t.mode&1)===0?e=1:(e=_g,_g<<=1,(_g&130023424)===0&&(_g=4194304)));var n=mr();t=no(t,e),t!==null&&(Xf(t,e,n),Fr(t,n))}function DU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),WA(t,n)}function PU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(se(314))}r!==null&&r.delete(e),WA(t,n)}var HA;HA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Lr.current)Ar=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return Ar=!1,_U(t,e,n);Ar=(t.flags&131072)!==0}else Ar=!1,At&&(e.flags&1048576)!==0&&QN(e,Am,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sm(t,e),t=e.pendingProps;var i=kc(e,ir.current);gc(e,n),i=DT(null,e,r,t,i,n);var s=PT();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mr(r)?(s=!0,xm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bT(e),i.updater=Uy,e.stateNode=i,i._reactInternals=e,C0(e,r,t,n),e=x0(null,e,r,!0,s,n)):(e.tag=0,At&&s&&_T(e),hr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sm(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=OU(r),t=Fi(r,t),i){case 0:e=k0(null,e,r,t,n);break e;case 1:e=Nb(null,e,r,t,n);break e;case 11:e=kb(null,e,r,t,n);break e;case 14:e=xb(null,e,r,Fi(r.type,t),n);break e}throw Error(se(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fi(r,i),k0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fi(r,i),Nb(t,e,r,i,n);case 3:e:{if(NA(e),t===null)throw Error(se(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ZN(t,e),Rm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Dc(Error(se(423)),e),e=Ab(t,e,r,n,i);break e}else if(r!==i){i=Dc(Error(se(424)),e),e=Ab(t,e,r,n,i);break e}else for(Hr=ra(e.stateNode.containerInfo.firstChild),Kr=e,At=!0,Ui=null,n=rA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xc(),r===i){e=ro(t,e,n);break e}hr(t,e,r,n)}e=e.child}return e;case 5:return iA(e),t===null&&T0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,y0(r,i)?o=null:s!==null&&y0(r,s)&&(e.flags|=32),xA(t,e),hr(t,e,o,n),e.child;case 6:return t===null&&T0(e),null;case 13:return AA(t,e,n);case 4:return kT(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Nc(e,null,r,n):hr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fi(r,i),kb(t,e,r,i,n);case 7:return hr(t,e,e.pendingProps,n),e.child;case 8:return hr(t,e,e.pendingProps.children,n),e.child;case 12:return hr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,St(Dm,r._currentValue),r._currentValue=o,s!==null)if(Hi(s.value,o)){if(s.children===i.children&&!Lr.current){e=ro(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Ys(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),I0(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(se(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),I0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}hr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,gc(e,n),i=Ei(i),r=r(i),e.flags|=1,hr(t,e,r,n),e.child;case 14:return r=e.type,i=Fi(r,e.pendingProps),i=Fi(r.type,i),xb(t,e,r,i,n);case 15:return bA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fi(r,i),sm(t,e),e.tag=1,Mr(r)?(t=!0,xm(e)):t=!1,gc(e,n),tA(e,r,i),C0(e,r,i,n),x0(null,e,r,!0,t,n);case 19:return DA(t,e,n);case 22:return kA(t,e,n)}throw Error(se(156,e.tag))};function GA(t,e){return _N(t,e)}function RU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(t,e,n,r){return new RU(t,e,n,r)}function jT(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OU(t){if(typeof t=="function")return jT(t)?1:0;if(t!=null){if(t=t.$$typeof,t===aT)return 11;if(t===lT)return 14}return 2}function aa(t,e){var n=t.alternate;return n===null?(n=gi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lm(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")jT(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ju:return Nl(n.children,i,s,e);case oT:o=8,i|=8;break;case Qw:return t=gi(12,n,e,i|2),t.elementType=Qw,t.lanes=s,t;case Yw:return t=gi(13,n,e,i),t.elementType=Yw,t.lanes=s,t;case Xw:return t=gi(19,n,e,i),t.elementType=Xw,t.lanes=s,t;case nN:return qy(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case eN:o=10;break e;case tN:o=9;break e;case aT:o=11;break e;case lT:o=14;break e;case Bo:o=16,r=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=gi(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Nl(t,e,n,r){return t=gi(7,t,r,e),t.lanes=n,t}function qy(t,e,n,r){return t=gi(22,t,r,e),t.elementType=nN,t.lanes=n,t.stateNode={isHidden:!1},t}function rw(t,e,n){return t=gi(6,t,null,e),t.lanes=n,t}function iw(t,e,n){return e=gi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LU(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$_(0),this.expirationTimes=$_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qT(t,e,n,r,i,s,o,a,u){return t=new LU(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=gi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bT(s),t}function MU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function KA(t){if(!t)return pa;t=t._reactInternals;e:{if(ou(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var n=t.type;if(Mr(n))return GN(t,n,e)}return e}function QA(t,e,n,r,i,s,o,a,u){return t=qT(n,r,!0,t,i,s,o,a,u),t.context=KA(null),n=t.current,r=mr(),i=oa(n),s=Ys(r,i),s.callback=e!=null?e:null,ia(n,s,i),t.current.lanes=i,Xf(t,i,r),Fr(t,r),t}function zy(t,e,n,r){var i=e.current,s=mr(),o=oa(i);return n=KA(n),e.context===null?e.context=n:e.pendingContext=n,e=Ys(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ia(i,e,o),t!==null&&(qi(t,i,o,s),nm(t,i,o)),o}function Bm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zT(t,e){Vb(t,e),(t=t.alternate)&&Vb(t,e)}function FU(){return null}var YA=typeof reportError=="function"?reportError:function(t){console.error(t)};function WT(t){this._internalRoot=t}Wy.prototype.render=WT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));zy(t,e,null,null)};Wy.prototype.unmount=WT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vl(function(){zy(null,t,null,null)}),e[to]=null}};function Wy(t){this._internalRoot=t}Wy.prototype.unstable_scheduleHydration=function(t){if(t){var e=bN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qo.length&&e!==0&&e<qo[n].priority;n++);qo.splice(n,0,t),n===0&&xN(t)}};function HT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bb(){}function $U(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Bm(o);s.call(h)}}var o=QA(e,r,t,0,null,!1,!1,"",Bb);return t._reactRootContainer=o,t[to]=o.current,rf(t.nodeType===8?t.parentNode:t),Vl(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var h=Bm(u);a.call(h)}}var u=qT(t,0,!1,null,null,!1,!1,"",Bb);return t._reactRootContainer=u,t[to]=u.current,rf(t.nodeType===8?t.parentNode:t),Vl(function(){zy(e,u,n,r)}),u}function Gy(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Bm(o);a.call(u)}}zy(e,o,t,i)}else o=$U(n,e,t,i,r);return Bm(o)}SN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vd(e.pendingLanes);n!==0&&(hT(e,n|1),Fr(e,Yt()),(tt&6)===0&&(Pc=Yt()+500,Pa()))}break;case 13:Vl(function(){var r=no(t,1);if(r!==null){var i=mr();qi(r,t,1,i)}}),zT(t,1)}};dT=function(t){if(t.tag===13){var e=no(t,134217728);if(e!==null){var n=mr();qi(e,t,134217728,n)}zT(t,134217728)}};CN=function(t){if(t.tag===13){var e=oa(t),n=no(t,e);if(n!==null){var r=mr();qi(n,t,e,r)}zT(t,e)}};bN=function(){return pt};kN=function(t,e){var n=pt;try{return pt=t,e()}finally{pt=n}};a0=function(t,e,n){switch(e){case"input":if(e0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Fy(r);if(!i)throw Error(se(90));iN(r),e0(r,i)}}}break;case"textarea":oN(t,n);break;case"select":e=n.value,e!=null&&hc(t,!!n.multiple,e,!1)}};fN=UT;pN=Vl;var UU={usingClientEntryPoint:!1,Events:[Zf,nc,Fy,hN,dN,UT]},ed={findFiberByHostInstance:_l,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},VU={bundleType:ed.bundleType,version:ed.version,rendererPackageName:ed.rendererPackageName,rendererConfig:ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:uo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yN(t),t===null?null:t.stateNode},findFiberByHostInstance:ed.findFiberByHostInstance||FU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ag=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ag.isDisabled&&Ag.supportsFiber)try{Ry=Ag.inject(VU),vs=Ag}catch{}}ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UU;ni.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!HT(e))throw Error(se(200));return MU(t,e,null,n)};ni.createRoot=function(t,e){if(!HT(t))throw Error(se(299));var n=!1,r="",i=YA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=qT(t,1,!1,null,null,n,!1,r,i),t[to]=e.current,rf(t.nodeType===8?t.parentNode:t),new WT(e)};ni.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=yN(e),t=t===null?null:t.stateNode,t};ni.flushSync=function(t){return Vl(t)};ni.hydrate=function(t,e,n){if(!Hy(e))throw Error(se(200));return Gy(null,t,e,!0,n)};ni.hydrateRoot=function(t,e,n){if(!HT(t))throw Error(se(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=YA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=QA(e,null,t,1,n!=null?n:null,i,!1,s,o),t[to]=e.current,rf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Wy(e)};ni.render=function(t,e,n){if(!Hy(e))throw Error(se(200));return Gy(null,t,e,!1,n)};ni.unmountComponentAtNode=function(t){if(!Hy(t))throw Error(se(40));return t._reactRootContainer?(Vl(function(){Gy(null,null,t,!1,function(){t._reactRootContainer=null,t[to]=null})}),!0):!1};ni.unstable_batchedUpdates=UT;ni.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hy(n))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return Gy(t,e,n,!1,r)};ni.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=ni})(Qx);var jb=Qx.exports;Gw.createRoot=jb.createRoot,Gw.hydrateRoot=jb.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae=function(t,e){if(!t)throw rh(e)},rh=function(t){return new Error("Firebase Database ("+XA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},BU=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},GT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,p=s>>2,v=(s&3)<<4|a>>4;let w=(a&15)<<2|h>>6,b=h&63;u||(b=64,o||(w=64)),r.push(n[p],n[v],n[w],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(JA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):BU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||h==null||v==null)throw new jU;const w=s<<2|a>>4;if(r.push(w),h!==64){const b=a<<4&240|h>>2;if(r.push(b),v!==64){const k=h<<6&192|v;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZA=function(t){const e=JA(t);return GT.encodeByteArray(e,!0)},jm=function(t){return ZA(t).replace(/\./g,"")},qm=function(t){try{return GT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(t){return ff(void 0,t)}function ff(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!zU(n)||(t[n]=ff(t[n],e[n]));return t}function zU(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=()=>WU().__FIREBASE_DEFAULTS__,GU=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},KU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&qm(t[1]);return e&&JSON.parse(e)},KT=()=>{try{return HU()||GU()||KU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QU=()=>{var t;return(t=KT())===null||t===void 0?void 0:t.config},YU=t=>{var e;return(e=KT())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[jm(JSON.stringify(n)),jm(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function YT(){var t;const e=(t=KT())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XU(){return typeof self=="object"&&self.self===self}function tD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ky(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nD(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function rD(){return XA.NODE_ADMIN===!0}function JU(){return!YT()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pf(){try{return typeof indexedDB=="object"}catch{return!1}}function ZU(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="FirebaseError";class yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=e2,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?t2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new yr(i,a,r)}}function t2(t,e){return t.replace(n2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const n2=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(t){return JSON.parse(t)}function ln(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=gf(qm(s[0])||""),n=gf(qm(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},r2=function(t){const e=iD(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},i2=function(t){const e=iD(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Bl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function zm(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wm(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function V0(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(qb(s)&&qb(o)){if(!V0(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function qb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function wd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)r[v]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let v=0;v<16;v++)r[v]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let v=16;v<80;v++){const w=r[v-3]^r[v-8]^r[v-14]^r[v-16];r[v]=(w<<1|w>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4],h,p;for(let v=0;v<80;v++){v<40?v<20?(h=a^s&(o^a),p=1518500249):(h=s^o^a,p=1859775393):v<60?(h=s&o|a&(s|o),p=2400959708):(h=s^o^a,p=3395469782);const w=(i<<5|i>>>27)+h+u+p+r[v]&4294967295;u=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=w}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function sD(t,e){const n=new o2(t,e);return n.subscribe.bind(n)}class o2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");a2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=sw),i.error===void 0&&(i.error=sw),i.complete===void 0&&(i.complete=sw);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function a2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sw(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const De=function(t,e,n,r){let i;if(r<e?i="at least "+e:r>n&&(i=n===0?"none":"no more than "+n),i){const s=t+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function $r(t,e){return`${t} failed: ${e} argument `}function vn(t,e,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error($r(t,e)+"must be a valid function.")}function zb(t,e,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error($r(t,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ae(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Qy=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t){return t&&t._delegate?t._delegate:t}class Xr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Nr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(c2(e))try{this.getOrInitializeService({instanceIdentifier:hl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=hl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hl){return this.instances.has(e)}getOptions(e=hl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:u2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=hl){return this.component?this.component.multipleInstances?e:hl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function u2(t){return t===hl?void 0:t}function c2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=[];var Ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ze||(Ze={}));const lD={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},h2=Ze.INFO,d2={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},f2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=d2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ih{constructor(e){this.name=e,this._logLevel=h2,this._logHandler=f2,this._userLogHandler=null,XT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}function p2(t){XT.forEach(e=>{e.setLogLevel(t)})}function g2(t,e){for(const n of XT){let r=null;e&&e.level&&(r=lD[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");s>=(r!=null?r:i.logLevel)&&t({level:Ze[s].toLowerCase(),message:a,args:o,type:i.name})}}}const m2=(t,e)=>e.some(n=>t instanceof n);let Wb,Hb;function y2(){return Wb||(Wb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v2(){return Hb||(Hb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uD=new WeakMap,B0=new WeakMap,cD=new WeakMap,ow=new WeakMap,JT=new WeakMap;function _2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(la(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&uD.set(n,t)}).catch(()=>{}),JT.set(e,t),e}function w2(t){if(B0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});B0.set(t,e)}let j0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return B0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return la(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function E2(t){j0=t(j0)}function T2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(aw(this),e,...n);return cD.set(r,e.sort?e.sort():[e]),la(r)}:v2().includes(t)?function(...e){return t.apply(aw(this),e),la(uD.get(this))}:function(...e){return la(t.apply(aw(this),e))}}function I2(t){return typeof t=="function"?T2(t):(t instanceof IDBTransaction&&w2(t),m2(t,y2())?new Proxy(t,j0):t)}function la(t){if(t instanceof IDBRequest)return _2(t);if(ow.has(t))return ow.get(t);const e=I2(t);return e!==t&&(ow.set(t,e),JT.set(e,t)),e}const aw=t=>JT.get(t);function S2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=la(o);return r&&o.addEventListener("upgradeneeded",u=>{r(la(o.result),u.oldVersion,u.newVersion,la(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const C2=["get","getKey","getAll","getAllKeys","count"],b2=["put","add","delete","clear"],lw=new Map;function Gb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lw.get(e))return lw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=b2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||C2.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(a.shift())),(await Promise.all([h[n](...a),i&&u.done]))[0]};return lw.set(e,s),s}E2(t=>({...t,get:(e,n,r)=>Gb(e,n)||t.get(e,n,r),has:(e,n)=>!!Gb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(x2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function x2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const q0="@firebase/app",Kb="0.9.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=new ih("@firebase/app"),N2="@firebase/app-compat",A2="@firebase/analytics-compat",D2="@firebase/analytics",P2="@firebase/app-check-compat",R2="@firebase/app-check",O2="@firebase/auth",L2="@firebase/auth-compat",M2="@firebase/database",F2="@firebase/database-compat",$2="@firebase/functions",U2="@firebase/functions-compat",V2="@firebase/installations",B2="@firebase/installations-compat",j2="@firebase/messaging",q2="@firebase/messaging-compat",z2="@firebase/performance",W2="@firebase/performance-compat",H2="@firebase/remote-config",G2="@firebase/remote-config-compat",K2="@firebase/storage",Q2="@firebase/storage-compat",Y2="@firebase/firestore",X2="@firebase/firestore-compat",J2="firebase",Z2="9.18.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="[DEFAULT]",eV={[q0]:"fire-core",[N2]:"fire-core-compat",[D2]:"fire-analytics",[A2]:"fire-analytics-compat",[R2]:"fire-app-check",[P2]:"fire-app-check-compat",[O2]:"fire-auth",[L2]:"fire-auth-compat",[M2]:"fire-rtdb",[F2]:"fire-rtdb-compat",[$2]:"fire-fn",[U2]:"fire-fn-compat",[V2]:"fire-iid",[B2]:"fire-iid-compat",[j2]:"fire-fcm",[q2]:"fire-fcm-compat",[z2]:"fire-perf",[W2]:"fire-perf-compat",[H2]:"fire-rc",[G2]:"fire-rc-compat",[K2]:"fire-gcs",[Q2]:"fire-gcs-compat",[Y2]:"fire-fst",[X2]:"fire-fst-compat","fire-js":"fire-js",[J2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new Map,mf=new Map;function Hm(t,e){try{t.container.addComponent(e)}catch(n){jl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hD(t,e){t.container.addOrOverwriteComponent(e)}function io(t){const e=t.name;if(mf.has(e))return jl.debug(`There were multiple attempts to register component ${e}.`),!1;mf.set(e,t);for(const n of ma.values())Hm(n,t);return!0}function dD(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function tV(t,e,n=ga){dD(t,e).clearInstance(n)}function nV(){mf.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Xs=new au("app","Firebase",rV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=Z2;function ZT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ga,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xs.create("bad-app-name",{appName:String(i)});if(n||(n=QU()),!n)throw Xs.create("no-options");const s=ma.get(i);if(s){if(V0(n,s.options)&&V0(r,s.config))return s;throw Xs.create("duplicate-app",{appName:i})}const o=new aD(i);for(const u of mf.values())o.addComponent(u);const a=new iV(n,r,o);return ma.set(i,a),a}function sV(t=ga){const e=ma.get(t);if(!e&&t===ga)return ZT();if(!e)throw Xs.create("no-app",{appName:t});return e}function oV(){return Array.from(ma.values())}async function fD(t){const e=t.name;ma.has(e)&&(ma.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function wi(t,e,n){var r;let i=(r=eV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jl.warn(a.join(" "));return}io(new Xr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function pD(t,e){if(t!==null&&typeof t!="function")throw Xs.create("invalid-log-argument");g2(t,e)}function gD(t){p2(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV="firebase-heartbeat-database",lV=1,yf="firebase-heartbeat-store";let uw=null;function mD(){return uw||(uw=S2(aV,lV,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(yf)}}}).catch(t=>{throw Xs.create("idb-open",{originalErrorMessage:t.message})})),uw}async function uV(t){try{return(await mD()).transaction(yf).objectStore(yf).get(yD(t))}catch(e){if(e instanceof yr)jl.warn(e.message);else{const n=Xs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jl.warn(n.message)}}}async function Qb(t,e){try{const r=(await mD()).transaction(yf,"readwrite");return await r.objectStore(yf).put(e,yD(t)),r.done}catch(n){if(n instanceof yr)jl.warn(n.message);else{const r=Xs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});jl.warn(r.message)}}}function yD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=1024,hV=30*24*60*60*1e3;class dV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Yb();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=hV}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Yb(),{heartbeatsToSend:n,unsentEntries:r}=fV(this._heartbeatsCache.heartbeats),i=jm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Yb(){return new Date().toISOString().substring(0,10)}function fV(t,e=cV){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Xb(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Xb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pf()?ZU().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await uV(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Xb(t){return jm(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(t){io(new Xr("platform-logger",e=>new k2(e),"PRIVATE")),io(new Xr("heartbeat",e=>new dV(e),"PRIVATE")),wi(q0,Kb,t),wi(q0,Kb,"esm2017"),wi("fire-js","")}gV("");const mV=Object.freeze(Object.defineProperty({__proto__:null,SDK_VERSION:Ra,_DEFAULT_ENTRY_NAME:ga,_addComponent:Hm,_addOrOverwriteComponent:hD,_apps:ma,_clearComponents:nV,_components:mf,_getProvider:dD,_registerComponent:io,_removeServiceInstance:tV,deleteApp:fD,getApp:sV,getApps:oV,initializeApp:ZT,onLog:pD,registerVersion:wi,setLogLevel:gD,FirebaseError:yr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,n){this._delegate=e,this.firebase=n,Hm(e,new Xr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),fD(this._delegate)))}_getService(e,n=ga){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=ga){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Hm(this._delegate,e)}_addOrOverwriteComponent(e){hD(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},Jb=new au("app-compat","Firebase",vV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:wi,setLogLevel:gD,onLog:pD,apps:null,SDK_VERSION:Ra,INTERNAL:{registerComponent:a,removeApp:r,useAsService:u,modularAPIs:mV}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(h){delete e[h]}function i(h){if(h=h||ga,!Yr(e,h))throw Jb.create("no-app",{appName:h});return e[h]}i.App=t;function s(h,p={}){const v=ZT(h,p);if(Yr(e,v.name))return e[v.name];const w=new t(v,n);return e[v.name]=w,w}function o(){return Object.keys(e).map(h=>e[h])}function a(h){const p=h.name,v=p.replace("-compat","");if(io(h)&&h.type==="PUBLIC"){const w=(b=i())=>{if(typeof b[v]!="function")throw Jb.create("invalid-app-argument",{appName:p});return b[v]()};h.serviceProps!==void 0&&ff(w,h.serviceProps),n[v]=w,t.prototype[v]=function(...b){return this._getService.bind(this,p).apply(this,h.multipleInstances?b:[])}}return h.type==="PUBLIC"?n[v]:null}function u(h,p){return p==="serverAuth"?null:p}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(){const t=_V(yV);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:vD,extendNamespace:e,createSubscribe:sD,ErrorFactory:au,deepExtend:ff});function e(n){ff(t,n)}return t}const wV=vD();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=new ih("@firebase/app-compat"),EV="@firebase/app-compat",TV="0.2.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(t){wi(EV,TV,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(XU()&&self.firebase!==void 0){Zb.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&Zb.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const ce=wV;IV();var SV="firebase",CV="9.18.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ce.registerVersion(SV,CV,"app-compat");function eI(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const td={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},qu={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function _D(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kV=bV,xV=_D,wD=new au("auth","Firebase",_D());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=new ih("@firebase/auth");function um(t,...e){e1.logLevel<=Ze.ERROR&&e1.error(`Auth (${Ra}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,...e){throw tI(t,...e)}function Vn(t,...e){return tI(t,...e)}function ED(t,e,n){const r=Object.assign(Object.assign({},xV()),{[e]:n});return new au("auth","Firebase",r).create(e,{appName:t.name})}function sh(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&qn(t,"argument-error"),ED(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tI(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return wD.create(t,...e)}function oe(t,e,...n){if(!t)throw tI(e,...n)}function gs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw um(e),new Error(e)}function Gi(t,e){t||gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=new Map;function Gr(t){Gi(t instanceof Function,"Expected a class definition");let e=t1.get(t);return e?(Gi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,t1.set(t,e),e)}function NV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function nI(){return n1()==="http:"||n1()==="https:"}function n1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nI()||tD()||"connection"in navigator)?navigator.onLine:!0}function DV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gi(n>e,"Short delay should be less than long delay!"),this.isMobile=QT()||Ky()}get(){return AV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t,e){Gi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=new tp(3e4,6e4);function hn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function kn(t,e,n,r,i={}){return ID(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=lu(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),TD.fetch()(SD(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))})}async function ID(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},PV),e);try{const i=new OV(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ed(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,h]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ed(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ed(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ed(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ED(t,p,h);qn(t,p)}}catch(i){if(i instanceof yr)throw i;qn(t,"internal-error",{message:String(i)})}}async function co(t,e,n,r,i={}){const s=await kn(t,e,n,r,i);return"mfaPendingCredential"in s&&qn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function SD(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?rI(t.config,i):`${t.config.apiScheme}://${i}`}class OV{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vn(this.auth,"network-request-failed")),RV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ed(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Vn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LV(t,e){return kn(t,"POST","/v1/accounts:delete",e)}async function MV(t,e){return kn(t,"POST","/v1/accounts:update",e)}async function FV(t,e){return kn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $V(t,e=!1){const n=me(t),r=await n.getIdToken(e),i=Yy(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ld(cw(i.auth_time)),issuedAtTime:Ld(cw(i.iat)),expirationTime:Ld(cw(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function cw(t){return Number(t)*1e3}function Yy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return um("JWT malformed, contained fewer than 3 sections"),null;try{const i=qm(n);return i?JSON.parse(i):(um("Failed to decode base64 JWT payload"),null)}catch(i){return um("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function UV(t){const e=Yy(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yr&&VV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function VV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ld(this.lastLoginAt),this.creationTime=Ld(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _f(t){var e;const n=t.auth,r=await t.getIdToken(),i=await so(t,FV(n,{idToken:r}));oe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?zV(s.providerUserInfo):[],a=qV(t.providerData,o),u=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),p=u?h:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new CD(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,v)}async function jV(t){const e=me(t);await _f(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function zV(t){return t.map(e=>{var{providerId:n}=e,r=eI(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WV(t,e){const n=await ID(t,{},async()=>{const r=lu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=SD(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",TD.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):UV(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return oe(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await WV(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new wf;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wf,this.toJSON())}_performRefresh(){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Al{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=eI(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new CD(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await so(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $V(this,e)}reload(){return jV(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Al(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await _f(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await so(this,LV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,h,p;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(i=n.email)!==null&&i!==void 0?i:void 0,b=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,k=(o=n.photoURL)!==null&&o!==void 0?o:void 0,O=(a=n.tenantId)!==null&&a!==void 0?a:void 0,J=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,N=(h=n.createdAt)!==null&&h!==void 0?h:void 0,D=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:M,emailVerified:Q,isAnonymous:re,providerData:m,stsTokenManager:le}=n;oe(M&&le,e,"internal-error");const he=wf.fromJSON(this.name,le);oe(typeof M=="string",e,"internal-error"),Fo(v,e.name),Fo(w,e.name),oe(typeof Q=="boolean",e,"internal-error"),oe(typeof re=="boolean",e,"internal-error"),Fo(b,e.name),Fo(k,e.name),Fo(O,e.name),Fo(J,e.name),Fo(N,e.name),Fo(D,e.name);const Ye=new Al({uid:M,auth:e,email:w,emailVerified:Q,displayName:v,isAnonymous:re,photoURL:k,phoneNumber:b,tenantId:O,stsTokenManager:he,createdAt:N,lastLoginAt:D});return m&&Array.isArray(m)&&(Ye.providerData=m.map(Fe=>Object.assign({},Fe))),J&&(Ye._redirectEventId=J),Ye}static async _fromIdTokenResponse(e,n,r=!1){const i=new wf;i.updateFromServerResponse(n);const s=new Al({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await _f(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bD.type="NONE";const Rc=bD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t,e,n){return`firebase:${t}:${e}:${n}`}class yc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Dl(this.userKey,i.apiKey,s),this.fullPersistenceKey=Dl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Al._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new yc(Gr(Rc),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Gr(Rc);const o=Dl(r,e.config.apiKey,e.name);let a=null;for(const h of n)try{const p=await h._get(o);if(p){const v=Al._fromJSON(e,p);h!==s&&(a=v),s=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new yc(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new yc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ND(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AD(e))return"Blackberry";if(DD(e))return"Webos";if(iI(e))return"Safari";if((e.includes("chrome/")||xD(e))&&!e.includes("edge/"))return"Chrome";if(np(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function kD(t=Vt()){return/firefox\//i.test(t)}function iI(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xD(t=Vt()){return/crios\//i.test(t)}function ND(t=Vt()){return/iemobile/i.test(t)}function np(t=Vt()){return/android/i.test(t)}function AD(t=Vt()){return/blackberry/i.test(t)}function DD(t=Vt()){return/webos/i.test(t)}function oh(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HV(t=Vt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function GV(t=Vt()){var e;return oh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function KV(){return nD()&&document.documentMode===10}function PD(t=Vt()){return oh(t)||np(t)||DD(t)||AD(t)||/windows phone/i.test(t)||ND(t)}function QV(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t,e=[]){let n;switch(t){case"Browser":n=r1(Vt());break;case"Worker":n=`${r1(Vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ra}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i1(this),this.idTokenSubscription=new i1(this),this.beforeStateQueue=new YV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wD,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await yc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u==null?void 0:u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _f(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?me(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Gr(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new au("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gr(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await yc.create(this,[Gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return oe(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function Sn(t){return me(t)}class i1{constructor(e){this.auth=e,this.observer=null,this.addObserver=sD(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function JV(t,e,n){const r=Sn(t);oe(r._canInitEmulator,r,"emulator-config-failed"),oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=OD(e),{host:o,port:a}=ZV(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||eB()}function OD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZV(t){const e=OD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:s1(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:s1(o)}}}function s1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function eB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,n){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(t,e){return kn(t,"POST","/v1/accounts:resetPassword",hn(t,e))}async function MD(t,e){return kn(t,"POST","/v1/accounts:update",e)}async function tB(t,e){return kn(t,"POST","/v1/accounts:update",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nB(t,e){return co(t,"POST","/v1/accounts:signInWithPassword",hn(t,e))}async function Xy(t,e){return kn(t,"POST","/v1/accounts:sendOobCode",hn(t,e))}async function rB(t,e){return Xy(t,e)}async function iB(t,e){return Xy(t,e)}async function sB(t,e){return Xy(t,e)}async function oB(t,e){return Xy(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aB(t,e){return co(t,"POST","/v1/accounts:signInWithEmailLink",hn(t,e))}async function lB(t,e){return co(t,"POST","/v1/accounts:signInWithEmailLink",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends ah{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ef(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ef(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return nB(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return aB(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return MD(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return lB(e,{idToken:n,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(t,e){return co(t,"POST","/v1/accounts:signInWithIdp",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB="http://localhost";class Is extends ah{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=eI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Is(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Js(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Js(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Js(e,n)}buildRequest(){const e={requestUri:uB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=lu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cB(t,e){return kn(t,"POST","/v1/accounts:sendVerificationCode",hn(t,e))}async function hB(t,e){return co(t,"POST","/v1/accounts:signInWithPhoneNumber",hn(t,e))}async function dB(t,e){const n=await co(t,"POST","/v1/accounts:signInWithPhoneNumber",hn(t,e));if(n.temporaryProof)throw Ed(t,"account-exists-with-different-credential",n);return n}const fB={USER_NOT_FOUND:"user-not-found"};async function pB(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return co(t,"POST","/v1/accounts:signInWithPhoneNumber",hn(t,n),fB)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends ah{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Pl({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Pl({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return hB(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return dB(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return pB(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Pl({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mB(t){const e=uc(wd(t)).link,n=e?uc(wd(e)).deep_link_id:null,r=uc(wd(t)).deep_link_id;return(r?uc(wd(r)).link:null)||r||n||e||t}class Jy{constructor(e){var n,r,i,s,o,a;const u=uc(wd(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,p=(r=u.oobCode)!==null&&r!==void 0?r:null,v=gB((i=u.mode)!==null&&i!==void 0?i:null);oe(h&&p&&v,"argument-error"),this.apiKey=h,this.operation=v,this.code=p,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=mB(e);try{return new Jy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.providerId=Oa.PROVIDER_ID}static credential(e,n){return Ef._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Jy.parseLink(n);return oe(r,"argument-error"),Ef._fromEmailAndCode(e,r.code,r.tenantId)}}Oa.PROVIDER_ID="password";Oa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh extends ho{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class vc extends lh{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return oe("providerId"in n&&"signInMethod"in n,"argument-error"),Is._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return oe(e.idToken||e.accessToken,"argument-error"),Is._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return vc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return vc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new vc(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends lh{constructor(){super("facebook.com")}static credential(e){return Is._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends lh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Is._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return hs.credential(n,r)}catch{return null}}}hs.GOOGLE_SIGN_IN_METHOD="google.com";hs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends lh{constructor(){super("github.com")}static credential(e){return Is._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yB="http://localhost";class Oc extends ah{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Js(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Js(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Js(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Oc(r,s)}static _create(e,n){return new Oc(e,n)}buildRequest(){return{requestUri:yB,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB="saml.";class Gm extends ho{constructor(e){oe(e.startsWith(vB),"argument-error"),super(e)}static credentialFromResult(e){return Gm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Gm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Oc.fromJSON(e);return oe(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Oc._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends lh{constructor(){super("twitter.com")}static credential(e,n){return Is._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fs.credential(n,r)}catch{return null}}}fs.TWITTER_SIGN_IN_METHOD="twitter.com";fs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(t,e){return co(t,"POST","/v1/accounts:signUp",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Al._fromIdTokenResponse(e,r,i),o=o1(r);return new Ii({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=o1(r);return new Ii({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function o1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _B(t){var e;const n=Sn(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Ii({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await FD(n,{returnSecureToken:!0}),i=await Ii._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km extends yr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Km.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Km(e,n,r,i)}}function $D(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Km._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wB(t,e){const n=me(t);await Zy(!0,n,e);const{providerUserInfo:r}=await MV(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=UD(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function sI(t,e,n=!1){const r=await so(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ii._forOperation(t,"link",r)}async function Zy(t,e,n){await _f(e);const r=UD(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";oe(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await so(t,$D(r,i,e,t),n);oe(s.idToken,r,"internal-error");const o=Yy(s.idToken);oe(o,r,"internal-error");const{sub:a}=o;return oe(t.uid===a,r,"user-mismatch"),Ii._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&qn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(t,e,n=!1){const r="signIn",i=await $D(t,r,e),s=await Ii._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function ev(t,e){return BD(Sn(t),e)}async function jD(t,e){const n=me(t);return await Zy(!1,n,e.providerId),sI(n,e)}async function qD(t,e){return VD(me(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EB(t,e){return co(t,"POST","/v1/accounts:signInWithCustomToken",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TB(t,e){const n=Sn(t),r=await EB(n,{token:e,returnSecureToken:!0}),i=await Ii._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?oI._fromServerResponse(e,n):qn(e,"internal-error")}}class oI extends tv{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new oI(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t,e,n){var r;oe(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),oe(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(oe(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(oe(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IB(t,e,n){const r=me(t),i={requestType:"PASSWORD_RESET",email:e};n&&nv(r,i,n),await iB(r,i)}async function SB(t,e,n){await LD(me(t),{oobCode:e,newPassword:n})}async function CB(t,e){await tB(me(t),{oobCode:e})}async function zD(t,e){const n=me(t),r=await LD(n,{oobCode:e}),i=r.requestType;switch(oe(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(r.mfaInfo,n,"internal-error");default:oe(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=tv._fromServerResponse(Sn(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function bB(t,e){const{data:n}=await zD(me(t),e);return n.email}async function kB(t,e,n){const r=Sn(t),i=await FD(r,{returnSecureToken:!0,email:e,password:n}),s=await Ii._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function xB(t,e,n){return ev(me(t),Oa.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NB(t,e,n){const r=me(t),i={requestType:"EMAIL_SIGNIN",email:e};oe(n.handleCodeInApp,r,"argument-error"),n&&nv(r,i,n),await sB(r,i)}function AB(t,e){const n=Jy.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function DB(t,e,n){const r=me(t),i=Oa.credentialWithLink(e,n||vf());return oe(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ev(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PB(t,e){return kn(t,"POST","/v1/accounts:createAuthUri",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RB(t,e){const n=nI()?vf():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await PB(me(t),r);return i||[]}async function OB(t,e){const n=me(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&nv(n.auth,i,e);const{email:s}=await rB(n.auth,i);s!==t.email&&await t.reload()}async function LB(t,e,n){const r=me(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&nv(r.auth,s,n);const{email:o}=await oB(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MB(t,e){return kn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FB(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=me(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await so(r,MB(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function $B(t,e){return WD(me(t),e,null)}function UB(t,e){return WD(me(t),null,e)}async function WD(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await so(t,MD(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VB(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t==null?void 0:t.idToken)){const o=(n=(e=Yy(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new _c(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new BB(s,i);case"github.com":return new jB(s,i);case"google.com":return new qB(s,i);case"twitter.com":return new zB(s,i,t.screenName||null);case"custom":case"anonymous":return new _c(s,null);default:return new _c(s,r,i)}}class _c{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class HD extends _c{constructor(e,n,r,i){super(e,n,r),this.username=i}}class BB extends _c{constructor(e,n){super(e,"facebook.com",n)}}class jB extends HD{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class qB extends _c{constructor(e,n){super(e,"google.com",n)}}class zB extends HD{constructor(e,n,r){super(e,"twitter.com",n,r)}}function WB(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:VB(n)}class Tl{constructor(e,n,r){this.type=e,this.credential=n,this.auth=r}static _fromIdtoken(e,n){return new Tl("enroll",e,n)}static _fromMfaPendingCredential(e){return new Tl("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Tl._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Tl._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Sn(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>tv._fromServerResponse(r,a));oe(i.mfaPendingCredential,r,"internal-error");const o=Tl._fromMfaPendingCredential(i.mfaPendingCredential);return new aI(o,s,async a=>{const u=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const h=Object.assign(Object.assign({},i),{idToken:u.idToken,refreshToken:u.refreshToken});switch(n.operationType){case"signIn":const p=await Ii._fromIdTokenResponse(r,n.operationType,h);return await r._updateCurrentUser(p.user),p;case"reauthenticate":return oe(n.user,r,"internal-error"),Ii._forOperation(n.user,n.operationType,h);default:qn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function HB(t,e){var n;const r=me(t),i=e;return oe(e.customData.operationType,r,"argument-error"),oe((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),aI._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GB(t,e){return kn(t,"POST","/v2/accounts/mfaEnrollment:start",hn(t,e))}function KB(t,e){return kn(t,"POST","/v2/accounts/mfaEnrollment:finalize",hn(t,e))}function QB(t,e){return kn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",hn(t,e))}class lI{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>tv._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new lI(e)}async getSession(){return Tl._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const r=e,i=await this.getSession(),s=await so(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await so(this.user,QB(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const hw=new WeakMap;function YB(t){const e=me(t);return hw.has(e)||hw.set(e,lI._fromUser(e)),hw.get(e)}const Qm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qm,"1"),this.storage.removeItem(Qm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XB(){const t=Vt();return iI(t)||oh(t)}const JB=1e3,ZB=10;class KD extends GD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=XB()&&QV(),this.fallbackToPolling=PD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);KV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ZB):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},JB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}KD.type="LOCAL";const uI=KD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD extends GD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}QD.type="SESSION";const ql=QD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new rv(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async h=>h(n.origin,s)),u=await ej(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const h=rp("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(v){const w=v;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(w.data.response);break;default:clearTimeout(p),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return window}function nj(t){an().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(){return typeof an().WorkerGlobalScope<"u"&&typeof an().importScripts=="function"}async function rj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ij(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function sj(){return cI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD="firebaseLocalStorageDb",oj=1,Ym="firebaseLocalStorage",XD="fbase_key";class ip{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function iv(t,e){return t.transaction([Ym],e?"readwrite":"readonly").objectStore(Ym)}function aj(){const t=indexedDB.deleteDatabase(YD);return new ip(t).toPromise()}function z0(){const t=indexedDB.open(YD,oj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ym,{keyPath:XD})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ym)?e(r):(r.close(),await aj(),e(await z0()))})})}async function a1(t,e,n){const r=iv(t,!0).put({[XD]:e,value:n});return new ip(r).toPromise()}async function lj(t,e){const n=iv(t,!1).get(e),r=await new ip(n).toPromise();return r===void 0?null:r.value}function l1(t,e){const n=iv(t,!0).delete(e);return new ip(n).toPromise()}const uj=800,cj=3;class JD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await z0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>cj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rv._getInstance(sj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await rj(),!this.activeServiceWorker)return;this.sender=new tj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ij()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await z0();return await a1(e,Qm,"1"),await l1(e,Qm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>a1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>lj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>l1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=iv(i,!1).getAll();return new ip(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JD.type="LOCAL";const Tf=JD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t,e){return kn(t,"POST","/v2/accounts/mfaSignIn:start",hn(t,e))}function dj(t,e){return kn(t,"POST","/v2/accounts/mfaSignIn:finalize",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fj(t){return(await kn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function ZD(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Vn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",pj().appendChild(r)})}function eP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=500,mj=6e4,Dg=1e12;class yj{constructor(e){this.auth=e,this.counter=Dg,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new vj(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Dg;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Dg;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Dg;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class vj{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;oe(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=_j(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},mj)},gj))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function _j(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=eP("rcb"),wj=new tp(3e4,6e4),Ej="https://www.google.com/recaptcha/api.js?";class Tj{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=an().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return oe(Ij(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(an().grecaptcha):new Promise((r,i)=>{const s=an().setTimeout(()=>{i(Vn(e,"network-request-failed"))},wj.get());an()[dw]=()=>{an().clearTimeout(s),delete an()[dw];const a=an().grecaptcha;if(!a){i(Vn(e,"internal-error"));return}const u=a.render;a.render=(h,p)=>{const v=u(h,p);return this.counter++,v},this.hostLanguage=n,r(a)};const o=`${Ej}?${lu({onload:dw,render:"explicit",hl:n})}`;ZD(o).catch(()=>{clearTimeout(s),i(Vn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=an().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Ij(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Sj{async load(e){return new yj(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="recaptcha",Cj={theme:"light",type:"image"};class bj{constructor(e,n=Object.assign({},Cj),r){this.parameters=n,this.type=tP,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Sn(r),this.isInvisible=this.parameters.size==="invisible",oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;oe(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Sj:new Tj,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{!o||(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=an()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){oe(nI()&&!cI(),this.auth,"internal-error"),await kj(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await fj(this.auth);oe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function kj(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Pl._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function xj(t,e,n){const r=Sn(t),i=await sv(r,e,me(n));return new hI(i,s=>ev(r,s))}async function Nj(t,e,n){const r=me(t);await Zy(!1,r,"phone");const i=await sv(r.auth,e,me(n));return new hI(i,s=>jD(r,s))}async function Aj(t,e,n){const r=me(t),i=await sv(r.auth,e,me(n));return new hI(i,s=>qD(r,s))}async function sv(t,e,n){var r;const i=await n.verify();try{oe(typeof i=="string",t,"argument-error"),oe(n.type===tP,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return oe(o.type==="enroll",t,"internal-error"),(await GB(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{oe(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return oe(a,t,"missing-multi-factor-info"),(await hj(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await cB(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function Dj(t,e){await sI(me(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.providerId=zi.PROVIDER_ID,this.auth=Sn(e)}verifyPhoneNumber(e,n){return sv(this.auth,e,me(n))}static credential(e,n){return Pl._fromVerification(e,n)}static credentialFromResult(e){const n=e;return zi.credentialFromTaggedObject(n)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Pl._fromTokenResponse(n,r):null}}zi.PROVIDER_ID="phone";zi.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t,e){return e?Gr(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI extends ah{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Js(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Js(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Js(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Pj(t){return BD(t.auth,new dI(t),t.bypassAuthState)}function Rj(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),VD(n,new dI(t),t.bypassAuthState)}async function Oj(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),sI(n,new dI(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Pj;case"linkViaPopup":case"linkViaRedirect":return Oj;case"reauthViaPopup":case"reauthViaRedirect":return Rj;default:qn(this.auth,"internal-error")}}resolve(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=new tp(2e3,1e4);async function Mj(t,e,n){const r=Sn(t);sh(t,e,ho);const i=uu(r,n);return new Hs(r,"signInViaPopup",e,i).executeNotNull()}async function Fj(t,e,n){const r=me(t);sh(r.auth,e,ho);const i=uu(r.auth,n);return new Hs(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function $j(t,e,n){const r=me(t);sh(r.auth,e,ho);const i=uu(r.auth,n);return new Hs(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Hs extends nP{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Hs.currentPopupAction&&Hs.currentPopupAction.cancel(),Hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){Gi(this.filter.length===1,"Popup operations only handle one event");const e=rp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,Lj.get())};e()}}Hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj="pendingRedirect",Md=new Map;class Vj extends nP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Md.get(this.auth._key());if(!e){try{const r=await Bj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Md.set(this.auth._key(),e)}return this.bypassAuthState||Md.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Bj(t,e){const n=iP(e),r=rP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function fI(t,e){return rP(t)._set(iP(e),"true")}function jj(){Md.clear()}function pI(t,e){Md.set(t._key(),e)}function rP(t){return Gr(t._redirectPersistence)}function iP(t){return Dl(Uj,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(t,e,n){return zj(t,e,n)}async function zj(t,e,n){const r=Sn(t);sh(t,e,ho),await r._initializationPromise;const i=uu(r,n);return await fI(i,r),i._openRedirect(r,e,"signInViaRedirect")}function Wj(t,e,n){return Hj(t,e,n)}async function Hj(t,e,n){const r=me(t);sh(r.auth,e,ho),await r.auth._initializationPromise;const i=uu(r.auth,n);await fI(i,r.auth);const s=await sP(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function Gj(t,e,n){return Kj(t,e,n)}async function Kj(t,e,n){const r=me(t);sh(r.auth,e,ho),await r.auth._initializationPromise;const i=uu(r.auth,n);await Zy(!1,r,e.providerId),await fI(i,r.auth);const s=await sP(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function Qj(t,e){return await Sn(t)._initializationPromise,ov(t,e,!1)}async function ov(t,e,n=!1){const r=Sn(t),i=uu(r,e),o=await new Vj(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function sP(t){const e=rp(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=10*60*1e3;class oP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Xj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!aP(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Yj&&this.cachedEventUids.clear(),this.cachedEventUids.has(u1(e))}saveEventToCache(e){this.cachedEventUids.add(u1(e)),this.lastProcessedEventTime=Date.now()}}function u1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function aP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Xj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP(t,e={}){return kn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zj=/^https?/;async function eq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lP(t);for(const n of e)try{if(tq(n))return}catch{}qn(t,"unauthorized-domain")}function tq(t){const e=vf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Zj.test(n))return!1;if(Jj.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nq=new tp(3e4,6e4);function c1(){const t=an().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rq(t){return new Promise((e,n)=>{var r,i,s;function o(){c1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{c1(),n(Vn(t,"network-request-failed"))},timeout:nq.get()})}if(!((i=(r=an().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=an().gapi)===null||s===void 0)&&s.load)o();else{const a=eP("iframefcb");return an()[a]=()=>{gapi.load?o():n(Vn(t,"network-request-failed"))},ZD(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw cm=null,e})}let cm=null;function iq(t){return cm=cm||rq(t),cm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sq=new tp(5e3,15e3),oq="__/auth/iframe",aq="emulator/auth/iframe",lq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cq(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?rI(e,aq):`https://${t.config.authDomain}/${oq}`,r={apiKey:e.apiKey,appName:t.name,v:Ra},i=uq.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${lu(r).slice(1)}`}async function hq(t){const e=await iq(t),n=an().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:cq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lq,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Vn(t,"network-request-failed"),a=an().setTimeout(()=>{s(o)},sq.get());function u(){an().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fq=500,pq=600,gq="_blank",mq="http://localhost";class h1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yq(t,e,n,r=fq,i=pq){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},dq),{width:r.toString(),height:i.toString(),top:s,left:o}),h=Vt().toLowerCase();n&&(a=xD(h)?gq:n),kD(h)&&(e=e||mq,u.scrollbars="yes");const p=Object.entries(u).reduce((w,[b,k])=>`${w}${b}=${k},`,"");if(GV(h)&&a!=="_self")return vq(e||"",a),new h1(null);const v=window.open(e||"",a,p);oe(v,t,"popup-blocked");try{v.focus()}catch{}return new h1(v)}function vq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _q="__/auth/handler",wq="emulator/auth/handler";function W0(t,e,n,r,i,s){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ra,eventId:i};if(e instanceof ho){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",zm(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof lh){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];return`${Eq(t)}?${lu(a).slice(1)}`}function Eq({config:t}){return t.emulator?rI(t,wq):`https://${t.authDomain}/${_q}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="webStorageSupport";class Tq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ql,this._completeRedirectFn=ov,this._overrideRedirectResult=pI}async _openPopup(e,n,r,i){var s;Gi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=W0(e,n,r,vf(),i);return yq(e,o,rp())}async _openRedirect(e,n,r,i){return await this._originValidation(e),nj(W0(e,n,r,vf(),i)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Gi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await hq(e),r=new oP(e);return n.register("authEvent",i=>(oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fw,{type:fw},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[fw];o!==void 0&&n(!!o),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return PD()||iI()||oh()}}const Iq=Tq;class Sq{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return gs("unexpected MultiFactorSessionType")}}}class gI extends Sq{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new gI(e)}_finalizeEnroll(e,n,r){return KB(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return dj(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class uP{constructor(){}static assertion(e){return gI._fromCredential(e)}}uP.FACTOR_ID="phone";var d1="@firebase/auth",f1="0.21.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function kq(t){io(new Xr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,u)=>{oe(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),oe(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const h={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RD(t)},p=new XV(a,u,h);return NV(p,n),p})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),io(new Xr("auth-internal",e=>{const n=Sn(e.getProvider("auth").getImmediate());return(r=>new Cq(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wi(d1,f1,bq(t)),wi(d1,f1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xq=5*60;YU("authIdTokenMaxAge");kq("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq=2e3;async function Aq(t,e,n){var r;const{BuildInfo:i}=zl();Gi(e.sessionId,"AuthEvent did not contain a session ID");const s=await Lq(e.sessionId),o={};return oh()?o.ibi=i.packageName:np()?o.apn=i.packageName:qn(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,W0(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function Dq(t){const{BuildInfo:e}=zl(),n={};oh()?n.iosBundleId=e.packageName:np()?n.androidPackageName=e.packageName:qn(t,"operation-not-supported-in-this-environment"),await lP(t,n)}function Pq(t){const{cordova:e}=zl();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,HV()?"_blank":"_system","location=yes"),n(i)})})}async function Rq(t,e,n){const{cordova:r}=zl();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function u(){var v;s();const w=(v=r.plugins.browsertab)===null||v===void 0?void 0:v.close;typeof w=="function"&&w(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function h(){a||(a=window.setTimeout(()=>{o(Vn(t,"redirect-cancelled-by-user"))},Nq))}function p(){(document==null?void 0:document.visibilityState)==="visible"&&h()}e.addPassiveListener(u),document.addEventListener("resume",h,!1),np()&&document.addEventListener("visibilitychange",p,!1),i=()=>{e.removePassiveListener(u),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",p,!1),a&&window.clearTimeout(a)}})}finally{i()}}function Oq(t){var e,n,r,i,s,o,a,u,h,p;const v=zl();oe(typeof((e=v==null?void 0:v.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oe(typeof((n=v==null?void 0:v.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oe(typeof((s=(i=(r=v==null?void 0:v.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe(typeof((u=(a=(o=v==null?void 0:v.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||u===void 0?void 0:u.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe(typeof((p=(h=v==null?void 0:v.cordova)===null||h===void 0?void 0:h.InAppBrowser)===null||p===void 0?void 0:p.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Lq(t){const e=Mq(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function Mq(t){if(Gi(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq=20;class $q extends oP{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function Uq(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:jq(),postBody:null,tenantId:t.tenantId,error:Vn(t,"no-auth-event")}}function Vq(t,e){return H0()._set(G0(t),e)}async function p1(t){const e=await H0()._get(G0(t));return e&&await H0()._remove(G0(t)),e}function Bq(t,e){var n,r;const i=zq(e);if(i.includes("/__/auth/callback")){const s=hm(i),o=s.firebaseError?qq(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],u=a?Vn(a):null;return u?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function jq(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Fq;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function H0(){return Gr(uI)}function G0(t){return Dl("authEvent",t.config.apiKey,t.name)}function qq(t){try{return JSON.parse(t)}catch{return null}}function zq(t){const e=hm(t),n=e.link?decodeURIComponent(e.link):void 0,r=hm(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return hm(i).link||i||r||n||t}function hm(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return uc(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wq=500;class Hq{constructor(){this._redirectPersistence=ql,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ov,this._overrideRedirectResult=pI}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new $q(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){qn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){Oq(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),jj(),await this._originValidation(e);const o=Uq(e,r,i);await Vq(e,o);const a=await Aq(e,o,n),u=await Pq(a);return Rq(e,s,u)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Dq(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=zl(),o=setTimeout(async()=>{await p1(e),n.onEvent(g1())},Wq),a=async p=>{clearTimeout(o);const v=await p1(e);let w=null;v&&(p==null?void 0:p.url)&&(w=Bq(v,p.url)),n.onEvent(w||g1())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const u=i,h=`${s.packageName.toLowerCase()}://`;zl().handleOpenURL=async p=>{if(p.toLowerCase().startsWith(h)&&a({url:p}),typeof u=="function")try{u(p)}catch(v){console.error(v)}}}}const Gq=Hq;function g1(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Vn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kq(t,e){Sn(t)._logFramework(e)}var Qq="@firebase/auth-compat",Yq="0.3.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xq=1e3;function Fd(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function Jq(){return Fd()==="http:"||Fd()==="https:"}function cP(t=Vt()){return!!((Fd()==="file:"||Fd()==="ionic:"||Fd()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zq(){return Ky()||YT()}function ez(){return nD()&&(document==null?void 0:document.documentMode)===11}function tz(t=Vt()){return/Edge\/\d+/.test(t)}function nz(t=Vt()){return ez()||tz(t)}function hP(){try{const t=self.localStorage,e=rp();if(t)return t.setItem(e,"1"),t.removeItem(e),nz()?pf():!0}catch{return mI()&&pf()}return!1}function mI(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function pw(){return(Jq()||tD()||cP())&&!Zq()&&hP()&&!mI()}function dP(){return cP()&&typeof document<"u"}async function rz(){return dP()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},Xq);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function iz(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr={LOCAL:"local",NONE:"none",SESSION:"session"},nd=oe,fP="persistence";function sz(t,e){if(nd(Object.values(zr).includes(e),t,"invalid-persistence-type"),Ky()){nd(e!==zr.SESSION,t,"unsupported-persistence-type");return}if(YT()){nd(e===zr.NONE,t,"unsupported-persistence-type");return}if(mI()){nd(e===zr.NONE||e===zr.LOCAL&&pf(),t,"unsupported-persistence-type");return}nd(e===zr.NONE||hP(),t,"unsupported-persistence-type")}async function K0(t){await t._initializationPromise;const e=pP(),n=Dl(fP,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function oz(t,e){const n=pP();if(!n)return[];const r=Dl(fP,t,e);switch(n.getItem(r)){case zr.NONE:return[Rc];case zr.LOCAL:return[Tf,ql];case zr.SESSION:return[ql];default:return[]}}function pP(){var t;try{return((t=iz())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const az=oe;class Qo{constructor(){this.browserResolver=Gr(Iq),this.cordovaResolver=Gr(Gq),this.underlyingResolver=null,this._redirectPersistence=ql,this._completeRedirectFn=ov,this._overrideRedirectResult=pI}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return dP()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return az(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await rz();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(t){return t.unwrap()}function lz(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uz(t){return mP(t)}function cz(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new hz(t,HB(t,e))}else if(r){const i=mP(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function mP(t){const{_tokenResponse:e}=t instanceof yr?t.customData:t;if(!e)return null;if(!(t instanceof yr)&&"temporaryProof"in e&&"phoneNumber"in e)return zi.credentialFromResult(t);const n=e.providerId;if(!n||n===td.PASSWORD)return null;let r;switch(n){case td.GOOGLE:r=hs;break;case td.FACEBOOK:r=cs;break;case td.GITHUB:r=ds;break;case td.TWITTER:r=fs;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:u}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?Oc._create(n,a):Is._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new vc(n).credential({idToken:i,accessToken:s,rawNonce:u})}return t instanceof yr?r.credentialFromError(t):r.credentialFromResult(t)}function br(t,e){return e.catch(n=>{throw n instanceof yr&&cz(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:uz(n),additionalUserInfo:WB(n),user:Gs.getOrCreate(i)}})}async function Q0(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>br(t,n.confirm(r))}}class hz{constructor(e,n){this.resolver=n,this.auth=lz(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return br(gP(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this._delegate=e,this.multiFactor=YB(e)}static getOrCreate(e){return Gs.USER_MAP.has(e)||Gs.USER_MAP.set(e,new Gs(e)),Gs.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return br(this.auth,jD(this._delegate,e))}async linkWithPhoneNumber(e,n){return Q0(this.auth,Nj(this._delegate,e,n))}async linkWithPopup(e){return br(this.auth,$j(this._delegate,e,Qo))}async linkWithRedirect(e){return await K0(Sn(this.auth)),Gj(this._delegate,e,Qo)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return br(this.auth,qD(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Q0(this.auth,Aj(this._delegate,e,n))}reauthenticateWithPopup(e){return br(this.auth,Fj(this._delegate,e,Qo))}async reauthenticateWithRedirect(e){return await K0(Sn(this.auth)),Wj(this._delegate,e,Qo)}sendEmailVerification(e){return OB(this._delegate,e)}async unlink(e){return await wB(this._delegate,e),this}updateEmail(e){return $B(this._delegate,e)}updatePassword(e){return UB(this._delegate,e)}updatePhoneNumber(e){return Dj(this._delegate,e)}updateProfile(e){return FB(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return LB(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Gs.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd=oe;class Y0{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;rd(r,"invalid-api-key",{appName:e.name}),rd(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Qo:void 0;this._delegate=n.initialize({options:{persistence:dz(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(kV),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Gs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){JV(this._delegate,e,n)}applyActionCode(e){return CB(this._delegate,e)}checkActionCode(e){return zD(this._delegate,e)}confirmPasswordReset(e,n){return SB(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return br(this._delegate,kB(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return RB(this._delegate,e)}isSignInWithEmailLink(e){return AB(this._delegate,e)}async getRedirectResult(){rd(pw(),this._delegate,"operation-not-supported-in-this-environment");const e=await Qj(this._delegate,Qo);return e?br(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){Kq(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=m1(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=m1(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return NB(this._delegate,e,n)}sendPasswordResetEmail(e,n){return IB(this._delegate,e,n||void 0)}async setPersistence(e){sz(this._delegate,e);let n;switch(e){case zr.SESSION:n=ql;break;case zr.LOCAL:n=await Gr(Tf)._isAvailable()?Tf:uI;break;case zr.NONE:n=Rc;break;default:return qn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return br(this._delegate,_B(this._delegate))}signInWithCredential(e){return br(this._delegate,ev(this._delegate,e))}signInWithCustomToken(e){return br(this._delegate,TB(this._delegate,e))}signInWithEmailAndPassword(e,n){return br(this._delegate,xB(this._delegate,e,n))}signInWithEmailLink(e,n){return br(this._delegate,DB(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Q0(this._delegate,xj(this._delegate,e,n))}async signInWithPopup(e){return rd(pw(),this._delegate,"operation-not-supported-in-this-environment"),br(this._delegate,Mj(this._delegate,e,Qo))}async signInWithRedirect(e){return rd(pw(),this._delegate,"operation-not-supported-in-this-environment"),await K0(this._delegate),qj(this._delegate,e,Qo)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return bB(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Y0.Persistence=zr;function m1(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&Gs.getOrCreate(o)),error:e,complete:n}}function dz(t,e){const n=oz(t,e);if(typeof self<"u"&&!n.includes(Tf)&&n.push(Tf),typeof window<"u")for(const r of[uI,ql])n.includes(r)||n.push(r);return n.includes(Rc)||n.push(Rc),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.providerId="phone",this._delegate=new zi(gP(ce.auth()))}static credential(e,n){return zi.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}yI.PHONE_SIGN_IN_METHOD=zi.PHONE_SIGN_IN_METHOD;yI.PROVIDER_ID=zi.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz=oe;class pz{constructor(e,n,r=ce.app()){var i;fz((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new bj(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gz="auth-compat";function mz(t){t.INTERNAL.registerComponent(new Xr(gz,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Y0(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:qu.EMAIL_SIGNIN,PASSWORD_RESET:qu.PASSWORD_RESET,RECOVER_EMAIL:qu.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:qu.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:qu.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:qu.VERIFY_EMAIL}},EmailAuthProvider:Oa,FacebookAuthProvider:cs,GithubAuthProvider:ds,GoogleAuthProvider:hs,OAuthProvider:vc,SAMLAuthProvider:Gm,PhoneAuthProvider:yI,PhoneMultiFactorGenerator:uP,RecaptchaVerifier:pz,TwitterAuthProvider:fs,Auth:Y0,AuthCredential:ah,Error:yr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(Qq,Yq)}mz(ce);const y1="@firebase/database",v1="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yP="";function vP(t){yP=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ln(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:gf(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Yr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new yz(e)}}catch{}return new vz},Il=_P("localStorage"),X0=_P("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=new ih("@firebase/database"),wP=function(){let t=1;return function(){return t++}}(),EP=function(t){const e=l2(t),n=new s2;n.update(e);const r=n.digest();return GT.encodeByteArray(r)},sp=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=sp.apply(null,r):typeof r=="object"?e+=ln(r):e+=r,e+=" "}return e};let Rl=null,_1=!0;const TP=function(t,e){ae(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(wc.logLevel=Ze.VERBOSE,Rl=wc.log.bind(wc),e&&X0.set("logging_enabled",!0)):typeof t=="function"?Rl=t:(Rl=null,X0.remove("logging_enabled"))},En=function(...t){if(_1===!0&&(_1=!1,Rl===null&&X0.get("logging_enabled")===!0&&TP(!0)),Rl){const e=sp.apply(null,t);Rl(e)}},op=function(t){return function(...e){En(t,...e)}},J0=function(...t){const e="FIREBASE INTERNAL ERROR: "+sp(...t);wc.error(e)},Ss=function(...t){const e=`FIREBASE FATAL ERROR: ${sp(...t)}`;throw wc.error(e),new Error(e)},tr=function(...t){const e="FIREBASE WARNING: "+sp(...t);wc.warn(e)},_z=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&tr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},av=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},wz=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ya="[MIN_NAME]",oo="[MAX_NAME]",cu=function(t,e){if(t===e)return 0;if(t===ya||e===oo)return-1;if(e===ya||t===oo)return 1;{const n=w1(t),r=w1(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Ez=function(t,e){return t===e?0:t<e?-1:1},id=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ln(e))},vI=function(t){if(typeof t!="object"||t===null)return ln(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ln(e[r]),n+=":",n+=vI(t[e[r]]);return n+="}",n},IP=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Cn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const SP=function(t){ae(!av(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,u;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const h=[];for(u=n;u;u-=1)h.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)h.push(s%2?1:0),s=Math.floor(s/2);h.push(i?1:0),h.reverse();const p=h.join("");let v="";for(u=0;u<64;u+=8){let w=parseInt(p.substr(u,8),2).toString(16);w.length===1&&(w="0"+w),v=v+w}return v.toLowerCase()},Tz=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Iz=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Sz(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Cz=new RegExp("^-?(0*)\\d{1,10}$"),bz=-2147483648,kz=2147483647,w1=function(t){if(Cz.test(t)){const e=Number(t);if(e>=bz&&e<=kz)return e}return null},uh=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw tr("Exception was thrown by user callback.",n),e},Math.floor(0))}},xz=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},$d=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){tr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(En("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tr(e)}}class Ec{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ec.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="5",CP="v",bP="s",kP="r",xP="f",NP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,AP="ls",DP="p",Z0="ac",PP="websocket",RP="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n,r,i,s=!1,o="",a=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Il.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Il.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Dz(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function LP(t,e,n){ae(typeof e=="string","typeof type must == string"),ae(typeof n=="object","typeof params must == object");let r;if(e===PP)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===RP)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Dz(t)&&(n.ns=t.namespace);const i=[];return Cn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(){this.counters_={}}incrementCounter(e,n=1){Yr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return qU(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw={},mw={};function wI(t){const e=t.toString();return gw[e]||(gw[e]=new Pz),gw[e]}function Rz(t,e){const n=t.toString();return mw[n]||(mw[n]=e()),mw[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&uh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="start",Lz="close",Mz="pLPCommand",Fz="pRTLPCB",MP="id",FP="pw",$P="ser",$z="cb",Uz="seg",Vz="ts",Bz="d",jz="dframe",UP=1870,VP=30,qz=UP-VP,zz=25e3,Wz=3e4;class Yo{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=op(e),this.stats_=wI(n),this.urlFn=u=>(this.appCheckToken&&(u[Z0]=this.appCheckToken),LP(n,RP,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Oz(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Wz)),wz(()=>{if(this.isClosed_)return;this.scriptTagHolder=new EI((...s)=>{const[o,a,u,h,p]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===E1)this.id=a,this.password=u;else if(o===Lz)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[E1]="t",r[$P]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[$z]=this.scriptTagHolder.uniqueCallbackIdentifier),r[CP]=_I,this.transportSessionId&&(r[bP]=this.transportSessionId),this.lastSessionId&&(r[AP]=this.lastSessionId),this.applicationId&&(r[DP]=this.applicationId),this.appCheckToken&&(r[Z0]=this.appCheckToken),typeof location<"u"&&location.hostname&&NP.test(location.hostname)&&(r[kP]=xP);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Yo.forceAllow_=!0}static forceDisallow(){Yo.forceDisallow_=!0}static isAvailable(){return Yo.forceAllow_?!0:!Yo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Tz()&&!Iz()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ln(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=ZA(n),i=IP(r,qz);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[jz]="t",r[MP]=e,r[FP]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ln(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class EI{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=wP(),window[Mz+this.uniqueCallbackIdentifier]=e,window[Fz+this.uniqueCallbackIdentifier]=n,this.myIFrame=EI.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){En("frame writing exception"),a.stack&&En(a.stack),En(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||En("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[MP]=this.myID,e[FP]=this.myPW,e[$P]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+VP+r.length<=UP;){const o=this.pendingSegs.shift();r=r+"&"+Uz+i+"="+o.seg+"&"+Vz+i+"="+o.ts+"&"+Bz+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(zz)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{En("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hz=16384,Gz=45e3;let Xm=null;typeof MozWebSocket<"u"?Xm=MozWebSocket:typeof WebSocket<"u"&&(Xm=WebSocket);class pi{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=op(this.connId),this.stats_=wI(n),this.connURL=pi.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[CP]=_I,typeof location<"u"&&location.hostname&&NP.test(location.hostname)&&(o[kP]=xP),n&&(o[bP]=n),r&&(o[AP]=r),i&&(o[Z0]=i),s&&(o[DP]=s),LP(e,PP,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Il.set("previous_websocket_failure",!0);try{let r;rD(),this.mySock=new Xm(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){pi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Xm!==null&&!pi.forceDisallow_}static previouslyFailed(){return Il.isInMemoryStorage||Il.get("previous_websocket_failure")===!0}markConnectionHealthy(){Il.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=gf(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ae(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ln(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=IP(n,Hz);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Gz))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}pi.responsesRequiredToBeHealthy=2;pi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Yo,pi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=pi&&pi.isAvailable();let r=n&&!pi.previouslyFailed();if(e.webSocketOnly&&(n||tr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[pi];else{const i=this.transports_=[];for(const s of Lc.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Lc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Lc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz=6e4,Qz=5e3,Yz=10*1024,Xz=100*1024,yw="t",T1="d",Jz="s",I1="r",Zz="e",S1="o",C1="a",b1="n",k1="p",eW="h";class tW{constructor(e,n,r,i,s,o,a,u,h,p){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=h,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=op("c:"+this.id+":"),this.transportManager_=new Lc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=$d(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Xz?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Yz?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(yw in e){const n=e[yw];n===C1?this.upgradeIfSecondaryHealthy_():n===I1?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===S1&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=id("t",e),r=id("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:k1,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:C1,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:b1,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=id("t",e),r=id("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=id(yw,e);if(T1 in e){const r=e[T1];if(n===eW){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===b1){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Jz?this.onConnectionShutdown_(r):n===I1?this.onReset_(r):n===Zz?J0("Server Error: "+r):n===S1?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):J0("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),_I!==r&&tr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),$d(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Kz))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$d(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Qz))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:k1,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Il.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.allowedEvents_=e,this.listeners_={},ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){ae(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm extends jP{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!QT()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Jm}getInitialEvent(e){return ae(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=32,N1=768;class lt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function st(){return new lt("")}function je(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function va(t){return t.pieces_.length-t.pieceNum_}function _t(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new lt(t.pieces_,e)}function TI(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function nW(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function If(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function qP(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new lt(e,0)}function Pt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof lt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new lt(n,0)}function qe(t){return t.pieceNum_>=t.pieces_.length}function pr(t,e){const n=je(t),r=je(e);if(n===null)return e;if(n===r)return pr(_t(t),_t(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function rW(t,e){const n=If(t,0),r=If(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=cu(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function II(t,e){if(va(t)!==va(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function mi(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(va(t)>va(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class iW{constructor(e,n){this.errorPrefix_=n,this.parts_=If(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Qy(this.parts_[r]);zP(this)}}function sW(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Qy(e),zP(t)}function oW(t){const e=t.parts_.pop();t.byteLength_-=Qy(e),t.parts_.length>0&&(t.byteLength_-=1)}function zP(t){if(t.byteLength_>N1)throw new Error(t.errorPrefix_+"has a key path longer than "+N1+" bytes ("+t.byteLength_+").");if(t.parts_.length>x1)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+x1+") or object contains a cycle "+dl(t))}function dl(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI extends jP{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new SI}getInitialEvent(e){return ae(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=1e3,aW=60*5*1e3,A1=30*1e3,lW=1.3,uW=3e4,cW="server_kill",D1=3;class Zs extends BP{constructor(e,n,r,i,s,o,a,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=u,this.id=Zs.nextPersistentConnectionId_++,this.log_=op("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=sd,this.maxReconnectDelay_=aW,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!rD())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");SI.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Jm.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(ln(s)),ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Nr,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ae(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const u=a.d,h=a.s;Zs.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),h!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(h,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Yr(e,"w")){const r=Bl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();tr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||i2(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=A1)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=r2(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ln(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):J0("Unrecognized action received from server: "+ln(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=sd,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=sd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>uW&&(this.reconnectDelay_=sd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*lW)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Zs.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const u=function(){a?a.close():(o=!0,r())},h=function(v){ae(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(v)};this.realtime_={close:u,sendRequest:h};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,w]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);o?En("getToken() completed but was canceled"):(En("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=w&&w.token,a=new tW(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,b=>{tr(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(cW)},s))}catch(v){this.log_("Failed to get token: "+v),o||(this.repoInfo_.nodeAdmin&&tr(v),u())}}}interrupt(e){En("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){En("Resuming connection for reason: "+e),delete this.interruptReasons_[e],zm(this.interruptReasons_)&&(this.reconnectDelay_=sd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>vI(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new lt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){En("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=D1&&(this.reconnectDelay_=A1,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){En("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=D1&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+yP.replace(/\./g,"-")]=1,QT()?e["framework.cordova"]=1:Ky()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Jm.getInstance().currentlyOnline();return zm(this.interruptReasons_)&&e}}Zs.nextPersistentConnectionId_=0;Zs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new We(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new We(ya,e),i=new We(ya,n);return this.compare(r,i)!==0}minPost(){return We.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pg;class WP extends lv{static get __EMPTY_NODE(){return Pg}static set __EMPTY_NODE(e){Pg=e}compare(e,n){return cu(e.name,n.name)}isDefinedOn(e){throw rh("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return We.MIN}maxPost(){return new We(oo,Pg)}makePost(e,n){return ae(typeof e=="string","KeyIndex indexValue must always be a string."),new We(e,Pg)}toString(){return".key"}}const ws=new WP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class _n{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:_n.RED,this.left=i!=null?i:Dr.EMPTY_NODE,this.right=s!=null?s:Dr.EMPTY_NODE}copy(e,n,r,i,s){return new _n(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Dr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Dr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}_n.RED=!0;_n.BLACK=!1;class hW{copy(e,n,r,i,s){return this}insert(e,n,r){return new _n(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Dr{constructor(e,n=Dr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Dr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,_n.BLACK,null,null))}remove(e){return new Dr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_n.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Rg(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Rg(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Rg(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Rg(this.root_,null,this.comparator_,!0,e)}}Dr.EMPTY_NODE=new hW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dW(t,e){return cu(t.name,e.name)}function CI(t,e){return cu(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eE;function fW(t){eE=t}const HP=function(t){return typeof t=="number"?"number:"+SP(t):"string:"+t},GP=function(t){if(t.isLeafNode()){const e=t.val();ae(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Yr(e,".sv"),"Priority must be a string or number.")}else ae(t===eE||t.isEmpty(),"priority of unexpected type.");ae(t===eE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P1;class gn{constructor(e,n=gn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ae(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),GP(this.priorityNode_)}static set __childrenNodeConstructor(e){P1=e}static get __childrenNodeConstructor(){return P1}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new gn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:gn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return qe(e)?this:je(e)===".priority"?this.priorityNode_:gn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:gn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=je(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ae(r!==".priority"||va(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,gn.__childrenNodeConstructor.EMPTY_NODE.updateChild(_t(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+HP(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=SP(this.value_):e+=this.value_,this.lazyHash_=EP(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===gn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof gn.__childrenNodeConstructor?-1:(ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=gn.VALUE_TYPE_ORDER.indexOf(n),s=gn.VALUE_TYPE_ORDER.indexOf(r);return ae(i>=0,"Unknown leaf type: "+n),ae(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}gn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KP,QP;function pW(t){KP=t}function gW(t){QP=t}class mW extends lv{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?cu(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return We.MIN}maxPost(){return new We(oo,new gn("[PRIORITY-POST]",QP))}makePost(e,n){const r=KP(e);return new We(n,new gn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ct=new mW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yW=Math.log(2);class vW{constructor(e){const n=s=>parseInt(Math.log(s)/yW,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Zm=function(t,e,n,r){t.sort(e);const i=function(u,h){const p=h-u;let v,w;if(p===0)return null;if(p===1)return v=t[u],w=n?n(v):v,new _n(w,v.node,_n.BLACK,null,null);{const b=parseInt(p/2,10)+u,k=i(u,b),O=i(b+1,h);return v=t[b],w=n?n(v):v,new _n(w,v.node,_n.BLACK,k,O)}},s=function(u){let h=null,p=null,v=t.length;const w=function(k,O){const J=v-k,N=v;v-=k;const D=i(J+1,N),M=t[J],Q=n?n(M):M;b(new _n(Q,M.node,O,null,D))},b=function(k){h?(h.left=k,h=k):(p=k,h=k)};for(let k=0;k<u.count;++k){const O=u.nextBitIsOne(),J=Math.pow(2,u.count-(k+1));O?w(J,_n.BLACK):(w(J,_n.BLACK),w(J,_n.RED))}return p},o=new vW(t.length),a=s(o);return new Dr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vw;const zu={};class Ks{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ae(zu&&Ct,"ChildrenNode.ts has not been loaded"),vw=vw||new Ks({".priority":zu},{".priority":Ct}),vw}get(e){const n=Bl(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Dr?n:null}hasIndex(e){return Yr(this.indexSet_,e.toString())}addIndex(e,n){ae(e!==ws,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(We.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Zm(r,e.getCompare()):a=zu;const u=e.toString(),h=Object.assign({},this.indexSet_);h[u]=e;const p=Object.assign({},this.indexes_);return p[u]=a,new Ks(p,h)}addToIndexes(e,n){const r=Wm(this.indexes_,(i,s)=>{const o=Bl(this.indexSet_,s);if(ae(o,"Missing index implementation for "+s),i===zu)if(o.isDefinedOn(e.node)){const a=[],u=n.getIterator(We.Wrap);let h=u.getNext();for(;h;)h.name!==e.name&&a.push(h),h=u.getNext();return a.push(e),Zm(a,o.getCompare())}else return zu;else{const a=n.get(e.name);let u=i;return a&&(u=u.remove(new We(e.name,a))),u.insert(e,e.node)}});return new Ks(r,this.indexSet_)}removeFromIndexes(e,n){const r=Wm(this.indexes_,i=>{if(i===zu)return i;{const s=n.get(e.name);return s?i.remove(new We(e.name,s)):i}});return new Ks(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od;class Ae{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&GP(this.priorityNode_),this.children_.isEmpty()&&ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return od||(od=new Ae(new Dr(CI),null,Ks.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||od}updatePriority(e){return this.children_.isEmpty()?this:new Ae(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?od:n}}getChild(e){const n=je(e);return n===null?this:this.getImmediateChild(n).getChild(_t(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ae(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new We(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?od:this.priorityNode_;return new Ae(i,o,s)}}updateChild(e,n){const r=je(e);if(r===null)return n;{ae(je(e)!==".priority"||va(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(_t(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Ct,(o,a)=>{n[o]=a.val(e),r++,s&&Ae.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+HP(this.getPriority().val())+":"),this.forEachChild(Ct,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":EP(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new We(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new We(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new We(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,We.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,We.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ap?-1:0}withIndex(e){if(e===ws||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ae(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ws||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ct),i=n.getIterator(Ct);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ws?null:this.indexMap_.get(e.toString())}}Ae.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class _W extends Ae{constructor(){super(new Dr(CI),Ae.EMPTY_NODE,Ks.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ae.EMPTY_NODE}isEmpty(){return!1}}const ap=new _W;Object.defineProperties(We,{MIN:{value:new We(ya,Ae.EMPTY_NODE)},MAX:{value:new We(oo,ap)}});WP.__EMPTY_NODE=Ae.EMPTY_NODE;gn.__childrenNodeConstructor=Ae;fW(ap);gW(ap);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wW=!0;function Ft(t,e=null){if(t===null)return Ae.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ae(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new gn(n,Ft(e))}if(!(t instanceof Array)&&wW){const n=[];let r=!1;if(Cn(t,(o,a)=>{if(o.substring(0,1)!=="."){const u=Ft(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new We(o,u)))}}),n.length===0)return Ae.EMPTY_NODE;const s=Zm(n,dW,o=>o.name,CI);if(r){const o=Zm(n,Ct.getCompare());return new Ae(s,Ft(e),new Ks({".priority":o},{".priority":Ct}))}else return new Ae(s,Ft(e),Ks.Default)}else{let n=Ae.EMPTY_NODE;return Cn(t,(r,i)=>{if(Yr(t,r)&&r.substring(0,1)!=="."){const s=Ft(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ft(e))}}pW(Ft);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI extends lv{constructor(e){super(),this.indexPath_=e,ae(!qe(e)&&je(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?cu(e.name,n.name):s}makePost(e,n){const r=Ft(e),i=Ae.EMPTY_NODE.updateChild(this.indexPath_,r);return new We(n,i)}maxPost(){const e=Ae.EMPTY_NODE.updateChild(this.indexPath_,ap);return new We(oo,e)}toString(){return If(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW extends lv{compare(e,n){const r=e.node.compareTo(n.node);return r===0?cu(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return We.MIN}maxPost(){return We.MAX}makePost(e,n){const r=Ft(e);return new We(n,r)}toString(){return".value"}}const kI=new EW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(t){return{type:"value",snapshotNode:t}}function Mc(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Sf(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Cf(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function TW(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){ae(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Sf(n,a)):ae(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Mc(n,r)):o.trackChildChange(Cf(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ct,(i,s)=>{n.hasChild(i)||r.trackChildChange(Sf(i,s))}),n.isLeafNode()||n.forEachChild(Ct,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Cf(i,s,o))}else r.trackChildChange(Mc(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ae.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e){this.indexedFilter_=new xI(e.getIndex()),this.index_=e.getIndex(),this.startPost_=bf.getStartPost_(e),this.endPost_=bf.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new We(n,r))||(r=Ae.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Ae.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Ae.EMPTY_NODE);const s=this;return n.forEachChild(Ct,(o,a)=>{s.matches(new We(o,a))||(i=i.updateImmediateChild(o,Ae.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new bf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new We(n,r))||(r=Ae.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Ae.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Ae.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Ae.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Ae.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const v=this.index_.getCompare();o=(w,b)=>v(b,w)}else o=this.index_.getCompare();const a=e;ae(a.numChildren()===this.limit_,"");const u=new We(n,r),h=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),p=this.rangedFilter_.matches(u);if(a.hasChild(n)){const v=a.getImmediateChild(n);let w=i.getChildAfterChild(this.index_,h,this.reverse_);for(;w!=null&&(w.name===n||a.hasChild(w.name));)w=i.getChildAfterChild(this.index_,w,this.reverse_);const b=w==null?1:o(w,u);if(p&&!r.isEmpty()&&b>=0)return s!=null&&s.trackChildChange(Cf(n,r,v)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Sf(n,v));const O=a.updateImmediateChild(n,Ae.EMPTY_NODE);return w!=null&&this.rangedFilter_.matches(w)?(s!=null&&s.trackChildChange(Mc(w.name,w.node)),O.updateImmediateChild(w.name,w.node)):O}}else return r.isEmpty()?e:p&&o(h,u)>=0?(s!=null&&(s.trackChildChange(Sf(h.name,h.node)),s.trackChildChange(Mc(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(h.name,Ae.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ct}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ya}hasEnd(){return this.endSet_}getIndexEndValue(){return ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:oo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ct}copy(){const e=new uv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function SW(t){return t.loadsAllData()?new xI(t.getIndex()):t.hasLimit()?new IW(t):new bf(t)}function CW(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function bW(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function tE(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function kW(t,e,n){let r;return t.index_===ws||!!n?r=tE(t,e,n):r=tE(t,e,oo),r.startAfterSet_=!0,r}function nE(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function xW(t,e,n){let r;return t.index_===ws||!!n?r=nE(t,e,n):r=nE(t,e,ya),r.endBeforeSet_=!0,r}function cv(t,e){const n=t.copy();return n.index_=e,n}function R1(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ct?n="$priority":t.index_===kI?n="$value":t.index_===ws?n="$key":(ae(t.index_ instanceof bI,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ln(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ln(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ln(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ln(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ln(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function O1(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ct&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey extends BP{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=op("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=ey.getListenId_(e,r),a={};this.listens_[o]=a;const u=R1(e._queryParams);this.restRequest_(s+".json",u,(h,p)=>{let v=p;if(h===404&&(v=null,h=null),h===null&&this.onDataUpdate_(s,v,!1,r),Bl(this.listens_,o)===a){let w;h?h===401?w="permission_denied":w="rest_error:"+h:w="ok",i(w,null)}})}unlisten(e,n){const r=ey.getListenId_(e,n);delete this.listens_[r]}get(e){const n=R1(e._queryParams),r=e._path.toString(),i=new Nr;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+lu(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=gf(a.responseText)}catch{tr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else a.status!==401&&a.status!==404&&tr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(){this.rootNode_=Ae.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(){return{value:null,children:new Map}}function ch(t,e,n){if(qe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=je(e);t.children.has(r)||t.children.set(r,ty());const i=t.children.get(r);e=_t(e),ch(i,e,n)}}function rE(t,e){if(qe(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(Ct,(r,i)=>{ch(t,new lt(r),i)}),rE(t,e)}}else if(t.children.size>0){const n=je(e);return e=_t(e),t.children.has(n)&&rE(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function iE(t,e,n){t.value!==null?n(e,t.value):AW(t,(r,i)=>{const s=new lt(e.toString()+"/"+r);iE(i,s,n)})}function AW(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Cn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=10*1e3,PW=30*1e3,RW=5*60*1e3;class OW{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new DW(e);const r=L1+(PW-L1)*Math.random();$d(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Cn(e,(i,s)=>{s>0&&Yr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),$d(this.reportStats_.bind(this),Math.floor(Math.random()*2*RW))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vi;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Vi||(Vi={}));function NI(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function AI(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function DI(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Vi.ACK_USER_WRITE,this.source=NI()}operationForChild(e){if(qe(this.path)){if(this.affectedTree.value!=null)return ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new lt(e));return new ny(st(),n,this.revert)}}else return ae(je(this.path)===e,"operationForChild called for unrelated child."),new ny(_t(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n){this.source=e,this.path=n,this.type=Vi.LISTEN_COMPLETE}operationForChild(e){return qe(this.path)?new kf(this.source,st()):new kf(this.source,_t(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Vi.OVERWRITE}operationForChild(e){return qe(this.path)?new Wl(this.source,st(),this.snap.getImmediateChild(e)):new Wl(this.source,_t(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Vi.MERGE}operationForChild(e){if(qe(this.path)){const n=this.children.subtree(new lt(e));return n.isEmpty()?null:n.value?new Wl(this.source,st(),n.value):new Fc(this.source,st(),n)}else return ae(je(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Fc(this.source,_t(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(qe(e))return this.isFullyInitialized()&&!this.filtered_;const n=je(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function MW(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(TW(o.childName,o.snapshotNode))}),ad(t,i,"child_removed",e,r,n),ad(t,i,"child_added",e,r,n),ad(t,i,"child_moved",s,r,n),ad(t,i,"child_changed",e,r,n),ad(t,i,"value",e,r,n),i}function ad(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,u)=>$W(t,a,u)),o.forEach(a=>{const u=FW(t,a,s);i.forEach(h=>{h.respondsTo(a.type)&&e.push(h.createEvent(u,t.query_))})})}function FW(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function $W(t,e,n){if(e.childName==null||n.childName==null)throw rh("Should only compare child_ events.");const r=new We(e.childName,e.snapshotNode),i=new We(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t,e){return{eventCache:t,serverCache:e}}function Ud(t,e,n,r){return hv(new _a(e,n,r),t.serverCache)}function XP(t,e,n,r){return hv(t.eventCache,new _a(e,n,r))}function ry(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Hl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _w;const UW=()=>(_w||(_w=new Dr(Ez)),_w);class It{constructor(e,n=UW()){this.value=e,this.children=n}static fromObject(e){let n=new It(null);return Cn(e,(r,i)=>{n=n.set(new lt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:st(),value:this.value};if(qe(e))return null;{const r=je(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(_t(e),n);return s!=null?{path:Pt(new lt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(qe(e))return this;{const n=je(e),r=this.children.get(n);return r!==null?r.subtree(_t(e)):new It(null)}}set(e,n){if(qe(e))return new It(n,this.children);{const r=je(e),s=(this.children.get(r)||new It(null)).set(_t(e),n),o=this.children.insert(r,s);return new It(this.value,o)}}remove(e){if(qe(e))return this.children.isEmpty()?new It(null):new It(null,this.children);{const n=je(e),r=this.children.get(n);if(r){const i=r.remove(_t(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new It(null):new It(this.value,s)}else return this}}get(e){if(qe(e))return this.value;{const n=je(e),r=this.children.get(n);return r?r.get(_t(e)):null}}setTree(e,n){if(qe(e))return n;{const r=je(e),s=(this.children.get(r)||new It(null)).setTree(_t(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new It(this.value,o)}}fold(e){return this.fold_(st(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Pt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,st(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(qe(e))return null;{const s=je(e),o=this.children.get(s);return o?o.findOnPath_(_t(e),Pt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,st(),n)}foreachOnPath_(e,n,r){if(qe(e))return this;{this.value&&r(n,this.value);const i=je(e),s=this.children.get(i);return s?s.foreachOnPath_(_t(e),Pt(n,i),r):new It(null)}}foreach(e){this.foreach_(st(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Pt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.writeTree_=e}static empty(){return new Wi(new It(null))}}function Vd(t,e,n){if(qe(e))return new Wi(new It(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=pr(i,e);return s=s.updateChild(o,n),new Wi(t.writeTree_.set(i,s))}else{const i=new It(n),s=t.writeTree_.setTree(e,i);return new Wi(s)}}}function sE(t,e,n){let r=t;return Cn(n,(i,s)=>{r=Vd(r,Pt(e,i),s)}),r}function M1(t,e){if(qe(e))return Wi.empty();{const n=t.writeTree_.setTree(e,new It(null));return new Wi(n)}}function oE(t,e){return hu(t,e)!=null}function hu(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(pr(n.path,e)):null}function F1(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ct,(r,i)=>{e.push(new We(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new We(r,i.value))}),e}function ua(t,e){if(qe(e))return t;{const n=hu(t,e);return n!=null?new Wi(new It(n)):new Wi(t.writeTree_.subtree(e))}}function aE(t){return t.writeTree_.isEmpty()}function $c(t,e){return JP(st(),t.writeTree_,e)}function JP(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(ae(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=JP(Pt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Pt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t,e){return nR(e,t)}function VW(t,e,n,r,i){ae(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Vd(t.visibleWrites,e,n)),t.lastWriteId=r}function BW(t,e,n,r){ae(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=sE(t.visibleWrites,e,n),t.lastWriteId=r}function jW(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function qW(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ae(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&zW(a,r.path)?i=!1:mi(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return WW(t),!0;if(r.snap)t.visibleWrites=M1(t.visibleWrites,r.path);else{const a=r.children;Cn(a,u=>{t.visibleWrites=M1(t.visibleWrites,Pt(r.path,u))})}return!0}else return!1}function zW(t,e){if(t.snap)return mi(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&mi(Pt(t.path,n),e))return!0;return!1}function WW(t){t.visibleWrites=ZP(t.allWrites,HW,st()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function HW(t){return t.visible}function ZP(t,e,n){let r=Wi.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)mi(n,o)?(a=pr(n,o),r=Vd(r,a,s.snap)):mi(o,n)&&(a=pr(o,n),r=Vd(r,st(),s.snap.getChild(a)));else if(s.children){if(mi(n,o))a=pr(n,o),r=sE(r,a,s.children);else if(mi(o,n))if(a=pr(o,n),qe(a))r=sE(r,st(),s.children);else{const u=Bl(s.children,je(a));if(u){const h=u.getChild(_t(a));r=Vd(r,st(),h)}}}else throw rh("WriteRecord should have .snap or .children")}}return r}function eR(t,e,n,r,i){if(!r&&!i){const s=hu(t.visibleWrites,e);if(s!=null)return s;{const o=ua(t.visibleWrites,e);if(aE(o))return n;if(n==null&&!oE(o,st()))return null;{const a=n||Ae.EMPTY_NODE;return $c(o,a)}}}else{const s=ua(t.visibleWrites,e);if(!i&&aE(s))return n;if(!i&&n==null&&!oE(s,st()))return null;{const o=function(h){return(h.visible||i)&&(!r||!~r.indexOf(h.writeId))&&(mi(h.path,e)||mi(e,h.path))},a=ZP(t.allWrites,o,e),u=n||Ae.EMPTY_NODE;return $c(a,u)}}}function GW(t,e,n){let r=Ae.EMPTY_NODE;const i=hu(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ct,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=ua(t.visibleWrites,e);return n.forEachChild(Ct,(o,a)=>{const u=$c(ua(s,new lt(o)),a);r=r.updateImmediateChild(o,u)}),F1(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=ua(t.visibleWrites,e);return F1(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function KW(t,e,n,r,i){ae(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Pt(e,n);if(oE(t.visibleWrites,s))return null;{const o=ua(t.visibleWrites,s);return aE(o)?i.getChild(n):$c(o,i.getChild(n))}}function QW(t,e,n,r){const i=Pt(e,n),s=hu(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=ua(t.visibleWrites,i);return $c(o,r.getNode().getImmediateChild(n))}else return null}function YW(t,e){return hu(t.visibleWrites,e)}function XW(t,e,n,r,i,s,o){let a;const u=ua(t.visibleWrites,e),h=hu(u,st());if(h!=null)a=h;else if(n!=null)a=$c(u,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const p=[],v=o.getCompare(),w=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let b=w.getNext();for(;b&&p.length<i;)v(b,r)!==0&&p.push(b),b=w.getNext();return p}else return[]}function JW(){return{visibleWrites:Wi.empty(),allWrites:[],lastWriteId:-1}}function iy(t,e,n,r){return eR(t.writeTree,t.treePath,e,n,r)}function PI(t,e){return GW(t.writeTree,t.treePath,e)}function $1(t,e,n,r){return KW(t.writeTree,t.treePath,e,n,r)}function sy(t,e){return YW(t.writeTree,Pt(t.treePath,e))}function ZW(t,e,n,r,i,s){return XW(t.writeTree,t.treePath,e,n,r,i,s)}function RI(t,e,n){return QW(t.writeTree,t.treePath,e,n)}function tR(t,e){return nR(Pt(t.treePath,e),t.writeTree)}function nR(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ae(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ae(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Cf(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Sf(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Mc(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Cf(r,e.snapshotNode,i.oldSnap));else throw rh("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const rR=new tH;class OI{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new _a(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return RI(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Hl(this.viewCache_),s=ZW(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nH(t){return{filter:t}}function rH(t,e){ae(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ae(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function iH(t,e,n,r,i){const s=new eH;let o,a;if(n.type===Vi.OVERWRITE){const h=n;h.source.fromUser?o=lE(t,e,h.path,h.snap,r,i,s):(ae(h.source.fromServer,"Unknown source."),a=h.source.tagged||e.serverCache.isFiltered()&&!qe(h.path),o=oy(t,e,h.path,h.snap,r,i,a,s))}else if(n.type===Vi.MERGE){const h=n;h.source.fromUser?o=oH(t,e,h.path,h.children,r,i,s):(ae(h.source.fromServer,"Unknown source."),a=h.source.tagged||e.serverCache.isFiltered(),o=uE(t,e,h.path,h.children,r,i,a,s))}else if(n.type===Vi.ACK_USER_WRITE){const h=n;h.revert?o=uH(t,e,h.path,r,i,s):o=aH(t,e,h.path,h.affectedTree,r,i,s)}else if(n.type===Vi.LISTEN_COMPLETE)o=lH(t,e,n.path,r,s);else throw rh("Unknown operation type: "+n.type);const u=s.getChanges();return sH(e,o,u),{viewCache:o,changes:u}}function sH(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ry(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(YP(ry(e)))}}function iR(t,e,n,r,i,s){const o=e.eventCache;if(sy(r,n)!=null)return e;{let a,u;if(qe(n))if(ae(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const h=Hl(e),p=h instanceof Ae?h:Ae.EMPTY_NODE,v=PI(r,p);a=t.filter.updateFullNode(e.eventCache.getNode(),v,s)}else{const h=iy(r,Hl(e));a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const h=je(n);if(h===".priority"){ae(va(n)===1,"Can't have a priority with additional path components");const p=o.getNode();u=e.serverCache.getNode();const v=$1(r,n,p,u);v!=null?a=t.filter.updatePriority(p,v):a=o.getNode()}else{const p=_t(n);let v;if(o.isCompleteForChild(h)){u=e.serverCache.getNode();const w=$1(r,n,o.getNode(),u);w!=null?v=o.getNode().getImmediateChild(h).updateChild(p,w):v=o.getNode().getImmediateChild(h)}else v=RI(r,h,e.serverCache);v!=null?a=t.filter.updateChild(o.getNode(),h,v,p,i,s):a=o.getNode()}}return Ud(e,a,o.isFullyInitialized()||qe(n),t.filter.filtersNodes())}}function oy(t,e,n,r,i,s,o,a){const u=e.serverCache;let h;const p=o?t.filter:t.filter.getIndexedFilter();if(qe(n))h=p.updateFullNode(u.getNode(),r,null);else if(p.filtersNodes()&&!u.isFiltered()){const b=u.getNode().updateChild(n,r);h=p.updateFullNode(u.getNode(),b,null)}else{const b=je(n);if(!u.isCompleteForPath(n)&&va(n)>1)return e;const k=_t(n),J=u.getNode().getImmediateChild(b).updateChild(k,r);b===".priority"?h=p.updatePriority(u.getNode(),J):h=p.updateChild(u.getNode(),b,J,k,rR,null)}const v=XP(e,h,u.isFullyInitialized()||qe(n),p.filtersNodes()),w=new OI(i,v,s);return iR(t,v,n,i,w,a)}function lE(t,e,n,r,i,s,o){const a=e.eventCache;let u,h;const p=new OI(i,e,s);if(qe(n))h=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=Ud(e,h,!0,t.filter.filtersNodes());else{const v=je(n);if(v===".priority")h=t.filter.updatePriority(e.eventCache.getNode(),r),u=Ud(e,h,a.isFullyInitialized(),a.isFiltered());else{const w=_t(n),b=a.getNode().getImmediateChild(v);let k;if(qe(w))k=r;else{const O=p.getCompleteChild(v);O!=null?TI(w)===".priority"&&O.getChild(qP(w)).isEmpty()?k=O:k=O.updateChild(w,r):k=Ae.EMPTY_NODE}if(b.equals(k))u=e;else{const O=t.filter.updateChild(a.getNode(),v,k,w,p,o);u=Ud(e,O,a.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function U1(t,e){return t.eventCache.isCompleteForChild(e)}function oH(t,e,n,r,i,s,o){let a=e;return r.foreach((u,h)=>{const p=Pt(n,u);U1(e,je(p))&&(a=lE(t,a,p,h,i,s,o))}),r.foreach((u,h)=>{const p=Pt(n,u);U1(e,je(p))||(a=lE(t,a,p,h,i,s,o))}),a}function V1(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function uE(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,h;qe(n)?h=r:h=new It(null).setTree(n,r);const p=e.serverCache.getNode();return h.children.inorderTraversal((v,w)=>{if(p.hasChild(v)){const b=e.serverCache.getNode().getImmediateChild(v),k=V1(t,b,w);u=oy(t,u,new lt(v),k,i,s,o,a)}}),h.children.inorderTraversal((v,w)=>{const b=!e.serverCache.isCompleteForChild(v)&&w.value===null;if(!p.hasChild(v)&&!b){const k=e.serverCache.getNode().getImmediateChild(v),O=V1(t,k,w);u=oy(t,u,new lt(v),O,i,s,o,a)}}),u}function aH(t,e,n,r,i,s,o){if(sy(i,n)!=null)return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(qe(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return oy(t,e,n,u.getNode().getChild(n),i,s,a,o);if(qe(n)){let h=new It(null);return u.getNode().forEachChild(ws,(p,v)=>{h=h.set(new lt(p),v)}),uE(t,e,n,h,i,s,a,o)}else return e}else{let h=new It(null);return r.foreach((p,v)=>{const w=Pt(n,p);u.isCompleteForPath(w)&&(h=h.set(p,u.getNode().getChild(w)))}),uE(t,e,n,h,i,s,a,o)}}function lH(t,e,n,r,i){const s=e.serverCache,o=XP(e,s.getNode(),s.isFullyInitialized()||qe(n),s.isFiltered());return iR(t,o,n,r,rR,i)}function uH(t,e,n,r,i,s){let o;if(sy(r,n)!=null)return e;{const a=new OI(r,e,i),u=e.eventCache.getNode();let h;if(qe(n)||je(n)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=iy(r,Hl(e));else{const v=e.serverCache.getNode();ae(v instanceof Ae,"serverChildren would be complete if leaf node"),p=PI(r,v)}p=p,h=t.filter.updateFullNode(u,p,s)}else{const p=je(n);let v=RI(r,p,e.serverCache);v==null&&e.serverCache.isCompleteForChild(p)&&(v=u.getImmediateChild(p)),v!=null?h=t.filter.updateChild(u,p,v,_t(n),a,s):e.eventCache.getNode().hasChild(p)?h=t.filter.updateChild(u,p,Ae.EMPTY_NODE,_t(n),a,s):h=u,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=iy(r,Hl(e)),o.isLeafNode()&&(h=t.filter.updateFullNode(h,o,s)))}return o=e.serverCache.isFullyInitialized()||sy(r,st())!=null,Ud(e,h,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new xI(r.getIndex()),s=SW(r);this.processor_=nH(s);const o=n.serverCache,a=n.eventCache,u=i.updateFullNode(Ae.EMPTY_NODE,o.getNode(),null),h=s.updateFullNode(Ae.EMPTY_NODE,a.getNode(),null),p=new _a(u,o.isFullyInitialized(),i.filtersNodes()),v=new _a(h,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=hv(v,p),this.eventGenerator_=new LW(this.query_)}get query(){return this.query_}}function hH(t){return t.viewCache_.serverCache.getNode()}function dH(t){return ry(t.viewCache_)}function fH(t,e){const n=Hl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!qe(e)&&!n.getImmediateChild(je(e)).isEmpty())?n.getChild(e):null}function B1(t){return t.eventRegistrations_.length===0}function pH(t,e){t.eventRegistrations_.push(e)}function j1(t,e,n){const r=[];if(n){ae(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function q1(t,e,n,r){e.type===Vi.MERGE&&e.source.queryId!==null&&(ae(Hl(t.viewCache_),"We should always have a full cache before handling merges"),ae(ry(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=iH(t.processor_,i,e,n,r);return rH(t.processor_,s.viewCache),ae(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,sR(t,s.changes,s.viewCache.eventCache.getNode(),null)}function gH(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ct,(s,o)=>{r.push(Mc(s,o))}),n.isFullyInitialized()&&r.push(YP(n.getNode())),sR(t,r,n.getNode(),e)}function sR(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return MW(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ay;class oR{constructor(){this.views=new Map}}function mH(t){ae(!ay,"__referenceConstructor has already been defined"),ay=t}function yH(){return ae(ay,"Reference.ts has not been loaded"),ay}function vH(t){return t.views.size===0}function LI(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return ae(s!=null,"SyncTree gave us an op for an invalid query."),q1(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(q1(o,e,n,r));return s}}function aR(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=iy(n,i?r:null),u=!1;a?u=!0:r instanceof Ae?(a=PI(n,r),u=!1):(a=Ae.EMPTY_NODE,u=!1);const h=hv(new _a(a,u,!1),new _a(r,i,!1));return new cH(e,h)}return o}function _H(t,e,n,r,i,s){const o=aR(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),pH(o,n),gH(o,n)}function wH(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=wa(t);if(i==="default")for(const[u,h]of t.views.entries())o=o.concat(j1(h,n,r)),B1(h)&&(t.views.delete(u),h.query._queryParams.loadsAllData()||s.push(h.query));else{const u=t.views.get(i);u&&(o=o.concat(j1(u,n,r)),B1(u)&&(t.views.delete(i),u.query._queryParams.loadsAllData()||s.push(u.query)))}return a&&!wa(t)&&s.push(new(yH())(e._repo,e._path)),{removed:s,events:o}}function lR(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ca(t,e){let n=null;for(const r of t.views.values())n=n||fH(r,e);return n}function uR(t,e){if(e._queryParams.loadsAllData())return fv(t);{const r=e._queryIdentifier;return t.views.get(r)}}function cR(t,e){return uR(t,e)!=null}function wa(t){return fv(t)!=null}function fv(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ly;function EH(t){ae(!ly,"__referenceConstructor has already been defined"),ly=t}function TH(){return ae(ly,"Reference.ts has not been loaded"),ly}let IH=1;class z1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new It(null),this.pendingWriteTree_=JW(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function MI(t,e,n,r,i){return VW(t.pendingWriteTree_,e,n,r,i),i?hh(t,new Wl(NI(),e,n)):[]}function SH(t,e,n,r){BW(t.pendingWriteTree_,e,n,r);const i=It.fromObject(n);return hh(t,new Fc(NI(),e,i))}function Xo(t,e,n=!1){const r=jW(t.pendingWriteTree_,e);if(qW(t.pendingWriteTree_,e)){let s=new It(null);return r.snap!=null?s=s.set(st(),!0):Cn(r.children,o=>{s=s.set(new lt(o),!0)}),hh(t,new ny(r.path,s,n))}else return[]}function lp(t,e,n){return hh(t,new Wl(AI(),e,n))}function CH(t,e,n){const r=It.fromObject(n);return hh(t,new Fc(AI(),e,r))}function bH(t,e){return hh(t,new kf(AI(),e))}function kH(t,e,n){const r=FI(t,n);if(r){const i=$I(r),s=i.path,o=i.queryId,a=pr(s,e),u=new kf(DI(o),a);return UI(t,s,u)}else return[]}function uy(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||cR(o,e))){const u=wH(o,e,n,r);vH(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const h=u.removed;if(a=u.events,!i){const p=h.findIndex(w=>w._queryParams.loadsAllData())!==-1,v=t.syncPointTree_.findOnPath(s,(w,b)=>wa(b));if(p&&!v){const w=t.syncPointTree_.subtree(s);if(!w.isEmpty()){const b=AH(w);for(let k=0;k<b.length;++k){const O=b[k],J=O.query,N=pR(t,O);t.listenProvider_.startListening(Bd(J),xf(t,J),N.hashFn,N.onComplete)}}}!v&&h.length>0&&!r&&(p?t.listenProvider_.stopListening(Bd(e),null):h.forEach(w=>{const b=t.queryToTagMap.get(gv(w));t.listenProvider_.stopListening(Bd(w),b)}))}DH(t,h)}return a}function hR(t,e,n,r){const i=FI(t,r);if(i!=null){const s=$I(i),o=s.path,a=s.queryId,u=pr(o,e),h=new Wl(DI(a),u,n);return UI(t,o,h)}else return[]}function xH(t,e,n,r){const i=FI(t,r);if(i){const s=$I(i),o=s.path,a=s.queryId,u=pr(o,e),h=It.fromObject(n),p=new Fc(DI(a),u,h);return UI(t,o,p)}else return[]}function cE(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(w,b)=>{const k=pr(w,i);s=s||ca(b,k),o=o||wa(b)});let a=t.syncPointTree_.get(i);a?(o=o||wa(a),s=s||ca(a,st())):(a=new oR,t.syncPointTree_=t.syncPointTree_.set(i,a));let u;s!=null?u=!0:(u=!1,s=Ae.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((b,k)=>{const O=ca(k,st());O&&(s=s.updateImmediateChild(b,O))}));const h=cR(a,e);if(!h&&!e._queryParams.loadsAllData()){const w=gv(e);ae(!t.queryToTagMap.has(w),"View does not exist, but we have a tag");const b=PH();t.queryToTagMap.set(w,b),t.tagToQueryMap.set(b,w)}const p=dv(t.pendingWriteTree_,i);let v=_H(a,e,n,p,s,u);if(!h&&!o&&!r){const w=uR(a,e);v=v.concat(RH(t,e,w))}return v}function pv(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const u=pr(o,e),h=ca(a,u);if(h)return h});return eR(i,e,s,n,!0)}function NH(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(h,p)=>{const v=pr(h,n);r=r||ca(p,v)});let i=t.syncPointTree_.get(n);i?r=r||ca(i,st()):(i=new oR,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new _a(r,!0,!1):null,a=dv(t.pendingWriteTree_,e._path),u=aR(i,e,a,s?o.getNode():Ae.EMPTY_NODE,s);return dH(u)}function hh(t,e){return dR(e,t.syncPointTree_,null,dv(t.pendingWriteTree_,st()))}function dR(t,e,n,r){if(qe(t.path))return fR(t,e,n,r);{const i=e.get(st());n==null&&i!=null&&(n=ca(i,st()));let s=[];const o=je(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const h=n?n.getImmediateChild(o):null,p=tR(r,o);s=s.concat(dR(a,u,h,p))}return i&&(s=s.concat(LI(i,t,r,n))),s}}function fR(t,e,n,r){const i=e.get(st());n==null&&i!=null&&(n=ca(i,st()));let s=[];return e.children.inorderTraversal((o,a)=>{const u=n?n.getImmediateChild(o):null,h=tR(r,o),p=t.operationForChild(o);p&&(s=s.concat(fR(p,a,u,h)))}),i&&(s=s.concat(LI(i,t,r,n))),s}function pR(t,e){const n=e.query,r=xf(t,n);return{hashFn:()=>(hH(e)||Ae.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?kH(t,n._path,r):bH(t,n._path);{const s=Sz(i,n);return uy(t,n,null,s)}}}}function xf(t,e){const n=gv(e);return t.queryToTagMap.get(n)}function gv(t){return t._path.toString()+"$"+t._queryIdentifier}function FI(t,e){return t.tagToQueryMap.get(e)}function $I(t){const e=t.indexOf("$");return ae(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new lt(t.substr(0,e))}}function UI(t,e,n){const r=t.syncPointTree_.get(e);ae(r,"Missing sync point for query tag that we're tracking");const i=dv(t.pendingWriteTree_,e);return LI(r,n,i,null)}function AH(t){return t.fold((e,n,r)=>{if(n&&wa(n))return[fv(n)];{let i=[];return n&&(i=lR(n)),Cn(r,(s,o)=>{i=i.concat(o)}),i}})}function Bd(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(TH())(t._repo,t._path):t}function DH(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=gv(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function PH(){return IH++}function RH(t,e,n){const r=e._path,i=xf(t,e),s=pR(t,n),o=t.listenProvider_.startListening(Bd(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)ae(!wa(a.value),"If we're adding a query, it shouldn't be shadowed");else{const u=a.fold((h,p,v)=>{if(!qe(h)&&p&&wa(p))return[fv(p).query];{let w=[];return p&&(w=w.concat(lR(p).map(b=>b.query))),Cn(v,(b,k)=>{w=w.concat(k)}),w}});for(let h=0;h<u.length;++h){const p=u[h];t.listenProvider_.stopListening(Bd(p),xf(t,p))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new VI(n)}node(){return this.node_}}class BI{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Pt(this.path_,e);return new BI(this.syncTree_,n)}node(){return pv(this.syncTree_,this.path_)}}const OH=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},W1=function(t,e,n){if(!t||typeof t!="object")return t;if(ae(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return LH(t[".sv"],e,n);if(typeof t[".sv"]=="object")return MH(t[".sv"],e);ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},LH=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ae(!1,"Unexpected server value: "+t)}},MH=function(t,e,n){t.hasOwnProperty("increment")||ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ae(!1,"Unexpected increment value: "+r);const i=e.node();if(ae(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},gR=function(t,e,n,r){return qI(e,new BI(n,t),r)},jI=function(t,e,n){return qI(t,new VI(e),n)};function qI(t,e,n){const r=t.getPriority().val(),i=W1(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=W1(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new gn(a,Ft(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new gn(i))),o.forEachChild(Ct,(a,u)=>{const h=qI(u,e.getImmediateChild(a),n);h!==u&&(s=s.updateImmediateChild(a,h))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function mv(t,e){let n=e instanceof lt?e:new lt(e),r=t,i=je(n);for(;i!==null;){const s=Bl(r.node.children,i)||{children:{},childCount:0};r=new zI(i,r,s),n=_t(n),i=je(n)}return r}function du(t){return t.node.value}function WI(t,e){t.node.value=e,hE(t)}function mR(t){return t.node.childCount>0}function FH(t){return du(t)===void 0&&!mR(t)}function yv(t,e){Cn(t.node.children,(n,r)=>{e(new zI(n,t,r))})}function yR(t,e,n,r){n&&!r&&e(t),yv(t,i=>{yR(i,e,!0,r)}),n&&r&&e(t)}function $H(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function up(t){return new lt(t.parent===null?t.name:up(t.parent)+"/"+t.name)}function hE(t){t.parent!==null&&UH(t.parent,t.name,t)}function UH(t,e,n){const r=FH(n),i=Yr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,hE(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,hE(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VH=/[\[\].#$\/\u0000-\u001F\u007F]/,BH=/[\[\].#$\u0000-\u001F\u007F]/,ww=10*1024*1024,vv=function(t){return typeof t=="string"&&t.length!==0&&!VH.test(t)},vR=function(t){return typeof t=="string"&&t.length!==0&&!BH.test(t)},jH=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),vR(t)},Nf=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!av(t)||t&&typeof t=="object"&&Yr(t,".sv")},Cs=function(t,e,n,r){r&&e===void 0||cp($r(t,"value"),e,n)},cp=function(t,e,n){const r=n instanceof lt?new iW(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+dl(r));if(typeof e=="function")throw new Error(t+"contains a function "+dl(r)+" with contents = "+e.toString());if(av(e))throw new Error(t+"contains "+e.toString()+" "+dl(r));if(typeof e=="string"&&e.length>ww/3&&Qy(e)>ww)throw new Error(t+"contains a string greater than "+ww+" utf8 bytes "+dl(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Cn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!vv(o)))throw new Error(t+" contains an invalid key ("+o+") "+dl(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);sW(r,o),cp(t,a,r),oW(r)}),i&&s)throw new Error(t+' contains ".value" child '+dl(r)+" in addition to actual children.")}},qH=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=If(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!vv(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(rW);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&mi(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},_R=function(t,e,n,r){if(r&&e===void 0)return;const i=$r(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Cn(e,(o,a)=>{const u=new lt(o);if(cp(i,a,Pt(n,u)),TI(u)===".priority"&&!Nf(a))throw new Error(i+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(u)}),qH(i,s)},HI=function(t,e,n){if(!(n&&e===void 0)){if(av(e))throw new Error($r(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nf(e))throw new Error($r(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},hp=function(t,e,n,r){if(!(r&&n===void 0)&&!vv(n))throw new Error($r(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Af=function(t,e,n,r){if(!(r&&n===void 0)&&!vR(n))throw new Error($r(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},zH=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Af(t,e,n,r)},yi=function(t,e){if(je(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},wR=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!vv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!jH(n))throw new Error($r(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function _v(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!II(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function ER(t,e,n){_v(t,n),TR(t,r=>II(r,e))}function Jr(t,e,n){_v(t,n),TR(t,r=>mi(r,e)||mi(e,r))}function TR(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(HH(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function HH(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Rl&&En("event: "+n.toString()),uh(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="repo_interrupt",GH=25;class KH{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new WH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ty(),this.transactionQueueTree_=new zI,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function QH(t,e,n){if(t.stats_=wI(t.repoInfo_),t.forceRestClient_||xz())t.server_=new ey(t.repoInfo_,(r,i,s,o)=>{H1(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>G1(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ln(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Zs(t.repoInfo_,e,(r,i,s,o)=>{H1(t,r,i,s,o)},r=>{G1(t,r)},r=>{YH(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Rz(t.repoInfo_,()=>new OW(t.stats_,t.server_)),t.infoData_=new NW,t.infoSyncTree_=new z1({startListening:(r,i,s,o)=>{let a=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(a=lp(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),GI(t,"connected",!1),t.serverSyncTree_=new z1({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,u)=>{const h=o(a,u);Jr(t.eventQueue_,r._path,h)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function SR(t){const n=t.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function dp(t){return OH({timestamp:SR(t)})}function H1(t,e,n,r,i){t.dataUpdateCount++;const s=new lt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const u=Wm(n,h=>Ft(h));o=xH(t.serverSyncTree_,s,u,i)}else{const u=Ft(n);o=hR(t.serverSyncTree_,s,u,i)}else if(r){const u=Wm(n,h=>Ft(h));o=CH(t.serverSyncTree_,s,u)}else{const u=Ft(n);o=lp(t.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=Uc(t,s)),Jr(t.eventQueue_,a,o)}function G1(t,e){GI(t,"connected",e),e===!1&&ZH(t)}function YH(t,e){Cn(e,(n,r)=>{GI(t,n,r)})}function GI(t,e,n){const r=new lt("/.info/"+e),i=Ft(n);t.infoData_.updateSnapshot(r,i);const s=lp(t.infoSyncTree_,r,i);Jr(t.eventQueue_,r,s)}function wv(t){return t.nextWriteId_++}function XH(t,e,n){const r=NH(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Ft(i).withIndex(e._queryParams.getIndex());cE(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=lp(t.serverSyncTree_,e._path,s);else{const a=xf(t.serverSyncTree_,e);o=hR(t.serverSyncTree_,e._path,s,a)}return Jr(t.eventQueue_,e._path,o),uy(t.serverSyncTree_,e,n,null,!0),s},i=>(dh(t,"get for query "+ln(e)+" failed: "+i),Promise.reject(new Error(i))))}function KI(t,e,n,r,i){dh(t,"set",{path:e.toString(),value:n,priority:r});const s=dp(t),o=Ft(n,r),a=pv(t.serverSyncTree_,e),u=jI(o,a,s),h=wv(t),p=MI(t.serverSyncTree_,e,u,h,!0);_v(t.eventQueue_,p),t.server_.put(e.toString(),o.val(!0),(w,b)=>{const k=w==="ok";k||tr("set at "+e+" failed: "+w);const O=Xo(t.serverSyncTree_,h,!k);Jr(t.eventQueue_,e,O),Ea(t,i,w,b)});const v=YI(t,e);Uc(t,v),Jr(t.eventQueue_,v,[])}function JH(t,e,n,r){dh(t,"update",{path:e.toString(),value:n});let i=!0;const s=dp(t),o={};if(Cn(n,(a,u)=>{i=!1,o[a]=gR(Pt(e,a),Ft(u),t.serverSyncTree_,s)}),i)En("update() called with empty data.  Don't do anything."),Ea(t,r,"ok",void 0);else{const a=wv(t),u=SH(t.serverSyncTree_,e,o,a);_v(t.eventQueue_,u),t.server_.merge(e.toString(),n,(h,p)=>{const v=h==="ok";v||tr("update at "+e+" failed: "+h);const w=Xo(t.serverSyncTree_,a,!v),b=w.length>0?Uc(t,e):e;Jr(t.eventQueue_,b,w),Ea(t,r,h,p)}),Cn(n,h=>{const p=YI(t,Pt(e,h));Uc(t,p)}),Jr(t.eventQueue_,e,[])}}function ZH(t){dh(t,"onDisconnectEvents");const e=dp(t),n=ty();iE(t.onDisconnect_,st(),(i,s)=>{const o=gR(i,s,t.serverSyncTree_,e);ch(n,i,o)});let r=[];iE(n,st(),(i,s)=>{r=r.concat(lp(t.serverSyncTree_,i,s));const o=YI(t,i);Uc(t,o)}),t.onDisconnect_=ty(),Jr(t.eventQueue_,st(),r)}function e3(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&rE(t.onDisconnect_,e),Ea(t,n,r,i)})}function K1(t,e,n,r){const i=Ft(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&ch(t.onDisconnect_,e,i),Ea(t,r,s,o)})}function t3(t,e,n,r,i){const s=Ft(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&ch(t.onDisconnect_,e,s),Ea(t,i,o,a)})}function n3(t,e,n,r){if(zm(n)){En("onDisconnect().update() called with empty data.  Don't do anything."),Ea(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&Cn(n,(o,a)=>{const u=Ft(a);ch(t.onDisconnect_,Pt(e,o),u)}),Ea(t,r,i,s)})}function r3(t,e,n){let r;je(e._path)===".info"?r=cE(t.infoSyncTree_,e,n):r=cE(t.serverSyncTree_,e,n),ER(t.eventQueue_,e._path,r)}function dE(t,e,n){let r;je(e._path)===".info"?r=uy(t.infoSyncTree_,e,n):r=uy(t.serverSyncTree_,e,n),ER(t.eventQueue_,e._path,r)}function CR(t){t.persistentConnection_&&t.persistentConnection_.interrupt(IR)}function i3(t){t.persistentConnection_&&t.persistentConnection_.resume(IR)}function dh(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),En(n,...e)}function Ea(t,e,n,r){e&&uh(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function s3(t,e,n,r,i,s){dh(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:wP(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=QI(t,e,void 0);o.currentInputSnapshot=a;const u=o.update(a.val());if(u===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{cp("transaction failed: Data returned ",u,o.path),o.status=0;const h=mv(t.transactionQueueTree_,e),p=du(h)||[];p.push(o),WI(h,p);let v;typeof u=="object"&&u!==null&&Yr(u,".priority")?(v=Bl(u,".priority"),ae(Nf(v),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):v=(pv(t.serverSyncTree_,e)||Ae.EMPTY_NODE).getPriority().val();const w=dp(t),b=Ft(u,v),k=jI(b,a,w);o.currentOutputSnapshotRaw=b,o.currentOutputSnapshotResolved=k,o.currentWriteId=wv(t);const O=MI(t.serverSyncTree_,e,k,o.currentWriteId,o.applyLocally);Jr(t.eventQueue_,e,O),Ev(t,t.transactionQueueTree_)}}function QI(t,e,n){return pv(t.serverSyncTree_,e,n)||Ae.EMPTY_NODE}function Ev(t,e=t.transactionQueueTree_){if(e||Tv(t,e),du(e)){const n=kR(t,e);ae(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&o3(t,up(e),n)}else mR(e)&&yv(e,n=>{Ev(t,n)})}function o3(t,e,n){const r=n.map(h=>h.currentWriteId),i=QI(t,e,r);let s=i;const o=i.hash();for(let h=0;h<n.length;h++){const p=n[h];ae(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const v=pr(e,p.path);s=s.updateChild(v,p.currentOutputSnapshotRaw)}const a=s.val(!0),u=e;t.server_.put(u.toString(),a,h=>{dh(t,"transaction put response",{path:u.toString(),status:h});let p=[];if(h==="ok"){const v=[];for(let w=0;w<n.length;w++)n[w].status=2,p=p.concat(Xo(t.serverSyncTree_,n[w].currentWriteId)),n[w].onComplete&&v.push(()=>n[w].onComplete(null,!0,n[w].currentOutputSnapshotResolved)),n[w].unwatcher();Tv(t,mv(t.transactionQueueTree_,e)),Ev(t,t.transactionQueueTree_),Jr(t.eventQueue_,e,p);for(let w=0;w<v.length;w++)uh(v[w])}else{if(h==="datastale")for(let v=0;v<n.length;v++)n[v].status===3?n[v].status=4:n[v].status=0;else{tr("transaction at "+u.toString()+" failed: "+h);for(let v=0;v<n.length;v++)n[v].status=4,n[v].abortReason=h}Uc(t,e)}},o)}function Uc(t,e){const n=bR(t,e),r=up(n),i=kR(t,n);return a3(t,i,r),r}function a3(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const u=e[a],h=pr(n,u.path);let p=!1,v;if(ae(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)p=!0,v=u.abortReason,i=i.concat(Xo(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=GH)p=!0,v="maxretry",i=i.concat(Xo(t.serverSyncTree_,u.currentWriteId,!0));else{const w=QI(t,u.path,o);u.currentInputSnapshot=w;const b=e[a].update(w.val());if(b!==void 0){cp("transaction failed: Data returned ",b,u.path);let k=Ft(b);typeof b=="object"&&b!=null&&Yr(b,".priority")||(k=k.updatePriority(w.getPriority()));const J=u.currentWriteId,N=dp(t),D=jI(k,w,N);u.currentOutputSnapshotRaw=k,u.currentOutputSnapshotResolved=D,u.currentWriteId=wv(t),o.splice(o.indexOf(J),1),i=i.concat(MI(t.serverSyncTree_,u.path,D,u.currentWriteId,u.applyLocally)),i=i.concat(Xo(t.serverSyncTree_,J,!0))}else p=!0,v="nodata",i=i.concat(Xo(t.serverSyncTree_,u.currentWriteId,!0))}Jr(t.eventQueue_,n,i),i=[],p&&(e[a].status=2,function(w){setTimeout(w,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(v==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(v),!1,null))))}Tv(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)uh(r[a]);Ev(t,t.transactionQueueTree_)}function bR(t,e){let n,r=t.transactionQueueTree_;for(n=je(e);n!==null&&du(r)===void 0;)r=mv(r,n),e=_t(e),n=je(e);return r}function kR(t,e){const n=[];return xR(t,e,n),n.sort((r,i)=>r.order-i.order),n}function xR(t,e,n){const r=du(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);yv(e,i=>{xR(t,i,n)})}function Tv(t,e){const n=du(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,WI(e,n.length>0?n:void 0)}yv(e,r=>{Tv(t,r)})}function YI(t,e){const n=up(bR(t,e)),r=mv(t.transactionQueueTree_,e);return $H(r,i=>{Ew(t,i)}),Ew(t,r),yR(r,i=>{Ew(t,i)}),n}function Ew(t,e){const n=du(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ae(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(ae(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Xo(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?WI(e,void 0):n.length=s+1,Jr(t.eventQueue_,up(e),i);for(let o=0;o<r.length;o++)uh(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function u3(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):tr(`Invalid query segment '${n}' in query '${t}'`)}return e}const fE=function(t,e){const n=c3(t),r=n.namespace;n.domain==="firebase.com"&&Ss(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ss("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||_z();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new OP(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new lt(n.pathString)}},c3=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",u=443;if(typeof t=="string"){let h=t.indexOf("//");h>=0&&(a=t.substring(0,h-1),t=t.substring(h+2));let p=t.indexOf("/");p===-1&&(p=t.length);let v=t.indexOf("?");v===-1&&(v=t.length),e=t.substring(0,Math.min(p,v)),p<v&&(i=l3(t.substring(p,v)));const w=u3(t.substring(Math.min(t.length,v)));h=e.indexOf(":"),h>=0?(o=a==="https"||a==="wss",u=parseInt(e.substring(h+1),10)):h=e.length;const b=e.slice(0,h);if(b.toLowerCase()==="localhost")n="localhost";else if(b.split(".").length<=2)n=b;else{const k=e.indexOf(".");r=e.substring(0,k).toLowerCase(),n=e.substring(k+1),s=r}"ns"in w&&(s=w.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",h3=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Q1.charAt(n%64),n=Math.floor(n/64);ae(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Q1.charAt(e[i]);return ae(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ln(this.snapshot.exportVal())}}class AR{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Nr;return e3(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){yi("OnDisconnect.remove",this._path);const e=new Nr;return K1(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){yi("OnDisconnect.set",this._path),Cs("OnDisconnect.set",e,this._path,!1);const n=new Nr;return K1(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){yi("OnDisconnect.setWithPriority",this._path),Cs("OnDisconnect.setWithPriority",e,this._path,!1),HI("OnDisconnect.setWithPriority",n,!1);const r=new Nr;return t3(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){yi("OnDisconnect.update",this._path),_R("OnDisconnect.update",e,this._path,!1);const n=new Nr;return n3(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return qe(this._path)?null:TI(this._path)}get ref(){return new Si(this._repo,this._path)}get _queryIdentifier(){const e=O1(this._queryParams),n=vI(e);return n==="{}"?"default":n}get _queryObject(){return O1(this._queryParams)}isEqual(e){if(e=me(e),!(e instanceof Vr))return!1;const n=this._repo===e._repo,r=II(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+nW(this._path)}}function Iv(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function La(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ws){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==ya)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==oo)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===Ct){if(e!=null&&!Nf(e)||n!=null&&!Nf(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ae(t.getIndex()instanceof bI||t.getIndex()===kI,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Sv(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Si extends Vr{constructor(e,n){super(e,n,new uv,!1)}get parent(){const e=qP(this._path);return e===null?null:new Si(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Gl{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new lt(e),r=Kl(this.ref,e);return new Gl(this._node.getChild(n),r,Ct)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Gl(i,Kl(this.ref,r),Ct)))}hasChild(e){const n=new lt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function DR(t,e){return t=me(t),t._checkNotDeleted("ref"),e!==void 0?Kl(t._root,e):t._root}function Y1(t,e){t=me(t),t._checkNotDeleted("refFromURL");const n=fE(e,t._repo.repoInfo_.nodeAdmin);wR("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Ss("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),DR(t,n.path.toString())}function Kl(t,e){return t=me(t),je(t._path)===null?zH("child","path",e,!1):Af("child","path",e,!1),new Si(t._repo,Pt(t._path,e))}function f3(t,e){t=me(t),yi("push",t._path),Cs("push",e,t._path,!0);const n=SR(t._repo),r=h3(n),i=Kl(t,r),s=Kl(t,r);let o;return e!=null?o=JI(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function p3(t){return yi("remove",t._path),JI(t,null)}function JI(t,e){t=me(t),yi("set",t._path),Cs("set",e,t._path,!1);const n=new Nr;return KI(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function g3(t,e){t=me(t),yi("setPriority",t._path),HI("setPriority",e,!1);const n=new Nr;return KI(t._repo,Pt(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function m3(t,e,n){if(yi("setWithPriority",t._path),Cs("setWithPriority",e,t._path,!1),HI("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new Nr;return KI(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function y3(t,e){_R("update",e,t._path,!1);const n=new Nr;return JH(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function v3(t){t=me(t);const e=new XI(()=>{}),n=new fp(e);return XH(t._repo,t,n).then(r=>new Gl(r,new Si(t._repo,t._path),t._queryParams.getIndex()))}class fp{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new NR("value",this,new Gl(e.snapshotNode,new Si(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new AR(this,e,n):null}matches(e){return e instanceof fp?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Cv{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new AR(this,e,n):null}createEvent(e,n){ae(e.childName!=null,"Child events should have a childName.");const r=Kl(new Si(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new NR(e.type,this,new Gl(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Cv?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function pp(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const u=n,h=(p,v)=>{dE(t._repo,t,a),u(p,v)};h.userCallback=n.userCallback,h.context=n.context,n=h}const o=new XI(n,s||void 0),a=e==="value"?new fp(o):new Cv(e,o);return r3(t._repo,t,a),()=>dE(t._repo,t,a)}function pE(t,e,n,r){return pp(t,"value",e,n,r)}function X1(t,e,n,r){return pp(t,"child_added",e,n,r)}function J1(t,e,n,r){return pp(t,"child_changed",e,n,r)}function Z1(t,e,n,r){return pp(t,"child_moved",e,n,r)}function ek(t,e,n,r){return pp(t,"child_removed",e,n,r)}function tk(t,e,n){let r=null;const i=n?new XI(n):null;e==="value"?r=new fp(i):e&&(r=new Cv(e,i)),dE(t._repo,t,r)}class Ki{}class PR extends Ki{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Cs("endAt",this._value,e._path,!0);const n=nE(e._queryParams,this._value,this._key);if(Sv(n),La(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vr(e._repo,e._path,n,e._orderByCalled)}}function _3(t,e){return hp("endAt","key",e,!0),new PR(t,e)}class w3 extends Ki{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Cs("endBefore",this._value,e._path,!1);const n=xW(e._queryParams,this._value,this._key);if(Sv(n),La(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vr(e._repo,e._path,n,e._orderByCalled)}}function E3(t,e){return hp("endBefore","key",e,!0),new w3(t,e)}class RR extends Ki{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Cs("startAt",this._value,e._path,!0);const n=tE(e._queryParams,this._value,this._key);if(Sv(n),La(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Vr(e._repo,e._path,n,e._orderByCalled)}}function T3(t=null,e){return hp("startAt","key",e,!0),new RR(t,e)}class I3 extends Ki{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Cs("startAfter",this._value,e._path,!1);const n=kW(e._queryParams,this._value,this._key);if(Sv(n),La(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Vr(e._repo,e._path,n,e._orderByCalled)}}function S3(t,e){return hp("startAfter","key",e,!0),new I3(t,e)}class C3 extends Ki{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vr(e._repo,e._path,CW(e._queryParams,this._limit),e._orderByCalled)}}function b3(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new C3(t)}class k3 extends Ki{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vr(e._repo,e._path,bW(e._queryParams,this._limit),e._orderByCalled)}}function x3(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new k3(t)}class N3 extends Ki{constructor(e){super(),this._path=e}_apply(e){Iv(e,"orderByChild");const n=new lt(this._path);if(qe(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new bI(n),i=cv(e._queryParams,r);return La(i),new Vr(e._repo,e._path,i,!0)}}function A3(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Af("orderByChild","path",t,!1),new N3(t)}class D3 extends Ki{_apply(e){Iv(e,"orderByKey");const n=cv(e._queryParams,ws);return La(n),new Vr(e._repo,e._path,n,!0)}}function P3(){return new D3}class R3 extends Ki{_apply(e){Iv(e,"orderByPriority");const n=cv(e._queryParams,Ct);return La(n),new Vr(e._repo,e._path,n,!0)}}function O3(){return new R3}class L3 extends Ki{_apply(e){Iv(e,"orderByValue");const n=cv(e._queryParams,kI);return La(n),new Vr(e._repo,e._path,n,!0)}}function M3(){return new L3}class F3 extends Ki{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){if(Cs("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new PR(this._value,this._key)._apply(new RR(this._value,this._key)._apply(e))}}function $3(t,e){return hp("equalTo","key",e,!0),new F3(t,e)}function Mi(t,...e){let n=me(t);for(const r of e)n=r._apply(n);return n}mH(Si);EH(Si);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3="FIREBASE_DATABASE_EMULATOR_HOST",gE={};let V3=!1;function B3(t,e,n,r){t.repoInfo_=new OP(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function OR(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Ss("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),En("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=fE(s,i),a=o.repoInfo,u,h;typeof process<"u"&&process.env&&(h=process.env[U3]),h?(u=!0,s=`http://${h}?ns=${a.namespace}`,o=fE(s,i),a=o.repoInfo):u=!o.repoInfo.secure;const p=i&&u?new Ec(Ec.OWNER):new Az(t.name,t.options,e);wR("Invalid Firebase Database URL",o),qe(o.path)||Ss("Database URL must point to the root of a Firebase Database (not including a child path).");const v=q3(a,t,p,new Nz(t.name,n));return new z3(v,t)}function j3(t,e){const n=gE[e];(!n||n[t.key]!==t)&&Ss(`Database ${e}(${t.repoInfo_}) has already been deleted.`),CR(t),delete n[t.key]}function q3(t,e,n,r){let i=gE[e.name];i||(i={},gE[e.name]=i);let s=i[t.toURLString()];return s&&Ss("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new KH(t,V3,n,r),i[t.toURLString()]=s,s}class z3{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(QH(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Si(this._repo,st())),this._rootInternal}_delete(){return this._rootInternal!==null&&(j3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ss("Cannot call "+e+" on a deleted database.")}}function LR(){Lc.IS_TRANSPORT_INITIALIZED&&tr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function W3(){LR(),Yo.forceDisallow()}function H3(){LR(),pi.forceDisallow(),Yo.forceAllow()}function G3(t,e,n,r={}){t=me(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Ss("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ss('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ec(Ec.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:eD(r.mockUserToken,t.app.options.projectId);s=new Ec(o)}B3(i,e,n,s)}function K3(t){t=me(t),t._checkNotDeleted("goOffline"),CR(t._repo)}function Q3(t){t=me(t),t._checkNotDeleted("goOnline"),i3(t._repo)}function Y3(t,e){TP(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(t){vP(Ra),io(new Xr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return OR(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),wi(y1,v1,t),wi(y1,v1,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3={".sv":"timestamp"};function Z3(){return J3}function eG(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tG{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function nG(t,e,n){var r;if(t=me(t),yi("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,s=new Nr,o=(u,h,p)=>{let v=null;u?s.reject(u):(v=new Gl(p,new Si(t._repo,t._path),Ct),s.resolve(new tG(h,v)))},a=pE(t,()=>{});return s3(t._repo,t._path,e,o,a,i),s.promise}Zs.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Zs.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};X3();const rG="@firebase/database-compat",iG="0.3.4";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sG=new ih("@firebase/database-compat"),MR=function(t){const e="FIREBASE WARNING: "+t;sG.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oG=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error($r(t,e)+"must be a boolean.")},aG=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error($r(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lG{constructor(e){this._delegate=e}cancel(e){De("OnDisconnect.cancel",0,1,arguments.length),vn("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){De("OnDisconnect.remove",0,1,arguments.length),vn("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){De("OnDisconnect.set",1,2,arguments.length),vn("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){De("OnDisconnect.setWithPriority",2,3,arguments.length),vn("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,n){if(De("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,MR("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}vn("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uG{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return De("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n){this._database=e,this._delegate=n}val(){return De("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return De("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return De("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return De("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return De("DataSnapshot.child",0,1,arguments.length),e=String(e),Af("DataSnapshot.child","path",e,!1),new ha(this._database,this._delegate.child(e))}hasChild(e){return De("DataSnapshot.hasChild",1,1,arguments.length),Af("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return De("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return De("DataSnapshot.forEach",1,1,arguments.length),vn("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new ha(this._database,n)))}hasChildren(){return De("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return De("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return De("DataSnapshot.ref",0,0,arguments.length),new Wr(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ln{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var s;De("Query.on",2,4,arguments.length),vn("Query.on","callback",n,!1);const o=Ln.getCancelAndContextArgs_("Query.on",r,i),a=(h,p)=>{n.call(o.context,new ha(this.database,h),p)};a.userCallback=n,a.context=o.context;const u=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return pE(this._delegate,a,u),n;case"child_added":return X1(this._delegate,a,u),n;case"child_removed":return ek(this._delegate,a,u),n;case"child_changed":return J1(this._delegate,a,u),n;case"child_moved":return Z1(this._delegate,a,u),n;default:throw new Error($r("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(De("Query.off",0,3,arguments.length),aG("Query.off",e,!0),vn("Query.off","callback",n,!0),zb("Query.off","context",r,!0),n){const i=()=>{};i.userCallback=n,i.context=r,tk(this._delegate,e,i)}else tk(this._delegate,e)}get(){return v3(this._delegate).then(e=>new ha(this.database,e))}once(e,n,r,i){De("Query.once",1,4,arguments.length),vn("Query.once","callback",n,!0);const s=Ln.getCancelAndContextArgs_("Query.once",r,i),o=new Nr,a=(h,p)=>{const v=new ha(this.database,h);n&&n.call(s.context,v,p),o.resolve(v)};a.userCallback=n,a.context=s.context;const u=h=>{s.cancel&&s.cancel.call(s.context,h),o.reject(h)};switch(e){case"value":pE(this._delegate,a,u,{onlyOnce:!0});break;case"child_added":X1(this._delegate,a,u,{onlyOnce:!0});break;case"child_removed":ek(this._delegate,a,u,{onlyOnce:!0});break;case"child_changed":J1(this._delegate,a,u,{onlyOnce:!0});break;case"child_moved":Z1(this._delegate,a,u,{onlyOnce:!0});break;default:throw new Error($r("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return De("Query.limitToFirst",1,1,arguments.length),new Ln(this.database,Mi(this._delegate,b3(e)))}limitToLast(e){return De("Query.limitToLast",1,1,arguments.length),new Ln(this.database,Mi(this._delegate,x3(e)))}orderByChild(e){return De("Query.orderByChild",1,1,arguments.length),new Ln(this.database,Mi(this._delegate,A3(e)))}orderByKey(){return De("Query.orderByKey",0,0,arguments.length),new Ln(this.database,Mi(this._delegate,P3()))}orderByPriority(){return De("Query.orderByPriority",0,0,arguments.length),new Ln(this.database,Mi(this._delegate,O3()))}orderByValue(){return De("Query.orderByValue",0,0,arguments.length),new Ln(this.database,Mi(this._delegate,M3()))}startAt(e=null,n){return De("Query.startAt",0,2,arguments.length),new Ln(this.database,Mi(this._delegate,T3(e,n)))}startAfter(e=null,n){return De("Query.startAfter",0,2,arguments.length),new Ln(this.database,Mi(this._delegate,S3(e,n)))}endAt(e=null,n){return De("Query.endAt",0,2,arguments.length),new Ln(this.database,Mi(this._delegate,_3(e,n)))}endBefore(e=null,n){return De("Query.endBefore",0,2,arguments.length),new Ln(this.database,Mi(this._delegate,E3(e,n)))}equalTo(e,n){return De("Query.equalTo",1,2,arguments.length),new Ln(this.database,Mi(this._delegate,$3(e,n)))}toString(){return De("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return De("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(De("Query.isEqual",1,1,arguments.length),!(e instanceof Ln)){const n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){const i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,vn(e,"cancel",i.cancel,!0),i.context=r,zb(e,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error($r(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new Wr(this.database,new Si(this._delegate._repo,this._delegate._path))}}class Wr extends Ln{constructor(e,n){super(e,new Vr(n._repo,n._path,new uv,!1)),this.database=e,this._delegate=n}getKey(){return De("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return De("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new Wr(this.database,Kl(this._delegate,e))}getParent(){De("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Wr(this.database,e):null}getRoot(){return De("Reference.root",0,0,arguments.length),new Wr(this.database,this._delegate.root)}set(e,n){De("Reference.set",1,2,arguments.length),vn("Reference.set","onComplete",n,!0);const r=JI(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(De("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,MR("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}yi("Reference.update",this._delegate._path),vn("Reference.update","onComplete",n,!0);const r=y3(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){De("Reference.setWithPriority",2,3,arguments.length),vn("Reference.setWithPriority","onComplete",r,!0);const i=m3(this._delegate,e,n);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){De("Reference.remove",0,1,arguments.length),vn("Reference.remove","onComplete",e,!0);const n=p3(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){De("Reference.transaction",1,3,arguments.length),vn("Reference.transaction","transactionUpdate",e,!1),vn("Reference.transaction","onComplete",n,!0),oG("Reference.transaction","applyLocally",r,!0);const i=nG(this._delegate,e,{applyLocally:r}).then(s=>new uG(s.committed,new ha(this.database,s.snapshot)));return n&&i.then(s=>n(null,s.committed,s.snapshot),s=>n(s,!1,null)),i}setPriority(e,n){De("Reference.setPriority",1,2,arguments.length),vn("Reference.setPriority","onComplete",n,!0);const r=g3(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){De("Reference.push",0,2,arguments.length),vn("Reference.push","onComplete",n,!0);const r=f3(this._delegate,e),i=r.then(o=>new Wr(this.database,o));n&&i.then(()=>n(null),o=>n(o));const s=new Wr(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return yi("Reference.onDisconnect",this._delegate._path),new lG(new d3(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:W3,forceLongPolling:H3}}useEmulator(e,n,r={}){G3(this._delegate,e,n,r)}ref(e){if(De("database.ref",0,1,arguments.length),e instanceof Wr){const n=Y1(this._delegate,e.toString());return new Wr(this,n)}else{const n=DR(this._delegate,e);return new Wr(this,n)}}refFromURL(e){De("database.refFromURL",1,1,arguments.length);const r=Y1(this._delegate,e);return new Wr(this,r)}goOffline(){return De("database.goOffline",0,0,arguments.length),K3(this._delegate)}goOnline(){return De("database.goOnline",0,0,arguments.length),Q3(this._delegate)}}Df.ServerValue={TIMESTAMP:Z3(),increment:t=>eG(t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cG({app:t,url:e,version:n,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){vP(n);const o=new oD("auth-internal",new aD("database-standalone"));return o.setComponent(new Xr("auth-internal",()=>r,"PRIVATE")),{instance:new Df(OR(t,o,void 0,e,s),t),namespace:i}}var hG=Object.freeze({__proto__:null,initStandalone:cG});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dG=Df.ServerValue;function fG(t){t.INTERNAL.registerComponent(new Xr("database-compat",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Df(i,r)},"PUBLIC").setServiceProps({Reference:Wr,Query:Ln,Database:Df,DataSnapshot:ha,enableLogging:Y3,INTERNAL:hG,ServerValue:dG}).setMultipleInstances(!0)),t.registerVersion(rG,iG)}fG(ce);var pG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Te,ZI=ZI||{},Le=pG||self;function cy(){}function bv(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function gp(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function gG(t){return Object.prototype.hasOwnProperty.call(t,Tw)&&t[Tw]||(t[Tw]=++mG)}var Tw="closure_uid_"+(1e9*Math.random()>>>0),mG=0;function yG(t,e,n){return t.call.apply(t.bind,arguments)}function vG(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function nr(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?nr=yG:nr=vG,nr.apply(null,arguments)}function Og(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Wn(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ma(){this.s=this.s,this.o=this.o}var _G=0;Ma.prototype.s=!1;Ma.prototype.na=function(){!this.s&&(this.s=!0,this.M(),_G!=0)&&gG(this)};Ma.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const FR=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function eS(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function nk(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(bv(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function rr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}rr.prototype.h=function(){this.defaultPrevented=!0};var wG=function(){if(!Le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Le.addEventListener("test",cy,e),Le.removeEventListener("test",cy,e)}catch{}return t}();function hy(t){return/^[\s\xa0]*$/.test(t)}var rk=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Iw(t,e){return t<e?-1:t>e?1:0}function kv(){var t=Le.navigator;return t&&(t=t.userAgent)?t:""}function ps(t){return kv().indexOf(t)!=-1}function tS(t){return tS[" "](t),t}tS[" "]=cy;function EG(t){var e=SG;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var TG=ps("Opera"),Vc=ps("Trident")||ps("MSIE"),$R=ps("Edge"),mE=$R||Vc,UR=ps("Gecko")&&!(kv().toLowerCase().indexOf("webkit")!=-1&&!ps("Edge"))&&!(ps("Trident")||ps("MSIE"))&&!ps("Edge"),IG=kv().toLowerCase().indexOf("webkit")!=-1&&!ps("Edge");function VR(){var t=Le.document;return t?t.documentMode:void 0}var dy;e:{var Sw="",Cw=function(){var t=kv();if(UR)return/rv:([^\);]+)(\)|;)/.exec(t);if($R)return/Edge\/([\d\.]+)/.exec(t);if(Vc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(IG)return/WebKit\/(\S+)/.exec(t);if(TG)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Cw&&(Sw=Cw?Cw[1]:""),Vc){var bw=VR();if(bw!=null&&bw>parseFloat(Sw)){dy=String(bw);break e}}dy=Sw}var SG={};function CG(){return EG(function(){let t=0;const e=rk(String(dy)).split("."),n=rk("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=Iw(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||Iw(i[2].length==0,s[2].length==0)||Iw(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var yE;if(Le.document&&Vc){var ik=VR();yE=ik||parseInt(dy,10)||void 0}else yE=void 0;var bG=yE;function Pf(t,e){if(rr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(UR){e:{try{tS(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:kG[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Pf.X.h.call(this)}}Wn(Pf,rr);var kG={2:"touch",3:"pen",4:"mouse"};Pf.prototype.h=function(){Pf.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var mp="closure_listenable_"+(1e6*Math.random()|0),xG=0;function NG(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++xG,this.ba=this.ea=!1}function xv(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function nS(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function BR(t){const e={};for(const n in t)e[n]=t[n];return e}const sk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jR(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<sk.length;s++)n=sk[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Nv(t){this.src=t,this.g={},this.h=0}Nv.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=_E(t,e,r,i);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new NG(e,this.src,s,!!r,i),e.ea=n,t.push(e)),e};function vE(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=FR(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(xv(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function _E(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ba&&s.listener==e&&s.capture==!!n&&s.ha==r)return i}return-1}var rS="closure_lm_"+(1e6*Math.random()|0),kw={};function qR(t,e,n,r,i){if(r&&r.once)return WR(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)qR(t,e[s],n,r,i);return null}return n=oS(n),t&&t[mp]?t.N(e,n,gp(r)?!!r.capture:!!r,i):zR(t,e,n,!1,r,i)}function zR(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=gp(i)?!!i.capture:!!i,a=sS(t);if(a||(t[rS]=a=new Nv(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=AG(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)wG||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(GR(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function AG(){function t(n){return e.call(t.src,t.listener,n)}const e=DG;return t}function WR(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)WR(t,e[s],n,r,i);return null}return n=oS(n),t&&t[mp]?t.O(e,n,gp(r)?!!r.capture:!!r,i):zR(t,e,n,!0,r,i)}function HR(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)HR(t,e[s],n,r,i);else r=gp(r)?!!r.capture:!!r,n=oS(n),t&&t[mp]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=_E(s,n,r,i),-1<n&&(xv(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=sS(t))&&(e=t.g[e.toString()],t=-1,e&&(t=_E(e,n,r,i)),(n=-1<t?e[t]:null)&&iS(n))}function iS(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[mp])vE(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(GR(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=sS(e))?(vE(n,t),n.h==0&&(n.src=null,e[rS]=null)):xv(t)}}}function GR(t){return t in kw?kw[t]:kw[t]="on"+t}function DG(t,e){if(t.ba)t=!0;else{e=new Pf(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&iS(t),t=n.call(r,e)}return t}function sS(t){return t=t[rS],t instanceof Nv?t:null}var xw="__closure_events_fn_"+(1e9*Math.random()>>>0);function oS(t){return typeof t=="function"?t:(t[xw]||(t[xw]=function(e){return t.handleEvent(e)}),t[xw])}function bn(){Ma.call(this),this.i=new Nv(this),this.P=this,this.I=null}Wn(bn,Ma);bn.prototype[mp]=!0;bn.prototype.removeEventListener=function(t,e,n,r){HR(this,t,e,n,r)};function Bn(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new rr(e,t);else if(e instanceof rr)e.target=e.target||t;else{var i=e;e=new rr(r,t),jR(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Lg(o,r,!0,e)&&i}if(o=e.g=t,i=Lg(o,r,!0,e)&&i,i=Lg(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Lg(o,r,!1,e)&&i}bn.prototype.M=function(){if(bn.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)xv(n[r]);delete t.g[e],t.h--}}this.I=null};bn.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};bn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Lg(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,u=o.ha||o.src;o.ea&&vE(t.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var aS=Le.JSON.stringify;function PG(){var t=YR;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class RG{constructor(){this.h=this.g=null}add(e,n){const r=KR.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var KR=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new OG,t=>t.reset());class OG{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function LG(t){Le.setTimeout(()=>{throw t},0)}function QR(t,e){wE||MG(),EE||(wE(),EE=!0),YR.add(t,e)}var wE;function MG(){var t=Le.Promise.resolve(void 0);wE=function(){t.then(FG)}}var EE=!1,YR=new RG;function FG(){for(var t;t=PG();){try{t.h.call(t.g)}catch(n){LG(n)}var e=KR;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}EE=!1}function Av(t,e){bn.call(this),this.h=t||1,this.g=e||Le,this.j=nr(this.lb,this),this.l=Date.now()}Wn(Av,bn);Te=Av.prototype;Te.ca=!1;Te.R=null;Te.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Bn(this,"tick"),this.ca&&(lS(this),this.start()))}};Te.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function lS(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}Te.M=function(){Av.X.M.call(this),lS(this),delete this.g};function uS(t,e,n){if(typeof t=="function")n&&(t=nr(t,n));else if(t&&typeof t.handleEvent=="function")t=nr(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Le.setTimeout(t,e||0)}function XR(t){t.g=uS(()=>{t.g=null,t.i&&(t.i=!1,XR(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class $G extends Ma{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:XR(this)}M(){super.M(),this.g&&(Le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rf(t){Ma.call(this),this.h=t,this.g={}}Wn(Rf,Ma);var ok=[];function JR(t,e,n,r){Array.isArray(n)||(n&&(ok[0]=n.toString()),n=ok);for(var i=0;i<n.length;i++){var s=qR(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function ZR(t){nS(t.g,function(e,n){this.g.hasOwnProperty(n)&&iS(e)},t),t.g={}}Rf.prototype.M=function(){Rf.X.M.call(this),ZR(this)};Rf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Dv(){this.g=!0}Dv.prototype.Aa=function(){this.g=!1};function UG(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var h=a[u].split("=");if(1<h.length){var p=h[0];h=h[1];var v=p.split("_");o=2<=v.length&&v[1]=="type"?o+(p+"="+h+"&"):o+(p+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function VG(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function cc(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+jG(t,n)+(r?" "+r:"")})}function BG(t,e){t.info(function(){return"TIMEOUT: "+e})}Dv.prototype.info=function(){};function jG(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return aS(n)}catch{return e}}var fu={},ak=null;function Pv(){return ak=ak||new bn}fu.Pa="serverreachability";function eO(t){rr.call(this,fu.Pa,t)}Wn(eO,rr);function Of(t){const e=Pv();Bn(e,new eO(e))}fu.STAT_EVENT="statevent";function tO(t,e){rr.call(this,fu.STAT_EVENT,t),this.stat=e}Wn(tO,rr);function gr(t){const e=Pv();Bn(e,new tO(e,t))}fu.Qa="timingevent";function nO(t,e){rr.call(this,fu.Qa,t),this.size=e}Wn(nO,rr);function yp(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Le.setTimeout(function(){t()},e)}var Rv={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},rO={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function cS(){}cS.prototype.h=null;function lk(t){return t.h||(t.h=t.i())}function iO(){}var vp={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function hS(){rr.call(this,"d")}Wn(hS,rr);function dS(){rr.call(this,"c")}Wn(dS,rr);var TE;function Ov(){}Wn(Ov,cS);Ov.prototype.g=function(){return new XMLHttpRequest};Ov.prototype.i=function(){return{}};TE=new Ov;function _p(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new Rf(this),this.O=qG,t=mE?125:void 0,this.T=new Av(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new sO}function sO(){this.i=null,this.g="",this.h=!1}var qG=45e3,IE={},fy={};Te=_p.prototype;Te.setTimeout=function(t){this.O=t};function SE(t,e,n){t.K=1,t.v=Mv(ao(e)),t.s=n,t.P=!0,oO(t,null)}function oO(t,e){t.F=Date.now(),wp(t),t.A=ao(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),pO(n.i,"t",r),t.C=0,n=t.l.H,t.h=new sO,t.g=LO(t.l,n?e:null,!t.s),0<t.N&&(t.L=new $G(nr(t.La,t,t.g),t.N)),JR(t.S,t.g,"readystatechange",t.ib),e=t.H?BR(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Of(),UG(t.j,t.u,t.A,t.m,t.U,t.s)}Te.ib=function(t){t=t.target;const e=this.L;e&&Qs(t)==3?e.l():this.La(t)};Te.La=function(t){try{if(t==this.g)e:{const p=Qs(this.g);var e=this.g.Ea();const v=this.g.aa();if(!(3>p)&&(p!=3||mE||this.g&&(this.h.h||this.g.fa()||dk(this.g)))){this.I||p!=4||e==7||(e==8||0>=v?Of(3):Of(2)),Lv(this);var n=this.g.aa();this.Y=n;t:if(aO(this)){var r=dk(this.g);t="";var i=r.length,s=Qs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sl(this),jd(this);var o="";break t}this.h.i=new Le.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,VG(this.j,this.u,this.A,this.m,this.U,p,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hy(a)){var h=a;break t}}h=null}if(n=h)cc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,CE(this,n);else{this.i=!1,this.o=3,gr(12),Sl(this),jd(this);break e}}this.P?(lO(this,p,o),mE&&this.i&&p==3&&(JR(this.S,this.T,"tick",this.hb),this.T.start())):(cc(this.j,this.m,o,null),CE(this,o)),p==4&&Sl(this),this.i&&!this.I&&(p==4?DO(this.l,this):(this.i=!1,wp(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,gr(12)):(this.o=0,gr(13)),Sl(this),jd(this)}}}catch{}finally{}};function aO(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function lO(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=zG(t,n),i==fy){e==4&&(t.o=4,gr(14),r=!1),cc(t.j,t.m,null,"[Incomplete Response]");break}else if(i==IE){t.o=4,gr(15),cc(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else cc(t.j,t.m,i,null),CE(t,i);aO(t)&&i!=fy&&i!=IE&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,gr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),_S(e),e.K=!0,gr(11))):(cc(t.j,t.m,n,"[Invalid Chunked Response]"),Sl(t),jd(t))}Te.hb=function(){if(this.g){var t=Qs(this.g),e=this.g.fa();this.C<e.length&&(Lv(this),lO(this,t,e),this.i&&t!=4&&wp(this))}};function zG(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?fy:(n=Number(e.substring(n,r)),isNaN(n)?IE:(r+=1,r+n>e.length?fy:(e=e.substr(r,n),t.C=r+n,e)))}Te.cancel=function(){this.I=!0,Sl(this)};function wp(t){t.V=Date.now()+t.O,uO(t,t.O)}function uO(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=yp(nr(t.gb,t),e)}function Lv(t){t.B&&(Le.clearTimeout(t.B),t.B=null)}Te.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(BG(this.j,this.A),this.K!=2&&(Of(),gr(17)),Sl(this),this.o=2,jd(this)):uO(this,this.V-t)};function jd(t){t.l.G==0||t.I||DO(t.l,t)}function Sl(t){Lv(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,lS(t.T),ZR(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function CE(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||bE(n.h,t))){if(!t.J&&bE(n.h,t)&&n.G==3){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)my(n),Uv(n);else break e;vS(n),gr(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&n.A==0&&!n.v&&(n.v=yp(nr(n.cb,n),6e3));if(1>=yO(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else Cl(n,11)}else if((t.J||n.g==t)&&my(n),!hy(e))for(i=n.Fa.g.parse(e),e=0;e<i.length;e++){let h=i[e];if(n.T=h[0],h=h[1],n.G==2)if(h[0]=="c"){n.I=h[1],n.ka=h[2];const p=h[3];p!=null&&(n.ma=p,n.j.info("VER="+n.ma));const v=h[4];v!=null&&(n.Ca=v,n.j.info("SVER="+n.Ca));const w=h[5];w!=null&&typeof w=="number"&&0<w&&(r=1.5*w,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const b=t.g;if(b){const k=b.g?b.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(k){var s=r.h;s.g||k.indexOf("spdy")==-1&&k.indexOf("quic")==-1&&k.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(fS(s,s.h),s.h=null))}if(r.D){const O=b.g?b.g.getResponseHeader("X-HTTP-Session-Id"):null;O&&(r.za=O,Dt(r.F,r.D,O))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),r=n;var o=t;if(r.sa=OO(r,r.H?r.ka:null,r.V),o.J){vO(r.h,o);var a=o,u=r.J;u&&a.setTimeout(u),a.B&&(Lv(a),wp(a)),r.g=o}else NO(r);0<n.i.length&&Vv(n)}else h[0]!="stop"&&h[0]!="close"||Cl(n,7);else n.G==3&&(h[0]=="stop"||h[0]=="close"?h[0]=="stop"?Cl(n,7):yS(n):h[0]!="noop"&&n.l&&n.l.wa(h),n.A=0)}}Of(4)}catch{}}function WG(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(bv(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function HG(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(bv(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function cO(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(bv(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=HG(t),r=WG(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var hO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GG(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ol(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ol){this.h=e!==void 0?e:t.h,py(this,t.j),this.s=t.s,this.g=t.g,gy(this,t.m),this.l=t.l,e=t.i;var n=new Lf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),uk(this,n),this.o=t.o}else t&&(n=String(t).match(hO))?(this.h=!!e,py(this,n[1]||"",!0),this.s=Td(n[2]||""),this.g=Td(n[3]||"",!0),gy(this,n[4]),this.l=Td(n[5]||"",!0),uk(this,n[6]||"",!0),this.o=Td(n[7]||"")):(this.h=!!e,this.i=new Lf(null,this.h))}Ol.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Id(e,ck,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Id(e,ck,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Id(n,n.charAt(0)=="/"?YG:QG,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Id(n,JG)),t.join("")};function ao(t){return new Ol(t)}function py(t,e,n){t.j=n?Td(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function gy(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function uk(t,e,n){e instanceof Lf?(t.i=e,ZG(t.i,t.h)):(n||(e=Id(e,XG)),t.i=new Lf(e,t.h))}function Dt(t,e,n){t.i.set(e,n)}function Mv(t){return Dt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Td(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Id(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,KG),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function KG(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var ck=/[#\/\?@]/g,QG=/[#\?:]/g,YG=/[#\?]/g,XG=/[#\?@]/g,JG=/#/g;function Lf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Fa(t){t.g||(t.g=new Map,t.h=0,t.i&&GG(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}Te=Lf.prototype;Te.add=function(t,e){Fa(this),this.i=null,t=fh(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function dO(t,e){Fa(t),e=fh(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function fO(t,e){return Fa(t),e=fh(t,e),t.g.has(e)}Te.forEach=function(t,e){Fa(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};Te.oa=function(){Fa(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};Te.W=function(t){Fa(this);let e=[];if(typeof t=="string")fO(this,t)&&(e=e.concat(this.g.get(fh(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};Te.set=function(t,e){return Fa(this),this.i=null,t=fh(this,t),fO(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Te.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function pO(t,e,n){dO(t,e),0<n.length&&(t.i=null,t.g.set(fh(t,e),eS(n)),t.h+=n.length)}Te.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function fh(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function ZG(t,e){e&&!t.j&&(Fa(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(dO(this,r),pO(this,i,n))},t)),t.j=e}var eK=class{constructor(t,e){this.h=t,this.g=e}};function gO(t){this.l=t||tK,Le.PerformanceNavigationTiming?(t=Le.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Le.g&&Le.g.Ga&&Le.g.Ga()&&Le.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var tK=10;function mO(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function yO(t){return t.h?1:t.g?t.g.size:0}function bE(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function fS(t,e){t.g?t.g.add(e):t.h=e}function vO(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}gO.prototype.cancel=function(){if(this.i=_O(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function _O(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return eS(t.i)}function pS(){}pS.prototype.stringify=function(t){return Le.JSON.stringify(t,void 0)};pS.prototype.parse=function(t){return Le.JSON.parse(t,void 0)};function nK(){this.g=new pS}function rK(t,e,n){const r=n||"";try{cO(t,function(i,s){let o=i;gp(i)&&(o=aS(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function iK(t,e){const n=new Dv;if(Le.Image){const r=new Image;r.onload=Og(Mg,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Og(Mg,n,r,"TestLoadImage: error",!1,e),r.onabort=Og(Mg,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Og(Mg,n,r,"TestLoadImage: timeout",!1,e),Le.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Mg(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ep(t){this.l=t.ac||null,this.j=t.jb||!1}Wn(Ep,cS);Ep.prototype.g=function(){return new Fv(this.l,this.j)};Ep.prototype.i=function(t){return function(){return t}}({});function Fv(t,e){bn.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=gS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Wn(Fv,bn);var gS=0;Te=Fv.prototype;Te.open=function(t,e){if(this.readyState!=gS)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Mf(this)};Te.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Le).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};Te.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tp(this)),this.readyState=gS};Te.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Mf(this)),this.g&&(this.readyState=3,Mf(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wO(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function wO(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}Te.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Tp(this):Mf(this),this.readyState==3&&wO(this)}};Te.Va=function(t){this.g&&(this.response=this.responseText=t,Tp(this))};Te.Ua=function(t){this.g&&(this.response=t,Tp(this))};Te.ga=function(){this.g&&Tp(this)};function Tp(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Mf(t)}Te.setRequestHeader=function(t,e){this.v.append(t,e)};Te.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Te.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Mf(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Fv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var sK=Le.JSON.parse;function Wt(t){bn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=EO,this.K=this.L=!1}Wn(Wt,bn);var EO="",oK=/^https?$/i,aK=["POST","PUT"];Te=Wt.prototype;Te.Ka=function(t){this.L=t};Te.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():TE.g(),this.C=this.u?lk(this.u):lk(TE),this.g.onreadystatechange=nr(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){hk(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Le.FormData&&t instanceof Le.FormData,!(0<=FR(aK,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{SO(this),0<this.B&&((this.K=lK(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nr(this.qa,this)):this.A=uS(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){hk(this,s)}};function lK(t){return Vc&&CG()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}Te.qa=function(){typeof ZI<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bn(this,"timeout"),this.abort(8))};function hk(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,TO(t),$v(t)}function TO(t){t.D||(t.D=!0,Bn(t,"complete"),Bn(t,"error"))}Te.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Bn(this,"complete"),Bn(this,"abort"),$v(this))};Te.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$v(this,!0)),Wt.X.M.call(this)};Te.Ha=function(){this.s||(this.F||this.v||this.l?IO(this):this.fb())};Te.fb=function(){IO(this)};function IO(t){if(t.h&&typeof ZI<"u"&&(!t.C[1]||Qs(t)!=4||t.aa()!=2)){if(t.v&&Qs(t)==4)uS(t.Ha,0,t);else if(Bn(t,"readystatechange"),Qs(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.H).match(hO)[1]||null;if(!i&&Le.self&&Le.self.location){var s=Le.self.location.protocol;i=s.substr(0,s.length-1)}r=!oK.test(i?i.toLowerCase():"")}n=r}if(n)Bn(t,"complete"),Bn(t,"success");else{t.m=6;try{var o=2<Qs(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",TO(t)}}finally{$v(t)}}}}function $v(t,e){if(t.g){SO(t);const n=t.g,r=t.C[0]?cy:null;t.g=null,t.C=null,e||Bn(t,"ready");try{n.onreadystatechange=r}catch{}}}function SO(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Le.clearTimeout(t.A),t.A=null)}function Qs(t){return t.g?t.g.readyState:0}Te.aa=function(){try{return 2<Qs(this)?this.g.status:-1}catch{return-1}};Te.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};Te.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),sK(e)}};function dk(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case EO:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}Te.Ea=function(){return this.m};Te.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function CO(t){let e="";return nS(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function mS(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=CO(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Dt(t,e,n))}function ld(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function bO(t){this.Ca=0,this.i=[],this.j=new Dv,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ld("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ld("baseRetryDelayMs",5e3,t),this.bb=ld("retryDelaySeedMs",1e4,t),this.$a=ld("forwardChannelMaxRetries",2,t),this.ta=ld("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new gO(t&&t.concurrentRequestLimit),this.Fa=new nK,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}Te=bO.prototype;Te.ma=8;Te.G=1;function yS(t){if(kO(t),t.G==3){var e=t.U++,n=ao(t.F);Dt(n,"SID",t.I),Dt(n,"RID",e),Dt(n,"TYPE","terminate"),Ip(t,n),e=new _p(t,t.j,e,void 0),e.K=2,e.v=Mv(ao(n)),n=!1,Le.navigator&&Le.navigator.sendBeacon&&(n=Le.navigator.sendBeacon(e.v.toString(),"")),!n&&Le.Image&&(new Image().src=e.v,n=!0),n||(e.g=LO(e.l,null),e.g.da(e.v)),e.F=Date.now(),wp(e)}RO(t)}function Uv(t){t.g&&(_S(t),t.g.cancel(),t.g=null)}function kO(t){Uv(t),t.u&&(Le.clearTimeout(t.u),t.u=null),my(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&Le.clearTimeout(t.m),t.m=null)}function Vv(t){mO(t.h)||t.m||(t.m=!0,QR(t.Ja,t),t.C=0)}function uK(t,e){return yO(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=yp(nr(t.Ja,t,e),PO(t,t.C)),t.C++,!0)}Te.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new _p(this,this.j,t,void 0);let s=this.s;if(this.S&&(s?(s=BR(s),jR(s,this.S)):s=this.S),this.o!==null||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=xO(this,i,e),n=ao(this.F),Dt(n,"RID",t),Dt(n,"CVER",22),this.D&&Dt(n,"X-HTTP-Session-Id",this.D),Ip(this,n),s&&(this.N?e="headers="+encodeURIComponent(String(CO(s)))+"&"+e:this.o&&mS(n,this.o,s)),fS(this.h,i),this.Ya&&Dt(n,"TYPE","init"),this.O?(Dt(n,"$req",e),Dt(n,"SID","null"),i.Z=!0,SE(i,n,null)):SE(i,n,e),this.G=2}}else this.G==3&&(t?fk(this,t):this.i.length==0||mO(this.h)||fk(this))};function fk(t,e){var n;e?n=e.m:n=t.U++;const r=ao(t.F);Dt(r,"SID",t.I),Dt(r,"RID",n),Dt(r,"AID",t.T),Ip(t,r),t.o&&t.s&&mS(r,t.o,t.s),n=new _p(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=xO(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),fS(t.h,n),SE(n,r,e)}function Ip(t,e){t.ia&&nS(t.ia,function(n,r){Dt(e,r,n)}),t.l&&cO({},function(n,r){Dt(e,r,n)})}function xO(t,e,n){n=Math.min(t.i.length,n);var r=t.l?nr(t.l.Ra,t.l,t):null;e:{var i=t.i;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let h=i[u].h;const p=i[u].g;if(h-=s,0>h)s=Math.max(0,i[u].h-100),a=!1;else try{rK(p,o,"req"+h+"_")}catch{r&&r(p)}}if(a){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function NO(t){t.g||t.u||(t.Z=1,QR(t.Ia,t),t.A=0)}function vS(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=yp(nr(t.Ia,t),PO(t,t.A)),t.A++,!0)}Te.Ia=function(){if(this.u=null,AO(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=yp(nr(this.eb,this),t)}};Te.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,gr(10),Uv(this),AO(this))};function _S(t){t.B!=null&&(Le.clearTimeout(t.B),t.B=null)}function AO(t){t.g=new _p(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=ao(t.sa);Dt(e,"RID","rpc"),Dt(e,"SID",t.I),Dt(e,"CI",t.L?"0":"1"),Dt(e,"AID",t.T),Dt(e,"TYPE","xmlhttp"),Ip(t,e),t.o&&t.s&&mS(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Mv(ao(e)),n.s=null,n.P=!0,oO(n,t)}Te.cb=function(){this.v!=null&&(this.v=null,Uv(this),vS(this),gr(19))};function my(t){t.v!=null&&(Le.clearTimeout(t.v),t.v=null)}function DO(t,e){var n=null;if(t.g==e){my(t),_S(t),t.g=null;var r=2}else if(bE(t.h,e))n=e.D,vO(t.h,e),r=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=Pv(),Bn(r,new nO(r,n)),Vv(t)}else NO(t);else if(i=e.o,i==3||i==0&&0<t.pa||!(r==1&&uK(t,e)||r==2&&vS(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:Cl(t,5);break;case 4:Cl(t,10);break;case 3:Cl(t,6);break;default:Cl(t,2)}}}function PO(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function Cl(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=nr(t.kb,t);n||(n=new Ol("//www.google.com/images/cleardot.gif"),Le.location&&Le.location.protocol=="http"||py(n,"https"),Mv(n)),iK(n.toString(),r)}else gr(2);t.G=0,t.l&&t.l.va(e),RO(t),kO(t)}Te.kb=function(t){t?(this.j.info("Successfully pinged google.com"),gr(2)):(this.j.info("Failed to ping google.com"),gr(1))};function RO(t){if(t.G=0,t.la=[],t.l){const e=_O(t.h);(e.length!=0||t.i.length!=0)&&(nk(t.la,e),nk(t.la,t.i),t.h.i.length=0,eS(t.i),t.i.length=0),t.l.ua()}}function OO(t,e,n){var r=n instanceof Ol?ao(n):new Ol(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),gy(r,r.m);else{var i=Le.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ol(null,void 0);r&&py(s,r),e&&(s.g=e),i&&gy(s,i),n&&(s.l=n),r=s}return n=t.D,e=t.za,n&&e&&Dt(r,n,e),Dt(r,"VER",t.ma),Ip(t,r),r}function LO(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new Wt(new Ep({jb:!0})):new Wt(t.ra),e.Ka(t.H),e}function MO(){}Te=MO.prototype;Te.xa=function(){};Te.wa=function(){};Te.va=function(){};Te.ua=function(){};Te.Ra=function(){};function yy(){if(Vc&&!(10<=Number(bG)))throw Error("Environmental error: no available transport.")}yy.prototype.g=function(t,e){return new Zr(t,e)};function Zr(t,e){bn.call(this),this.g=new bO(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!hy(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hy(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ph(this)}Wn(Zr,bn);Zr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;gr(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=OO(t,null,t.V),Vv(t)};Zr.prototype.close=function(){yS(this.g)};Zr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=aS(t),t=n);e.i.push(new eK(e.ab++,t)),e.G==3&&Vv(e)};Zr.prototype.M=function(){this.g.l=null,delete this.j,yS(this.g),delete this.g,Zr.X.M.call(this)};function FO(t){hS.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Wn(FO,hS);function $O(){dS.call(this),this.status=1}Wn($O,dS);function ph(t){this.g=t}Wn(ph,MO);ph.prototype.xa=function(){Bn(this.g,"a")};ph.prototype.wa=function(t){Bn(this.g,new FO(t))};ph.prototype.va=function(t){Bn(this.g,new $O)};ph.prototype.ua=function(){Bn(this.g,"b")};yy.prototype.createWebChannel=yy.prototype.g;Zr.prototype.send=Zr.prototype.u;Zr.prototype.open=Zr.prototype.m;Zr.prototype.close=Zr.prototype.close;Rv.NO_ERROR=0;Rv.TIMEOUT=8;Rv.HTTP_ERROR=6;rO.COMPLETE="complete";iO.EventType=vp;vp.OPEN="a";vp.CLOSE="b";vp.ERROR="c";vp.MESSAGE="d";bn.prototype.listen=bn.prototype.N;Wt.prototype.listenOnce=Wt.prototype.O;Wt.prototype.getLastError=Wt.prototype.Oa;Wt.prototype.getLastErrorCode=Wt.prototype.Ea;Wt.prototype.getStatus=Wt.prototype.aa;Wt.prototype.getResponseJson=Wt.prototype.Sa;Wt.prototype.getResponseText=Wt.prototype.fa;Wt.prototype.send=Wt.prototype.da;Wt.prototype.setWithCredentials=Wt.prototype.Ka;var cK=function(){return new yy},hK=function(){return Pv()},Nw=Rv,dK=rO,fK=fu,pk={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},pK=Ep,Fg=iO,gK=Wt;const gk="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh="9.18.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new ih("@firebase/firestore");function kE(){return Ta.logLevel}function mK(t){Ta.setLogLevel(t)}function te(t,...e){if(Ta.logLevel<=Ze.DEBUG){const n=e.map(wS);Ta.debug(`Firestore (${gh}): ${t}`,...n)}}function Xt(t,...e){if(Ta.logLevel<=Ze.ERROR){const n=e.map(wS);Ta.error(`Firestore (${gh}): ${t}`,...n)}}function Bc(t,...e){if(Ta.logLevel<=Ze.WARN){const n=e.map(wS);Ta.warn(`Firestore (${gh}): ${t}`,...n)}}function wS(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t="Unexpected state"){const e=`FIRESTORE (${gh}) INTERNAL ASSERTION FAILED: `+t;throw Xt(e),new Error(e)}function Ie(t,e){t||ge()}function yK(t,e){t||ge()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wn.UNAUTHENTICATED))}shutdown(){}}class _K{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class wK{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new In;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new In,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new In)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new UO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new wn(e)}}class EK{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ie(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class TK{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i}getToken(){return Promise.resolve(new EK(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class IK{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SK{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=s=>{s.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string"),this.A=n.token,new IK(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=CK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ue(t,e){return t<e?-1:t>e?1:0}function jc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function BO(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ot(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Ot(0,0))}static max(){return new Ce(new Ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(),r===void 0?r=e.length-n:r>e.length-n&&ge(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ff.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ff?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class et extends Ff{construct(e,n,r){return new et(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new et(n)}static emptyPath(){return new et([])}}const bK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends Ff{construct(e,n,r){return new Jt(e,n,r)}static isValidIdentifier(e){return bK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Jt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ee(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ee(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ee(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ee(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jt(n)}static emptyPath(){return new Jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(et.fromString(e))}static fromName(e){return new ue(et.fromString(e).popFirst(5))}static empty(){return new ue(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function xE(t){return t.fields.find(e=>e.kind===2)}function fl(t){return t.fields.filter(e=>e.kind!==2)}jO.UNKNOWN_ID=-1;class kK{constructor(e,n){this.fieldPath=e,this.kind=n}}class vy{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new vy(0,ei.min())}}function qO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(r===1e9?new Ot(n+1,0):new Ot(n,r));return new ei(i,ue.empty(),e)}function zO(t){return new ei(t.readTime,t.key,-1)}class ei{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ei(Ce.min(),ue.empty(),-1)}static max(){return new ei(Ce.max(),ue.empty(),-1)}}function ES(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(t.documentKey,e.documentKey),n!==0?n:Ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==WO)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(i=>i?q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++a,a===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new In,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new qd(e,n.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=TS(r.target.error);this.P.reject(new qd(e,i))}}static open(e,n,r,i){try{return new Bv(n,e.transaction(i,r))}catch(s){throw new qd(n,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(te("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new NK(n)}}class Bi{constructor(e,n,r){this.name=e,this.version=n,this.S=r,Bi.D(Vt())===12.2&&Xt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return te("SimpleDb","Removing database:",e),pl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!pf())return!1;if(Bi.N())return!0;const e=Vt(),n=Bi.D(e),r=0<n&&n<10,i=Bi.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.$)==="YES"}static M(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(te("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new qd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new ee(H.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ee(H.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new qd(e,o))},i.onupgradeneeded=s=>{te("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.S.F(o,i.transaction,s.oldVersion,this.version).next(()=>{te("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=Bv.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(h=>(a.V(),h)).catch(h=>(a.abort(h),q.reject(h))).toPromise();return u.catch(()=>{}),await a.v,u}catch(a){const u=a,h=u.name!=="FirebaseError"&&o<3;if(te("SimpleDb","Transaction failed with error:",u.message,"Retrying:",h),this.close(),!h)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}class xK{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return pl(this.q.delete())}}class qd extends ee{constructor(e,n){super(H.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ua(t){return t.name==="IndexedDbTransactionError"}class NK{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(te("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(te("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),pl(r)}add(e){return te("SimpleDb","ADD",this.store.name,e,e),pl(this.store.add(e))}get(e){return pl(this.store.get(e)).next(n=>(n===void 0&&(n=null),te("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return te("SimpleDb","DELETE",this.store.name,e),pl(this.store.delete(e))}count(){return te("SimpleDb","COUNT",this.store.name),pl(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.H(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new q((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}J(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new q((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Y(e,n){te("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Z=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}X(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}tt(e){const n=this.cursor({});return new q((r,i)=>{n.onerror=s=>{const o=TS(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new q((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new xK(a),h=n(a.primaryKey,a.value,u);if(h instanceof q){const p=h.catch(v=>(u.done(),q.reject(v)));r.push(p)}u.isDone?i():u.G===null?a.continue():a.continue(u.G)}}).next(()=>q.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function pl(t){return new q((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=TS(r.target.error);n(i)}})}let mk=!1;function TS(t){const e=Bi.D(Vt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mk||(mk=!0,setTimeout(()=>{throw r},0)),r}}return t}class AK{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}nt(e){te("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{te("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(n){Ua(n)?te("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await $a(n)}await this.nt(6e4)})}}class DK{constructor(e,n){this.localStore=e,this.persistence=n}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.it(n,e))}it(e,n){const r=new Set;let i=n,s=!0;return q.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return te("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}rt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(i,s)).next(a=>(te("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ot(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=zO(s);ES(o,r)>0&&(r=o)}),new ei(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}Pr.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PK{constructor(e,n,r,i,s,o,a,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=u}}class Ia{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ia("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ia&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function GO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t){return t==null}function $f(t){return t===0&&1/t==-1/0}function KO(t){return typeof t=="number"&&Number.isInteger(t)&&!$f(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RK extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OK(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw i instanceof DOMException?new RK("Invalid base64 string: "+i):i}}(e);return new cn(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const LK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sa(t){if(Ie(!!t),typeof t=="string"){let e=0;const n=LK.exec(t);if(Ie(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zt(t.seconds),nanos:zt(t.nanos)}}function zt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ql(t){return typeof t=="string"?cn.fromBase64String(t):cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function QO(t){const e=t.mapValue.fields.__previous_value__;return IS(e)?QO(e):e}function Uf(t){const e=Sa(t.mapValue.fields.__local_write_time__.timestampValue);return new Ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dm={nullValue:"NULL_VALUE"};function Yl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?IS(t)?4:YO(t)?9007199254740991:10:ge()}function bs(t,e){if(t===e)return!0;const n=Yl(t);if(n!==Yl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Uf(t).isEqual(Uf(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Sa(r.timestampValue),o=Sa(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Ql(r.bytesValue).isEqual(Ql(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return zt(r.geoPointValue.latitude)===zt(i.geoPointValue.latitude)&&zt(r.geoPointValue.longitude)===zt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return zt(r.integerValue)===zt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=zt(r.doubleValue),o=zt(i.doubleValue);return s===o?$f(s)===$f(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return jc(t.arrayValue.values||[],e.arrayValue.values||[],bs);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(yk(s)!==yk(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!bs(s[a],o[a])))return!1;return!0}(t,e);default:return ge()}}function Vf(t,e){return(t.values||[]).find(n=>bs(n,e))!==void 0}function Ca(t,e){if(t===e)return 0;const n=Yl(t),r=Yl(e);if(n!==r)return Ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=zt(i.integerValue||i.doubleValue),a=zt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return vk(t.timestampValue,e.timestampValue);case 4:return vk(Uf(t),Uf(e));case 5:return Ue(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Ql(i),a=Ql(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const h=Ue(o[u],a[u]);if(h!==0)return h}return Ue(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Ue(zt(i.latitude),zt(s.latitude));return o!==0?o:Ue(zt(i.longitude),zt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const h=Ca(o[u],a[u]);if(h)return h}return Ue(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Jo.mapValue&&s===Jo.mapValue)return 0;if(i===Jo.mapValue)return 1;if(s===Jo.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},h=Object.keys(u);a.sort(),h.sort();for(let p=0;p<a.length&&p<h.length;++p){const v=Ue(a[p],h[p]);if(v!==0)return v;const w=Ca(o[a[p]],u[h[p]]);if(w!==0)return w}return Ue(a.length,h.length)}(t.mapValue,e.mapValue);default:throw ge()}}function vk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ue(t,e);const n=Sa(t),r=Sa(e),i=Ue(n.seconds,r.seconds);return i!==0?i:Ue(n.nanos,r.nanos)}function qc(t){return NE(t)}function NE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Sa(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ql(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ue.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=NE(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${NE(r.fields[a])}`;return s+"}"}(t.mapValue):ge();var e,n}function Xl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function AE(t){return!!t&&"integerValue"in t}function Bf(t){return!!t&&"arrayValue"in t}function _k(t){return!!t&&"nullValue"in t}function wk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fm(t){return!!t&&"mapValue"in t}function zd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return pu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=zd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function YO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function MK(t){return"nullValue"in t?dm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Xl(Ia.empty(),ue.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ge()}function FK(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Xl(Ia.empty(),ue.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Jo:ge()}function Ek(t,e){const n=Ca(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Tk(t,e){const n=Ca(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this.position=e,this.inclusive=n}}function Ik(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ue.comparator(ue.fromName(o.referenceValue),n.key):r=Ca(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Sk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{}class Ke extends XO{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $K(e,n,r):n==="array-contains"?new BK(e,r):n==="in"?new rL(e,r):n==="not-in"?new jK(e,r):n==="array-contains-any"?new qK(e,r):new Ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new UK(e,r):new VK(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ca(n,this.value)):n!==null&&Yl(this.value)===Yl(n)&&this.matchesComparison(Ca(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ft extends XO{constructor(e,n){super(),this.filters=e,this.op=n,this.ft=null}static create(e,n){return new ft(e,n)}matches(e){return zc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ft!==null||(this.ft=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(n=>n.isInequality());return e!==null?e.field:null}dt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function zc(t){return t.op==="and"}function DE(t){return t.op==="or"}function SS(t){return JO(t)&&zc(t)}function JO(t){for(const e of t.filters)if(e instanceof ft)return!1;return!0}function PE(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+qc(t.value);if(SS(t))return t.filters.map(e=>PE(e)).join(",");{const e=t.filters.map(n=>PE(n)).join(",");return`${t.op}(${e})`}}function ZO(t,e){return t instanceof Ke?function(n,r){return r instanceof Ke&&n.op===r.op&&n.field.isEqual(r.field)&&bs(n.value,r.value)}(t,e):t instanceof ft?function(n,r){return r instanceof ft&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,o)=>i&&ZO(s,r.filters[o]),!0):!1}(t,e):void ge()}function eL(t,e){const n=t.filters.concat(e);return ft.create(n,t.op)}function tL(t){return t instanceof Ke?function(e){return`${e.field.canonicalString()} ${e.op} ${qc(e.value)}`}(t):t instanceof ft?function(e){return e.op.toString()+" {"+e.getFilters().map(tL).join(" ,")+"}"}(t):"Filter"}class $K extends Ke{constructor(e,n,r){super(e,n,r),this.key=ue.fromName(r.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class UK extends Ke{constructor(e,n){super(e,"in",n),this.keys=nL("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VK extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=nL("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function nL(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ue.fromName(r.referenceValue))}class BK extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bf(n)&&Vf(n.arrayValue,this.value)}}class rL extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vf(this.value.arrayValue,n)}}class jK extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Vf(this.value.arrayValue,n)}}class qK extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Vf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n="asc"){this.field=e,this.dir=n}}function zK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n){this.comparator=e,this.root=n||Fn.EMPTY}insert(e,n){return new Ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fn.BLACK,null,null))}remove(e){return new Ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $g(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $g(this.root,e,this.comparator,!1)}getReverseIterator(){return new $g(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $g(this.root,e,this.comparator,!0)}}class $g{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:Fn.RED,this.left=i!=null?i:Fn.EMPTY,this.right=s!=null?s:Fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Fn(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Fn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}Fn.EMPTY=null,Fn.RED=!0,Fn.BLACK=!1;Fn.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Fn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.comparator=e,this.data=new Ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ck(this.data.getIterator())}getIteratorFrom(e){return new Ck(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yt(this.comparator);return n.data=e,n}}class Ck{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wu(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new Rr([])}unionWith(e){let n=new yt(Jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zd(n)}setAll(e){let n=Jt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=zd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());fm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){pu(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new $n(zd(this.value))}}function iL(t){const e=[];return pu(t.fields,(n,r)=>{const i=new Jt([n]);if(fm(r)){const s=iL(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new kt(e,0,Ce.min(),Ce.min(),Ce.min(),$n.empty(),0)}static newFoundDocument(e,n,r,i){return new kt(e,1,n,Ce.min(),r,i,0)}static newNoDocument(e,n){return new kt(e,2,n,Ce.min(),Ce.min(),$n.empty(),0)}static newUnknownDocument(e,n){return new kt(e,3,n,Ce.min(),Ce.min(),$n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this._t=null}}function RE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new WK(t,e,n,r,i,s,o)}function Jl(t){const e=de(t);if(e._t===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>PE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Sp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qc(r)).join(",")),e._t=n}return e._t}function Cp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zK(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ZO(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sk(t.startAt,e.startAt)&&Sk(t.endAt,e.endAt)}function _y(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function wy(t,e){return t.filters.filter(n=>n instanceof Ke&&n.field.isEqual(e))}function bk(t,e,n){let r=dm,i=!0;for(const s of wy(t,e)){let o=dm,a=!0;switch(s.op){case"<":case"<=":o=MK(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=dm}Ek({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Ek({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function kk(t,e,n){let r=Jo,i=!0;for(const s of wy(t,e)){let o=Jo,a=!0;switch(s.op){case">=":case">":o=FK(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Jo}Tk({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Tk({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.wt=null,this.gt=null,this.startAt,this.endAt}}function sL(t,e,n,r,i,s,o,a){return new fo(t,e,n,r,i,s,o,a)}function mh(t){return new fo(t)}function xk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function CS(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function jv(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function bS(t){return t.collectionGroup!==null}function Ll(t){const e=de(t);if(e.wt===null){e.wt=[];const n=jv(e),r=CS(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new Tc(n)),e.wt.push(new Tc(Jt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Tc(Jt.keyField(),s))}}}return e.wt}function Ur(t){const e=de(t);if(!e.gt)if(e.limitType==="F")e.gt=RE(e.path,e.collectionGroup,Ll(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Ll(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new Tc(s.field,o))}const r=e.endAt?new ba(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ba(e.startAt.position,e.startAt.inclusive):null;e.gt=RE(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.gt}function OE(t,e){e.getFirstInequalityField(),jv(t);const n=t.filters.concat([e]);return new fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ey(t,e,n){return new fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bp(t,e){return Cp(Ur(t),Ur(e))&&t.limitType===e.limitType}function oL(t){return`${Jl(Ur(t))}|lt:${t.limitType}`}function LE(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>tL(r)).join(", ")}]`),Sp(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qc(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qc(r)).join(",")),`Target(${n})`}(Ur(t))}; limitType=${t.limitType})`}function kp(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):ue.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Ll(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=Ik(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Ll(n),r)||n.endAt&&!function(i,s,o){const a=Ik(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Ll(n),r))}(t,e)}function aL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lL(t){return(e,n)=>{let r=!1;for(const i of Ll(t)){const s=HK(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function HK(t,e,n){const r=t.field.isKeyField()?ue.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return a!==null&&u!==null?Ca(a,u):ge()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t,e){if(t.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$f(e)?"-0":e}}function cL(t){return{integerValue:""+t}}function hL(t,e){return KO(e)?cL(e):uL(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this._=void 0}}function GK(t,e,n){return t instanceof Wc?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Zl?fL(t,e):t instanceof eu?pL(t,e):function(r,i){const s=dL(r,i),o=Nk(s)+Nk(r.It);return AE(s)&&AE(r.It)?cL(o):uL(r.Tt,o)}(t,e)}function KK(t,e,n){return t instanceof Zl?fL(t,e):t instanceof eu?pL(t,e):n}function dL(t,e){return t instanceof Hc?AE(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Wc extends qv{}class Zl extends qv{constructor(e){super(),this.elements=e}}function fL(t,e){const n=gL(e);for(const r of t.elements)n.some(i=>bs(i,r))||n.push(r);return{arrayValue:{values:n}}}class eu extends qv{constructor(e){super(),this.elements=e}}function pL(t,e){let n=gL(e);for(const r of t.elements)n=n.filter(i=>!bs(i,r));return{arrayValue:{values:n}}}class Hc extends qv{constructor(e,n){super(),this.Tt=e,this.It=n}}function Nk(t){return zt(t.integerValue||t.doubleValue)}function gL(t){return Bf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n){this.field=e,this.transform=n}}function QK(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Zl&&r instanceof Zl||n instanceof eu&&r instanceof eu?jc(n.elements,r.elements,bs):n instanceof Hc&&r instanceof Hc?bs(n.It,r.It):n instanceof Wc&&r instanceof Wc}(t.transform,e.transform)}class YK{constructor(e,n){this.version=e,this.transformResults=n}}class Rt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Rt}static exists(e){return new Rt(void 0,e)}static updateTime(e){return new Rt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zv{}function mL(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vh(t.key,Rt.none()):new yh(t.key,t.data,Rt.none());{const n=t.data,r=$n.empty();let i=new yt(Jt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new po(t.key,r,new Rr(i.toArray()),Rt.none())}}function XK(t,e,n){t instanceof yh?function(r,i,s){const o=r.value.clone(),a=Dk(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof po?function(r,i,s){if(!pm(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=Dk(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(yL(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Wd(t,e,n,r){return t instanceof yh?function(i,s,o,a){if(!pm(i.precondition,s))return o;const u=i.value.clone(),h=Pk(i.fieldTransforms,a,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof po?function(i,s,o,a){if(!pm(i.precondition,s))return o;const u=Pk(i.fieldTransforms,a,s),h=s.data;return h.setAll(yL(i)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,s,o){return pm(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function JK(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=dL(r.transform,i||null);s!=null&&(n===null&&(n=$n.empty()),n.set(r.field,s))}return n||null}function Ak(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&jc(n,r,(i,s)=>QK(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yh extends zv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class po extends zv{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function yL(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Dk(t,e,n){const r=new Map;Ie(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,KK(o,a,n[i]))}return r}function Pk(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,GK(s,o,e))}return r}class vh extends zv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kS extends zv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZK{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn,Je;function vL(t){switch(t){default:return ge();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}function _L(t){if(t===void 0)return Xt("GRPC error has no .code"),H.UNKNOWN;switch(t){case tn.OK:return H.OK;case tn.CANCELLED:return H.CANCELLED;case tn.UNKNOWN:return H.UNKNOWN;case tn.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case tn.INTERNAL:return H.INTERNAL;case tn.UNAVAILABLE:return H.UNAVAILABLE;case tn.UNAUTHENTICATED:return H.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case tn.NOT_FOUND:return H.NOT_FOUND;case tn.ALREADY_EXISTS:return H.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return H.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case tn.ABORTED:return H.ABORTED;case tn.OUT_OF_RANGE:return H.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return H.UNIMPLEMENTED;case tn.DATA_LOSS:return H.DATA_LOSS;default:return ge()}}(Je=tn||(tn={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pu(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return GO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=new Ht(ue.comparator);function Or(){return e4}const wL=new Ht(ue.comparator);function Sd(...t){let e=wL;for(const n of t)e=e.insert(n.key,n);return e}function EL(t){let e=wL;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ms(){return Hd()}function TL(){return Hd()}function Hd(){return new Va(t=>t.toString(),(t,e)=>t.isEqual(e))}const t4=new Ht(ue.comparator),n4=new yt(ue.comparator);function Ve(...t){let e=n4;for(const n of t)e=e.add(n);return e}const r4=new yt(Ue);function Wv(){return r4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ap.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Np(Ce.min(),i,Wv(),Or(),Ve())}}class Ap{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ap(r,n,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n,r,i){this.Et=e,this.removedTargetIds=n,this.key=r,this.At=i}}class IL{constructor(e,n){this.targetId=e,this.Rt=n}}class SL{constructor(e,n,r=cn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Rk{constructor(){this.Pt=0,this.vt=Lk(),this.bt=cn.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return this.Pt!==0}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=Ve(),n=Ve(),r=Ve();return this.vt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ge()}}),new Ap(this.bt,this.Vt,e,n,r)}kt(){this.St=!1,this.vt=Lk()}$t(e,n){this.St=!0,this.vt=this.vt.insert(e,n)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class i4{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=Or(),this.Kt=Ok(),this.Gt=new yt(Ue)}Qt(e){for(const n of e.Et)e.At&&e.At.isFoundDocument()?this.jt(n,e.At):this.zt(n,e.key,e.At);for(const n of e.removedTargetIds)this.zt(n,e.key,e.At)}Wt(e){this.forEachTarget(e,n=>{const r=this.Ht(n);switch(e.state){case 0:this.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||this.removeTarget(n);break;case 3:this.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(n)&&(this.Yt(n),r.xt(e.resumeToken));break;default:ge()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qt.forEach((r,i)=>{this.Jt(i)&&n(i)})}Zt(e){const n=e.targetId,r=e.Rt.count,i=this.Xt(n);if(i){const s=i.target;if(_y(s))if(r===0){const o=new ue(s.path);this.zt(n,o,kt.newNoDocument(o,Ce.min()))}else Ie(r===1);else this.te(n)!==r&&(this.Yt(n),this.Gt=this.Gt.add(n))}}ee(e){const n=new Map;this.qt.forEach((s,o)=>{const a=this.Xt(o);if(a){if(s.current&&_y(a.target)){const u=new ue(a.target.path);this.Ut.get(u)!==null||this.ne(o,u)||this.zt(o,u,kt.newNoDocument(u,e))}s.Ct&&(n.set(o,s.Nt()),s.kt())}});let r=Ve();this.Kt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const h=this.Xt(u);return!h||h.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))}),this.Ut.forEach((s,o)=>o.setReadTime(e));const i=new Np(e,n,this.Gt,this.Ut,r);return this.Ut=Or(),this.Kt=Ok(),this.Gt=new yt(Ue),i}jt(e,n){if(!this.Jt(e))return;const r=this.ne(e,n.key)?2:0;this.Ht(e).$t(n.key,r),this.Ut=this.Ut.insert(n.key,n),this.Kt=this.Kt.insert(n.key,this.se(n.key).add(e))}zt(e,n,r){if(!this.Jt(e))return;const i=this.Ht(e);this.ne(e,n)?i.$t(n,1):i.Mt(n),this.Kt=this.Kt.insert(n,this.se(n).delete(e)),r&&(this.Ut=this.Ut.insert(n,r))}removeTarget(e){this.qt.delete(e)}te(e){const n=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let n=this.qt.get(e);return n||(n=new Rk,this.qt.set(e,n)),n}se(e){let n=this.Kt.get(e);return n||(n=new yt(Ue),this.Kt=this.Kt.insert(e,n)),n}Jt(e){const n=this.Xt(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.qt.get(e);return n&&n.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new Rk),this.Lt.getRemoteKeysForTarget(e).forEach(n=>{this.zt(e,n,null)})}ne(e,n){return this.Lt.getRemoteKeysForTarget(e).has(n)}}function Ok(){return new Ht(ue.comparator)}function Lk(){return new Ht(ue.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),o4=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),a4=(()=>({and:"AND",or:"OR"}))();class l4{constructor(e,n){this.databaseId=e,this.yt=n}}function Gc(t,e){return t.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CL(t,e){return t.yt?e.toBase64():e.toUint8Array()}function u4(t,e){return Gc(t,e.toTimestamp())}function Zt(t){return Ie(!!t),Ce.fromTimestamp(function(e){const n=Sa(e);return new Ot(n.seconds,n.nanos)}(t))}function xS(t,e){return function(n){return new et(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function bL(t){const e=et.fromString(t);return Ie(LL(e)),e}function jf(t,e){return xS(t.databaseId,e.path)}function Es(t,e){const n=bL(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(xL(n))}function ME(t,e){return xS(t.databaseId,e)}function kL(t){const e=bL(t);return e.length===4?et.emptyPath():xL(e)}function qf(t){return new et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xL(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Mk(t,e,n){return{name:jf(t,e),fields:n.value.mapValue.fields}}function NL(t,e,n){const r=Es(t,e.name),i=Zt(e.updateTime),s=e.createTime?Zt(e.createTime):Ce.min(),o=new $n({mapValue:{fields:e.fields}}),a=kt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function c4(t,e){return"found"in e?function(n,r){Ie(!!r.found),r.found.name,r.found.updateTime;const i=Es(n,r.found.name),s=Zt(r.found.updateTime),o=r.found.createTime?Zt(r.found.createTime):Ce.min(),a=new $n({mapValue:{fields:r.found.fields}});return kt.newFoundDocument(i,s,o,a)}(t,e):"missing"in e?function(n,r){Ie(!!r.missing),Ie(!!r.readTime);const i=Es(n,r.missing),s=Zt(r.readTime);return kt.newNoDocument(i,s)}(t,e):ge()}function h4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.yt?(Ie(h===void 0||typeof h=="string"),cn.fromBase64String(h||"")):(Ie(h===void 0||h instanceof Uint8Array),cn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?H.UNKNOWN:_L(u.code);return new ee(h,u.message||"")}(o);n=new SL(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Es(t,r.document.name),s=Zt(r.document.updateTime),o=r.document.createTime?Zt(r.document.createTime):Ce.min(),a=new $n({mapValue:{fields:r.document.fields}}),u=kt.newFoundDocument(i,s,o,a),h=r.targetIds||[],p=r.removedTargetIds||[];n=new gm(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Es(t,r.document),s=r.readTime?Zt(r.readTime):Ce.min(),o=kt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new gm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Es(t,r.document),s=r.removedTargetIds||[];n=new gm([],s,i,null)}else{if(!("filter"in e))return ge();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,s=new ZK(i),o=r.targetId;n=new IL(o,s)}}return n}function zf(t,e){let n;if(e instanceof yh)n={update:Mk(t,e.key,e.value)};else if(e instanceof vh)n={delete:jf(t,e.key)};else if(e instanceof po)n={update:Mk(t,e.key,e.data),updateMask:y4(e.fieldMask)};else{if(!(e instanceof kS))return ge();n={verify:jf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Wc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Zl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof eu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Hc)return{fieldPath:s.field.canonicalString(),increment:o.It};throw ge()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:u4(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ge()}(t,e.precondition)),n}function FE(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Rt.updateTime(Zt(i.updateTime)):i.exists!==void 0?Rt.exists(i.exists):Rt.none()}(e.currentDocument):Rt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;if("setToServerValue"in o)Ie(o.setToServerValue==="REQUEST_TIME"),a=new Wc;else if("appendMissingElements"in o){const h=o.appendMissingElements.values||[];a=new Zl(h)}else if("removeAllFromArray"in o){const h=o.removeAllFromArray.values||[];a=new eu(h)}else"increment"in o?a=new Hc(s,o.increment):ge();const u=Jt.fromServerFormat(o.fieldPath);return new xp(u,a)}(t,i)):[];if(e.update){e.update.name;const i=Es(t,e.update.name),s=new $n({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const u=a.fieldPaths||[];return new Rr(u.map(h=>Jt.fromServerFormat(h)))}(e.updateMask);return new po(i,s,o,n,r)}return new yh(i,s,n,r)}if(e.delete){const i=Es(t,e.delete);return new vh(i,n)}if(e.verify){const i=Es(t,e.verify);return new kS(i,n)}return ge()}function d4(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?Zt(r.updateTime):Zt(i);return s.isEqual(Ce.min())&&(s=Zt(i)),new YK(s,r.transformResults||[])}(n,e))):[]}function AL(t,e){return{documents:[ME(t,e.path)]}}function DL(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=ME(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ME(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(u.length!==0)return OL(ft.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Gu(p.field),direction:p4(p.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(u,h){return u.yt||Sp(h)?h:{value:h}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n}function PL(t){let e=kL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ie(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(p){const v=RL(p);return v instanceof ft&&SS(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(p=>function(v){return new Tc(Ku(v.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p)));let a=null;n.limit&&(a=function(p){let v;return v=typeof p=="object"?p.value:p,Sp(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(p){const v=!!p.before,w=p.values||[];return new ba(w,v)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const v=!p.before,w=p.values||[];return new ba(w,v)}(n.endAt)),sL(e,i,o,s,a,"F",u,h)}function f4(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ge()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function RL(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ku(e.unaryFilter.field);return Ke.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Ku(e.unaryFilter.field);return Ke.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ku(e.unaryFilter.field);return Ke.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ku(e.unaryFilter.field);return Ke.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(t):t.fieldFilter!==void 0?function(e){return Ke.create(Ku(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return ft.create(e.compositeFilter.filters.map(n=>RL(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return ge()}}(e.compositeFilter.op))}(t):ge()}function p4(t){return s4[t]}function g4(t){return o4[t]}function m4(t){return a4[t]}function Gu(t){return{fieldPath:t.canonicalString()}}function Ku(t){return Jt.fromServerFormat(t.fieldPath)}function OL(t){return t instanceof Ke?function(e){if(e.op==="=="){if(wk(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NAN"}};if(_k(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(wk(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NOT_NAN"}};if(_k(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gu(e.field),op:g4(e.op),value:e.value}}}(t):t instanceof ft?function(e){const n=e.getFilters().map(r=>OL(r));return n.length===1?n[0]:{compositeFilter:{op:m4(e.op),filters:n}}}(t):ge()}function y4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LL(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Fk(e)),e=v4(t.get(n),e);return Fk(e)}function v4(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Fk(t){return t+""}function ys(t){const e=t.length;if(Ie(e>=2),e===2)return Ie(t.charAt(0)===""&&t.charAt(1)===""),et.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&ge(),t.charAt(o+1)){case"":const a=t.substring(s,o);let u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:ge()}s=o+2}return new et(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t,e){return[t,vr(e)]}function ML(t,e,n){return[t,vr(e),n]}const _4={},w4=["prefixPath","collectionGroup","readTime","documentId"],E4=["prefixPath","collectionGroup","documentId"],T4=["collectionGroup","readTime","prefixPath","documentId"],I4=["canonicalId","targetId"],S4=["targetId","path"],C4=["path","targetId"],b4=["collectionId","parent"],k4=["indexId","uid"],x4=["uid","sequenceNumber"],N4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],A4=["indexId","uid","orderedDocumentKey"],D4=["userId","collectionPath","documentId"],P4=["userId","collectionPath","largestBatchId"],R4=["userId","collectionGroup","largestBatchId"],FL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],O4=[...FL,"documentOverlays"],$L=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],UL=$L,L4=[...UL,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E extends HO{constructor(e,n){super(),this.re=e,this.currentSequenceNumber=n}}function xn(t,e){const n=de(t);return Bi.M(n.re,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&XK(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=TL();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=mL(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ve())}isEqual(e){return this.batchId===e.batchId&&jc(this.mutations,e.mutations,(n,r)=>Ak(n,r))&&jc(this.baseMutations,e.baseMutations,(n,r)=>Ak(n,r))}}class AS{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ie(e.mutations.length===r.length);let i=t4;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new AS(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n,r,i,s=Ce.min(),o=Ce.min(),a=cn.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new da(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e){this.oe=e}}function M4(t,e){let n;if(e.document)n=NL(t.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ue.fromSegments(e.noDocument.path),i=nu(e.noDocument.readTime);n=kt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ge();{const r=ue.fromSegments(e.unknownDocument.path),i=nu(e.unknownDocument.version);n=kt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new Ot(r[0],r[1]);return Ce.fromTimestamp(i)}(e.readTime)),n}function Uk(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ty(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,s){return{name:jf(i,s.key),fields:s.data.value.mapValue.fields,updateTime:Gc(i,s.version.toTimestamp()),createTime:Gc(i,s.createTime.toTimestamp())}}(t.oe,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:tu(e.version)};else{if(!e.isUnknownDocument())return ge();r.unknownDocument={path:n.path.toArray(),version:tu(e.version)}}return r}function Ty(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function tu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function nu(t){const e=new Ot(t.seconds,t.nanoseconds);return Ce.fromTimestamp(e)}function gl(t,e){const n=(e.baseMutations||[]).map(s=>FE(t.oe,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>FE(t.oe,s)),i=Ot.fromMillis(e.localWriteTimeMs);return new NS(e.batchId,i,n,r)}function Cd(t){const e=nu(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?nu(t.lastLimboFreeSnapshotVersion):Ce.min();let r;var i;return t.query.documents!==void 0?(Ie((i=t.query).documents.length===1),r=Ur(mh(kL(i.documents[0])))):r=function(s){return Ur(PL(s))}(t.query),new da(r,t.targetId,0,t.lastListenSequenceNumber,e,n,cn.fromBase64String(t.resumeToken))}function BL(t,e){const n=tu(e.snapshotVersion),r=tu(e.lastLimboFreeSnapshotVersion);let i;i=_y(e.target)?AL(t.oe,e.target):DL(t.oe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Jl(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function PS(t){const e=PL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ey(e,e.limit,"L"):e}function Aw(t,e){return new DS(e.largestBatchId,FE(t.oe,e.overlayMutation))}function Vk(t,e){const n=e.path.lastSegment();return[t,vr(e.path.popLast()),n]}function Bk(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:tu(r.readTime),documentKey:vr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{getBundleMetadata(e,n){return jk(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:nu(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return jk(e).put({bundleId:(r=n).id,createTime:tu(Zt(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return qk(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:PS(i.bundledQuery),readTime:nu(i.readTime)};var i})}saveNamedQuery(e,n){return qk(e).put(function(r){return{name:r.name,readTime:tu(Zt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function jk(t){return xn(t,"bundles")}function qk(t){return xn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n){this.Tt=e,this.userId=n}static ue(e,n){const r=n.uid||"";return new Hv(e,r)}getOverlay(e,n){return ud(e).get(Vk(this.userId,n)).next(r=>r?Aw(this.Tt,r):null)}getOverlays(e,n){const r=ms();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new DS(n,o);i.push(this.ce(e,a))}),q.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(vr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(ud(e).Y("collectionPathOverlayIndex",a))}),q.waitFor(s)}getOverlaysForCollection(e,n,r){const i=ms(),s=vr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ud(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const h=Aw(this.Tt,u);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=ms();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ud(e).X({index:"collectionGroupOverlayIndex",range:a},(u,h,p)=>{const v=Aw(this.Tt,h);s.size()<i||v.largestBatchId===o?(s.set(v.getKey(),v),o=v.largestBatchId):p.done()}).next(()=>s)}ce(e,n){return ud(e).put(function(r,i,s){const[o,a,u]=Vk(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:zf(r.oe,s.mutation)}}(this.Tt,this.userId,n))}}function ud(t){return xn(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){}ae(e,n){this.he(e,n),n.le()}he(e,n){if("nullValue"in e)this.fe(n,5);else if("booleanValue"in e)this.fe(n,10),n.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(n,15),n.de(zt(e.integerValue));else if("doubleValue"in e){const r=zt(e.doubleValue);isNaN(r)?this.fe(n,13):(this.fe(n,15),$f(r)?n.de(0):n.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(n,20),typeof r=="string"?n._e(r):(n._e(`${r.seconds||""}`),n.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,n),this.me(n);else if("bytesValue"in e)this.fe(n,30),n.ge(Ql(e.bytesValue)),this.me(n);else if("referenceValue"in e)this.ye(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(n,45),n.de(r.latitude||0),n.de(r.longitude||0)}else"mapValue"in e?YO(e)?this.fe(n,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,n),this.me(n)):"arrayValue"in e?(this.Ie(e.arrayValue,n),this.me(n)):ge()}we(e,n){this.fe(n,25),this.Te(e,n)}Te(e,n){n._e(e)}pe(e,n){const r=e.fields||{};this.fe(n,55);for(const i of Object.keys(r))this.we(i,n),this.he(r[i],n)}Ie(e,n){const r=e.values||[];this.fe(n,50);for(const i of r)this.he(i,n)}ye(e,n){this.fe(n,37),ue.fromName(e).path.forEach(r=>{this.fe(n,60),this.Te(r,n)})}fe(e,n){e.de(n)}me(e){e.de(2)}}ml.Ee=new ml;function $4(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function zk(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=$4(255&n[i]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}class U4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Re(r.value),r=n.next();this.Pe()}ve(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.be(r.value),r=n.next();this.Ve()}Se(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=n.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.Pe()}De(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=n.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Ve()}Ce(e){const n=this.xe(e),r=zk(n);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}ke(e){const n=this.xe(e),r=zk(n);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Re(e){const n=255&e;n===0?(this.Me(0),this.Me(255)):n===255?(this.Me(255),this.Me(0)):this.Me(n)}be(e){const n=255&e;n===0?(this.Fe(0),this.Fe(255)):n===255?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class V4{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class B4{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class cd{constructor(){this.Le=new U4,this.qe=new V4(this.Le),this.Ue=new B4(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return e===0?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ge(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new yl(this.indexId,this.documentKey,this.arrayValue,r)}}function $o(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Wk(t.arrayValue,e.arrayValue),n!==0?n:(n=Wk(t.directionalValue,e.directionalValue),n!==0?n:ue.comparator(t.documentKey,e.documentKey)))}function Wk(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const n of e.filters){const r=n;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){Ie(e.collectionGroup===this.collectionId);const n=xE(e);if(n!==void 0&&!this.He(n))return!1;const r=fl(e);let i=0,s=0;for(;i<r.length&&this.He(r[i]);++i);if(i===r.length)return!0;if(this.ze!==void 0){const o=r[i];if(!this.Je(this.ze,o)||!this.Ye(this.Qe[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Qe.length||!this.Ye(this.Qe[s++],o))return!1}return!0}He(e){for(const n of this.je)if(this.Je(n,e))return!0;return!1}Je(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}Ye(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t){var e,n;if(Ie(t instanceof Ke||t instanceof ft),t instanceof Ke){if(t instanceof rL){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Ke.create(t.field,"==",s)))||[];return ft.create(i,"or")}return t}const r=t.filters.map(i=>jL(i));return ft.create(r,t.op)}function q4(t){if(t.getFilters().length===0)return[];const e=BE(jL(t));return Ie(qL(e)),UE(e)||VE(e)?[e]:e.getFilters()}function UE(t){return t instanceof Ke}function VE(t){return t instanceof ft&&SS(t)}function qL(t){return UE(t)||VE(t)||function(e){if(e instanceof ft&&DE(e)){for(const n of e.getFilters())if(!UE(n)&&!VE(n))return!1;return!0}return!1}(t)}function BE(t){if(Ie(t instanceof Ke||t instanceof ft),t instanceof Ke)return t;if(t.filters.length===1)return BE(t.filters[0]);const e=t.filters.map(r=>BE(r));let n=ft.create(e,t.op);return n=Iy(n),qL(n)?n:(Ie(n instanceof ft),Ie(zc(n)),Ie(n.filters.length>1),n.filters.reduce((r,i)=>RS(r,i)))}function RS(t,e){let n;return Ie(t instanceof Ke||t instanceof ft),Ie(e instanceof Ke||e instanceof ft),n=t instanceof Ke?e instanceof Ke?function(r,i){return ft.create([r,i],"and")}(t,e):Hk(t,e):e instanceof Ke?Hk(e,t):function(r,i){if(Ie(r.filters.length>0&&i.filters.length>0),zc(r)&&zc(i))return eL(r,i.getFilters());const s=DE(r)?r:i,o=DE(r)?i:r,a=s.filters.map(u=>RS(u,o));return ft.create(a,"or")}(t,e),Iy(n)}function Hk(t,e){if(zc(e))return eL(e,t.getFilters());{const n=e.filters.map(r=>RS(t,r));return ft.create(n,"or")}}function Iy(t){if(Ie(t instanceof Ke||t instanceof ft),t instanceof Ke)return t;const e=t.getFilters();if(e.length===1)return Iy(e[0]);if(JO(t))return t;const n=e.map(i=>Iy(i)),r=[];return n.forEach(i=>{i instanceof Ke?r.push(i):i instanceof ft&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ft.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this.Ze=new OS}addToCollectionParentIndex(e,n){return this.Ze.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Ze.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(ei.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(ei.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class OS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new yt(et.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=new Uint8Array(0);class W4{constructor(e,n){this.user=e,this.databaseId=n,this.Xe=new OS,this.tn=new Va(r=>Jl(r),(r,i)=>Cp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Xe.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.Xe.add(n)});const s={collectionId:r,parent:vr(i)};return Gk(e).put(s)}return q.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[BO(n),""],!1,!0);return Gk(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ys(o.parent))}return r})}addFieldIndex(e,n){const r=Vg(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=dd(e);return s.next(a=>{o.put(Bk(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Vg(e),i=dd(e),s=hd(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=hd(e);let i=!0;const s=new Map;return q.forEach(this.en(n),o=>this.nn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ve();const a=[];return q.forEach(s,(u,h)=>{var p;te("IndexedDbIndexManager",`Using index ${p=u,`id=${p.indexId}|cg=${p.collectionGroup}|f=${p.fields.map(M=>`${M.fieldPath}:${M.kind}`).join(",")}`} to execute ${Jl(n)}`);const v=function(M,Q){const re=xE(Q);if(re===void 0)return null;for(const m of wy(M,re.fieldPath))switch(m.op){case"array-contains-any":return m.value.arrayValue.values||[];case"array-contains":return[m.value]}return null}(h,u),w=function(M,Q){const re=new Map;for(const m of fl(Q))for(const le of wy(M,m.fieldPath))switch(le.op){case"==":case"in":re.set(m.fieldPath.canonicalString(),le.value);break;case"not-in":case"!=":return re.set(m.fieldPath.canonicalString(),le.value),Array.from(re.values())}return null}(h,u),b=function(M,Q){const re=[];let m=!0;for(const le of fl(Q)){const he=le.kind===0?bk(M,le.fieldPath,M.startAt):kk(M,le.fieldPath,M.startAt);re.push(he.value),m&&(m=he.inclusive)}return new ba(re,m)}(h,u),k=function(M,Q){const re=[];let m=!0;for(const le of fl(Q)){const he=le.kind===0?kk(M,le.fieldPath,M.endAt):bk(M,le.fieldPath,M.endAt);re.push(he.value),m&&(m=he.inclusive)}return new ba(re,m)}(h,u),O=this.sn(u,h,b),J=this.sn(u,h,k),N=this.rn(u,h,w),D=this.on(u.indexId,v,O,b.inclusive,J,k.inclusive,N);return q.forEach(D,M=>r.J(M,n.limit).next(Q=>{Q.forEach(re=>{const m=ue.fromSegments(re.documentKey);o.has(m)||(o=o.add(m),a.push(m))})}))}).next(()=>a)}return q.resolve(null)})}en(e){let n=this.tn.get(e);return n||(e.filters.length===0?n=[e]:n=q4(ft.create(e.filters,"and")).map(r=>RE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,n),n)}on(e,n,r,i,s,o,a){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),h=u/(n!=null?n.length:1),p=[];for(let v=0;v<u;++v){const w=n?this.un(n[v/h]):Ug,b=this.cn(e,w,r[v%h],i),k=this.an(e,w,s[v%h],o),O=a.map(J=>this.cn(e,w,J,!0));p.push(...this.createRange(b,k,O))}return p}cn(e,n,r,i){const s=new yl(e,ue.empty(),n,r);return i?s:s.Ge()}an(e,n,r,i){const s=new yl(e,ue.empty(),n,r);return i?s.Ge():s}nn(e,n){const r=new j4(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.We(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.en(n);return q.forEach(i,s=>this.nn(e,s).next(o=>{o?r!==0&&o.fields.length<function(a){let u=new yt(Jt.comparator),h=!1;for(const p of a.filters)for(const v of p.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?h=!0:u=u.add(v.field));for(const p of a.orderBy)p.field.isKeyField()||(u=u.add(p.field));return u.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}hn(e,n){const r=new cd;for(const i of fl(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ke(i.kind);ml.Ee.ae(s,o)}return r.Be()}un(e){const n=new cd;return ml.Ee.ae(e,n.Ke(0)),n.Be()}ln(e,n){const r=new cd;return ml.Ee.ae(Xl(this.databaseId,n),r.Ke(function(i){const s=fl(i);return s.length===0?0:s[s.length-1].kind}(e))),r.Be()}rn(e,n,r){if(r===null)return[];let i=[];i.push(new cd);let s=0;for(const o of fl(e)){const a=r[s++];for(const u of i)if(this.fn(n,o.fieldPath)&&Bf(a))i=this.dn(i,o,a);else{const h=u.Ke(o.kind);ml.Ee.ae(a,h)}}return this._n(i)}sn(e,n,r){return this.rn(e,n,r.position)}_n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Be();return n}dn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new cd;u.seed(a.Be()),ml.Ee.ae(o,u.Ke(n.kind)),s.push(u)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof Ke&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Vg(e),i=dd(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return q.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(h,p){const v=p?new vy(p.sequenceNumber,new ei(nu(p.readTime),new ue(ys(p.documentKey)),p.largestBatchId)):vy.empty(),w=h.fields.map(([b,k])=>new kK(Jt.fromServerFormat(b),k));return new jO(h.indexId,h.collectionGroup,w,v)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Ue(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Vg(e),s=dd(e);return this.wn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>q.forEach(a,u=>s.put(Bk(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return q.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?q.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),q.forEach(a,u=>this.mn(e,i,u).next(h=>{const p=this.gn(s,u);return h.isEqual(p)?q.resolve():this.yn(e,s,u,h,p)}))))})}pn(e,n,r,i){return hd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.ln(r,n.key),documentKey:n.key.path.toArray()})}In(e,n,r,i){return hd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.ln(r,n.key),n.key.path.toArray()])}mn(e,n,r){const i=hd(e);let s=new yt($o);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,n)])},(o,a)=>{s=s.add(new yl(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}gn(e,n){let r=new yt($o);const i=this.hn(n,e);if(i==null)return r;const s=xE(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Bf(o))for(const a of o.arrayValue.values||[])r=r.add(new yl(n.indexId,e.key,this.un(a),i))}else r=r.add(new yl(n.indexId,e.key,Ug,i));return r}yn(e,n,r,i,s){te("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,u,h,p,v){const w=a.getIterator(),b=u.getIterator();let k=Wu(w),O=Wu(b);for(;k||O;){let J=!1,N=!1;if(k&&O){const D=h(k,O);D<0?N=!0:D>0&&(J=!0)}else k!=null?N=!0:J=!0;J?(p(O),O=Wu(b)):N?(v(k),k=Wu(w)):(k=Wu(w),O=Wu(b))}}(i,s,$o,a=>{o.push(this.pn(e,n,r,a))},a=>{o.push(this.In(e,n,r,a))}),q.waitFor(o)}wn(e){let n=1;return dd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>$o(o,a)).filter((o,a,u)=>!a||$o(o,u[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=$o(o,e),u=$o(o,n);if(a===0)i[0]=e.Ge();else if(a>0&&u<0)i.push(o),i.push(o.Ge());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Tn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Ug,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Ug,[]];s.push(IDBKeyRange.bound(a,u))}return s}Tn(e,n){return $o(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Kk)}getMinOffset(e,n){return q.mapArray(this.en(n),r=>this.nn(e,r).next(i=>i||ge())).next(Kk)}}function Gk(t){return xn(t,"collectionParents")}function hd(t){return xn(t,"indexEntries")}function Vg(t){return xn(t,"indexConfiguration")}function dd(t){return xn(t,"indexState")}function Kk(t){Ie(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;ES(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ei(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class kr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new kr(e,kr.DEFAULT_COLLECTION_PERCENTILE,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.X({range:o},(p,v,w)=>(a++,w.delete()));s.push(u.next(()=>{Ie(a===1)}));const h=[];for(const p of n.mutations){const v=ML(e,p.key.path,n.batchId);s.push(i.delete(v)),h.push(p.key)}return q.waitFor(s).next(()=>h)}function Sy(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ge();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr.DEFAULT_COLLECTION_PERCENTILE=10,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kr.DEFAULT=new kr(41943040,kr.DEFAULT_COLLECTION_PERCENTILE,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kr.DISABLED=new kr(-1,0,0);class Gv{constructor(e,n,r,i){this.userId=e,this.Tt=n,this.indexManager=r,this.referenceDelegate=i,this.En={}}static ue(e,n,r,i){Ie(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Gv(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uo(e).X({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Qu(e),o=Uo(e);return o.add({}).next(a=>{Ie(typeof a=="number");const u=new NS(a,n,r,i),h=function(w,b,k){const O=k.baseMutations.map(N=>zf(w.oe,N)),J=k.mutations.map(N=>zf(w.oe,N));return{userId:b,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:O,mutations:J}}(this.Tt,this.userId,u),p=[];let v=new yt((w,b)=>Ue(w.canonicalString(),b.canonicalString()));for(const w of i){const b=ML(this.userId,w.key.path,a);v=v.add(w.key.path.popLast()),p.push(o.put(h)),p.push(s.put(b,_4))}return v.forEach(w=>{p.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.En[a]=u.keys()}),q.waitFor(p).next(()=>u)})}lookupMutationBatch(e,n){return Uo(e).get(n).next(r=>r?(Ie(r.userId===this.userId),gl(this.Tt,r)):null)}An(e,n){return this.En[n]?q.resolve(this.En[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.En[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Uo(e).X({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Ie(a.batchId>=r),s=gl(this.Tt,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Uo(e).X({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uo(e).W("userMutationsIndex",n).next(r=>r.map(i=>gl(this.Tt,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=mm(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Qu(e).X({range:i},(o,a,u)=>{const[h,p,v]=o,w=ys(p);if(h===this.userId&&n.path.isEqual(w))return Uo(e).get(v).next(b=>{if(!b)throw ge();Ie(b.userId===this.userId),s.push(gl(this.Tt,b))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new yt(Ue);const i=[];return n.forEach(s=>{const o=mm(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Qu(e).X({range:a},(h,p,v)=>{const[w,b,k]=h,O=ys(b);w===this.userId&&s.path.isEqual(O)?r=r.add(k):v.done()});i.push(u)}),q.waitFor(i).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=mm(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new yt(Ue);return Qu(e).X({range:o},(u,h,p)=>{const[v,w,b]=u,k=ys(w);v===this.userId&&r.isPrefixOf(k)?k.length===i&&(a=a.add(b)):p.done()}).next(()=>this.Rn(e,a))}Rn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Uo(e).get(s).next(o=>{if(o===null)throw ge();Ie(o.userId===this.userId),r.push(gl(this.Tt,o))}))}),q.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return zL(e.re,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Pn(n.batchId)}),q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return q.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Qu(e).X({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=ys(s[1]);i.push(u)}else a.done()}).next(()=>{Ie(i.length===0)})})}containsKey(e,n){return WL(e,this.userId,n)}vn(e){return HL(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function WL(t,e,n){const r=mm(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Qu(t).X({range:s,Z:!0},(a,u,h)=>{const[p,v,w]=a;p===e&&v===i&&(o=!0),h.done()}).next(()=>o)}function Uo(t){return xn(t,"mutations")}function Qu(t){return xn(t,"documentMutations")}function HL(t){return xn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new ru(0)}static Sn(){return new ru(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e,n){this.referenceDelegate=e,this.Tt=n}allocateTargetId(e){return this.Dn(e).next(n=>{const r=new ru(n.highestTargetId);return n.highestTargetId=r.next(),this.Cn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(n=>Ce.fromTimestamp(new Ot(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Dn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Cn(e,i)))}addTargetData(e,n){return this.xn(e,n).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(n,r),this.Cn(e,r))))}updateTargetData(e,n){return this.xn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Hu(e).delete(n.targetId)).next(()=>this.Dn(e)).next(r=>(Ie(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Hu(e).X((o,a)=>{const u=Cd(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>q.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Hu(e).X((r,i)=>{const s=Cd(i);n(s)})}Dn(e){return Yk(e).get("targetGlobalKey").next(n=>(Ie(n!==null),n))}Cn(e,n){return Yk(e).put("targetGlobalKey",n)}xn(e,n){return Hu(e).put(BL(this.Tt,n))}Nn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Jl(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Hu(e).X({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const h=Cd(a);Cp(n,h.target)&&(s=h,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Wo(e);return n.forEach(o=>{const a=vr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),q.waitFor(i)}removeMatchingKeys(e,n,r){const i=Wo(e);return q.forEach(n,s=>{const o=vr(s.path);return q.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Wo(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Wo(e);let s=Ve();return i.X({range:r,Z:!0},(o,a,u)=>{const h=ys(o[1]),p=new ue(h);s=s.add(p)}).next(()=>s)}containsKey(e,n){const r=vr(n.path),i=IDBKeyRange.bound([r],[BO(r)],!1,!0);let s=0;return Wo(e).X({index:"documentTargetsIndex",Z:!0,range:i},([o,a],u,h)=>{o!==0&&(s++,h.done())}).next(()=>s>0)}ie(e,n){return Hu(e).get(n).next(r=>r?Cd(r):null)}}function Hu(t){return xn(t,"targets")}function Yk(t){return xn(t,"targetGlobal")}function Wo(t){return xn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk([t,e],[n,r]){const i=Ue(t,n);return i===0?Ue(e,r):i}class G4{constructor(e){this.kn=e,this.buffer=new yt(Xk),this.$n=0}Mn(){return++this.$n}On(e){const n=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Xk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class K4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Fn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return this.Fn!==null}Bn(e){te("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Fn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ua(n)?te("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await $a(n)}await this.Bn(3e5)})}}class Q4{constructor(e,n){this.Ln=e,this.params=n}calculateTargetCount(e,n){return this.Ln.qn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Pr.at);const r=new G4(n);return this.Ln.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.Ln.Un(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Ln.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Ln.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(Qk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qk):this.Kn(e,n))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,n){let r,i,s,o,a,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,o=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,a=Date.now(),this.removeTargets(e,r,n))).next(v=>(s=v,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(h=Date.now(),kE()<=Ze.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${v} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:v})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,n){this.db=e,this.garbageCollector=function(r,i){return new Q4(r,i)}(this,n)}qn(e){const n=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Gn(e){let n=0;return this.Un(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Un(e,n){return this.Qn(e,(r,i)=>n(i))}addReference(e,n,r){return Bg(e,r)}removeReference(e,n,r){return Bg(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Bg(e,n)}jn(e,n){return function(r,i){let s=!1;return HL(r).tt(o=>WL(r,o,i).next(a=>(a&&(s=!0),q.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Qn(e,(o,a)=>{if(a<=n){const u=this.jn(e,o).next(h=>{if(!h)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ce.min()),Wo(e).delete([0,vr(o.path)])))});i.push(u)}}).next(()=>q.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Bg(e,n)}Qn(e,n){const r=Wo(e);let i,s=Pr.at;return r.X({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:h})=>{o===0?(s!==Pr.at&&n(new ue(ys(i)),s),s=h,i=u):s=Pr.at}).next(()=>{s!==Pr.at&&n(new ue(ys(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Bg(t,e){return Wo(t).put(function(n,r){return{targetId:0,path:vr(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(){this.changes=new Va(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ol(e).put(r)}removeEntry(e,n,r){return ol(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Ty(s),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.zn(e,r)))}getEntry(e,n){let r=kt.newInvalidDocument(n);return ol(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(fd(n))},(i,s)=>{r=this.Wn(n,s)}).next(()=>r)}Hn(e,n){let r={size:0,document:kt.newInvalidDocument(n)};return ol(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(fd(n))},(i,s)=>{r={document:this.Wn(n,s),size:Sy(s)}}).next(()=>r)}getEntries(e,n){let r=Or();return this.Jn(e,n,(i,s)=>{const o=this.Wn(i,s);r=r.insert(i,o)}).next(()=>r)}Yn(e,n){let r=Or(),i=new Ht(ue.comparator);return this.Jn(e,n,(s,o)=>{const a=this.Wn(s,o);r=r.insert(s,a),i=i.insert(s,Sy(o))}).next(()=>({documents:r,Zn:i}))}Jn(e,n,r){if(n.isEmpty())return q.resolve();let i=new yt(ex);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(fd(i.first()),fd(i.last())),o=i.getIterator();let a=o.getNext();return ol(e).X({index:"documentKeyIndex",range:s},(u,h,p)=>{const v=ue.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;a&&ex(a,v)<0;)r(a,null),a=o.getNext();a&&a.isEqual(v)&&(r(a,h),a=o.hasNext()?o.getNext():null),a?p.j(fd(a)):p.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),Ty(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ol(e).W(IDBKeyRange.bound(o,a,!0)).next(u=>{let h=Or();for(const p of u){const v=this.Wn(ue.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);v.isFoundDocument()&&(kp(n,v)||i.has(v.key))&&(h=h.insert(v.key,v))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=Or();const o=Zk(n,r),a=Zk(n,ei.max());return ol(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,h,p)=>{const v=this.Wn(ue.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(v.key,v),s.size===i&&p.done()}).next(()=>s)}newChangeBuffer(e){return new J4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Jk(e).get("remoteDocumentGlobalKey").next(n=>(Ie(!!n),n))}zn(e,n){return Jk(e).put("remoteDocumentGlobalKey",n)}Wn(e,n){if(n){const r=M4(this.Tt,n);if(!(r.isNoDocument()&&r.version.isEqual(Ce.min())))return r}return kt.newInvalidDocument(e)}}function KL(t){return new X4(t)}class J4 extends GL{constructor(e,n){super(),this.Xn=e,this.trackRemovals=n,this.ts=new Va(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new yt((s,o)=>Ue(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ts.get(s);if(n.push(this.Xn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=Uk(this.Xn.Tt,o);i=i.add(s.path.popLast());const h=Sy(u);r+=h-a.size,n.push(this.Xn.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=Uk(this.Xn.Tt,o.convertToNoDocument(Ce.min()));n.push(this.Xn.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.Xn.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Xn.updateMetadata(e,r)),q.waitFor(n)}getFromCache(e,n){return this.Xn.Hn(e,n).next(r=>(this.ts.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Xn.Yn(e,n).next(({documents:r,Zn:i})=>(i.forEach((s,o)=>{this.ts.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function Jk(t){return xn(t,"remoteDocumentGlobal")}function ol(t){return xn(t,"remoteDocumentsV14")}function fd(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Zk(t,e){const n=e.documentKey.path.toArray();return[t,Ty(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ex(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Ue(n[s],r[s]),i)return i;return i=Ue(n.length,r.length),i||(i=Ue(n[n.length-2],r[r.length-2]),i||Ue(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Wd(r.mutation,i,Rr.empty(),Ot.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ve()){const i=ms();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Sd();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ve()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Or();const o=Hd(),a=Hd();return n.forEach((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof po)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Wd(p.mutation,h,p.mutation.getFieldMask(),Ot.now())):o.set(h.key,Rr.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var v;return a.set(h,new Z4(p,(v=o.get(h))!==null&&v!==void 0?v:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Hd();let i=new Ht((o,a)=>o-a),s=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||Rr.empty();p=a.applyToLocalView(h,p),r.set(u,p);const v=(i.get(a.batchId)||Ve()).add(u);i=i.insert(a.batchId,v)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),h=u.key,p=u.value,v=TL();p.forEach(w=>{if(!s.has(w)){const b=mL(n.get(w),r.get(w));b!==null&&v.set(w,b),s=s.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,v))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return ue.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):q.resolve(ms());let a=-1,u=s;return o.next(h=>q.forEach(h,(p,v)=>(a<v.largestBatchId&&(a=v.largestBatchId),s.get(p)?q.resolve():this.remoteDocumentCache.getEntry(e,p).next(w=>{u=u.insert(p,w)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,Ve())).next(p=>({batchId:a,changes:EL(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(r=>{let i=Sd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Sd();return this.indexManager.getCollectionParents(e,i).next(o=>q.forEach(o,a=>{const u=function(h,p){return new fo(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r).next(h=>{h.forEach((p,v)=>{s=s.insert(p,v)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,u)=>{const h=u.getKey();s.get(h)===null&&(s=s.insert(h,kt.newInvalidDocument(h)))});let o=Sd();return s.forEach((a,u)=>{const h=i.get(a);h!==void 0&&Wd(h.mutation,u,Rr.empty(),Ot.now()),kp(n,u)&&(o=o.insert(a,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eQ{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,n){return q.resolve(this.es.get(n))}saveBundleMetadata(e,n){var r;return this.es.set(n.id,{id:(r=n).id,version:r.version,createTime:Zt(r.createTime)}),q.resolve()}getNamedQuery(e,n){return q.resolve(this.ns.get(n))}saveNamedQuery(e,n){return this.ns.set(n.name,function(r){return{name:r.name,query:PS(r.bundledQuery),readTime:Zt(r.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tQ{constructor(){this.overlays=new Ht(ue.comparator),this.ss=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ms();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ce(e,n,s)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ss.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ss.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const i=ms(),s=n.length+1,o=new ue(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ht((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=ms(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const a=ms(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>a.set(h,p)),!(a.size()>=i)););return q.resolve(a)}ce(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.ss.get(i.largestBatchId).delete(r.key);this.ss.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new DS(n,r));let s=this.ss.get(n);s===void 0&&(s=Ve(),this.ss.set(n,s)),this.ss.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.rs=new yt(mn.os),this.us=new yt(mn.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,n){const r=new mn(e,n);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ls(new mn(e,n))}fs(e,n){e.forEach(r=>this.removeReference(r,n))}ds(e){const n=new ue(new et([])),r=new mn(n,e),i=new mn(n,e+1),s=[];return this.us.forEachInRange([r,i],o=>{this.ls(o),s.push(o.key)}),s}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const n=new ue(new et([])),r=new mn(n,e),i=new mn(n,e+1);let s=Ve();return this.us.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new mn(e,0),r=this.rs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mn{constructor(e,n){this.key=e,this.gs=n}static os(e,n){return ue.comparator(e.key,n.key)||Ue(e.gs,n.gs)}static cs(e,n){return Ue(e.gs,n.gs)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nQ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new yt(mn.os)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new NS(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.ps=this.ps.add(new mn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Is(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Ts(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.ys-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mn(n,0),i=new mn(n,Number.POSITIVE_INFINITY),s=[];return this.ps.forEachInRange([r,i],o=>{const a=this.Is(o.gs);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new yt(Ue);return n.forEach(i=>{const s=new mn(i,0),o=new mn(i,Number.POSITIVE_INFINITY);this.ps.forEachInRange([s,o],a=>{r=r.add(a.gs)})}),q.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ue.isDocumentKey(s)||(s=s.child(""));const o=new mn(new ue(s),0);let a=new yt(Ue);return this.ps.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(a=a.add(u.gs)),!0)},o),q.resolve(this.Es(a))}Es(e){const n=[];return e.forEach(r=>{const i=this.Is(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ie(this.As(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.ps;return q.forEach(n.mutations,i=>{const s=new mn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ps=r})}Pn(e){}containsKey(e,n){const r=new mn(n,0),i=this.ps.firstAfterOrEqual(r);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}As(e,n){return this.Ts(e)}Ts(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Is(e){const n=this.Ts(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rQ{constructor(e){this.Rs=e,this.docs=new Ht(ue.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Rs(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():kt.newInvalidDocument(n))}getEntries(e,n){let r=Or();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():kt.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Or();const o=n.path,a=new ue(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||ES(zO(p),r)<=0||(i.has(p.key)||kp(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ge()}Ps(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new iQ(this)}getSize(e){return q.resolve(this.size)}}class iQ extends GL{constructor(e){super(),this.Xn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Xn.addEntry(e,i)):this.Xn.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Xn.getEntry(e,n)}getAllFromCache(e,n){return this.Xn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sQ{constructor(e){this.persistence=e,this.vs=new Va(n=>Jl(n),Cp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.bs=0,this.Vs=new LS,this.targetCount=0,this.Ss=ru.Vn()}forEachTarget(e,n){return this.vs.forEach((r,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),q.resolve()}xn(e){this.vs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ss=new ru(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.xn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.xn(n),q.resolve()}removeTargetData(e,n){return this.vs.delete(n.target),this.Vs.ds(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.vs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.vs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.vs.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Vs.hs(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Vs.fs(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Vs.ds(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Vs.ws(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Vs.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e,n){this.Ds={},this.overlays={},this.Cs=new Pr(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new sQ(this),this.indexManager=new z4,this.remoteDocumentCache=function(r){return new rQ(r)}(r=>this.referenceDelegate.ks(r)),this.Tt=new VL(n),this.$s=new eQ(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tQ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Ds[e.toKey()];return r||(r=new nQ(n,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const i=new oQ(this.Cs.next());return this.referenceDelegate.Ms(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Fs(e,n){return q.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,n)))}}class oQ extends HO{constructor(e){super(),this.currentSequenceNumber=e}}class Kv{constructor(e){this.persistence=e,this.Bs=new LS,this.Ls=null}static qs(e){return new Kv(e)}get Us(){if(this.Ls)return this.Ls;throw ge()}addReference(e,n,r){return this.Bs.addReference(r,n),this.Us.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Bs.removeReference(r,n),this.Us.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Us.add(n.toString()),q.resolve()}removeTarget(e,n){this.Bs.ds(n.targetId).forEach(i=>this.Us.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Us.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ms(){this.Ls=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Us,r=>{const i=ue.fromPath(r);return this.Ks(e,i).next(s=>{s||n.removeEntry(i,Ce.min())})}).next(()=>(this.Ls=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ks(e,n).next(r=>{r?this.Us.delete(n.toString()):this.Us.add(n.toString())})}ks(e){return 0}Ks(e,n){return q.or([()=>q.resolve(this.Bs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Fs(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aQ{constructor(e){this.Tt=e}F(e,n,r,i){const s=new Bv("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$k,{unique:!0}),a.createObjectStore("documentMutations")}(e),tx(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=q.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),tx(e)),o=o.next(()=>function(a){const u=a.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ce.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(a,u){return u.store("mutations").W().next(h=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$k,{unique:!0});const p=u.store("mutations"),v=h.map(w=>p.put(w));return q.waitFor(v)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Gs(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(s)))),r<7&&i>=7&&(o=o.next(()=>this.js(s))),r<8&&i>=8&&(o=o.next(()=>this.zs(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Ws(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(a){const u=a.createObjectStore("documentOverlays",{keyPath:D4});u.createIndex("collectionPathOverlayIndex",P4,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",R4,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const u=a.createObjectStore("remoteDocumentsV14",{keyPath:w4});u.createIndex("documentKeyIndex",E4),u.createIndex("collectionGroupIndex",T4)}(e)).next(()=>this.Hs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.Js(e,s))),r<15&&i>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:k4}).createIndex("sequenceNumberIndex",x4,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:N4}).createIndex("documentKeyIndex",A4,{unique:!1})}(e))),o}Qs(e){let n=0;return e.store("remoteDocuments").X((r,i)=>{n+=Sy(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>q.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>q.forEach(a,u=>{Ie(u.userId===s.userId);const h=gl(this.Tt,u);return zL(e,s.userId,h).next(()=>{})}))}))}js(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((o,a)=>{const u=new et(o),h=function(p){return[0,vr(p)]}(u);s.push(n.get(h).next(p=>p?q.resolve():(v=>n.put({targetId:0,path:vr(v),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>q.waitFor(s))})}zs(e,n){e.createObjectStore("collectionParents",{keyPath:b4});const r=n.store("collectionParents"),i=new OS,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:vr(u)})}};return n.store("remoteDocuments").X({Z:!0},(o,a)=>{const u=new et(o);return s(u.popLast())}).next(()=>n.store("documentMutations").X({Z:!0},([o,a,u],h)=>{const p=ys(a);return s(p.popLast())}))}Ws(e){const n=e.store("targets");return n.X((r,i)=>{const s=Cd(i),o=BL(this.Tt,s);return n.put(o)})}Hs(e,n){const r=n.store("remoteDocuments"),i=[];return r.X((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(h=o,h.document?new ue(et.fromString(h.document.name).popFirst(5)):h.noDocument?ue.fromSegments(h.noDocument.path):h.unknownDocument?ue.fromSegments(h.unknownDocument.path):ge()).path.toArray();var h;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const p={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(p))}).next(()=>q.waitFor(i))}Js(e,n){const r=n.store("mutations"),i=KL(this.Tt),s=new YL(Kv.qs,this.Tt.oe);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var h;let p=(h=a.get(u.userId))!==null&&h!==void 0?h:Ve();gl(this.Tt,u).keys().forEach(v=>p=p.add(v)),a.set(u.userId,p)}),q.forEach(a,(u,h)=>{const p=new wn(h),v=Hv.ue(this.Tt,p),w=s.getIndexManager(p),b=Gv.ue(p,this.Tt,w,s.referenceDelegate);return new QL(i,b,v,w).recalculateAndSaveOverlaysForDocumentKeys(new $E(n,Pr.at),u).next()})})}}function tx(t){t.createObjectStore("targetDocuments",{keyPath:S4}).createIndex("documentTargetsIndex",C4,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",I4,{unique:!0}),t.createObjectStore("targetGlobal")}const Dw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class MS{constructor(e,n,r,i,s,o,a,u,h,p,v=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ys=s,this.window=o,this.document=a,this.Zs=h,this.Xs=p,this.ti=v,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=w=>Promise.resolve(),!MS.C())throw new ee(H.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Y4(this,i),this.oi=n+"main",this.Tt=new VL(u),this.ui=new Bi(this.oi,this.ti,new aQ(this.Tt)),this.Ns=new H4(this.referenceDelegate,this.Tt),this.remoteDocumentCache=KL(this.Tt),this.$s=new F4,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,p===!1&&Xt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ee(H.FAILED_PRECONDITION,Dw);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Pr(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){return this.ri=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget(async()=>{this.started&&await this.ai()}))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(n=>{n||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(n=>this.isPrimary&&!n?this.mi(e).next(()=>!1):!!n&&this.gi(e).next(()=>!0))).catch(e=>{if(Ua(e))return te("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return te("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return pd(e).get("owner").next(n=>q.resolve(this.yi(n)))}pi(e){return jg(e).delete(this.clientId)}async Ii(){if(this.isPrimary&&!this.Ti(this.ii,18e5)){this.ii=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=xn(n,"clientMetadata");return r.W().next(i=>{const s=this.Ei(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return q.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.ci)for(const n of e)this.ci.removeItem(this.Ai(n.clientId))}}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?q.resolve(!0):pd(e).get("owner").next(n=>{if(n!==null&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)){if(this.yi(n)&&this.networkEnabled)return!0;if(!this.yi(n)){if(!n.allowTabSynchronization)throw new ee(H.FAILED_PRECONDITION,Dw);return!1}}return!(!this.networkEnabled||!this.inForeground)||jg(e).W().next(r=>this.Ei(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&te("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.xs=!1,this.Pi(),this.si&&(this.si.cancel(),this.si=null),this.vi(),this.bi(),await this.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new $E(e,Pr.at);return this.mi(n).next(()=>this.pi(n))}),this.ui.close(),this.Vi()}Ei(e,n){return e.filter(r=>this.Ti(r.updateTimeMs,n)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>jg(e).W().next(n=>this.Ei(n,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,n){return Gv.ue(e,this.Tt,n,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new W4(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return Hv.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,n,r){te("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(o=this.ti)===15?L4:o===14?UL:o===13?$L:o===12?O4:o===11?FL:void ge();var o;let a;return this.ui.runTransaction(e,i,s,u=>(a=new $E(u,this.Cs?this.Cs.next():Pr.at),n==="readwrite-primary"?this._i(a).next(h=>!!h||this.wi(a)).next(h=>{if(!h)throw Xt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new ee(H.FAILED_PRECONDITION,WO);return r(a)}).next(h=>this.gi(a).next(()=>h)):this.Di(a).next(()=>r(a)))).then(u=>(a.raiseOnCommittedEvent(),u))}Di(e){return pd(e).get("owner").next(n=>{if(n!==null&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)&&!this.yi(n)&&!(this.Xs||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ee(H.FAILED_PRECONDITION,Dw)})}gi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pd(e).put("owner",n)}static C(){return Bi.C()}mi(e){const n=pd(e);return n.get("owner").next(r=>this.yi(r)?(te("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):q.resolve())}Ti(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Xt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}hi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground=this.document.visibilityState==="visible")}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ei=()=>{this.Pi();const n=/(?:Version|Mobile)\/1[456]/;JU()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var n;try{const r=((n=this.ci)===null||n===void 0?void 0:n.getItem(this.Ai(e)))!==null;return te("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Xt("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pd(t){return xn(t,"owner")}function jg(t){return xn(t,"clientMetadata")}function FS(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ci=r,this.xi=i}static Ni(e,n){let r=Ve(),i=Ve();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new $S(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(){this.ki=!1}initialize(e,n){this.$i=e,this.indexManager=n,this.ki=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Mi(e,n).next(s=>s||this.Oi(e,n,i,r)).next(s=>s||this.Fi(e,n))}Mi(e,n){if(xk(n))return q.resolve(null);let r=Ur(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ey(n,null,"F"),r=Ur(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ve(...s);return this.$i.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Bi(n,a);return this.Li(n,h,o,u.readTime)?this.Mi(e,Ey(n,null,"F")):this.qi(e,h,n,u)}))})))}Oi(e,n,r,i){return xk(n)||i.isEqual(Ce.min())?this.Fi(e,n):this.$i.getDocuments(e,r).next(s=>{const o=this.Bi(n,s);return this.Li(n,o,r,i)?this.Fi(e,n):(kE()<=Ze.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),LE(n)),this.qi(e,o,n,qO(i,-1)))})}Bi(e,n){let r=new yt(lL(e));return n.forEach((i,s)=>{kp(e,s)&&(r=r.add(s))}),r}Li(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Fi(e,n){return kE()<=Ze.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",LE(n)),this.$i.getDocumentsMatchingQuery(e,n,ei.min())}qi(e,n,r,i){return this.$i.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lQ{constructor(e,n,r,i){this.persistence=e,this.Ui=n,this.Tt=i,this.Ki=new Ht(Ue),this.Gi=new Va(s=>Jl(s),Cp),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QL(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ki))}}function JL(t,e,n,r){return new lQ(t,e,n,r)}async function ZL(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.zi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Ve();for(const h of i){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of s){a.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Wi:h,removedBatchIds:o,addedBatchIds:a}))})})}function uQ(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ji.newChangeBuffer({trackRemovals:!0});return function(o,a,u,h){const p=u.batch,v=p.keys();let w=q.resolve();return v.forEach(b=>{w=w.next(()=>h.getEntry(a,b)).next(k=>{const O=u.docVersions.get(b);Ie(O!==null),k.version.compareTo(O)<0&&(p.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),h.addEntry(k)))})}),w.next(()=>o.mutationQueue.removeMutationBatch(a,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Ve();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function eM(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ns.getLastRemoteSnapshotVersion(n))}function cQ(t,e){const n=de(t),r=e.snapshotVersion;let i=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ji.newChangeBuffer({trackRemovals:!0});i=n.Ki;const a=[];e.targetChanges.forEach((p,v)=>{const w=i.get(v);if(!w)return;a.push(n.Ns.removeMatchingKeys(s,p.removedDocuments,v).next(()=>n.Ns.addMatchingKeys(s,p.addedDocuments,v)));let b=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(v)?b=b.withResumeToken(cn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),i=i.insert(v,b),function(k,O,J){return k.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0}(w,b,p)&&a.push(n.Ns.updateTargetData(s,b))});let u=Or(),h=Ve();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),a.push(tM(s,o,e.documentUpdates).next(p=>{u=p.Hi,h=p.Ji})),!r.isEqual(Ce.min())){const p=n.Ns.getLastRemoteSnapshotVersion(s).next(v=>n.Ns.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(p)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ki=i,s))}function tM(t,e,n){let r=Ve(),i=Ve();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Or();return n.forEach((a,u)=>{const h=s.get(a);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Ce.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",u.version)}),{Hi:o,Ji:i}})}function hQ(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Kc(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ns.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):n.Ns.allocateTargetId(r).next(o=>(i=new da(e,o,0,r.currentSequenceNumber),n.Ns.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ki.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(r.targetId,r),n.Gi.set(e,r.targetId)),r})}async function Qc(t,e,n){const r=de(t),i=r.Ki.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ua(o))throw o;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(i.target)}function Cy(t,e,n){const r=de(t);let i=Ce.min(),s=Ve();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,h){const p=de(a),v=p.Gi.get(h);return v!==void 0?q.resolve(p.Ki.get(v)):p.Ns.getTargetData(u,h)}(r,o,Ur(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Ui.getDocumentsMatchingQuery(o,e,n?i:Ce.min(),n?s:Ve())).next(a=>(iM(r,aL(e),a),{documents:a,Yi:s})))}function nM(t,e){const n=de(t),r=de(n.Ns),i=n.Ki.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ie(s,e).next(o=>o?o.target:null))}function rM(t,e){const n=de(t),r=n.Qi.get(e)||Ce.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ji.getAllFromCollectionGroup(i,e,qO(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(iM(n,e,i),i))}function iM(t,e,n){let r=t.Qi.get(e)||Ce.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Qi.set(e,r)}async function dQ(t,e,n,r){const i=de(t);let s=Ve(),o=Or();for(const h of n){const p=e.Zi(h.metadata.name);h.document&&(s=s.add(p));const v=e.Xi(h);v.setReadTime(e.tr(h.metadata.readTime)),o=o.insert(p,v)}const a=i.ji.newChangeBuffer({trackRemovals:!0}),u=await Kc(i,function(h){return Ur(mh(et.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",h=>tM(h,a,o).next(p=>(a.apply(h),p)).next(p=>i.Ns.removeMatchingKeysForTargetId(h,u.targetId).next(()=>i.Ns.addMatchingKeys(h,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,p.Hi,p.Ji)).next(()=>p.Hi)))}async function fQ(t,e,n=Ve()){const r=await Kc(t,Ur(PS(e.bundledQuery))),i=de(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Zt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$s.saveNamedQuery(s,e);const a=r.withResumeToken(cn.EMPTY_BYTE_STRING,o);return i.Ki=i.Ki.insert(a.targetId,a),i.Ns.updateTargetData(s,a).next(()=>i.Ns.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ns.addMatchingKeys(s,n,r.targetId)).next(()=>i.$s.saveNamedQuery(s,e))})}function nx(t,e){return`firestore_clients_${t}_${e}`}function rx(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Pw(t,e){return`firestore_targets_${t}_${e}`}class by{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static er(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new ee(i.error.code,i.error.message))),o?new by(e,n,i.state,s):(Xt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gd{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static er(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ee(r.error.code,r.error.message))),s?new Gd(e,r.state,i):(Xt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ky{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static er(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Wv();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=KO(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new ky(e,s):(Xt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class US{constructor(e,n){this.clientId=e,this.onlineState=n}static er(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new US(n.clientId,n.onlineState):(Xt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jE{constructor(){this.activeTargetIds=Wv()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rw{constructor(e,n,r,i,s){this.window=e,this.Ys=n,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new Ht(Ue),this.started=!1,this.hr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.lr=nx(this.persistenceKey,this.rr),this.dr=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.ar=this.ar.insert(this.rr,new jE),this._r=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.gr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.yr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Si();for(const r of e){if(r===this.rr)continue;const i=this.getItem(nx(this.persistenceKey,r));if(i){const s=ky.er(r,i);s&&(this.ar=this.ar.insert(s.clientId,s))}}this.pr();const n=this.storage.getItem(this.gr);if(n){const r=this.Ir(n);r&&this.Tr(r)}for(const r of this.hr)this.cr(r);this.hr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let n=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,n,r){this.Ar(e,n,r),this.Rr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Pw(this.persistenceKey,e));if(r){const i=Gd.er(e,r);i&&(n=i.state)}}return this.Pr.sr(e),this.pr(),n}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pw(this.persistenceKey,e))}updateQueryState(e,n,r){this.vr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Rr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return te("SharedClientState","READ",e,n),n}setItem(e,n){te("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){te("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){const n=e;if(n.storageArea===this.storage){if(te("SharedClientState","EVENT",n.key,n.newValue),n.key===this.lr)return void Xt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this._r.test(n.key)){if(n.newValue==null){const r=this.Sr(n.key);return this.Dr(r,null)}{const r=this.Cr(n.key,n.newValue);if(r)return this.Dr(r.clientId,r)}}else if(this.wr.test(n.key)){if(n.newValue!==null){const r=this.Nr(n.key,n.newValue);if(r)return this.kr(r)}}else if(this.mr.test(n.key)){if(n.newValue!==null){const r=this.$r(n.key,n.newValue);if(r)return this.Mr(r)}}else if(n.key===this.gr){if(n.newValue!==null){const r=this.Ir(n.newValue);if(r)return this.Tr(r)}}else if(n.key===this.dr){const r=function(i){let s=Pr.at;if(i!=null)try{const o=JSON.parse(i);Ie(typeof o=="number"),s=o}catch(o){Xt("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);r!==Pr.at&&this.sequenceNumberHandler(r)}else if(n.key===this.yr){const r=this.Or(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Fr(i)))}}}else this.hr.push(n)})}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,n,r){const i=new by(this.currentUser,e,n,r),s=rx(this.persistenceKey,this.currentUser,e);this.setItem(s,i.nr())}Rr(e){const n=rx(this.persistenceKey,this.currentUser,e);this.removeItem(n)}br(e){const n={clientId:this.rr,onlineState:e};this.storage.setItem(this.gr,JSON.stringify(n))}vr(e,n,r){const i=Pw(this.persistenceKey,e),s=new Gd(e,n,r);this.setItem(i,s.nr())}Vr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.yr,n)}Sr(e){const n=this._r.exec(e);return n?n[1]:null}Cr(e,n){const r=this.Sr(e);return ky.er(r,n)}Nr(e,n){const r=this.wr.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return by.er(new wn(s),i,n)}$r(e,n){const r=this.mr.exec(e),i=Number(r[1]);return Gd.er(i,n)}Ir(e){return US.er(e)}Or(e){return JSON.parse(e)}async kr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Br(e.batchId,e.state,e.error);te("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,n){const r=n?this.ar.insert(e,n):this.ar.remove(e),i=this.Er(this.ar),s=this.Er(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.qr(o,a).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let n=Wv();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class sM{constructor(){this.Ur=new jE,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,n,r){this.Kr[e]=n}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new jE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{Gr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qg=null;function Ow(){return qg===null?qg=268435456+Math.round(2147483648*Math.random()):qg++,"0x"+qg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mQ{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn="WebChannelConnection";class yQ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.co=n+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,n,r,i,s){const o=Ow(),a=this.fo(e,n);te("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const u={};return this._o(u,i,s),this.wo(e,a,u,r).then(h=>(te("RestConnection",`Received RPC '${e}' ${o}: `,h),h),h=>{throw Bc("RestConnection",`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}mo(e,n,r,i,s,o){return this.lo(e,n,r,i,s)}_o(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+gh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}fo(e,n){const r=gQ[e];return`${this.co}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,n,r,i){const s=Ow();return new Promise((o,a)=>{const u=new gK;u.setWithCredentials(!0),u.listenOnce(dK.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Nw.NO_ERROR:const p=u.getResponseJson();te(Zn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case Nw.TIMEOUT:te(Zn,`RPC '${e}' ${s} timed out`),a(new ee(H.DEADLINE_EXCEEDED,"Request time out"));break;case Nw.HTTP_ERROR:const v=u.getStatus();if(te(Zn,`RPC '${e}' ${s} failed with status:`,v,"response text:",u.getResponseText()),v>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);const b=w==null?void 0:w.error;if(b&&b.status&&b.message){const k=function(O){const J=O.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(J)>=0?J:H.UNKNOWN}(b.status);a(new ee(k,b.message))}else a(new ee(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ee(H.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{te(Zn,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);te(Zn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}yo(e,n,r){const i=Ow(),s=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=cK(),a=hK(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new pK({})),this._o(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");te(Zn,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=o.createWebChannel(h,u);let v=!1,w=!1;const b=new mQ({Yr:O=>{w?te(Zn,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(v||(te(Zn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),te(Zn,`RPC '${e}' stream ${i} sending:`,O),p.send(O))},Zr:()=>p.close()}),k=(O,J,N)=>{O.listen(J,D=>{try{N(D)}catch(M){setTimeout(()=>{throw M},0)}})};return k(p,Fg.EventType.OPEN,()=>{w||te(Zn,`RPC '${e}' stream ${i} transport opened.`)}),k(p,Fg.EventType.CLOSE,()=>{w||(w=!0,te(Zn,`RPC '${e}' stream ${i} transport closed`),b.oo())}),k(p,Fg.EventType.ERROR,O=>{w||(w=!0,Bc(Zn,`RPC '${e}' stream ${i} transport errored:`,O),b.oo(new ee(H.UNAVAILABLE,"The operation could not be completed")))}),k(p,Fg.EventType.MESSAGE,O=>{var J;if(!w){const N=O.data[0];Ie(!!N);const D=N,M=D.error||((J=D[0])===null||J===void 0?void 0:J.error);if(M){te(Zn,`RPC '${e}' stream ${i} received error:`,M);const Q=M.status;let re=function(le){const he=tn[le];if(he!==void 0)return _L(he)}(Q),m=M.message;re===void 0&&(re=H.INTERNAL,m="Unknown error status: "+Q+" with message "+M.message),w=!0,b.oo(new ee(re,m)),p.close()}else te(Zn,`RPC '${e}' stream ${i} received:`,N),b.uo(N)}}),k(a,fK.STAT_EVENT,O=>{O.stat===pk.PROXY?te(Zn,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===pk.NOPROXY&&te(Zn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.ro()},0),b}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(){return typeof window<"u"?window:null}function ym(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t){return new l4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ys=e,this.timerId=n,this.po=r,this.Io=i,this.To=s,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const n=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,n-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){this.Ao!==null&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){this.Ao!==null&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,n,r,i,s,o,a,u){this.Ys=e,this.So=r,this.Do=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new VS(e,n)}$o(){return this.state===1||this.state===5||this.Mo()}Mo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.$o()&&await this.close(0)}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&this.xo===null&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}async Lo(){if(this.Mo())return this.close(0)}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}async close(e,n){this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,e!==4?this.ko.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Xt(n.toString()),Xt("Using maximum backoff delay to prevent overloading the backend."),this.ko.Po()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Go(),this.stream.close(),this.stream=null),this.state=e,await this.listener.no(n)}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Co===n&&this.jo(r,i)},r=>{e(()=>{const i=new ee(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(i)})})}jo(e,n){const r=this.Qo(this.Co);this.stream=this.Wo(e,n),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(i=>{r(()=>this.zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){this.state=5,this.ko.vo(async()=>{this.state=0,this.start()})}zo(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return n=>{this.Ys.enqueueAndForget(()=>this.Co===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vQ extends aM{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.Tt=s}Wo(e,n){return this.connection.yo("Listen",e,n)}onMessage(e){this.ko.reset();const n=h4(this.Tt,e),r=function(i){if(!("targetChange"in i))return Ce.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Ce.min():s.readTime?Zt(s.readTime):Ce.min()}(e);return this.listener.Ho(n,r)}Jo(e){const n={};n.database=qf(this.Tt),n.addTarget=function(i,s){let o;const a=s.target;return o=_y(a)?{documents:AL(i,a)}:{query:DL(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=CL(i,s.resumeToken):s.snapshotVersion.compareTo(Ce.min())>0&&(o.readTime=Gc(i,s.snapshotVersion.toTimestamp())),o}(this.Tt,e);const r=f4(this.Tt,e);r&&(n.labels=r),this.qo(n)}Yo(e){const n={};n.database=qf(this.Tt),n.removeTarget=e,this.qo(n)}}class _Q extends aM{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.Tt=s,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,n){return this.connection.yo("Write",e,n)}onMessage(e){if(Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const n=d4(e.writeResults,e.commitTime),r=Zt(e.commitTime);return this.listener.eu(r,n)}return Ie(!e.writeResults||e.writeResults.length===0),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=qf(this.Tt),this.qo(e)}tu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>zf(this.Tt,r))};this.qo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wQ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new ee(H.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,n,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.lo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ee(H.UNKNOWN,i.toString())})}mo(e,n,r,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.mo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee(H.UNKNOWN,s.toString())})}terminate(){this.iu=!0}}class EQ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){this.ou===0&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){this.state==="Online"?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,e==="Online"&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Xt(n),this.cu=!1):te("OnlineStateTracker",n)}du(){this.uu!==null&&(this.uu.cancel(),this.uu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TQ{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=s,this.yu.Gr(o=>{r.enqueueAndForget(async()=>{Ba(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(a){const u=de(a);u.mu.add(4),await _h(u),u.pu.set("Unknown"),u.mu.delete(4),await Pp(u)}(this))})}),this.pu=new EQ(r,i)}}async function Pp(t){if(Ba(t))for(const e of t.gu)await e(!0)}async function _h(t){for(const e of t.gu)await e(!1)}function Qv(t,e){const n=de(t);n.wu.has(e.targetId)||(n.wu.set(e.targetId,e),qS(n)?jS(n):Eh(n).Mo()&&BS(n,e))}function Wf(t,e){const n=de(t),r=Eh(n);n.wu.delete(e),r.Mo()&&lM(n,e),n.wu.size===0&&(r.Mo()?r.Bo():Ba(n)&&n.pu.set("Unknown"))}function BS(t,e){t.Iu.Ot(e.targetId),Eh(t).Jo(e)}function lM(t,e){t.Iu.Ot(e),Eh(t).Yo(e)}function jS(t){t.Iu=new i4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>t.wu.get(e)||null}),Eh(t).start(),t.pu.au()}function qS(t){return Ba(t)&&!Eh(t).$o()&&t.wu.size>0}function Ba(t){return de(t).mu.size===0}function uM(t){t.Iu=void 0}async function IQ(t){t.wu.forEach((e,n)=>{BS(t,e)})}async function SQ(t,e){uM(t),qS(t)?(t.pu.fu(e),jS(t)):t.pu.set("Unknown")}async function CQ(t,e,n){if(t.pu.set("Online"),e instanceof SL&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.wu.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.wu.delete(o),r.Iu.removeTarget(o))}(t,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xy(t,r)}else if(e instanceof gm?t.Iu.Qt(e):e instanceof IL?t.Iu.Zt(e):t.Iu.Wt(e),!n.isEqual(Ce.min()))try{const r=await eM(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.Iu.ee(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const h=i.wu.get(u);h&&i.wu.set(u,h.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const u=i.wu.get(a);if(!u)return;i.wu.set(a,u.withResumeToken(cn.EMPTY_BYTE_STRING,u.snapshotVersion)),lM(i,a);const h=new da(u.target,a,1,u.sequenceNumber);BS(i,h)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){te("RemoteStore","Failed to raise snapshot:",r),await xy(t,r)}}async function xy(t,e,n){if(!Ua(e))throw e;t.mu.add(1),await _h(t),t.pu.set("Offline"),n||(n=()=>eM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),t.mu.delete(1),await Pp(t)})}function cM(t,e){return e().catch(n=>xy(t,n,e))}async function wh(t){const e=de(t),n=ka(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;bQ(e);)try{const i=await hQ(e.localStore,r);if(i===null){e._u.length===0&&n.Bo();break}r=i.batchId,kQ(e,i)}catch(i){await xy(e,i)}hM(e)&&dM(e)}function bQ(t){return Ba(t)&&t._u.length<10}function kQ(t,e){t._u.push(e);const n=ka(t);n.Mo()&&n.Xo&&n.tu(e.mutations)}function hM(t){return Ba(t)&&!ka(t).$o()&&t._u.length>0}function dM(t){ka(t).start()}async function xQ(t){ka(t).su()}async function NQ(t){const e=ka(t);for(const n of t._u)e.tu(n.mutations)}async function AQ(t,e,n){const r=t._u.shift(),i=AS.from(r,e,n);await cM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await wh(t)}async function DQ(t,e){e&&ka(t).Xo&&await async function(n,r){if(i=r.code,vL(i)&&i!==H.ABORTED){const s=n._u.shift();ka(n).Fo(),await cM(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await wh(n)}var i}(t,e),hM(t)&&dM(t)}async function sx(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=Ba(n);n.mu.add(3),await _h(n),r&&n.pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.mu.delete(3),await Pp(n)}async function qE(t,e){const n=de(t);e?(n.mu.delete(2),await Pp(n)):e||(n.mu.add(2),await _h(n),n.pu.set("Unknown"))}function Eh(t){return t.Tu||(t.Tu=function(e,n,r){const i=de(e);return i.ru(),new vQ(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:IQ.bind(null,t),no:SQ.bind(null,t),Ho:CQ.bind(null,t)}),t.gu.push(async e=>{e?(t.Tu.Fo(),qS(t)?jS(t):t.pu.set("Unknown")):(await t.Tu.stop(),uM(t))})),t.Tu}function ka(t){return t.Eu||(t.Eu=function(e,n,r){const i=de(e);return i.ru(),new _Q(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:xQ.bind(null,t),no:DQ.bind(null,t),nu:NQ.bind(null,t),eu:AQ.bind(null,t)}),t.gu.push(async e=>{e?(t.Eu.Fo(),await wh(t)):(await t.Eu.stop(),t._u.length>0&&(te("RemoteStore",`Stopping write stream with ${t._u.length} pending writes`),t._u=[]))})),t.Eu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new In,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new zS(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Th(t,e){if(Xt("AsyncQueue",`${e}: ${t}`),Ua(t))return new ee(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ue.comparator(n.key,r.key):(n,r)=>ue.comparator(n.key,r.key),this.keyedMap=Sd(),this.sortedSet=new Ht(this.comparator)}static emptySet(e){return new Ic(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ic)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ic;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(){this.Au=new Ht(ue.comparator)}track(e){const n=e.doc.key,r=this.Au.get(n);r?e.type!==0&&r.type===3?this.Au=this.Au.insert(n,e):e.type===3&&r.type!==1?this.Au=this.Au.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Au=this.Au.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Au=this.Au.remove(n):e.type===1&&r.type===2?this.Au=this.Au.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):ge():this.Au=this.Au.insert(n,e)}Ru(){const e=[];return this.Au.inorderTraversal((n,r)=>{e.push(r)}),e}}class Yc{constructor(e,n,r,i,s,o,a,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Yc(e,n,Ic.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PQ{constructor(){this.Pu=void 0,this.listeners=[]}}class RQ{constructor(){this.queries=new Va(e=>oL(e),bp),this.onlineState="Unknown",this.vu=new Set}}async function WS(t,e){const n=de(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new PQ),i)try{s.Pu=await n.onListen(r)}catch(o){const a=Th(o,`Initialization of query '${LE(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.bu(n.onlineState),s.Pu&&e.Vu(s.Pu)&&GS(n)}async function HS(t,e){const n=de(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function OQ(t,e){const n=de(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.Vu(i)&&(r=!0);o.Pu=i}}r&&GS(n)}function LQ(t,e,n){const r=de(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function GS(t){t.vu.forEach(e=>{e.next()})}class KS{constructor(e,n,r){this.query=e,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Yc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Du?this.xu(e)&&(this.Su.next(e),n=!0):this.Nu(e,this.onlineState)&&(this.ku(e),n=!0),this.Cu=e,n}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),n=!0),n}Nu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.$u||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}xu(e){if(e.docChanges.length>0)return!0;const n=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ku(e){e=Yc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MQ{constructor(e,n){this.Mu=e,this.byteLength=n}Ou(){return"metadata"in this.Mu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.Tt=e}Zi(e){return Es(this.Tt,e)}Xi(e){return e.metadata.exists?NL(this.Tt,e.document,!1):kt.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Zt(e)}}class FQ{constructor(e,n,r){this.Fu=e,this.localStore=n,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fM(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++n;const r=et.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Lu(e){const n=new Map,r=new ax(this.Tt);for(const i of e)if(i.metadata.queries){const s=r.Zi(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Ve()).add(s);n.set(o,a)}}return n}async complete(){const e=await dQ(this.localStore,new ax(this.Tt),this.documents,this.Fu.id),n=this.Lu(this.documents);for(const r of this.queries)await fQ(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,qu:this.collectionGroups,Uu:e}}}function fM(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e){this.key=e}}class gM{constructor(e){this.key=e}}class mM{constructor(e,n){this.query=e,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Ve(),this.mutatedKeys=Ve(),this.ju=lL(e),this.zu=new Ic(this.ju)}get Wu(){return this.Ku}Hu(e,n){const r=n?n.Ju:new ox,i=n?n.zu:this.zu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,v)=>{const w=i.get(p),b=kp(this.query,v)?v:null,k=!!w&&this.mutatedKeys.has(w.key),O=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let J=!1;w&&b?w.data.isEqual(b.data)?k!==O&&(r.track({type:3,doc:b}),J=!0):this.Yu(w,b)||(r.track({type:2,doc:b}),J=!0,(u&&this.ju(b,u)>0||h&&this.ju(b,h)<0)&&(a=!0)):!w&&b?(r.track({type:0,doc:b}),J=!0):w&&!b&&(r.track({type:1,doc:w}),J=!0,(u||h)&&(a=!0)),J&&(b?(o=o.add(b),s=O?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{zu:o,Ju:r,Li:a,mutatedKeys:s}}Yu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const s=e.Ju.Ru();s.sort((h,p)=>function(v,w){const b=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return b(v)-b(w)}(h.type,p.type)||this.ju(h.doc,p.doc)),this.Zu(r);const o=n?this.Xu():[],a=this.Qu.size===0&&this.current?1:0,u=a!==this.Gu;return this.Gu=a,s.length!==0||u?{snapshot:new Yc(this.query,e.zu,i,s,e.mutatedKeys,a===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:o}:{tc:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new ox,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(n=>this.Ku=this.Ku.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ku=this.Ku.delete(n)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=Ve(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const n=[];return e.forEach(r=>{this.Qu.has(r)||n.push(new gM(r))}),this.Qu.forEach(r=>{e.has(r)||n.push(new pM(r))}),n}nc(e){this.Ku=e.Yi,this.Qu=Ve();const n=this.Hu(e.documents);return this.applyChanges(n,!0)}sc(){return Yc.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,this.Gu===0,this.hasCachedResults)}}class $Q{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class UQ{constructor(e){this.key=e,this.ic=!1}}class VQ{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.rc={},this.oc=new Va(a=>oL(a),bp),this.uc=new Map,this.cc=new Set,this.ac=new Ht(ue.comparator),this.hc=new Map,this.lc=new LS,this.fc={},this.dc=new Map,this._c=ru.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return this.wc===!0}}async function BQ(t,e){const n=ZS(t);let r,i;const s=n.oc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.sc();else{const o=await Kc(n.localStore,Ur(e));n.isPrimaryClient&&Qv(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await QS(n,e,r,a==="current",o.resumeToken)}return i}async function QS(t,e,n,r,i){t.mc=(v,w,b)=>async function(k,O,J,N){let D=O.view.Hu(J);D.Li&&(D=await Cy(k.localStore,O.query,!1).then(({documents:re})=>O.view.Hu(re,D)));const M=N&&N.targetChanges.get(O.targetId),Q=O.view.applyChanges(D,k.isPrimaryClient,M);return zE(k,O.targetId,Q.tc),Q.snapshot}(t,v,w,b);const s=await Cy(t.localStore,e,!0),o=new mM(e,s.Yi),a=o.Hu(s.documents),u=Ap.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(a,t.isPrimaryClient,u);zE(t,n,h.tc);const p=new $Q(e,n,o);return t.oc.set(e,p),t.uc.has(n)?t.uc.get(n).push(e):t.uc.set(n,[e]),h.snapshot}async function jQ(t,e){const n=de(t),r=n.oc.get(e),i=n.uc.get(r.targetId);if(i.length>1)return n.uc.set(r.targetId,i.filter(s=>!bp(s,e))),void n.oc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Qc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Wf(n.remoteStore,r.targetId),Xc(n,r.targetId)}).catch($a)):(Xc(n,r.targetId),await Qc(n.localStore,r.targetId,!0))}async function qQ(t,e,n){const r=eC(t);try{const i=await function(s,o){const a=de(s),u=Ot.now(),h=o.reduce((w,b)=>w.add(b.key),Ve());let p,v;return a.persistence.runTransaction("Locally write mutations","readwrite",w=>{let b=Or(),k=Ve();return a.ji.getEntries(w,h).next(O=>{b=O,b.forEach((J,N)=>{N.isValidDocument()||(k=k.add(J))})}).next(()=>a.localDocuments.getOverlayedDocuments(w,b)).next(O=>{p=O;const J=[];for(const N of o){const D=JK(N,p.get(N.key).overlayedDocument);D!=null&&J.push(new po(N.key,D,iL(D.value.mapValue),Rt.exists(!0)))}return a.mutationQueue.addMutationBatch(w,u,J,o)}).next(O=>{v=O;const J=O.applyToLocalDocumentSet(p,k);return a.documentOverlayCache.saveOverlays(w,O.batchId,J)})}).then(()=>({batchId:v.batchId,changes:EL(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.fc[s.currentUser.toKey()];u||(u=new Ht(Ue)),u=u.insert(o,a),s.fc[s.currentUser.toKey()]=u}(r,i.batchId,n),await go(r,i.changes),await wh(r.remoteStore)}catch(i){const s=Th(i,"Failed to persist write");n.reject(s)}}async function yM(t,e){const n=de(t);try{const r=await cQ(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.hc.get(s);o&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ic=!0:i.modifiedDocuments.size>0?Ie(o.ic):i.removedDocuments.size>0&&(Ie(o.ic),o.ic=!1))}),await go(n,r,e)}catch(r){await $a(r)}}function lx(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.oc.forEach((s,o)=>{const a=o.view.bu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=de(s);a.onlineState=o;let u=!1;a.queries.forEach((h,p)=>{for(const v of p.listeners)v.bu(o)&&(u=!0)}),u&&GS(a)}(r.eventManager,e),i.length&&r.rc.Ho(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zQ(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.hc.get(e),s=i&&i.key;if(s){let o=new Ht(ue.comparator);o=o.insert(s,kt.newNoDocument(s,Ce.min()));const a=Ve().add(s),u=new Np(Ce.min(),new Map,new yt(Ue),o,a);await yM(r,u),r.ac=r.ac.remove(s),r.hc.delete(e),JS(r)}else await Qc(r.localStore,e,!1).then(()=>Xc(r,e,n)).catch($a)}async function WQ(t,e){const n=de(t),r=e.batch.batchId;try{const i=await uQ(n.localStore,e);XS(n,r,null),YS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await go(n,i)}catch(i){await $a(i)}}async function HQ(t,e,n){const r=de(t);try{const i=await function(s,o){const a=de(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return a.mutationQueue.lookupMutationBatch(u,o).next(p=>(Ie(p!==null),h=p.keys(),a.mutationQueue.removeMutationBatch(u,p))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,h,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>a.localDocuments.getDocuments(u,h))})}(r.localStore,e);XS(r,e,n),YS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await go(r,i)}catch(i){await $a(i)}}async function GQ(t,e){const n=de(t);Ba(n.remoteStore)||te("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const o=de(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const i=n.dc.get(r)||[];i.push(e),n.dc.set(r,i)}catch(r){const i=Th(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function YS(t,e){(t.dc.get(e)||[]).forEach(n=>{n.resolve()}),t.dc.delete(e)}function XS(t,e,n){const r=de(t);let i=r.fc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.fc[r.currentUser.toKey()]=i}}function Xc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.uc.get(e))t.oc.delete(r),n&&t.rc.gc(r,n);t.uc.delete(e),t.isPrimaryClient&&t.lc.ds(e).forEach(r=>{t.lc.containsKey(r)||vM(t,r)})}function vM(t,e){t.cc.delete(e.path.canonicalString());const n=t.ac.get(e);n!==null&&(Wf(t.remoteStore,n),t.ac=t.ac.remove(e),t.hc.delete(n),JS(t))}function zE(t,e,n){for(const r of n)r instanceof pM?(t.lc.addReference(r.key,e),KQ(t,r)):r instanceof gM?(te("SyncEngine","Document no longer in limbo: "+r.key),t.lc.removeReference(r.key,e),t.lc.containsKey(r.key)||vM(t,r.key)):ge()}function KQ(t,e){const n=e.key,r=n.path.canonicalString();t.ac.get(n)||t.cc.has(r)||(te("SyncEngine","New document in limbo: "+n),t.cc.add(r),JS(t))}function JS(t){for(;t.cc.size>0&&t.ac.size<t.maxConcurrentLimboResolutions;){const e=t.cc.values().next().value;t.cc.delete(e);const n=new ue(et.fromString(e)),r=t._c.next();t.hc.set(r,new UQ(n)),t.ac=t.ac.insert(n,r),Qv(t.remoteStore,new da(Ur(mh(n.path)),r,2,Pr.at))}}async function go(t,e,n){const r=de(t),i=[],s=[],o=[];r.oc.isEmpty()||(r.oc.forEach((a,u)=>{o.push(r.mc(u,e,n).then(h=>{if((h||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,h!=null&&h.fromCache?"not-current":"current"),h){i.push(h);const p=$S.Ni(u.targetId,h);s.push(p)}}))}),await Promise.all(o),r.rc.Ho(i),await async function(a,u){const h=de(a);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>q.forEach(u,v=>q.forEach(v.Ci,w=>h.persistence.referenceDelegate.addReference(p,v.targetId,w)).next(()=>q.forEach(v.xi,w=>h.persistence.referenceDelegate.removeReference(p,v.targetId,w)))))}catch(p){if(!Ua(p))throw p;te("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const v=p.targetId;if(!p.fromCache){const w=h.Ki.get(v),b=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(b);h.Ki=h.Ki.insert(v,k)}}}(r.localStore,s))}async function QQ(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=await ZL(n.localStore,e);n.currentUser=e,function(i,s){i.dc.forEach(o=>{o.forEach(a=>{a.reject(new ee(H.CANCELLED,s))})}),i.dc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await go(n,r.Wi)}}function YQ(t,e){const n=de(t),r=n.hc.get(e);if(r&&r.ic)return Ve().add(r.key);{let i=Ve();const s=n.uc.get(e);if(!s)return i;for(const o of s){const a=n.oc.get(o);i=i.unionWith(a.view.Wu)}return i}}async function XQ(t,e){const n=de(t),r=await Cy(n.localStore,e.query,!0),i=e.view.nc(r);return n.isPrimaryClient&&zE(n,e.targetId,i.tc),i}async function JQ(t,e){const n=de(t);return rM(n.localStore,e).then(r=>go(n,r))}async function ZQ(t,e,n,r){const i=de(t),s=await function(o,a){const u=de(o),h=de(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.An(p,a).next(v=>v?u.localDocuments.getDocuments(p,v):q.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await wh(i.remoteStore):n==="acknowledged"||n==="rejected"?(XS(i,e,r||null),YS(i,e),function(o,a){de(de(o).mutationQueue).Pn(a)}(i.localStore,e)):ge(),await go(i,s)):te("SyncEngine","Cannot apply mutation batch with id: "+e)}async function e6(t,e){const n=de(t);if(ZS(n),eC(n),e===!0&&n.wc!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await ux(n,r.toArray());n.wc=!0,await qE(n.remoteStore,!0);for(const s of i)Qv(n.remoteStore,s)}else if(e===!1&&n.wc!==!1){const r=[];let i=Promise.resolve();n.uc.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Xc(n,o),Qc(n.localStore,o,!0))),Wf(n.remoteStore,o)}),await i,await ux(n,r),function(s){const o=de(s);o.hc.forEach((a,u)=>{Wf(o.remoteStore,u)}),o.lc._s(),o.hc=new Map,o.ac=new Ht(ue.comparator)}(n),n.wc=!1,await qE(n.remoteStore,!1)}}async function ux(t,e,n){const r=de(t),i=[],s=[];for(const o of e){let a;const u=r.uc.get(o);if(u&&u.length!==0){a=await Kc(r.localStore,Ur(u[0]));for(const h of u){const p=r.oc.get(h),v=await XQ(r,p);v.snapshot&&s.push(v.snapshot)}}else{const h=await nM(r.localStore,o);a=await Kc(r.localStore,h),await QS(r,_M(h),o,!1,a.resumeToken)}i.push(a)}return r.rc.Ho(s),i}function _M(t){return sL(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function t6(t){const e=de(t);return de(de(e.localStore).persistence).Si()}async function n6(t,e,n,r){const i=de(t);if(i.wc)return void te("SyncEngine","Ignoring unexpected query state notification.");const s=i.uc.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await rM(i.localStore,aL(s[0])),a=Np.createSynthesizedRemoteEventForCurrentChange(e,n==="current",cn.EMPTY_BYTE_STRING);await go(i,o,a);break}case"rejected":await Qc(i.localStore,e,!0),Xc(i,e,r);break;default:ge()}}async function r6(t,e,n){const r=ZS(t);if(r.wc){for(const i of e){if(r.uc.has(i)){te("SyncEngine","Adding an already active target "+i);continue}const s=await nM(r.localStore,i),o=await Kc(r.localStore,s);await QS(r,_M(s),o.targetId,!1,o.resumeToken),Qv(r.remoteStore,o)}for(const i of n)r.uc.has(i)&&await Qc(r.localStore,i,!1).then(()=>{Wf(r.remoteStore,i),Xc(r,i)}).catch($a)}}function ZS(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zQ.bind(null,e),e.rc.Ho=OQ.bind(null,e.eventManager),e.rc.gc=LQ.bind(null,e.eventManager),e}function eC(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HQ.bind(null,e),e}function i6(t,e,n){const r=de(t);(async function(i,s,o){try{const a=await s.getMetadata();if(await function(v,w){const b=de(v),k=Zt(w.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",O=>b.$s.getBundleMetadata(O,w.id)).then(O=>!!O&&O.createTime.compareTo(k)>=0)}(i.localStore,a))return await s.close(),o._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(fM(a));const u=new FQ(a,i.localStore,s.Tt);let h=await s.yc();for(;h;){const v=await u.Bu(h);v&&o._updateProgress(v),h=await s.yc()}const p=await u.complete();return await go(i,p.Uu,void 0),await function(v,w){const b=de(v);return b.persistence.runTransaction("Save bundle","readwrite",k=>b.$s.saveBundleMetadata(k,w))}(i.localStore,a),o._completeWith(p.progress),Promise.resolve(p.qu)}catch(a){return Bc("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class wM{constructor(){this.synchronizeTabs=!1}async initialize(e){this.Tt=Dp(e.databaseInfo.databaseId),this.sharedClientState=this.Ic(e),this.persistence=this.Tc(e),await this.persistence.start(),this.localStore=this.Ec(e),this.gcScheduler=this.Ac(e,this.localStore),this.indexBackfillerScheduler=this.Rc(e,this.localStore)}Ac(e,n){return null}Rc(e,n){return null}Ec(e){return JL(this.persistence,new XL,e.initialUser,this.Tt)}Tc(e){return new YL(Kv.qs,this.Tt)}Ic(e){return new sM}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class EM extends wM{constructor(e,n,r){super(),this.Pc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Pc.initialize(this,e),await eC(this.Pc.syncEngine),await wh(this.Pc.remoteStore),await this.persistence.di(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ec(e){return JL(this.persistence,new XL,e.initialUser,this.Tt)}Ac(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new K4(r,e.asyncQueue,n)}Rc(e,n){const r=new DK(n,this.persistence);return new AK(e.asyncQueue,r)}Tc(e){const n=FS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?kr.withCacheSize(this.cacheSizeBytes):kr.DEFAULT;return new MS(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,oM(),ym(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new sM}}class s6 extends EM{constructor(e,n){super(e,n,!1),this.Pc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Pc.syncEngine;this.sharedClientState instanceof Rw&&(this.sharedClientState.syncEngine={Br:ZQ.bind(null,n),Lr:n6.bind(null,n),qr:r6.bind(null,n),Si:t6.bind(null,n),Fr:JQ.bind(null,n)},await this.sharedClientState.start()),await this.persistence.di(async r=>{await e6(this.Pc.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Ic(e){const n=oM();if(!Rw.C(n))throw new ee(H.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=FS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Rw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class tC{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QQ.bind(null,this.syncEngine),await qE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new RQ}createDatastore(e){const n=Dp(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new yQ(i));var i;return function(s,o,a,u){return new wQ(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>lx(this.syncEngine,a,0),o=ix.C()?new ix:new pQ,new TQ(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,u,h){const p=new VQ(r,i,s,o,a,u);return h&&(p.wc=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=de(e);te("RemoteStore","RemoteStore shutting down."),n.mu.add(5),await _h(n),n.yu.shutdown(),n.pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Xt("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e,n){this.Vc=e,this.Tt=n,this.metadata=new In,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}async getMetadata(){return this.metadata.promise}async yc(){return await this.getMetadata(),this.Dc()}async Dc(){const e=await this.Cc();if(e===null)return null;const n=this.Sc.decode(e),r=Number(n);isNaN(r)&&this.xc(`length string (${n}) is not valid number`);const i=await this.Nc(r);return new MQ(JSON.parse(i),e.length+r)}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Cc(){for(;this.kc()<0&&!await this.$c(););if(this.buffer.length===0)return null;const e=this.kc();e<0&&this.xc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Nc(e){for(;this.buffer.length<e;)await this.$c()&&this.xc("Reached the end of bundle when more is expected.");const n=this.Sc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}async $c(){const e=await this.Vc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ee(H.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const s=de(r),o=qf(s.Tt)+"/documents",a={documents:i.map(v=>jf(s.Tt,v))},u=await s.mo("BatchGetDocuments",o,a,i.length),h=new Map;u.forEach(v=>{const w=c4(s.Tt,v);h.set(w.key.toString(),w)});const p=[];return i.forEach(v=>{const w=h.get(v.toString());Ie(!!w),p.push(w)}),p}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new vh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=ue.fromPath(r);this.mutations.push(new kS(i,this.precondition(i)))}),await async function(n,r){const i=de(n),s=qf(i.Tt)+"/documents",o={writes:r.map(a=>zf(i.Tt,a))};await i.lo("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ge();n=Ce.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ee(H.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ce.min())?Rt.exists(!1):Rt.updateTime(n):Rt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ce.min()))throw new ee(H.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rt.updateTime(n)}return Rt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Mc=r.maxAttempts,this.ko=new VS(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){this.ko.vo(async()=>{const e=new a6(this.datastore),n=this.Fc(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Bc(i)}))}).catch(r=>{this.Bc(r)})})}Fc(e){try{const n=this.updateFunction(e);return!Sp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!vL(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=wn.UNAUTHENTICATED,this.clientId=VO.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{te("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(te("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ee(H.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new In;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Th(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function TM(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ZL(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function IM(t,e){t.asyncQueue.verifyOperationInProgress();const n=await nC(t);te("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>sx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>sx(e.remoteStore,s)),t.onlineComponents=e}async function nC(t){return t.offlineComponents||(te("FirestoreClient","Using default OfflineComponentProvider"),await TM(t,new wM)),t.offlineComponents}async function Xv(t){return t.onlineComponents||(te("FirestoreClient","Using default OnlineComponentProvider"),await IM(t,new tC)),t.onlineComponents}function SM(t){return nC(t).then(e=>e.persistence)}function rC(t){return nC(t).then(e=>e.localStore)}function CM(t){return Xv(t).then(e=>e.remoteStore)}function iC(t){return Xv(t).then(e=>e.syncEngine)}function c6(t){return Xv(t).then(e=>e.datastore)}async function Jc(t){const e=await Xv(t),n=e.eventManager;return n.onListen=BQ.bind(null,e.syncEngine),n.onUnlisten=jQ.bind(null,e.syncEngine),n}function h6(t){return t.asyncQueue.enqueue(async()=>{const e=await SM(t),n=await CM(t);return e.setNetworkEnabled(!0),function(r){const i=de(r);return i.mu.delete(0),Pp(i)}(n)})}function d6(t){return t.asyncQueue.enqueue(async()=>{const e=await SM(t),n=await CM(t);return e.setNetworkEnabled(!1),async function(r){const i=de(r);i.mu.add(0),await _h(i),i.pu.set("Offline")}(n)})}function f6(t,e){const n=new In;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await function(a,u){const h=de(a);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,u))}(r,i);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new ee(H.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Th(o,`Failed to get document '${i} from cache`);s.reject(a)}}(await rC(t),e,n)),n.promise}function bM(t,e,n={}){const r=new In;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,u){const h=new Yv({next:v=>{s.enqueueAndForget(()=>HS(i,p));const w=v.docs.has(o);!w&&v.fromCache?u.reject(new ee(H.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&a&&a.source==="server"?u.reject(new ee(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(v)},error:v=>u.reject(v)}),p=new KS(mh(o.path),h,{includeMetadataChanges:!0,$u:!0});return WS(i,p)}(await Jc(t),t.asyncQueue,e,n,r)),r.promise}function p6(t,e){const n=new In;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await Cy(r,i,!0),a=new mM(i,o.Yi),u=a.Hu(o.documents),h=a.applyChanges(u,!1);s.resolve(h.snapshot)}catch(o){const a=Th(o,`Failed to execute query '${i} against cache`);s.reject(a)}}(await rC(t),e,n)),n.promise}function kM(t,e,n={}){const r=new In;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,u){const h=new Yv({next:v=>{s.enqueueAndForget(()=>HS(i,p)),v.fromCache&&a.source==="server"?u.reject(new ee(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(v)},error:v=>u.reject(v)}),p=new KS(o,h,{includeMetadataChanges:!0,$u:!0});return WS(i,p)}(await Jc(t),t.asyncQueue,e,n,r)),r.promise}function g6(t,e){const n=new Yv(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){de(r).vu.add(i),i.next()}(await Jc(t),n)),()=>{n.bc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){de(r).vu.delete(i)}(await Jc(t),n))}}function m6(t,e,n,r){const i=function(s,o){let a;return a=typeof s=="string"?new TextEncoder().encode(s):s,function(u,h){return new o6(u,h)}(function(u,h){if(u instanceof Uint8Array)return cx(u,h);if(u instanceof ArrayBuffer)return cx(new Uint8Array(u),h);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Dp(e));t.asyncQueue.enqueueAndForget(async()=>{i6(await iC(t),i,r)})}function y6(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=de(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.$s.getNamedQuery(s,r))}(await rC(t),e))}const hx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t,e,n){if(!n)throw new ee(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xM(t,e,n,r){if(e===!0&&r===!0)throw new ee(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dx(t){if(!ue.isDocumentKey(t))throw new ee(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fx(t){if(ue.isDocumentKey(t))throw new ee(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Jv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge()}function nt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jv(t);throw new ee(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function NM(t,e){if(e<=0)throw new ee(H.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,xM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new px({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ee(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ee(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new px(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new vK;switch(n.type){case"gapi":const r=n.client;return new TK(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ee(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=hx.get(e);n&&(te("ComponentProvider","Removing Datastore"),hx.delete(e),n.terminate())}(this),Promise.resolve()}}function v6(t,e,n,r={}){var i;const s=(t=nt(t,Rp))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&Bc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=wn.MOCK_USER;else{o=eD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new ee(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new wn(u)}t._authCredentials=new _K(new UO(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class zn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zn(this.firestore,e,this._query)}}class Ts extends zn{constructor(e,n,r){super(e,n,mh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new ue(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function AM(t,e,...n){if(t=me(t),sC("collection","path",e),t instanceof Rp){const r=et.fromString(e,...n);return fx(r),new Ts(t,null,r)}{if(!(t instanceof Nt||t instanceof Ts))throw new ee(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(et.fromString(e,...n));return fx(r),new Ts(t.firestore,null,r)}}function _6(t,e){if(t=nt(t,Rp),sC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ee(H.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zn(t,null,function(n){return new fo(et.emptyPath(),n)}(e))}function Ny(t,e,...n){if(t=me(t),arguments.length===1&&(e=VO.R()),sC("doc","path",e),t instanceof Rp){const r=et.fromString(e,...n);return dx(r),new Nt(t,null,new ue(r))}{if(!(t instanceof Nt||t instanceof Ts))throw new ee(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(et.fromString(e,...n));return dx(r),new Nt(t.firestore,t instanceof Ts?t.converter:null,new ue(r))}}function DM(t,e){return t=me(t),e=me(e),(t instanceof Nt||t instanceof Ts)&&(e instanceof Nt||e instanceof Ts)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function PM(t,e){return t=me(t),e=me(e),t instanceof zn&&e instanceof zn&&t.firestore===e.firestore&&bp(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new VS(this,"async_queue_retry"),this.Hc=()=>{const n=ym();n&&te("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ko.Vo()};const e=ym();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const n=ym();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const n=new In;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}async Zc(){if(this.Uc.length!==0){try{await this.Uc[0](),this.Uc.shift(),this.ko.reset()}catch(e){if(!Ua(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Uc.length>0&&this.ko.vo(()=>this.Zc())}}Yc(e){const n=this.qc.then(()=>(this.jc=!0,e().catch(r=>{this.Qc=r,this.jc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw Xt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.jc=!1,r))));return this.qc=n,n}enqueueAfterDelay(e,n,r){this.Jc(),this.Wc.indexOf(e)>-1&&(n=0);const i=zS.createAndSchedule(this,e,n,r,s=>this.Xc(s));return this.Gc.push(i),i}Jc(){this.Qc&&ge()}verifyOperationInProgress(){}async ta(){let e;do e=this.qc,await e;while(e!==this.qc)}ea(e){for(const n of this.Gc)if(n.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Gc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const n=this.Gc.indexOf(e);this.Gc.splice(n,1)}}function WE(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class E6{constructor(){this._progressObserver={},this._taskCompletionResolver=new In,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6=-1;class Gt extends Rp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new w6,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||RM(this),this._firestoreClient.terminate()}}function Nn(t){return t._firestoreClient||RM(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function RM(t){var e;const n=t._freezeSettings(),r=function(i,s,o,a){return new PK(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new u6(t._authCredentials,t._appCheckCredentials,t._queue,r)}function I6(t,e){LM(t=nt(t,Gt));const n=Nn(t),r=t._freezeSettings(),i=new tC;return OM(n,i,new EM(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function S6(t){LM(t=nt(t,Gt));const e=Nn(t),n=t._freezeSettings(),r=new tC;return OM(e,r,new s6(r,n.cacheSizeBytes))}function OM(t,e,n){const r=new In;return t.asyncQueue.enqueue(async()=>{try{await TM(t,n),await IM(t,e),r.resolve()}catch(i){const s=i;if(!function(o){return o.name==="FirebaseError"?o.code===H.FAILED_PRECONDITION||o.code===H.UNIMPLEMENTED:typeof DOMException<"u"&&o instanceof DOMException?o.code===22||o.code===20||o.code===11:!0}(s))throw s;Bc("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}}).then(()=>r.promise)}function C6(t){if(t._initialized&&!t._terminated)throw new ee(H.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new In;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Bi.C())return Promise.resolve();const r=n+"main";await Bi.delete(r)}(FS(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function b6(t){return function(e){const n=new In;return e.asyncQueue.enqueueAndForget(async()=>GQ(await iC(e),n)),n.promise}(Nn(t=nt(t,Gt)))}function k6(t){return h6(Nn(t=nt(t,Gt)))}function x6(t){return d6(Nn(t=nt(t,Gt)))}function N6(t,e){const n=Nn(t=nt(t,Gt)),r=new E6;return m6(n,t._databaseId,e,r),r}function A6(t,e){return y6(Nn(t=nt(t,Gt)),e).then(n=>n?new zn(t,null,n.query):null)}function LM(t){if(t._initialized||t._terminated)throw new ee(H.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ks(cn.fromBase64String(e))}catch(n){throw new ee(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ks(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=/^__.*__$/;class P6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new po(e,this.data,this.fieldMask,n,this.fieldTransforms):new yh(e,this.data,n,this.fieldTransforms)}}class MM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new po(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function FM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class e_{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=i,s===void 0&&this.ia(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new e_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.aa(e),i}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.ia(),i}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return Ay(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(e.length===0)throw this.fa("Document fields must not be empty");if(FM(this.ra)&&D6.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class R6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.Tt=r||Dp(e)}wa(e,n,r,i=!1){return new e_({ra:e,methodName:n,_a:r,path:Jt.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function mu(t){const e=t._freezeSettings(),n=Dp(t._databaseId);return new R6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function t_(t,e,n,r,i,s={}){const o=t.wa(s.merge||s.mergeFields?2:0,e,n,i);uC("Data must be an object, but it was:",o,r);const a=VM(r,o);let u,h;if(s.merge)u=new Rr(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const v of s.mergeFields){const w=HE(e,v,n);if(!o.contains(w))throw new ee(H.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);jM(p,w)||p.push(w)}u=new Rr(p),h=o.fieldTransforms.filter(v=>u.covers(v.field))}else u=null,h=o.fieldTransforms;return new P6(new $n(a),u,h)}class Op extends gu{_toFieldTransform(e){if(e.ra!==2)throw e.ra===1?e.fa(`${this._methodName}() can only appear at the top level of your update data`):e.fa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Op}}function $M(t,e,n){return new e_({ra:3,_a:e.settings._a,methodName:t._methodName,ca:n},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class oC extends gu{_toFieldTransform(e){return new xp(e.path,new Wc)}isEqual(e){return e instanceof oC}}class O6 extends gu{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=$M(this,e,!0),r=this.ma.map(s=>yu(s,n)),i=new Zl(r);return new xp(e.path,i)}isEqual(e){return this===e}}class L6 extends gu{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=$M(this,e,!0),r=this.ma.map(s=>yu(s,n)),i=new eu(r);return new xp(e.path,i)}isEqual(e){return this===e}}class M6 extends gu{constructor(e,n){super(e),this.ga=n}_toFieldTransform(e){const n=new Hc(e.Tt,hL(e.Tt,this.ga));return new xp(e.path,n)}isEqual(e){return this===e}}function aC(t,e,n,r){const i=t.wa(1,e,n);uC("Data must be an object, but it was:",i,r);const s=[],o=$n.empty();pu(r,(u,h)=>{const p=cC(e,u,n);h=me(h);const v=i.ha(p);if(h instanceof Op)s.push(p);else{const w=yu(h,v);w!=null&&(s.push(p),o.set(p,w))}});const a=new Rr(s);return new MM(o,a,i.fieldTransforms)}function lC(t,e,n,r,i,s){const o=t.wa(1,e,n),a=[HE(e,r,n)],u=[i];if(s.length%2!=0)throw new ee(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<s.length;w+=2)a.push(HE(e,s[w])),u.push(s[w+1]);const h=[],p=$n.empty();for(let w=a.length-1;w>=0;--w)if(!jM(h,a[w])){const b=a[w];let k=u[w];k=me(k);const O=o.ha(b);if(k instanceof Op)h.push(b);else{const J=yu(k,O);J!=null&&(h.push(b),p.set(b,J))}}const v=new Rr(h);return new MM(p,v,o.fieldTransforms)}function UM(t,e,n,r=!1){return yu(n,t.wa(r?4:3,e))}function yu(t,e){if(BM(t=me(t)))return uC("Unsupported field value:",e,t),VM(t,e);if(t instanceof gu)return function(n,r){if(!FM(r.ra))throw r.fa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ca&&e.ra!==4)throw e.fa("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=yu(o,r.la(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=me(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return hL(r.Tt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Ot.fromDate(n);return{timestampValue:Gc(r.Tt,i)}}if(n instanceof Ot){const i=new Ot(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Gc(r.Tt,i)}}if(n instanceof Zv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ks)return{bytesValue:CL(r.Tt,n._byteString)};if(n instanceof Nt){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.fa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:xS(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.fa(`Unsupported field value: ${Jv(n)}`)}(t,e)}function VM(t,e){const n={};return GO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pu(t,(r,i)=>{const s=yu(i,e.ua(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function BM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ot||t instanceof Zv||t instanceof ks||t instanceof Nt||t instanceof gu)}function uC(t,e,n){if(!BM(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Jv(n);throw r==="an object"?e.fa(t+" a custom object"):e.fa(t+" "+r)}}function HE(t,e,n){if((e=me(e))instanceof xa)return e._internalPath;if(typeof e=="string")return cC(t,e);throw Ay("Field path arguments must be of type string or ",t,!1,void 0,n)}const F6=new RegExp("[~\\*/\\[\\]]");function cC(t,e,n){if(e.search(F6)>=0)throw Ay(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xa(...e.split("."))._internalPath}catch{throw Ay(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ay(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ee(H.INVALID_ARGUMENT,a+t+u)}function jM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(n_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $6 extends Hf{data(){return super.data()}}function n_(t,e){return typeof e=="string"?cC(t,e):e instanceof xa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hC{}class Lp extends hC{}function Vo(t,e,...n){let r=[];e instanceof hC&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof dC).length,o=i.filter(a=>a instanceof r_).length;if(s>1||s>0&&o>0)throw new ee(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class r_ extends Lp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new r_(e,n,r)}_apply(e){const n=this._parse(e);return WM(e._query,n),new zn(e.firestore,e.converter,OE(e._query,n))}_parse(e){const n=mu(e.firestore);return function(i,s,o,a,u,h,p){let v;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ee(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){mx(p,h);const w=[];for(const b of p)w.push(gx(a,i,b));v={arrayValue:{values:w}}}else v=gx(a,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||mx(p,h),v=UM(o,s,p,h==="in"||h==="not-in");return Ke.create(u,h,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function U6(t,e,n){const r=e,i=n_("where",t);return r_._create(i,r,n)}class dC extends hC{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new dC(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ft.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)WM(s,a),s=OE(s,a)}(e._query,n),new zn(e.firestore,e.converter,OE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fC extends Lp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new fC(e,n)}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new ee(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ee(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Tc(i,s);return function(a,u){if(CS(a)===null){const h=jv(a);h!==null&&HM(a,h,u.field)}}(r,o),o}(e._query,this._field,this._direction);return new zn(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new fo(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function V6(t,e="asc"){const n=e,r=n_("orderBy",t);return fC._create(r,n)}class i_ extends Lp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new i_(e,n,r)}_apply(e){return new zn(e.firestore,e.converter,Ey(e._query,this._limit,this._limitType))}}function B6(t){return NM("limit",t),i_._create("limit",t,"F")}function j6(t){return NM("limitToLast",t),i_._create("limitToLast",t,"L")}class s_ extends Lp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new s_(e,n,r)}_apply(e){const n=zM(e,this.type,this._docOrFields,this._inclusive);return new zn(e.firestore,e.converter,function(r,i){return new fo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function q6(...t){return s_._create("startAt",t,!0)}function z6(...t){return s_._create("startAfter",t,!1)}class o_ extends Lp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new o_(e,n,r)}_apply(e){const n=zM(e,this.type,this._docOrFields,this._inclusive);return new zn(e.firestore,e.converter,function(r,i){return new fo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function W6(...t){return o_._create("endBefore",t,!1)}function H6(...t){return o_._create("endAt",t,!0)}function zM(t,e,n,r){if(n[0]=me(n[0]),n[0]instanceof Hf)return function(i,s,o,a,u){if(!a)throw new ee(H.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const h=[];for(const p of Ll(i))if(p.field.isKeyField())h.push(Xl(s,a.key));else{const v=a.data.field(p.field);if(IS(v))throw new ee(H.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const w=p.field.canonicalString();throw new ee(H.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}h.push(v)}return new ba(h,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=mu(t.firestore);return function(s,o,a,u,h,p){const v=s.explicitOrderBy;if(h.length>v.length)throw new ee(H.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let b=0;b<h.length;b++){const k=h[b];if(v[b].field.isKeyField()){if(typeof k!="string")throw new ee(H.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof k}`);if(!bS(s)&&k.indexOf("/")!==-1)throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${k}' contains a slash.`);const O=s.path.child(et.fromString(k));if(!ue.isDocumentKey(O))throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${O}' is not because it contains an odd number of segments.`);const J=new ue(O);w.push(Xl(o,J))}else{const O=UM(a,u,k);w.push(O)}}return new ba(w,p)}(t._query,t.firestore._databaseId,i,e,n,r)}}function gx(t,e,n){if(typeof(n=me(n))=="string"){if(n==="")throw new ee(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bS(e)&&n.indexOf("/")!==-1)throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(et.fromString(n));if(!ue.isDocumentKey(r))throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xl(t,new ue(r))}if(n instanceof Nt)return Xl(t,n._key);throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jv(n)}.`)}function mx(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WM(t,e){if(e.isInequality()){const r=jv(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new ee(H.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=CS(t);s!==null&&HM(t,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function HM(t,e,n){if(!n.isEqual(e))throw new ee(H.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class pC{convertValue(e,n="none"){switch(Yl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ql(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ge()}}convertObject(e,n){const r={};return pu(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Zv(zt(e.latitude),zt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=QO(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Uf(e));default:return null}}convertTimestamp(e){const n=Sa(e);return new Ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=et.fromString(e);Ie(LL(r));const i=new Ia(r.get(1),r.get(3)),s=new ue(r.popFirst(5));return i.isEqual(n)||Xt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class G6 extends pC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lo extends Hf{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(n_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Kd extends lo{data(e={}){return super.data(e)}}class Na{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new bl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Kd(this._firestore,this._userDataWriter,r.key,r,new bl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const a=new Kd(r._firestore,r._userDataWriter,o.doc.key,o.doc,new bl(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new Kd(r._firestore,r._userDataWriter,o.doc.key,o.doc,new bl(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),h=s.indexOf(o.doc.key)),{type:K6(o.type),doc:a,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function K6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}function GM(t,e){return t instanceof lo&&e instanceof lo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Na&&e instanceof Na&&t._firestore===e._firestore&&PM(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(t){t=nt(t,Nt);const e=nt(t.firestore,Gt);return bM(Nn(e),t._key).then(n=>gC(e,t,n))}class vu extends pC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function Y6(t){t=nt(t,Nt);const e=nt(t.firestore,Gt),n=Nn(e),r=new vu(e);return f6(n,t._key).then(i=>new lo(e,r,t._key,i,new bl(i!==null&&i.hasLocalMutations,!0),t.converter))}function X6(t){t=nt(t,Nt);const e=nt(t.firestore,Gt);return bM(Nn(e),t._key,{source:"server"}).then(n=>gC(e,t,n))}function J6(t){t=nt(t,zn);const e=nt(t.firestore,Gt),n=Nn(e),r=new vu(e);return qM(t._query),kM(n,t._query).then(i=>new Na(e,r,t,i))}function Z6(t){t=nt(t,zn);const e=nt(t.firestore,Gt),n=Nn(e),r=new vu(e);return p6(n,t._query).then(i=>new Na(e,r,t,i))}function e5(t){t=nt(t,zn);const e=nt(t.firestore,Gt),n=Nn(e),r=new vu(e);return kM(n,t._query,{source:"server"}).then(i=>new Na(e,r,t,i))}function yx(t,e,n){t=nt(t,Nt);const r=nt(t.firestore,Gt),i=a_(t.converter,e,n);return Mp(r,[t_(mu(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Rt.none())])}function vx(t,e,n,...r){t=nt(t,Nt);const i=nt(t.firestore,Gt),s=mu(i);let o;return o=typeof(e=me(e))=="string"||e instanceof xa?lC(s,"updateDoc",t._key,e,n,r):aC(s,"updateDoc",t._key,e),Mp(i,[o.toMutation(t._key,Rt.exists(!0))])}function t5(t){return Mp(nt(t.firestore,Gt),[new vh(t._key,Rt.none())])}function n5(t,e){const n=nt(t.firestore,Gt),r=Ny(t),i=a_(t.converter,e);return Mp(n,[t_(mu(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Rt.exists(!1))]).then(()=>r)}function KM(t,...e){var n,r,i;t=me(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||WE(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(WE(e[o])){const v=e[o];e[o]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[o+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[o+2]=(i=v.complete)===null||i===void 0?void 0:i.bind(v)}let u,h,p;if(t instanceof Nt)h=nt(t.firestore,Gt),p=mh(t._key.path),u={next:v=>{e[o]&&e[o](gC(h,t,v))},error:e[o+1],complete:e[o+2]};else{const v=nt(t,zn);h=nt(v.firestore,Gt),p=v._query;const w=new vu(h);u={next:b=>{e[o]&&e[o](new Na(h,w,v,b))},error:e[o+1],complete:e[o+2]},qM(t._query)}return function(v,w,b,k){const O=new Yv(k),J=new KS(w,O,b);return v.asyncQueue.enqueueAndForget(async()=>WS(await Jc(v),J)),()=>{O.bc(),v.asyncQueue.enqueueAndForget(async()=>HS(await Jc(v),J))}}(Nn(h),p,a,u)}function r5(t,e){return g6(Nn(t=nt(t,Gt)),WE(e)?e:{next:e})}function Mp(t,e){return function(n,r){const i=new In;return n.asyncQueue.enqueueAndForget(async()=>qQ(await iC(n),r,i)),i.promise}(Nn(t),e)}function gC(t,e,n){const r=n.docs.get(e._key),i=new vu(t);return new lo(t,i,e._key,r,new bl(n.hasPendingWrites,n.fromCache),e.converter)}const i5={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=mu(e)}set(e,n,r){this._verifyNotCommitted();const i=Ho(e,this._firestore),s=a_(i.converter,n,r),o=t_(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Rt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ho(e,this._firestore);let o;return o=typeof(n=me(n))=="string"||n instanceof xa?lC(this._dataReader,"WriteBatch.update",s._key,n,r,i):aC(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Rt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ho(e,this._firestore);return this._mutations=this._mutations.concat(new vh(n._key,Rt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ee(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ho(t,e){if((t=me(t)).firestore!==e)throw new ee(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5 extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=mu(e)}get(e){const n=Ho(e,this._firestore),r=new G6(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return ge();const s=i[0];if(s.isFoundDocument())return new Hf(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Hf(this._firestore,r,n._key,null,n.converter);throw ge()})}set(e,n,r){const i=Ho(e,this._firestore),s=a_(i.converter,n,r),o=t_(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=Ho(e,this._firestore);let o;return o=typeof(n=me(n))=="string"||n instanceof xa?lC(this._dataReader,"Transaction.update",s._key,n,r,i):aC(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Ho(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ho(e,this._firestore),r=new vu(this._firestore);return super.get(e).then(i=>new lo(this._firestore,r,n._key,i._document,new bl(!1,!1),n.converter))}}function a5(t,e,n){t=nt(t,Gt);const r=Object.assign(Object.assign({},i5),n);return function(i){if(i.maxAttempts<1)throw new ee(H.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,o){const a=new In;return i.asyncQueue.enqueueAndForget(async()=>{const u=await c6(i);new l6(i.asyncQueue,u,o,s,a).run()}),a.promise}(Nn(t),i=>e(new o5(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(){return new Op("deleteField")}function u5(){return new oC("serverTimestamp")}function c5(...t){return new O6("arrayUnion",t)}function h5(...t){return new L6("arrayRemove",t)}function d5(t){return new M6("increment",t)}(function(t,e=!0){(function(n){gh=n})(Ra),io(new Xr("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Gt(new wK(n.getProvider("auth-internal")),new SK(n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new ee(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ia(a.options.projectId,u)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),wi(gk,"3.9.0",t),wi(gk,"3.9.0","esm2017")})();const f5="@firebase/firestore-compat",p5="0.3.5";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ee("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(){if(typeof Uint8Array>"u")throw new ee("unimplemented","Uint8Arrays are not available in this environment.")}function wx(){if(!OK())throw new ee("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Gf{constructor(e){this._delegate=e}static fromBase64String(e){return wx(),new Gf(ks.fromBase64String(e))}static fromUint8Array(e){return _x(),new Gf(ks.fromUint8Array(e))}toBase64(){return wx(),this._delegate.toBase64()}toUint8Array(){return _x(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t){return g5(t,["next","error","complete"])}function g5(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{enableIndexedDbPersistence(e,n){return I6(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return S6(e._delegate)}clearIndexedDbPersistence(e){return C6(e._delegate)}}class QM{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ia||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Bc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){v6(this._delegate,e,n,r)}enableNetwork(){return k6(this._delegate)}disableNetwork(){return x6(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,xM("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return b6(this._delegate)}onSnapshotsInSync(e){return r5(this._delegate,e)}get app(){if(!this._appCompat)throw new ee("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zc(this,AM(this._delegate,e))}catch(n){throw fr(n,"collection()","Firestore.collection()")}}doc(e){try{return new vi(this,Ny(this._delegate,e))}catch(n){throw fr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new dr(this,_6(this._delegate,e))}catch(n){throw fr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return a5(this._delegate,n=>e(new YM(this,n)))}batch(){return Nn(this._delegate),new XM(new s5(this._delegate,e=>Mp(this._delegate,e)))}loadBundle(e){return N6(this._delegate,e)}namedQuery(e){return A6(this._delegate,e).then(n=>n?new dr(this,n):null)}}class l_ extends pC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gf(new ks(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return vi.forKey(n,this.firestore,null)}}function y5(t){mK(t)}class YM{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new l_(e)}get(e){const n=kl(e);return this._delegate.get(n).then(r=>new Kf(this._firestore,new lo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=kl(e);return r?(mC("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=kl(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=kl(e);return this._delegate.delete(n),this}}class XM{constructor(e){this._delegate=e}set(e,n,r){const i=kl(e);return r?(mC("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=kl(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=kl(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class iu{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Kd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qf(this._firestore,r),n!=null?n:{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=iu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new iu(e,new l_(e),n),i.set(n,s)),s}}iu.INSTANCES=new WeakMap;class vi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new l_(e)}static forPath(e,n,r){if(e.length%2!==0)throw new ee("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new vi(n,new Nt(n._delegate,r,new ue(e)))}static forKey(e,n,r){return new vi(n,new Nt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Zc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zc(this.firestore,AM(this._delegate,e))}catch(n){throw fr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=me(e),e instanceof Nt?DM(this._delegate,e):!1}set(e,n){n=mC("DocumentReference.set",n);try{return n?yx(this._delegate,e,n):yx(this._delegate,e)}catch(r){throw fr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?vx(this._delegate,e):vx(this._delegate,e,n,...r)}catch(i){throw fr(i,"updateDoc()","DocumentReference.update()")}}delete(){return t5(this._delegate)}onSnapshot(...e){const n=JM(e),r=ZM(e,i=>new Kf(this.firestore,new lo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return KM(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Y6(this._delegate):(e==null?void 0:e.source)==="server"?n=X6(this._delegate):n=Q6(this._delegate),n.then(r=>new Kf(this.firestore,new lo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new vi(this.firestore,e?this._delegate.withConverter(iu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function fr(t,e,n){return t.message=t.message.replace(e,n),t}function JM(t){for(const e of t)if(typeof e=="object"&&!GE(e))return e;return{}}function ZM(t,e){var n,r;let i;return GE(t[0])?i=t[0]:GE(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Kf{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new vi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return GM(this._delegate,e._delegate)}}class Qf extends Kf{data(e){const n=this._delegate.data(e);return yK(n!==void 0),n}}class dr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new l_(e)}where(e,n,r){try{return new dr(this.firestore,Vo(this._delegate,U6(e,n,r)))}catch(i){throw fr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new dr(this.firestore,Vo(this._delegate,V6(e,n)))}catch(r){throw fr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new dr(this.firestore,Vo(this._delegate,B6(e)))}catch(n){throw fr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new dr(this.firestore,Vo(this._delegate,j6(e)))}catch(n){throw fr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new dr(this.firestore,Vo(this._delegate,q6(...e)))}catch(n){throw fr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new dr(this.firestore,Vo(this._delegate,z6(...e)))}catch(n){throw fr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new dr(this.firestore,Vo(this._delegate,W6(...e)))}catch(n){throw fr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new dr(this.firestore,Vo(this._delegate,H6(...e)))}catch(n){throw fr(n,"endAt()","Query.endAt()")}}isEqual(e){return PM(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Z6(this._delegate):(e==null?void 0:e.source)==="server"?n=e5(this._delegate):n=J6(this._delegate),n.then(r=>new KE(this.firestore,new Na(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=JM(e),r=ZM(e,i=>new KE(this.firestore,new Na(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return KM(this._delegate,n,r)}withConverter(e){return new dr(this.firestore,e?this._delegate.withConverter(iu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class v5{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Qf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class KE{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new dr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new v5(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Qf(this._firestore,r))})}isEqual(e){return GM(this._delegate,e._delegate)}}class Zc extends dr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new vi(this.firestore,e):null}doc(e){try{return e===void 0?new vi(this.firestore,Ny(this._delegate)):new vi(this.firestore,Ny(this._delegate,e))}catch(n){throw fr(n,"doc()","CollectionReference.doc()")}}add(e){return n5(this._delegate,e).then(n=>new vi(this.firestore,n))}isEqual(e){return DM(this._delegate,e._delegate)}withConverter(e){return new Zc(this.firestore,e?this._delegate.withConverter(iu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function kl(t){return nt(t,Nt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(...e){this._delegate=new xa(...e)}static documentId(){return new yC(Jt.keyField().canonicalString())}isEqual(e){return e=me(e),e instanceof xa?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e){this._delegate=e}static serverTimestamp(){const e=u5();return e._methodName="FieldValue.serverTimestamp",new vl(e)}static delete(){const e=l5();return e._methodName="FieldValue.delete",new vl(e)}static arrayUnion(...e){const n=c5(...e);return n._methodName="FieldValue.arrayUnion",new vl(n)}static arrayRemove(...e){const n=h5(...e);return n._methodName="FieldValue.arrayRemove",new vl(n)}static increment(e){const n=d5(e);return n._methodName="FieldValue.increment",new vl(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5={Firestore:QM,GeoPoint:Zv,Timestamp:Ot,Blob:Gf,Transaction:YM,WriteBatch:XM,DocumentReference:vi,DocumentSnapshot:Kf,Query:dr,QueryDocumentSnapshot:Qf,QuerySnapshot:KE,CollectionReference:Zc,FieldPath:yC,FieldValue:vl,setLogLevel:y5,CACHE_SIZE_UNLIMITED:T6};function w5(t,e){t.INTERNAL.registerComponent(new Xr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},_5)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(t){w5(t,(e,n)=>new QM(e,n,new m5)),t.registerVersion(f5,p5)}E5(ce);var u_={exports:{}},c_={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T5=ve.exports,I5=Symbol.for("react.element"),S5=Symbol.for("react.fragment"),C5=Object.prototype.hasOwnProperty,b5=T5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k5={key:!0,ref:!0,__self:!0,__source:!0};function eF(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)C5.call(e,r)&&!k5.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:I5,type:t,key:s,ref:o,props:i,_owner:b5.current}}c_.Fragment=S5;c_.jsx=eF;c_.jsxs=eF;(function(t){t.exports=c_})(u_);const x5=u_.exports.Fragment,U=u_.exports.jsx,Me=u_.exports.jsxs;class N5 extends ve.exports.Component{constructor(n){super(n);it(this,"iLogin",()=>{var n=new ce.auth.GoogleAuthProvider;return ce.auth().signInWithPopup(n).then(r=>{r.credential.accessToken;var i=r.user,s=ce.auth().currentUser.uid,o=r.additionalUserInfo.isNewUser;o&&ce.database().ref("users/"+s).set({ID:s,Name:i.displayName,Photo:i.photoURL,Online:!0}),this.setState({LoginInfo:r.user,F:!0}),this.props.OnComplete(this.state.LoginInfo)}).catch(function(r){})});this.state={}}render(){return Me("div",{children:[U("p",{style:{marginBottom:"15px"},id:"pe",children:"Email or Phone"}),U("input",{className:"LoginInput",id:"Password"}),U("p",{id:"pp",children:"Password"}),U("input",{className:"LoginInput",id:"Email"}),U("button",{id:"Login",onClick:()=>{this.iLogin()},children:"Login"})]})}}class A5 extends ve.exports.Component{constructor(n){super(n);it(this,"TesT",()=>{ce.storage().ref()});this.state={}}render(){return U("div",{children:Me("div",{id:"blue",children:[U("p",{id:"Storybook",onClick:()=>{this.TesT()},children:"Storybook"}),U(N5,{})]})})}}class D5 extends ve.exports.Component{constructor(n){super(n);it(this,"Login",()=>{var n=new ce.auth.GoogleAuthProvider;return ce.auth().signInWithPopup(n).then(r=>{var i=r.user,s=ce.auth().currentUser.uid,o=r.additionalUserInfo.isNewUser;o&&ce.database().ref("users/"+s).set({ID:s,Name:i.displayName,Photo:i.photoURL,Online:!0}),this.setState({LoginInfo:r.user,F:!0}),this.props.OnComplete(this.state.LoginInfo)}).catch(function(r){})});this.state={LoginInfo:[],F:!1}}render(){return U("div",{children:U("img",{onClick:()=>{this.Login()},id:"GoogleLogin",src:"https://i.stack.imgur.com/XzoRm.png"})})}}class P5 extends ve.exports.Component{constructor(n){super(n);it(this,"LoginFinish",n=>{this.props.move(n)});it(this,"Login",()=>{var n=new ce.auth.GoogleAuthProvider;return ce.auth().signInWithPopup(n).then(r=>{r.credential.accessToken;var i=r.user,s=ce.auth().currentUser.uid,o=r.additionalUserInfo.isNewUser;o&&ce.database().ref("users/"+s).set({ID:s,Name:i.displayName,Photo:i.photoURL,Online:!0}),this.setState({LoginInfo:r.user,F:!0}),this.props.OnComplete(this.state.LoginInfo)}).catch(function(r){})});this.state={SmsAuth:!1}}render(){return Me("div",{children:[U("img",{id:"mainpic",src:"http://sfwallpaper.com/images/background-wallpaper-images-2.jpg"}),Me("div",{id:"SCon",children:[U("h1",{id:"Create",children:"Create an account"}),U("h3",{id:"free",children:"its free and always will be free"}),U("input",{placeholder:"Username",className:"SignInput",id:"Si1"}),U("input",{placeholder:"Password",className:"SignInput",id:"Si2"}),U("input",{placeholder:"Mobile number",className:"SignInput",id:"Si3"}),U("button",{onClick:()=>{this.Login()},id:"signup",children:"Sign Up"}),U("p",{id:"or",children:"OR"}),U(D5,{OnComplete:this.LoginFinish})]})]})}}var h_={exports:{}},R5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",O5=R5,L5=O5;function tF(){}function nF(){}nF.resetWarningCache=tF;var M5=function(){function t(r,i,s,o,a,u){if(u!==L5){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:nF,resetWarningCache:tF};return n.PropTypes=n,n};h_.exports=M5();class F5 extends ve.exports.Component{constructor(n){super(n);it(this,"SmsAuth",()=>{var n=new ce.auth.RecaptchaVerifier("recaptcha-container"),r="+923405588495";ce.auth().signInWithPhoneNumber(r,n).then(function(i){console.log("success"),window.confirmationResult=i,console.log(JSON.stringify(i))}).catch(function(i){console.log("Error")})});this.state={}}render(){return Me("div",{children:[U("div",{onClick:()=>{this.props.OFF()},id:"smsoverlayer"}),Me("div",{id:"smscard",children:[U("button",{onClick:()=>{this.SmsAuth()},id:"smsbtn",children:"Send Sms"}),Me("ion-content",{padding:!0,children:[U("div",{id:"recaptcha-container"}),Me("ion-item",{children:[U("ion-label",{stacked:!0,children:"Phone Number"}),U("ion-input",{type:"number"})]})]})]})]})}}class rF extends ve.exports.Component{constructor(n){super(n);it(this,"Navigate",n=>{this.context.router.history.push("/Profile/"+n.uid)});it(this,"SmsAuth",()=>{this.setState({SmsAuth:!this.state.SmsAuth})});this.state={SmsAuth:!1}}render(){return Me("div",{children:[U("div",{}),Me("div",{children:[U(A5,{}),U(P5,{move:this.Navigate,SmsAuth:this.SmsAuth}),this.state.SmsAuth&&U(F5,{OFF:this.SmsAuth})]})]})}}rF.contextTypes={router:h_.exports.object};/**
 * @remix-run/router v1.0.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dy(){return Dy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dy.apply(this,arguments)}var Zo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Zo||(Zo={}));const Ex="popstate";function $5(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return QE("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:vC(i)}return B5(e,n,null,t)}function U5(){return Math.random().toString(36).substr(2,8)}function Tx(t){return{usr:t.state,key:t.key}}function QE(t,e,n,r){return n===void 0&&(n=null),Dy({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?d_(e):e,{state:n,key:e&&e.key||r||U5()})}function vC(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function d_(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function V5(t){let e=typeof window<"u"&&typeof window.location<"u"&&window.location.origin!=="null"?window.location.origin:"unknown://unknown",n=typeof t=="string"?t:vC(t);return new URL(n,e)}function B5(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Zo.Pop,u=null;function h(){a=Zo.Pop,u&&u({action:a,location:w.location})}function p(b,k){a=Zo.Push;let O=QE(w.location,b,k);n&&n(O,b);let J=Tx(O),N=w.createHref(O);try{o.pushState(J,"",N)}catch{i.location.assign(N)}s&&u&&u({action:a,location:w.location})}function v(b,k){a=Zo.Replace;let O=QE(w.location,b,k);n&&n(O,b);let J=Tx(O),N=w.createHref(O);o.replaceState(J,"",N),s&&u&&u({action:a,location:w.location})}let w={get action(){return a},get location(){return t(i,o)},listen(b){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Ex,h),u=b,()=>{i.removeEventListener(Ex,h),u=null}},createHref(b){return e(i,b)},encodeLocation(b){let k=V5(vC(b));return Dy({},b,{pathname:k.pathname,search:k.search,hash:k.hash})},push:p,replace:v,go(b){return o.go(b)}};return w}var Ix;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ix||(Ix={}));function j5(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?d_(e):e,i=sF(r.pathname||"/",n);if(i==null)return null;let s=iF(t);q5(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=J5(s[a],t8(i));return o}function iF(t,e,n,r){return e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r=""),t.forEach((i,s)=>{let o={relativePath:i.path||"",caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};o.relativePath.startsWith("/")&&(ti(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(r.length));let a=Sc([r,o.relativePath]),u=n.concat(o);i.children&&i.children.length>0&&(ti(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+a+'".')),iF(i.children,e,u,a)),!(i.path==null&&!i.index)&&e.push({path:a,score:Y5(a,i.index),routesMeta:u})}),e}function q5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:X5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const z5=/^:\w+$/,W5=3,H5=2,G5=1,K5=10,Q5=-2,Sx=t=>t==="*";function Y5(t,e){let n=t.split("/"),r=n.length;return n.some(Sx)&&(r+=Q5),e&&(r+=H5),n.filter(i=>!Sx(i)).reduce((i,s)=>i+(z5.test(s)?W5:s===""?G5:K5),r)}function X5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function J5(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,h=i==="/"?e:e.slice(i.length)||"/",p=Z5({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},h);if(!p)return null;Object.assign(r,p.params);let v=a.route;s.push({params:r,pathname:Sc([i,p.pathname]),pathnameBase:r8(Sc([i,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(i=Sc([i,p.pathnameBase]))}return s}function Z5(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=e8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((h,p,v)=>{if(p==="*"){let w=a[v]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}return h[p]=n8(a[v]||"",p),h},{}),pathname:s,pathnameBase:o,pattern:t}}function e8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),_C(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(o,a)=>(r.push(a),"([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function t8(t){try{return decodeURI(t)}catch(e){return _C(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function n8(t,e){try{return decodeURIComponent(t)}catch(n){return _C(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function sF(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function ti(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _C(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}const Sc=t=>t.join("/").replace(/\/\/+/g,"/"),r8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");class i8{constructor(e,n,r){this.status=e,this.statusText=n||"",this.data=r}}function s8(t){return t instanceof i8}const o8=new Set(["POST","PUT","PATCH","DELETE"]);[...o8];/**
 * React Router v6.4.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function YE(){return YE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YE.apply(this,arguments)}function a8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const l8=typeof Object.is=="function"?Object.is:a8,{useState:u8,useEffect:c8,useLayoutEffect:h8,useDebugValue:d8}=Hw;function f8(t,e,n){const r=e(),[{inst:i},s]=u8({inst:{value:r,getSnapshot:e}});return h8(()=>{i.value=r,i.getSnapshot=e,Lw(i)&&s({inst:i})},[t,r,e]),c8(()=>(Lw(i)&&s({inst:i}),t(()=>{Lw(i)&&s({inst:i})})),[t]),d8(r),r}function Lw(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!l8(n,r)}catch{return!0}}function p8(t,e,n){return e()}const g8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",m8=!g8,y8=m8?p8:f8;"useSyncExternalStore"in Hw&&(t=>t.useSyncExternalStore)(Hw);const v8=ve.exports.createContext(null),_8=ve.exports.createContext(null),oF=ve.exports.createContext(null),w8=ve.exports.createContext(null),f_=ve.exports.createContext(null),wC=ve.exports.createContext({outlet:null,matches:[]}),aF=ve.exports.createContext(null);function EC(){return ve.exports.useContext(f_)!=null}function E8(){return EC()||ti(!1),ve.exports.useContext(f_).location}function T8(t,e){EC()||ti(!1);let n=ve.exports.useContext(oF),{matches:r}=ve.exports.useContext(wC),i=r[r.length-1],s=i?i.params:{};i&&i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let a=E8(),u;if(e){var h;let k=typeof e=="string"?d_(e):e;o==="/"||((h=k.pathname)==null?void 0:h.startsWith(o))||ti(!1),u=k}else u=a;let p=u.pathname||"/",v=o==="/"?p:p.slice(o.length)||"/",w=j5(t,{pathname:v}),b=b8(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},s,k.params),pathname:Sc([o,k.pathname]),pathnameBase:k.pathnameBase==="/"?o:Sc([o,k.pathnameBase])})),r,n||void 0);return e&&b?U(f_.Provider,{value:{location:YE({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Zo.Pop},children:b}):b}function I8(){let t=x8(),e=s8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r};return Me(x5,{children:[U("h2",{children:"Unhandled Thrown Error!"}),U("h3",{style:{fontStyle:"italic"},children:e}),n?U("pre",{style:i,children:n}):null,U("p",{children:"\u{1F4BF} Hey developer \u{1F44B}"}),Me("p",{children:["You can provide a way better UX than this when your app throws errors by providing your own\xA0",U("code",{style:s,children:"errorElement"})," props on\xA0",U("code",{style:s,children:"<Route>"})]})]})}class S8 extends ve.exports.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location?{error:e.error,location:e.location}:{error:e.error||n.error,location:n.location}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?U(aF.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function C8(t){let{routeContext:e,match:n,children:r}=t,i=ve.exports.useContext(v8);return i&&n.route.errorElement&&(i._deepestRenderedBoundaryId=n.route.id),U(wC.Provider,{value:e,children:r})}function b8(t,e,n){if(e===void 0&&(e=[]),t==null)if(n!=null&&n.errors)t=n.matches;else return null;let r=t,i=n==null?void 0:n.errors;if(i!=null){let s=r.findIndex(o=>o.route.id&&(i==null?void 0:i[o.route.id]));s>=0||ti(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,o,a)=>{let u=o.route.id?i==null?void 0:i[o.route.id]:null,h=n?o.route.errorElement||U(I8,{}):null,p=()=>U(C8,{match:o,routeContext:{outlet:s,matches:e.concat(r.slice(0,a+1))},children:u?h:o.route.element!==void 0?o.route.element:s});return n&&(o.route.errorElement||a===0)?U(S8,{location:n.location,component:h,error:u,children:p()}):p()},null)}var Cx;(function(t){t.UseRevalidator="useRevalidator"})(Cx||(Cx={}));var XE;(function(t){t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"})(XE||(XE={}));function k8(t){let e=ve.exports.useContext(oF);return e||ti(!1),e}function x8(){var t;let e=ve.exports.useContext(aF),n=k8(XE.UseRouteError),r=ve.exports.useContext(wC),i=r.matches[r.matches.length-1];return e||(r||ti(!1),i.route.id||ti(!1),(t=n.errors)==null?void 0:t[i.route.id])}function Yu(t){ti(!1)}function N8(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Zo.Pop,navigator:s,static:o=!1}=t;EC()&&ti(!1);let a=e.replace(/^\/*/,"/"),u=ve.exports.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=d_(r));let{pathname:h="/",search:p="",hash:v="",state:w=null,key:b="default"}=r,k=ve.exports.useMemo(()=>{let O=sF(h,a);return O==null?null:{pathname:O,search:p,hash:v,state:w,key:b}},[a,h,p,v,w,b]);return k==null?null:U(w8.Provider,{value:u,children:U(f_.Provider,{children:n,value:{location:k,navigationType:i}})})}function A8(t){let{children:e,location:n}=t,r=ve.exports.useContext(_8),i=r&&!e?r.router.routes:JE(e);return T8(i,n)}var bx;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(bx||(bx={}));new Promise(()=>{});function JE(t,e){e===void 0&&(e=[]);let n=[];return ve.exports.Children.forEach(t,(r,i)=>{if(!ve.exports.isValidElement(r))return;if(r.type===ve.exports.Fragment){n.push.apply(n,JE(r.props.children,e));return}r.type!==Yu&&ti(!1),!r.props.index||!r.props.children||ti(!1);let s=[...e,i],o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(o.children=JE(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.4.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function D8(t){let{basename:e,children:n,window:r}=t,i=ve.exports.useRef();i.current==null&&(i.current=$5({window:r,v5Compat:!0}));let s=i.current,[o,a]=ve.exports.useState({action:s.action,location:s.location});return ve.exports.useLayoutEffect(()=>s.listen(a),[s]),U(N8,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:s})}var kx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(kx||(kx={}));var xx;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(xx||(xx={}));class P8 extends ve.exports.Component{constructor(e){super(e),this.state={CoverPic:"https://buddhisteconomics.net/wp-content/uploads/2017/10/hdwp693968124.jpg",ProfilePic:"https://www.popsci.com/sites/popsci.com/files/styles/1000_1x_/public/images/2018/06/edinburgh_meadows_2008_middle_meadow_walk_by_catharine_ward_thompson.jpg?itok=ysmDaSjD&fc=50,50"};var n=this.props.Key;ce.database().ref("users/"+n).once("value").then(r=>{var i=r.val(),s=i.ProfilePhoto||!1,o=i.CoverPhoto||!1;s&&this.setState({ProfilePic:o}),o&&this.setState({CoverPic:o})})}render(){if(this.state.ProfilePic&&this.state.CoverPic)return Me("div",{children:[U("button",{className:"ProfileButtons",id:"Pbtn1",children:"Friend"}),U("button",{className:"ProfileButtons",id:"Pbtn2",children:"Follow"}),U("button",{className:"ProfileButtons",id:"Pbtn3",children:"Message"}),U("div",{id:"coverdiv",children:U("img",{id:"cover",src:this.state.CoverPic})}),U("img",{id:"Profilepic",className:"rounded-circle",src:this.state.ProfilePic})]})}}class R8 extends ve.exports.Component{constructor(e){super(e),this.state={}}render(){return U("div",{children:Me("div",{id:"menucontainer",children:[U("div",{className:"PMI",id:"pmi1",children:"Timeline "}),U("div",{className:"PMI",id:"pmi2",onClick:()=>{this.props.Hello()},children:"About "}),U("div",{className:"PMI",id:"pmi3",children:"Friends "}),U("div",{className:"PMI",id:"pmi4",children:"More "})]})})}}class O8 extends ve.exports.Component{componentDidMount(){var e=document.getElementById("uploader"),n=document.getElementById("fileButton"),r=document.getElementById("image");n.addEventListener("change",function(i){zg=i.target.files[0];var s=ce.storage().ref("Photos/"+zg.name),o=s.put(zg);o.on("state_changed",function(u){var h=u.bytesTransferred/u.totalBytes*100;e.value=h},function(u){alert("error"+u)},function(){alert("done");var u=ce.storage().ref("Photos/"+zg.name);u.getDownloadURL().then(function(h){Wg=h,r.src=h}).catch(function(h){})})})}constructor(e){super(e),this.state={Download:!1};var n=setInterval(()=>{Wg!==""&&(alert("$ Hello :: "+Wg),clearInterval(n),this.props.Loaded(Wg))},1e3)}render(){return U("div",{children:Me("div",{style:{position:"absolute",top:"90%",left:0,width:"100%",height:"50%"},children:[U("img",{id:"image",style:{position:"absolute",top:"-180%",left:"0%",width:"100%",height:"160%"}}),U("progress",{value:"",max:"100",id:"uploader",children:"0%"}),U("input",{type:"file",id:"fileButton",onClick:()=>{this.props.Per("oka")}})]})})}}var zg,Wg="";class L8 extends ve.exports.Component{constructor(e){super(e),this.state={}}render(){return Me("div",{children:[U("div",{id:"Upper",children:U("p",{onClick:()=>{this.props.Close()},children:"close"})})," ",U("input",{id:"mind2",placeholder:"What's on your mind",onChange:e=>{this.props.Text(e.target.value)}})]})}}class M8 extends ve.exports.Component{constructor(n){super(n);it(this,"Change",n=>{this.setState({Uploading:!0})});it(this,"Uploaded",n=>{alert("trans: "+n),this.props.PhotoURL(n)});this.state={Uploading:!1}}render(){return U("div",{children:Me("div",{id:"downpost",children:[this.state.Uploading&&U("h1",{id:"uploading",children:" Uploading..."}),U(O8,{Per:this.Change,Loaded:this.Uploaded})]})})}}class F8 extends ve.exports.Component{constructor(n){super(n);it(this,"Push",()=>{alert(this.props.ImageURL),alert(this.props.iText),ce.database().ref("users/"+this.props.Key+"/Timeline").push({Text:this.props.iText,Image:this.props.ImageURL}),alert("Posted Successfully Refresh to see changes")});this.state={}}render(){return U("div",{children:U("div",{id:"final",children:U("button",{id:"postbtn",onClick:n=>{this.Push()},children:"Post"})})})}}class $8 extends ve.exports.Component{constructor(n){super(n);it(this,"GetPhotoURL",n=>{this.setState({ImageUrl:n})});it(this,"InputText",n=>{this.setState({Text:n})});this.state={Go:!1,ImageUrl:"",Text:""}}render(){return U("div",{children:Me("div",{id:"propost2",children:[U(L8,{Close:this.props.Close,Text:this.InputText}),U(M8,{PhotoURL:this.GetPhotoURL}),U(F8,{ImageURL:this.state.ImageUrl,iText:this.state.Text,Key:this.props.Key})]})})}}class lF extends ve.exports.Component{constructor(n){super(n);it(this,"Up",()=>{this.props.Off()});this.state={Post:!0}}render(){return U("div",{children:U("div",{id:"Overlayer",children:this.state.Post&&U($8,{Key:this.props.Key,Close:this.Up})})})}}class uF extends ve.exports.Component{constructor(e){super(e)}render(){return U("div",{children:Me("div",{id:"propost",children:[Me("div",{id:"Upper",children:[U("div",{id:"cmp",children:" "})," "]}),U("input",{onClick:()=>{this.props.Overlayer()},id:"mind",placeholder:"What's on your mind"})]})})}}class U8 extends ve.exports.Component{constructor(n){super(n);it(this,"NoOverlayer",()=>{this.setState({Overlayer:!1})});it(this,"AdvPost",()=>{this.setState({Overlayer:!0})});this.state={Overlayer:!1}}render(){return Me("div",{children:[U(uF,{Overlayer:this.AdvPost}),this.state.Overlayer&&U(lF,{Key:this.props.Key,Off:this.NoOverlayer})]})}}class V8 extends ve.exports.Component{constructor(e){super(e),this.state={}}render(){return U("div",{children:U("h1",{children:"About"})})}}class B8 extends ve.exports.Component{constructor(e){super(e),this.state={}}render(){return U("div",{})}}class p_ extends ve.exports.Component{constructor(n){super(n);it(this,"Route",n=>{this.context.router.history.push("/Search/"+n)});this.state={}}render(){return U("div",{children:Me("div",{id:"slide",children:[U("p",{id:"story",children:"Storybook"}),U("input",{onChange:n=>{Nx=n.target.value},onKeyPress:n=>{n.key==="Enter"&&this.Route(Nx)},id:"searchbar"}),U("button",{id:"searchbtn",children:"search"}),U("p",{id:"me",onClick:()=>{this.Route(this.props.Key)},children:" UserName "})]})})}}var Nx;p_.contextTypes={router:h_.exports.object};class cF extends ve.exports.Component{constructor(n){super(n);it(this,"Like",n=>{var r=ce.auth().currentUser.uid;ce.database().ref("users/"+this.props.Key+"/Timeline/"+n+"/Likes").push({By:r})});it(this,"Share",n=>{ce.auth().currentUser.uid,ce.database().ref("users/"+this.props.Key+"/Timeline/").push({Text:n.Text,Image:n.Image})});this.state={Complete:!1};var r=0;ce.database().ref("users/"+this.props.Key+"/Timeline").once("value").then(i=>{$w=i.val()||!0;var s=Object.keys($w);i.forEach(o=>{var a=o.val();a.key=s[r],Mw.push(a),r+=1}),Mw.reverse(),ce.database().ref("users/"+this.props.Key).once("value",o=>{Fw.push(o.val()),this.setState({Complete:!0})})})}componentDidMount(){}render(){return this.state.Complete?$w===!0?U("h1",{className:"void",children:"There are no posts to show"}):U("div",{children:U("div",{className:"flex-container",children:Mw.map(n=>(Ax++,Me("div",{className:"Post",children:[U("img",{className:"rounded-circle",style:{position:"absolute",left:"2%",width:"3%",height:"26px"},src:Fw[0].Photo}),U("h3",{className:"nm",children:Fw[0].Name}),U("input",{className:"PostText",onChange:()=>{console.log("ok")},value:n.Text}),U("img",{className:"PostImage",src:n.Image}),Me("div",{className:"Reaction",children:[U("h3",{onClick:()=>{this.Like(n.key)},id:"like",children:" Like  "}),U("h3",{id:"Comment",children:" Comments "}),U("h3",{onClick:()=>{this.Share(n)},id:"share",children:" Share "})]})]},Ax)))})}):U("p",{})}}var Mw=[],Fw=[],$w=!1,Ax=0;class j8 extends ve.exports.Component{constructor(n){super(n);it(this,"CreateGroup",n=>{var r=ce.auth().currentUser.uid;ce.database().ref("users/"+r+"/MyGroups").push({Name:n})});this.state={Card:!0,GroupName:""}}render(){return U("div",{children:this.state.Card&&Me("div",{children:[U("div",{id:"Overlay1",onClick:()=>{this.setState({Card:!1})}}),Me("div",{id:"Card",children:[U("h5",{}),U("h4",{id:"CreateGroup",children:" Create  Group"}),U("input",{id:"GroupName",placeholder:"Group Name",onChange:n=>{this.setState({GroupName:n.target.value})}}),U("button",{id:"CreateGroupBtn",onClick:()=>{alert(this.state.GroupName),this.CreateGroup(this.state.GroupName)},children:" Create "})]})]})})}}class g_ extends ve.exports.Component{constructor(n){super(n);it(this,"Route",()=>{alert("Routing"),this.context.router.history.push("/Groups/Groupid")});this.state={Active:!1,Route:!1,GroupNames:[]};var r=ce.auth().currentUser.uid;ce.database().ref("users/"+r+"/MyGroups").once("value",i=>{i.forEach(s=>{var o=s.val();Dx.push(o.Name)}),this.setState({GroupNames:Dx})})}render(){return Me("div",{children:[Me("div",{id:"feedside",children:[U("br",{}),U("br",{}),U("p",{className:"Feedtext",id:"Shortcuts",children:"Shortcuts"}),this.state.GroupNames.map(n=>Me("h3",{className:"Feedtext",id:"Sname",onClick:()=>{this.Route()},children:[" ",n," "]})),U("br",{}),U("br",{}),U("p",{className:"Feedtext",id:"Create",children:"Create"}),U("h6",{className:"Feedtext",id:"CreateGroup",onClick:()=>{this.setState({Active:!this.state.Active})},children:" Group"})]}),this.state.Active&&U(j8,{})]})}}var Dx=[];g_.contextTypes={router:h_.exports.object};class q8 extends ve.exports.Component{constructor(n){super(n);it(this,"Change",()=>{alert("Switch"),this.setState({Timeline:!1,About:!0,Profile:!1})});this.state={Timeline:!0,Profile:!0,About:!1,Connected:!1};var r=this.props.match,i=r.params;gd=i.id}componentDidMount(){console.log("mounted"),setTimeout(()=>{this.setState({Connected:!0})},1e3)}render(){return this.state.Connected?Me("div",{children:[U(g_,{}),U(p_,{Key:gd}),U(P8,{Key:gd}),U(R8,{Hello:this.Change}),this.state.Timeline&&U(cF,{Key:gd}),this.state.Profile&&U(U8,{Key:gd}),this.state.About&&U(V8,{}),this.state.About&&U(B8,{})]}):U("p",{})}}var gd;class z8 extends ve.exports.Component{constructor(e){super(e),this.state={}}render(){return Me("div",{children:[U(p_,{}),U(g_,{})]})}}class W8 extends ve.exports.Component{constructor(n){super(n);it(this,"NoOverlayer",()=>{this.setState({Overlayer:!1})});it(this,"AdvPost",()=>{this.setState({Overlayer:!0})});this.state={Overlayer:!1}}render(){return Me("div",{children:[U(p_,{}),U(g_,{}),U("img",{id:"GroupCover",src:"https://cdn2.outdoorphotographer.com/2018/05/a7RIIYNPSpringApr2015_DSC5460ElCapitanThreeBrothersReflection_OP.jpg"}),U("div",{id:"undercover"}),U(uF,{Overlayer:this.AdvPost}),this.state.Overlayer&&U(lF,{Key:this.props.Key,Off:this.NoOverlayer}),U(cF,{})]})}}class H8 extends ve.exports.Component{constructor(e){super(e),this.state={Online:[]}}render(){if(this.props.data)return U("div",{children:Me("div",{className:"Header",children:[U("img",{className:"rounded-circle",id:"image",src:this.props.data.Photo}),Me("h3",{id:"name",children:[" ",this.props.data.Name," "]}),U("img",{onClick:()=>{this.props.hideme()},id:"cross",src:"https://img.icons8.com/metro/1600/delete-sign.png"})]})})}}var hF={exports:{}};/*!
 * jQuery JavaScript Library v3.6.4
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-03-08T15:28Z
 */(function(t){(function(e,n){t.exports=e.document?n(e,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return n(r)}})(typeof window<"u"?window:Vx,function(e,n){var r=[],i=Object.getPrototypeOf,s=r.slice,o=r.flat?function(l){return r.flat.call(l)}:function(l){return r.concat.apply([],l)},a=r.push,u=r.indexOf,h={},p=h.toString,v=h.hasOwnProperty,w=v.toString,b=w.call(Object),k={},O=function(d){return typeof d=="function"&&typeof d.nodeType!="number"&&typeof d.item!="function"},J=function(d){return d!=null&&d===d.window},N=e.document,D={type:!0,src:!0,nonce:!0,noModule:!0};function M(l,d,f){f=f||N;var y,E,T=f.createElement("script");if(T.text=l,d)for(y in D)E=d[y]||d.getAttribute&&d.getAttribute(y),E&&T.setAttribute(y,E);f.head.appendChild(T).parentNode.removeChild(T)}function Q(l){return l==null?l+"":typeof l=="object"||typeof l=="function"?h[p.call(l)]||"object":typeof l}var re="3.6.4",m=function(l,d){return new m.fn.init(l,d)};m.fn=m.prototype={jquery:re,constructor:m,length:0,toArray:function(){return s.call(this)},get:function(l){return l==null?s.call(this):l<0?this[l+this.length]:this[l]},pushStack:function(l){var d=m.merge(this.constructor(),l);return d.prevObject=this,d},each:function(l){return m.each(this,l)},map:function(l){return this.pushStack(m.map(this,function(d,f){return l.call(d,f,d)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(m.grep(this,function(l,d){return(d+1)%2}))},odd:function(){return this.pushStack(m.grep(this,function(l,d){return d%2}))},eq:function(l){var d=this.length,f=+l+(l<0?d:0);return this.pushStack(f>=0&&f<d?[this[f]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:r.sort,splice:r.splice},m.extend=m.fn.extend=function(){var l,d,f,y,E,T,S=arguments[0]||{},R=1,A=arguments.length,V=!1;for(typeof S=="boolean"&&(V=S,S=arguments[R]||{},R++),typeof S!="object"&&!O(S)&&(S={}),R===A&&(S=this,R--);R<A;R++)if((l=arguments[R])!=null)for(d in l)y=l[d],!(d==="__proto__"||S===y)&&(V&&y&&(m.isPlainObject(y)||(E=Array.isArray(y)))?(f=S[d],E&&!Array.isArray(f)?T=[]:!E&&!m.isPlainObject(f)?T={}:T=f,E=!1,S[d]=m.extend(V,T,y)):y!==void 0&&(S[d]=y));return S},m.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(l){throw new Error(l)},noop:function(){},isPlainObject:function(l){var d,f;return!l||p.call(l)!=="[object Object]"?!1:(d=i(l),d?(f=v.call(d,"constructor")&&d.constructor,typeof f=="function"&&w.call(f)===b):!0)},isEmptyObject:function(l){var d;for(d in l)return!1;return!0},globalEval:function(l,d,f){M(l,{nonce:d&&d.nonce},f)},each:function(l,d){var f,y=0;if(le(l))for(f=l.length;y<f&&d.call(l[y],y,l[y])!==!1;y++);else for(y in l)if(d.call(l[y],y,l[y])===!1)break;return l},makeArray:function(l,d){var f=d||[];return l!=null&&(le(Object(l))?m.merge(f,typeof l=="string"?[l]:l):a.call(f,l)),f},inArray:function(l,d,f){return d==null?-1:u.call(d,l,f)},merge:function(l,d){for(var f=+d.length,y=0,E=l.length;y<f;y++)l[E++]=d[y];return l.length=E,l},grep:function(l,d,f){for(var y,E=[],T=0,S=l.length,R=!f;T<S;T++)y=!d(l[T],T),y!==R&&E.push(l[T]);return E},map:function(l,d,f){var y,E,T=0,S=[];if(le(l))for(y=l.length;T<y;T++)E=d(l[T],T,f),E!=null&&S.push(E);else for(T in l)E=d(l[T],T,f),E!=null&&S.push(E);return o(S)},guid:1,support:k}),typeof Symbol=="function"&&(m.fn[Symbol.iterator]=r[Symbol.iterator]),m.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(l,d){h["[object "+d+"]"]=d.toLowerCase()});function le(l){var d=!!l&&"length"in l&&l.length,f=Q(l);return O(l)||J(l)?!1:f==="array"||d===0||typeof d=="number"&&d>0&&d-1 in l}var he=function(l){var d,f,y,E,T,S,R,A,V,z,Z,j,G,we,Oe,Ee,Bt,Lt,Yn,at="sizzle"+1*new Date,Pe=l.document,Pn=0,Ge=0,Et=Vs(),Do=Vs(),tl=Vs(),Rn=Vs(),Fs=function(C,P){return C===P&&(Z=!0),0},$s={}.hasOwnProperty,jt=[],Ai=jt.pop,ar=jt.push,Di=jt.push,Bh=jt.slice,ns=function(C,P){for(var F=0,K=C.length;F<K;F++)if(C[F]===P)return F;return-1},Ou="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",rt="[\\x20\\t\\r\\n\\f]",Us="(?:\\\\[\\da-fA-F]{1,6}"+rt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",ai="\\["+rt+"*("+Us+")(?:"+rt+"*([*^$|!~]?=)"+rt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Us+"))|)"+rt+"*\\]",jh=":("+Us+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+ai+")*)|.*)\\)|)",T_=new RegExp(rt+"+","g"),Lu=new RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),I_=new RegExp("^"+rt+"*,"+rt+"*"),qh=new RegExp("^"+rt+"*([>+~]|"+rt+")"+rt+"*"),S_=new RegExp(rt+"|>"),C_=new RegExp(jh),b_=new RegExp("^"+Us+"$"),Mu={ID:new RegExp("^#("+Us+")"),CLASS:new RegExp("^\\.("+Us+")"),TAG:new RegExp("^("+Us+"|[*])"),ATTR:new RegExp("^"+ai),PSEUDO:new RegExp("^"+jh),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),bool:new RegExp("^(?:"+Ou+")$","i"),needsContext:new RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},k_=/HTML$/i,zh=/^(?:input|select|textarea|button)$/i,Fu=/^h\d$/i,Po=/^[^{]+\{\s*\[native \w/,sg=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ro=/[+~]/,li=new RegExp("\\\\[\\da-fA-F]{1,6}"+rt+"?|\\\\([^\\r\\n\\f])","g"),Pi=function(C,P){var F="0x"+C.slice(1)-65536;return P||(F<0?String.fromCharCode(F+65536):String.fromCharCode(F>>10|55296,F&1023|56320))},og=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ag=function(C,P){return P?C==="\0"?"\uFFFD":C.slice(0,-1)+"\\"+C.charCodeAt(C.length-1).toString(16)+" ":"\\"+C},rs=function(){j()},x_=rl(function(C){return C.disabled===!0&&C.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Di.apply(jt=Bh.call(Pe.childNodes),Pe.childNodes),jt[Pe.childNodes.length].nodeType}catch{Di={apply:jt.length?function(P,F){ar.apply(P,Bh.call(F))}:function(P,F){for(var K=P.length,_=0;P[K++]=F[_++];);P.length=K-1}}}function ct(C,P,F,K){var _,c,g,I,x,L,$,B=P&&P.ownerDocument,Y=P?P.nodeType:9;if(F=F||[],typeof C!="string"||!C||Y!==1&&Y!==9&&Y!==11)return F;if(!K&&(j(P),P=P||G,Oe)){if(Y!==11&&(x=sg.exec(C)))if(_=x[1]){if(Y===9)if(g=P.getElementById(_)){if(g.id===_)return F.push(g),F}else return F;else if(B&&(g=B.getElementById(_))&&Yn(P,g)&&g.id===_)return F.push(g),F}else{if(x[2])return Di.apply(F,P.getElementsByTagName(C)),F;if((_=x[3])&&f.getElementsByClassName&&P.getElementsByClassName)return Di.apply(F,P.getElementsByClassName(_)),F}if(f.qsa&&!Rn[C+" "]&&(!Ee||!Ee.test(C))&&(Y!==1||P.nodeName.toLowerCase()!=="object")){if($=C,B=P,Y===1&&(S_.test(C)||qh.test(C))){for(B=Ro.test(C)&&Wh(P.parentNode)||P,(B!==P||!f.scope)&&((I=P.getAttribute("id"))?I=I.replace(og,ag):P.setAttribute("id",I=at)),L=S(C),c=L.length;c--;)L[c]=(I?"#"+I:":scope")+" "+Bs(L[c]);$=L.join(",")}try{return Di.apply(F,B.querySelectorAll($)),F}catch{Rn(C,!0)}finally{I===at&&P.removeAttribute("id")}}}return A(C.replace(Lu,"$1"),P,F,K)}function Vs(){var C=[];function P(F,K){return C.push(F+" ")>y.cacheLength&&delete P[C.shift()],P[F+" "]=K}return P}function Cr(C){return C[at]=!0,C}function fn(C){var P=G.createElement("fieldset");try{return!!C(P)}catch{return!1}finally{P.parentNode&&P.parentNode.removeChild(P),P=null}}function $u(C,P){for(var F=C.split("|"),K=F.length;K--;)y.attrHandle[F[K]]=P}function lg(C,P){var F=P&&C,K=F&&C.nodeType===1&&P.nodeType===1&&C.sourceIndex-P.sourceIndex;if(K)return K;if(F){for(;F=F.nextSibling;)if(F===P)return-1}return C?1:-1}function N_(C){return function(P){var F=P.nodeName.toLowerCase();return F==="input"&&P.type===C}}function nl(C){return function(P){var F=P.nodeName.toLowerCase();return(F==="input"||F==="button")&&P.type===C}}function ug(C){return function(P){return"form"in P?P.parentNode&&P.disabled===!1?"label"in P?"label"in P.parentNode?P.parentNode.disabled===C:P.disabled===C:P.isDisabled===C||P.isDisabled!==!C&&x_(P)===C:P.disabled===C:"label"in P?P.disabled===C:!1}}function is(C){return Cr(function(P){return P=+P,Cr(function(F,K){for(var _,c=C([],F.length,P),g=c.length;g--;)F[_=c[g]]&&(F[_]=!(K[_]=F[_]))})})}function Wh(C){return C&&typeof C.getElementsByTagName<"u"&&C}f=ct.support={},T=ct.isXML=function(C){var P=C&&C.namespaceURI,F=C&&(C.ownerDocument||C).documentElement;return!k_.test(P||F&&F.nodeName||"HTML")},j=ct.setDocument=function(C){var P,F,K=C?C.ownerDocument||C:Pe;return K==G||K.nodeType!==9||!K.documentElement||(G=K,we=G.documentElement,Oe=!T(G),Pe!=G&&(F=G.defaultView)&&F.top!==F&&(F.addEventListener?F.addEventListener("unload",rs,!1):F.attachEvent&&F.attachEvent("onunload",rs)),f.scope=fn(function(_){return we.appendChild(_).appendChild(G.createElement("div")),typeof _.querySelectorAll<"u"&&!_.querySelectorAll(":scope fieldset div").length}),f.cssHas=fn(function(){try{return G.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),f.attributes=fn(function(_){return _.className="i",!_.getAttribute("className")}),f.getElementsByTagName=fn(function(_){return _.appendChild(G.createComment("")),!_.getElementsByTagName("*").length}),f.getElementsByClassName=Po.test(G.getElementsByClassName),f.getById=fn(function(_){return we.appendChild(_).id=at,!G.getElementsByName||!G.getElementsByName(at).length}),f.getById?(y.filter.ID=function(_){var c=_.replace(li,Pi);return function(g){return g.getAttribute("id")===c}},y.find.ID=function(_,c){if(typeof c.getElementById<"u"&&Oe){var g=c.getElementById(_);return g?[g]:[]}}):(y.filter.ID=function(_){var c=_.replace(li,Pi);return function(g){var I=typeof g.getAttributeNode<"u"&&g.getAttributeNode("id");return I&&I.value===c}},y.find.ID=function(_,c){if(typeof c.getElementById<"u"&&Oe){var g,I,x,L=c.getElementById(_);if(L){if(g=L.getAttributeNode("id"),g&&g.value===_)return[L];for(x=c.getElementsByName(_),I=0;L=x[I++];)if(g=L.getAttributeNode("id"),g&&g.value===_)return[L]}return[]}}),y.find.TAG=f.getElementsByTagName?function(_,c){if(typeof c.getElementsByTagName<"u")return c.getElementsByTagName(_);if(f.qsa)return c.querySelectorAll(_)}:function(_,c){var g,I=[],x=0,L=c.getElementsByTagName(_);if(_==="*"){for(;g=L[x++];)g.nodeType===1&&I.push(g);return I}return L},y.find.CLASS=f.getElementsByClassName&&function(_,c){if(typeof c.getElementsByClassName<"u"&&Oe)return c.getElementsByClassName(_)},Bt=[],Ee=[],(f.qsa=Po.test(G.querySelectorAll))&&(fn(function(_){var c;we.appendChild(_).innerHTML="<a id='"+at+"'></a><select id='"+at+"-\r\\' msallowcapture=''><option selected=''></option></select>",_.querySelectorAll("[msallowcapture^='']").length&&Ee.push("[*^$]="+rt+`*(?:''|"")`),_.querySelectorAll("[selected]").length||Ee.push("\\["+rt+"*(?:value|"+Ou+")"),_.querySelectorAll("[id~="+at+"-]").length||Ee.push("~="),c=G.createElement("input"),c.setAttribute("name",""),_.appendChild(c),_.querySelectorAll("[name='']").length||Ee.push("\\["+rt+"*name"+rt+"*="+rt+`*(?:''|"")`),_.querySelectorAll(":checked").length||Ee.push(":checked"),_.querySelectorAll("a#"+at+"+*").length||Ee.push(".#.+[+~]"),_.querySelectorAll("\\\f"),Ee.push("[\\r\\n\\f]")}),fn(function(_){_.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var c=G.createElement("input");c.setAttribute("type","hidden"),_.appendChild(c).setAttribute("name","D"),_.querySelectorAll("[name=d]").length&&Ee.push("name"+rt+"*[*^$|!~]?="),_.querySelectorAll(":enabled").length!==2&&Ee.push(":enabled",":disabled"),we.appendChild(_).disabled=!0,_.querySelectorAll(":disabled").length!==2&&Ee.push(":enabled",":disabled"),_.querySelectorAll("*,:x"),Ee.push(",.*:")})),(f.matchesSelector=Po.test(Lt=we.matches||we.webkitMatchesSelector||we.mozMatchesSelector||we.oMatchesSelector||we.msMatchesSelector))&&fn(function(_){f.disconnectedMatch=Lt.call(_,"*"),Lt.call(_,"[s!='']:x"),Bt.push("!=",jh)}),f.cssHas||Ee.push(":has"),Ee=Ee.length&&new RegExp(Ee.join("|")),Bt=Bt.length&&new RegExp(Bt.join("|")),P=Po.test(we.compareDocumentPosition),Yn=P||Po.test(we.contains)?function(_,c){var g=_.nodeType===9&&_.documentElement||_,I=c&&c.parentNode;return _===I||!!(I&&I.nodeType===1&&(g.contains?g.contains(I):_.compareDocumentPosition&&_.compareDocumentPosition(I)&16))}:function(_,c){if(c){for(;c=c.parentNode;)if(c===_)return!0}return!1},Fs=P?function(_,c){if(_===c)return Z=!0,0;var g=!_.compareDocumentPosition-!c.compareDocumentPosition;return g||(g=(_.ownerDocument||_)==(c.ownerDocument||c)?_.compareDocumentPosition(c):1,g&1||!f.sortDetached&&c.compareDocumentPosition(_)===g?_==G||_.ownerDocument==Pe&&Yn(Pe,_)?-1:c==G||c.ownerDocument==Pe&&Yn(Pe,c)?1:z?ns(z,_)-ns(z,c):0:g&4?-1:1)}:function(_,c){if(_===c)return Z=!0,0;var g,I=0,x=_.parentNode,L=c.parentNode,$=[_],B=[c];if(!x||!L)return _==G?-1:c==G?1:x?-1:L?1:z?ns(z,_)-ns(z,c):0;if(x===L)return lg(_,c);for(g=_;g=g.parentNode;)$.unshift(g);for(g=c;g=g.parentNode;)B.unshift(g);for(;$[I]===B[I];)I++;return I?lg($[I],B[I]):$[I]==Pe?-1:B[I]==Pe?1:0}),G},ct.matches=function(C,P){return ct(C,null,null,P)},ct.matchesSelector=function(C,P){if(j(C),f.matchesSelector&&Oe&&!Rn[P+" "]&&(!Bt||!Bt.test(P))&&(!Ee||!Ee.test(P)))try{var F=Lt.call(C,P);if(F||f.disconnectedMatch||C.document&&C.document.nodeType!==11)return F}catch{Rn(P,!0)}return ct(P,G,null,[C]).length>0},ct.contains=function(C,P){return(C.ownerDocument||C)!=G&&j(C),Yn(C,P)},ct.attr=function(C,P){(C.ownerDocument||C)!=G&&j(C);var F=y.attrHandle[P.toLowerCase()],K=F&&$s.call(y.attrHandle,P.toLowerCase())?F(C,P,!Oe):void 0;return K!==void 0?K:f.attributes||!Oe?C.getAttribute(P):(K=C.getAttributeNode(P))&&K.specified?K.value:null},ct.escape=function(C){return(C+"").replace(og,ag)},ct.error=function(C){throw new Error("Syntax error, unrecognized expression: "+C)},ct.uniqueSort=function(C){var P,F=[],K=0,_=0;if(Z=!f.detectDuplicates,z=!f.sortStable&&C.slice(0),C.sort(Fs),Z){for(;P=C[_++];)P===C[_]&&(K=F.push(_));for(;K--;)C.splice(F[K],1)}return z=null,C},E=ct.getText=function(C){var P,F="",K=0,_=C.nodeType;if(_){if(_===1||_===9||_===11){if(typeof C.textContent=="string")return C.textContent;for(C=C.firstChild;C;C=C.nextSibling)F+=E(C)}else if(_===3||_===4)return C.nodeValue}else for(;P=C[K++];)F+=E(P);return F},y=ct.selectors={cacheLength:50,createPseudo:Cr,match:Mu,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(C){return C[1]=C[1].replace(li,Pi),C[3]=(C[3]||C[4]||C[5]||"").replace(li,Pi),C[2]==="~="&&(C[3]=" "+C[3]+" "),C.slice(0,4)},CHILD:function(C){return C[1]=C[1].toLowerCase(),C[1].slice(0,3)==="nth"?(C[3]||ct.error(C[0]),C[4]=+(C[4]?C[5]+(C[6]||1):2*(C[3]==="even"||C[3]==="odd")),C[5]=+(C[7]+C[8]||C[3]==="odd")):C[3]&&ct.error(C[0]),C},PSEUDO:function(C){var P,F=!C[6]&&C[2];return Mu.CHILD.test(C[0])?null:(C[3]?C[2]=C[4]||C[5]||"":F&&C_.test(F)&&(P=S(F,!0))&&(P=F.indexOf(")",F.length-P)-F.length)&&(C[0]=C[0].slice(0,P),C[2]=F.slice(0,P)),C.slice(0,3))}},filter:{TAG:function(C){var P=C.replace(li,Pi).toLowerCase();return C==="*"?function(){return!0}:function(F){return F.nodeName&&F.nodeName.toLowerCase()===P}},CLASS:function(C){var P=Et[C+" "];return P||(P=new RegExp("(^|"+rt+")"+C+"("+rt+"|$)"))&&Et(C,function(F){return P.test(typeof F.className=="string"&&F.className||typeof F.getAttribute<"u"&&F.getAttribute("class")||"")})},ATTR:function(C,P,F){return function(K){var _=ct.attr(K,C);return _==null?P==="!=":P?(_+="",P==="="?_===F:P==="!="?_!==F:P==="^="?F&&_.indexOf(F)===0:P==="*="?F&&_.indexOf(F)>-1:P==="$="?F&&_.slice(-F.length)===F:P==="~="?(" "+_.replace(T_," ")+" ").indexOf(F)>-1:P==="|="?_===F||_.slice(0,F.length+1)===F+"-":!1):!0}},CHILD:function(C,P,F,K,_){var c=C.slice(0,3)!=="nth",g=C.slice(-4)!=="last",I=P==="of-type";return K===1&&_===0?function(x){return!!x.parentNode}:function(x,L,$){var B,Y,ne,X,ie,Se,_e=c!==g?"nextSibling":"previousSibling",fe=x.parentNode,ke=I&&x.nodeName.toLowerCase(),Ne=!$&&!I,$e=!1;if(fe){if(c){for(;_e;){for(X=x;X=X[_e];)if(I?X.nodeName.toLowerCase()===ke:X.nodeType===1)return!1;Se=_e=C==="only"&&!Se&&"nextSibling"}return!0}if(Se=[g?fe.firstChild:fe.lastChild],g&&Ne){for(X=fe,ne=X[at]||(X[at]={}),Y=ne[X.uniqueID]||(ne[X.uniqueID]={}),B=Y[C]||[],ie=B[0]===Pn&&B[1],$e=ie&&B[2],X=ie&&fe.childNodes[ie];X=++ie&&X&&X[_e]||($e=ie=0)||Se.pop();)if(X.nodeType===1&&++$e&&X===x){Y[C]=[Pn,ie,$e];break}}else if(Ne&&(X=x,ne=X[at]||(X[at]={}),Y=ne[X.uniqueID]||(ne[X.uniqueID]={}),B=Y[C]||[],ie=B[0]===Pn&&B[1],$e=ie),$e===!1)for(;(X=++ie&&X&&X[_e]||($e=ie=0)||Se.pop())&&!((I?X.nodeName.toLowerCase()===ke:X.nodeType===1)&&++$e&&(Ne&&(ne=X[at]||(X[at]={}),Y=ne[X.uniqueID]||(ne[X.uniqueID]={}),Y[C]=[Pn,$e]),X===x)););return $e-=_,$e===K||$e%K===0&&$e/K>=0}}},PSEUDO:function(C,P){var F,K=y.pseudos[C]||y.setFilters[C.toLowerCase()]||ct.error("unsupported pseudo: "+C);return K[at]?K(P):K.length>1?(F=[C,C,"",P],y.setFilters.hasOwnProperty(C.toLowerCase())?Cr(function(_,c){for(var g,I=K(_,P),x=I.length;x--;)g=ns(_,I[x]),_[g]=!(c[g]=I[x])}):function(_){return K(_,0,F)}):K}},pseudos:{not:Cr(function(C){var P=[],F=[],K=R(C.replace(Lu,"$1"));return K[at]?Cr(function(_,c,g,I){for(var x,L=K(_,null,I,[]),$=_.length;$--;)(x=L[$])&&(_[$]=!(c[$]=x))}):function(_,c,g){return P[0]=_,K(P,null,g,F),P[0]=null,!F.pop()}}),has:Cr(function(C){return function(P){return ct(C,P).length>0}}),contains:Cr(function(C){return C=C.replace(li,Pi),function(P){return(P.textContent||E(P)).indexOf(C)>-1}}),lang:Cr(function(C){return b_.test(C||"")||ct.error("unsupported lang: "+C),C=C.replace(li,Pi).toLowerCase(),function(P){var F;do if(F=Oe?P.lang:P.getAttribute("xml:lang")||P.getAttribute("lang"))return F=F.toLowerCase(),F===C||F.indexOf(C+"-")===0;while((P=P.parentNode)&&P.nodeType===1);return!1}}),target:function(C){var P=l.location&&l.location.hash;return P&&P.slice(1)===C.id},root:function(C){return C===we},focus:function(C){return C===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(C.type||C.href||~C.tabIndex)},enabled:ug(!1),disabled:ug(!0),checked:function(C){var P=C.nodeName.toLowerCase();return P==="input"&&!!C.checked||P==="option"&&!!C.selected},selected:function(C){return C.parentNode&&C.parentNode.selectedIndex,C.selected===!0},empty:function(C){for(C=C.firstChild;C;C=C.nextSibling)if(C.nodeType<6)return!1;return!0},parent:function(C){return!y.pseudos.empty(C)},header:function(C){return Fu.test(C.nodeName)},input:function(C){return zh.test(C.nodeName)},button:function(C){var P=C.nodeName.toLowerCase();return P==="input"&&C.type==="button"||P==="button"},text:function(C){var P;return C.nodeName.toLowerCase()==="input"&&C.type==="text"&&((P=C.getAttribute("type"))==null||P.toLowerCase()==="text")},first:is(function(){return[0]}),last:is(function(C,P){return[P-1]}),eq:is(function(C,P,F){return[F<0?F+P:F]}),even:is(function(C,P){for(var F=0;F<P;F+=2)C.push(F);return C}),odd:is(function(C,P){for(var F=1;F<P;F+=2)C.push(F);return C}),lt:is(function(C,P,F){for(var K=F<0?F+P:F>P?P:F;--K>=0;)C.push(K);return C}),gt:is(function(C,P,F){for(var K=F<0?F+P:F;++K<P;)C.push(K);return C})}},y.pseudos.nth=y.pseudos.eq;for(d in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[d]=N_(d);for(d in{submit:!0,reset:!0})y.pseudos[d]=nl(d);function Hh(){}Hh.prototype=y.filters=y.pseudos,y.setFilters=new Hh,S=ct.tokenize=function(C,P){var F,K,_,c,g,I,x,L=Do[C+" "];if(L)return P?0:L.slice(0);for(g=C,I=[],x=y.preFilter;g;){(!F||(K=I_.exec(g)))&&(K&&(g=g.slice(K[0].length)||g),I.push(_=[])),F=!1,(K=qh.exec(g))&&(F=K.shift(),_.push({value:F,type:K[0].replace(Lu," ")}),g=g.slice(F.length));for(c in y.filter)(K=Mu[c].exec(g))&&(!x[c]||(K=x[c](K)))&&(F=K.shift(),_.push({value:F,type:c,matches:K}),g=g.slice(F.length));if(!F)break}return P?g.length:g?ct.error(C):Do(C,I).slice(0)};function Bs(C){for(var P=0,F=C.length,K="";P<F;P++)K+=C[P].value;return K}function rl(C,P,F){var K=P.dir,_=P.next,c=_||K,g=F&&c==="parentNode",I=Ge++;return P.first?function(x,L,$){for(;x=x[K];)if(x.nodeType===1||g)return C(x,L,$);return!1}:function(x,L,$){var B,Y,ne,X=[Pn,I];if($){for(;x=x[K];)if((x.nodeType===1||g)&&C(x,L,$))return!0}else for(;x=x[K];)if(x.nodeType===1||g)if(ne=x[at]||(x[at]={}),Y=ne[x.uniqueID]||(ne[x.uniqueID]={}),_&&_===x.nodeName.toLowerCase())x=x[K]||x;else{if((B=Y[c])&&B[0]===Pn&&B[1]===I)return X[2]=B[2];if(Y[c]=X,X[2]=C(x,L,$))return!0}return!1}}function il(C){return C.length>1?function(P,F,K){for(var _=C.length;_--;)if(!C[_](P,F,K))return!1;return!0}:C[0]}function cg(C,P,F){for(var K=0,_=P.length;K<_;K++)ct(C,P[K],F);return F}function Oo(C,P,F,K,_){for(var c,g=[],I=0,x=C.length,L=P!=null;I<x;I++)(c=C[I])&&(!F||F(c,K,_))&&(g.push(c),L&&P.push(I));return g}function Ri(C,P,F,K,_,c){return K&&!K[at]&&(K=Ri(K)),_&&!_[at]&&(_=Ri(_,c)),Cr(function(g,I,x,L){var $,B,Y,ne=[],X=[],ie=I.length,Se=g||cg(P||"*",x.nodeType?[x]:x,[]),_e=C&&(g||!P)?Oo(Se,ne,C,x,L):Se,fe=F?_||(g?C:ie||K)?[]:I:_e;if(F&&F(_e,fe,x,L),K)for($=Oo(fe,X),K($,[],x,L),B=$.length;B--;)(Y=$[B])&&(fe[X[B]]=!(_e[X[B]]=Y));if(g){if(_||C){if(_){for($=[],B=fe.length;B--;)(Y=fe[B])&&$.push(_e[B]=Y);_(null,fe=[],$,L)}for(B=fe.length;B--;)(Y=fe[B])&&($=_?ns(g,Y):ne[B])>-1&&(g[$]=!(I[$]=Y))}}else fe=Oo(fe===I?fe.splice(ie,fe.length):fe),_?_(null,I,fe,L):Di.apply(I,fe)})}function Uu(C){for(var P,F,K,_=C.length,c=y.relative[C[0].type],g=c||y.relative[" "],I=c?1:0,x=rl(function(B){return B===P},g,!0),L=rl(function(B){return ns(P,B)>-1},g,!0),$=[function(B,Y,ne){var X=!c&&(ne||Y!==V)||((P=Y).nodeType?x(B,Y,ne):L(B,Y,ne));return P=null,X}];I<_;I++)if(F=y.relative[C[I].type])$=[rl(il($),F)];else{if(F=y.filter[C[I].type].apply(null,C[I].matches),F[at]){for(K=++I;K<_&&!y.relative[C[K].type];K++);return Ri(I>1&&il($),I>1&&Bs(C.slice(0,I-1).concat({value:C[I-2].type===" "?"*":""})).replace(Lu,"$1"),F,I<K&&Uu(C.slice(I,K)),K<_&&Uu(C=C.slice(K)),K<_&&Bs(C))}$.push(F)}return il($)}function Vu(C,P){var F=P.length>0,K=C.length>0,_=function(c,g,I,x,L){var $,B,Y,ne=0,X="0",ie=c&&[],Se=[],_e=V,fe=c||K&&y.find.TAG("*",L),ke=Pn+=_e==null?1:Math.random()||.1,Ne=fe.length;for(L&&(V=g==G||g||L);X!==Ne&&($=fe[X])!=null;X++){if(K&&$){for(B=0,!g&&$.ownerDocument!=G&&(j($),I=!Oe);Y=C[B++];)if(Y($,g||G,I)){x.push($);break}L&&(Pn=ke)}F&&(($=!Y&&$)&&ne--,c&&ie.push($))}if(ne+=X,F&&X!==ne){for(B=0;Y=P[B++];)Y(ie,Se,g,I);if(c){if(ne>0)for(;X--;)ie[X]||Se[X]||(Se[X]=Ai.call(x));Se=Oo(Se)}Di.apply(x,Se),L&&!c&&Se.length>0&&ne+P.length>1&&ct.uniqueSort(x)}return L&&(Pn=ke,V=_e),ie};return F?Cr(_):_}return R=ct.compile=function(C,P){var F,K=[],_=[],c=tl[C+" "];if(!c){for(P||(P=S(C)),F=P.length;F--;)c=Uu(P[F]),c[at]?K.push(c):_.push(c);c=tl(C,Vu(_,K)),c.selector=C}return c},A=ct.select=function(C,P,F,K){var _,c,g,I,x,L=typeof C=="function"&&C,$=!K&&S(C=L.selector||C);if(F=F||[],$.length===1){if(c=$[0]=$[0].slice(0),c.length>2&&(g=c[0]).type==="ID"&&P.nodeType===9&&Oe&&y.relative[c[1].type]){if(P=(y.find.ID(g.matches[0].replace(li,Pi),P)||[])[0],P)L&&(P=P.parentNode);else return F;C=C.slice(c.shift().value.length)}for(_=Mu.needsContext.test(C)?0:c.length;_--&&(g=c[_],!y.relative[I=g.type]);)if((x=y.find[I])&&(K=x(g.matches[0].replace(li,Pi),Ro.test(c[0].type)&&Wh(P.parentNode)||P))){if(c.splice(_,1),C=K.length&&Bs(c),!C)return Di.apply(F,K),F;break}}return(L||R(C,$))(K,P,!Oe,F,!P||Ro.test(C)&&Wh(P.parentNode)||P),F},f.sortStable=at.split("").sort(Fs).join("")===at,f.detectDuplicates=!!Z,j(),f.sortDetached=fn(function(C){return C.compareDocumentPosition(G.createElement("fieldset"))&1}),fn(function(C){return C.innerHTML="<a href='#'></a>",C.firstChild.getAttribute("href")==="#"})||$u("type|href|height|width",function(C,P,F){if(!F)return C.getAttribute(P,P.toLowerCase()==="type"?1:2)}),(!f.attributes||!fn(function(C){return C.innerHTML="<input/>",C.firstChild.setAttribute("value",""),C.firstChild.getAttribute("value")===""}))&&$u("value",function(C,P,F){if(!F&&C.nodeName.toLowerCase()==="input")return C.defaultValue}),fn(function(C){return C.getAttribute("disabled")==null})||$u(Ou,function(C,P,F){var K;if(!F)return C[P]===!0?P.toLowerCase():(K=C.getAttributeNode(P))&&K.specified?K.value:null}),ct}(e);m.find=he,m.expr=he.selectors,m.expr[":"]=m.expr.pseudos,m.uniqueSort=m.unique=he.uniqueSort,m.text=he.getText,m.isXMLDoc=he.isXML,m.contains=he.contains,m.escapeSelector=he.escape;var Ye=function(l,d,f){for(var y=[],E=f!==void 0;(l=l[d])&&l.nodeType!==9;)if(l.nodeType===1){if(E&&m(l).is(f))break;y.push(l)}return y},Fe=function(l,d){for(var f=[];l;l=l.nextSibling)l.nodeType===1&&l!==d&&f.push(l);return f},Hn=m.expr.match.needsContext;function Kt(l,d){return l.nodeName&&l.nodeName.toLowerCase()===d.toLowerCase()}var Ci=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function xs(l,d,f){return O(d)?m.grep(l,function(y,E){return!!d.call(y,E,y)!==f}):d.nodeType?m.grep(l,function(y){return y===d!==f}):typeof d!="string"?m.grep(l,function(y){return u.call(d,y)>-1!==f}):m.filter(d,l,f)}m.filter=function(l,d,f){var y=d[0];return f&&(l=":not("+l+")"),d.length===1&&y.nodeType===1?m.find.matchesSelector(y,l)?[y]:[]:m.find.matches(l,m.grep(d,function(E){return E.nodeType===1}))},m.fn.extend({find:function(l){var d,f,y=this.length,E=this;if(typeof l!="string")return this.pushStack(m(l).filter(function(){for(d=0;d<y;d++)if(m.contains(E[d],this))return!0}));for(f=this.pushStack([]),d=0;d<y;d++)m.find(l,E[d],f);return y>1?m.uniqueSort(f):f},filter:function(l){return this.pushStack(xs(this,l||[],!1))},not:function(l){return this.pushStack(xs(this,l||[],!0))},is:function(l){return!!xs(this,typeof l=="string"&&Hn.test(l)?m(l):l||[],!1).length}});var ja,mo=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ns=m.fn.init=function(l,d,f){var y,E;if(!l)return this;if(f=f||ja,typeof l=="string")if(l[0]==="<"&&l[l.length-1]===">"&&l.length>=3?y=[null,l,null]:y=mo.exec(l),y&&(y[1]||!d))if(y[1]){if(d=d instanceof m?d[0]:d,m.merge(this,m.parseHTML(y[1],d&&d.nodeType?d.ownerDocument||d:N,!0)),Ci.test(y[1])&&m.isPlainObject(d))for(y in d)O(this[y])?this[y](d[y]):this.attr(y,d[y]);return this}else return E=N.getElementById(y[2]),E&&(this[0]=E,this.length=1),this;else return!d||d.jquery?(d||f).find(l):this.constructor(d).find(l);else{if(l.nodeType)return this[0]=l,this.length=1,this;if(O(l))return f.ready!==void 0?f.ready(l):l(m)}return m.makeArray(l,this)};Ns.prototype=m.fn,ja=m(N);var pe=/^(?:parents|prev(?:Until|All))/,Re={children:!0,contents:!0,next:!0,prev:!0};m.fn.extend({has:function(l){var d=m(l,this),f=d.length;return this.filter(function(){for(var y=0;y<f;y++)if(m.contains(this,d[y]))return!0})},closest:function(l,d){var f,y=0,E=this.length,T=[],S=typeof l!="string"&&m(l);if(!Hn.test(l)){for(;y<E;y++)for(f=this[y];f&&f!==d;f=f.parentNode)if(f.nodeType<11&&(S?S.index(f)>-1:f.nodeType===1&&m.find.matchesSelector(f,l))){T.push(f);break}}return this.pushStack(T.length>1?m.uniqueSort(T):T)},index:function(l){return l?typeof l=="string"?u.call(m(l),this[0]):u.call(this,l.jquery?l[0]:l):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(l,d){return this.pushStack(m.uniqueSort(m.merge(this.get(),m(l,d))))},addBack:function(l){return this.add(l==null?this.prevObject:this.prevObject.filter(l))}});function W(l,d){for(;(l=l[d])&&l.nodeType!==1;);return l}m.each({parent:function(l){var d=l.parentNode;return d&&d.nodeType!==11?d:null},parents:function(l){return Ye(l,"parentNode")},parentsUntil:function(l,d,f){return Ye(l,"parentNode",f)},next:function(l){return W(l,"nextSibling")},prev:function(l){return W(l,"previousSibling")},nextAll:function(l){return Ye(l,"nextSibling")},prevAll:function(l){return Ye(l,"previousSibling")},nextUntil:function(l,d,f){return Ye(l,"nextSibling",f)},prevUntil:function(l,d,f){return Ye(l,"previousSibling",f)},siblings:function(l){return Fe((l.parentNode||{}).firstChild,l)},children:function(l){return Fe(l.firstChild)},contents:function(l){return l.contentDocument!=null&&i(l.contentDocument)?l.contentDocument:(Kt(l,"template")&&(l=l.content||l),m.merge([],l.childNodes))}},function(l,d){m.fn[l]=function(f,y){var E=m.map(this,d,f);return l.slice(-5)!=="Until"&&(y=f),y&&typeof y=="string"&&(E=m.filter(y,E)),this.length>1&&(Re[l]||m.uniqueSort(E),pe.test(l)&&E.reverse()),this.pushStack(E)}});var He=/[^\x20\t\r\n\f]+/g;function ut(l){var d={};return m.each(l.match(He)||[],function(f,y){d[y]=!0}),d}m.Callbacks=function(l){l=typeof l=="string"?ut(l):m.extend({},l);var d,f,y,E,T=[],S=[],R=-1,A=function(){for(E=E||l.once,y=d=!0;S.length;R=-1)for(f=S.shift();++R<T.length;)T[R].apply(f[0],f[1])===!1&&l.stopOnFalse&&(R=T.length,f=!1);l.memory||(f=!1),d=!1,E&&(f?T=[]:T="")},V={add:function(){return T&&(f&&!d&&(R=T.length-1,S.push(f)),function z(Z){m.each(Z,function(j,G){O(G)?(!l.unique||!V.has(G))&&T.push(G):G&&G.length&&Q(G)!=="string"&&z(G)})}(arguments),f&&!d&&A()),this},remove:function(){return m.each(arguments,function(z,Z){for(var j;(j=m.inArray(Z,T,j))>-1;)T.splice(j,1),j<=R&&R--}),this},has:function(z){return z?m.inArray(z,T)>-1:T.length>0},empty:function(){return T&&(T=[]),this},disable:function(){return E=S=[],T=f="",this},disabled:function(){return!T},lock:function(){return E=S=[],!f&&!d&&(T=f=""),this},locked:function(){return!!E},fireWith:function(z,Z){return E||(Z=Z||[],Z=[z,Z.slice?Z.slice():Z],S.push(Z),d||A()),this},fire:function(){return V.fireWith(this,arguments),this},fired:function(){return!!y}};return V};function sr(l){return l}function or(l){throw l}function Qi(l,d,f,y){var E;try{l&&O(E=l.promise)?E.call(l).done(d).fail(f):l&&O(E=l.then)?E.call(l,d,f):d.apply(void 0,[l].slice(y))}catch(T){f.apply(void 0,[T])}}m.extend({Deferred:function(l){var d=[["notify","progress",m.Callbacks("memory"),m.Callbacks("memory"),2],["resolve","done",m.Callbacks("once memory"),m.Callbacks("once memory"),0,"resolved"],["reject","fail",m.Callbacks("once memory"),m.Callbacks("once memory"),1,"rejected"]],f="pending",y={state:function(){return f},always:function(){return E.done(arguments).fail(arguments),this},catch:function(T){return y.then(null,T)},pipe:function(){var T=arguments;return m.Deferred(function(S){m.each(d,function(R,A){var V=O(T[A[4]])&&T[A[4]];E[A[1]](function(){var z=V&&V.apply(this,arguments);z&&O(z.promise)?z.promise().progress(S.notify).done(S.resolve).fail(S.reject):S[A[0]+"With"](this,V?[z]:arguments)})}),T=null}).promise()},then:function(T,S,R){var A=0;function V(z,Z,j,G){return function(){var we=this,Oe=arguments,Ee=function(){var Lt,Yn;if(!(z<A)){if(Lt=j.apply(we,Oe),Lt===Z.promise())throw new TypeError("Thenable self-resolution");Yn=Lt&&(typeof Lt=="object"||typeof Lt=="function")&&Lt.then,O(Yn)?G?Yn.call(Lt,V(A,Z,sr,G),V(A,Z,or,G)):(A++,Yn.call(Lt,V(A,Z,sr,G),V(A,Z,or,G),V(A,Z,sr,Z.notifyWith))):(j!==sr&&(we=void 0,Oe=[Lt]),(G||Z.resolveWith)(we,Oe))}},Bt=G?Ee:function(){try{Ee()}catch(Lt){m.Deferred.exceptionHook&&m.Deferred.exceptionHook(Lt,Bt.stackTrace),z+1>=A&&(j!==or&&(we=void 0,Oe=[Lt]),Z.rejectWith(we,Oe))}};z?Bt():(m.Deferred.getStackHook&&(Bt.stackTrace=m.Deferred.getStackHook()),e.setTimeout(Bt))}}return m.Deferred(function(z){d[0][3].add(V(0,z,O(R)?R:sr,z.notifyWith)),d[1][3].add(V(0,z,O(T)?T:sr)),d[2][3].add(V(0,z,O(S)?S:or))}).promise()},promise:function(T){return T!=null?m.extend(T,y):y}},E={};return m.each(d,function(T,S){var R=S[2],A=S[5];y[S[1]]=R.add,A&&R.add(function(){f=A},d[3-T][2].disable,d[3-T][3].disable,d[0][2].lock,d[0][3].lock),R.add(S[3].fire),E[S[0]]=function(){return E[S[0]+"With"](this===E?void 0:this,arguments),this},E[S[0]+"With"]=R.fireWith}),y.promise(E),l&&l.call(E,E),E},when:function(l){var d=arguments.length,f=d,y=Array(f),E=s.call(arguments),T=m.Deferred(),S=function(R){return function(A){y[R]=this,E[R]=arguments.length>1?s.call(arguments):A,--d||T.resolveWith(y,E)}};if(d<=1&&(Qi(l,T.done(S(f)).resolve,T.reject,!d),T.state()==="pending"||O(E[f]&&E[f].then)))return T.then();for(;f--;)Qi(E[f],S(f),T.reject);return T.promise()}});var rn=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;m.Deferred.exceptionHook=function(l,d){e.console&&e.console.warn&&l&&rn.test(l.name)&&e.console.warn("jQuery.Deferred exception: "+l.message,l.stack,d)},m.readyException=function(l){e.setTimeout(function(){throw l})};var Er=m.Deferred();m.fn.ready=function(l){return Er.then(l).catch(function(d){m.readyException(d)}),this},m.extend({isReady:!1,readyWait:1,ready:function(l){(l===!0?--m.readyWait:m.isReady)||(m.isReady=!0,!(l!==!0&&--m.readyWait>0)&&Er.resolveWith(N,[m]))}}),m.ready.then=Er.then;function Gn(){N.removeEventListener("DOMContentLoaded",Gn),e.removeEventListener("load",Gn),m.ready()}N.readyState==="complete"||N.readyState!=="loading"&&!N.documentElement.doScroll?e.setTimeout(m.ready):(N.addEventListener("DOMContentLoaded",Gn),e.addEventListener("load",Gn));var Tr=function(l,d,f,y,E,T,S){var R=0,A=l.length,V=f==null;if(Q(f)==="object"){E=!0;for(R in f)Tr(l,d,R,f[R],!0,T,S)}else if(y!==void 0&&(E=!0,O(y)||(S=!0),V&&(S?(d.call(l,y),d=null):(V=d,d=function(z,Z,j){return V.call(m(z),j)})),d))for(;R<A;R++)d(l[R],f,S?y:y.call(l[R],R,d(l[R],f)));return E?l:V?d.call(l):A?d(l[0],f):T},qa=/^-ms-/,Fp=/-([a-z])/g;function za(l,d){return d.toUpperCase()}function xe(l){return l.replace(qa,"ms-").replace(Fp,za)}var Wa=function(l){return l.nodeType===1||l.nodeType===9||!+l.nodeType};function Ha(){this.expando=m.expando+Ha.uid++}Ha.uid=1,Ha.prototype={cache:function(l){var d=l[this.expando];return d||(d={},Wa(l)&&(l.nodeType?l[this.expando]=d:Object.defineProperty(l,this.expando,{value:d,configurable:!0}))),d},set:function(l,d,f){var y,E=this.cache(l);if(typeof d=="string")E[xe(d)]=f;else for(y in d)E[xe(y)]=d[y];return E},get:function(l,d){return d===void 0?this.cache(l):l[this.expando]&&l[this.expando][xe(d)]},access:function(l,d,f){return d===void 0||d&&typeof d=="string"&&f===void 0?this.get(l,d):(this.set(l,d,f),f!==void 0?f:d)},remove:function(l,d){var f,y=l[this.expando];if(y!==void 0){if(d!==void 0)for(Array.isArray(d)?d=d.map(xe):(d=xe(d),d=d in y?[d]:d.match(He)||[]),f=d.length;f--;)delete y[d[f]];(d===void 0||m.isEmptyObject(y))&&(l.nodeType?l[this.expando]=void 0:delete l[this.expando])}},hasData:function(l){var d=l[this.expando];return d!==void 0&&!m.isEmptyObject(d)}};var be=new Ha,en=new Ha,yo=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,vo=/[A-Z]/g;function _u(l){return l==="true"?!0:l==="false"?!1:l==="null"?null:l===+l+""?+l:yo.test(l)?JSON.parse(l):l}function wu(l,d,f){var y;if(f===void 0&&l.nodeType===1)if(y="data-"+d.replace(vo,"-$&").toLowerCase(),f=l.getAttribute(y),typeof f=="string"){try{f=_u(f)}catch{}en.set(l,d,f)}else f=void 0;return f}m.extend({hasData:function(l){return en.hasData(l)||be.hasData(l)},data:function(l,d,f){return en.access(l,d,f)},removeData:function(l,d){en.remove(l,d)},_data:function(l,d,f){return be.access(l,d,f)},_removeData:function(l,d){be.remove(l,d)}}),m.fn.extend({data:function(l,d){var f,y,E,T=this[0],S=T&&T.attributes;if(l===void 0){if(this.length&&(E=en.get(T),T.nodeType===1&&!be.get(T,"hasDataAttrs"))){for(f=S.length;f--;)S[f]&&(y=S[f].name,y.indexOf("data-")===0&&(y=xe(y.slice(5)),wu(T,y,E[y])));be.set(T,"hasDataAttrs",!0)}return E}return typeof l=="object"?this.each(function(){en.set(this,l)}):Tr(this,function(R){var A;if(T&&R===void 0)return A=en.get(T,l),A!==void 0||(A=wu(T,l),A!==void 0)?A:void 0;this.each(function(){en.set(this,l,R)})},null,d,arguments.length>1,null,!0)},removeData:function(l){return this.each(function(){en.remove(this,l)})}}),m.extend({queue:function(l,d,f){var y;if(l)return d=(d||"fx")+"queue",y=be.get(l,d),f&&(!y||Array.isArray(f)?y=be.access(l,d,m.makeArray(f)):y.push(f)),y||[]},dequeue:function(l,d){d=d||"fx";var f=m.queue(l,d),y=f.length,E=f.shift(),T=m._queueHooks(l,d),S=function(){m.dequeue(l,d)};E==="inprogress"&&(E=f.shift(),y--),E&&(d==="fx"&&f.unshift("inprogress"),delete T.stop,E.call(l,S,T)),!y&&T&&T.empty.fire()},_queueHooks:function(l,d){var f=d+"queueHooks";return be.get(l,f)||be.access(l,f,{empty:m.Callbacks("once memory").add(function(){be.remove(l,[d+"queue",f])})})}}),m.fn.extend({queue:function(l,d){var f=2;return typeof l!="string"&&(d=l,l="fx",f--),arguments.length<f?m.queue(this[0],l):d===void 0?this:this.each(function(){var y=m.queue(this,l,d);m._queueHooks(this,l),l==="fx"&&y[0]!=="inprogress"&&m.dequeue(this,l)})},dequeue:function(l){return this.each(function(){m.dequeue(this,l)})},clearQueue:function(l){return this.queue(l||"fx",[])},promise:function(l,d){var f,y=1,E=m.Deferred(),T=this,S=this.length,R=function(){--y||E.resolveWith(T,[T])};for(typeof l!="string"&&(d=l,l=void 0),l=l||"fx";S--;)f=be.get(T[S],l+"queueHooks"),f&&f.empty&&(y++,f.empty.add(R));return R(),E.promise(d)}});var Ih=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Yi=new RegExp("^(?:([+-])=|)("+Ih+")([a-z%]*)$","i"),bi=["Top","Right","Bottom","Left"],As=N.documentElement,_o=function(l){return m.contains(l.ownerDocument,l)},wo={composed:!0};As.getRootNode&&(_o=function(l){return m.contains(l.ownerDocument,l)||l.getRootNode(wo)===l.ownerDocument});var Eo=function(l,d){return l=d||l,l.style.display==="none"||l.style.display===""&&_o(l)&&m.css(l,"display")==="none"};function Ga(l,d,f,y){var E,T,S=20,R=y?function(){return y.cur()}:function(){return m.css(l,d,"")},A=R(),V=f&&f[3]||(m.cssNumber[d]?"":"px"),z=l.nodeType&&(m.cssNumber[d]||V!=="px"&&+A)&&Yi.exec(m.css(l,d));if(z&&z[3]!==V){for(A=A/2,V=V||z[3],z=+A||1;S--;)m.style(l,d,z+V),(1-T)*(1-(T=R()/A||.5))<=0&&(S=0),z=z/T;z=z*2,m.style(l,d,z+V),f=f||[]}return f&&(z=+z||+A||0,E=f[1]?z+(f[1]+1)*f[2]:+f[2],y&&(y.unit=V,y.start=z,y.end=E)),E}var Ka={};function Sh(l){var d,f=l.ownerDocument,y=l.nodeName,E=Ka[y];return E||(d=f.body.appendChild(f.createElement(y)),E=m.css(d,"display"),d.parentNode.removeChild(d),E==="none"&&(E="block"),Ka[y]=E,E)}function To(l,d){for(var f,y,E=[],T=0,S=l.length;T<S;T++)y=l[T],y.style&&(f=y.style.display,d?(f==="none"&&(E[T]=be.get(y,"display")||null,E[T]||(y.style.display="")),y.style.display===""&&Eo(y)&&(E[T]=Sh(y))):f!=="none"&&(E[T]="none",be.set(y,"display",f)));for(T=0;T<S;T++)E[T]!=null&&(l[T].style.display=E[T]);return l}m.fn.extend({show:function(){return To(this,!0)},hide:function(){return To(this)},toggle:function(l){return typeof l=="boolean"?l?this.show():this.hide():this.each(function(){Eo(this)?m(this).show():m(this).hide()})}});var Qa=/^(?:checkbox|radio)$/i,Ds=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,dn=/^$|^module$|\/(?:java|ecma)script/i;(function(){var l=N.createDocumentFragment(),d=l.appendChild(N.createElement("div")),f=N.createElement("input");f.setAttribute("type","radio"),f.setAttribute("checked","checked"),f.setAttribute("name","t"),d.appendChild(f),k.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,d.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!d.cloneNode(!0).lastChild.defaultValue,d.innerHTML="<option></option>",k.option=!!d.lastChild})();var wt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wt.tbody=wt.tfoot=wt.colgroup=wt.caption=wt.thead,wt.th=wt.td,k.option||(wt.optgroup=wt.option=[1,"<select multiple='multiple'>","</select>"]);function gt(l,d){var f;return typeof l.getElementsByTagName<"u"?f=l.getElementsByTagName(d||"*"):typeof l.querySelectorAll<"u"?f=l.querySelectorAll(d||"*"):f=[],d===void 0||d&&Kt(l,d)?m.merge([l],f):f}function sn(l,d){for(var f=0,y=l.length;f<y;f++)be.set(l[f],"globalEval",!d||be.get(d[f],"globalEval"))}var Eu=/<|&#?\w+;/;function Ps(l,d,f,y,E){for(var T,S,R,A,V,z,Z=d.createDocumentFragment(),j=[],G=0,we=l.length;G<we;G++)if(T=l[G],T||T===0)if(Q(T)==="object")m.merge(j,T.nodeType?[T]:T);else if(!Eu.test(T))j.push(d.createTextNode(T));else{for(S=S||Z.appendChild(d.createElement("div")),R=(Ds.exec(T)||["",""])[1].toLowerCase(),A=wt[R]||wt._default,S.innerHTML=A[1]+m.htmlPrefilter(T)+A[2],z=A[0];z--;)S=S.lastChild;m.merge(j,S.childNodes),S=Z.firstChild,S.textContent=""}for(Z.textContent="",G=0;T=j[G++];){if(y&&m.inArray(T,y)>-1){E&&E.push(T);continue}if(V=_o(T),S=gt(Z.appendChild(T),"script"),V&&sn(S),f)for(z=0;T=S[z++];)dn.test(T.type||"")&&f.push(T)}return Z}var Xi=/^([^.]*)(?:\.(.+)|)/;function Br(){return!0}function Rs(){return!1}function Ch(l,d){return l===Io()==(d==="focus")}function Io(){try{return N.activeElement}catch{}}function Tu(l,d,f,y,E,T){var S,R;if(typeof d=="object"){typeof f!="string"&&(y=y||f,f=void 0);for(R in d)Tu(l,R,f,y,d[R],T);return l}if(y==null&&E==null?(E=f,y=f=void 0):E==null&&(typeof f=="string"?(E=y,y=void 0):(E=y,y=f,f=void 0)),E===!1)E=Rs;else if(!E)return l;return T===1&&(S=E,E=function(A){return m().off(A),S.apply(this,arguments)},E.guid=S.guid||(S.guid=m.guid++)),l.each(function(){m.event.add(this,d,E,y,f)})}m.event={global:{},add:function(l,d,f,y,E){var T,S,R,A,V,z,Z,j,G,we,Oe,Ee=be.get(l);if(!!Wa(l))for(f.handler&&(T=f,f=T.handler,E=T.selector),E&&m.find.matchesSelector(As,E),f.guid||(f.guid=m.guid++),(A=Ee.events)||(A=Ee.events=Object.create(null)),(S=Ee.handle)||(S=Ee.handle=function(Bt){return typeof m<"u"&&m.event.triggered!==Bt.type?m.event.dispatch.apply(l,arguments):void 0}),d=(d||"").match(He)||[""],V=d.length;V--;)R=Xi.exec(d[V])||[],G=Oe=R[1],we=(R[2]||"").split(".").sort(),G&&(Z=m.event.special[G]||{},G=(E?Z.delegateType:Z.bindType)||G,Z=m.event.special[G]||{},z=m.extend({type:G,origType:Oe,data:y,handler:f,guid:f.guid,selector:E,needsContext:E&&m.expr.match.needsContext.test(E),namespace:we.join(".")},T),(j=A[G])||(j=A[G]=[],j.delegateCount=0,(!Z.setup||Z.setup.call(l,y,we,S)===!1)&&l.addEventListener&&l.addEventListener(G,S)),Z.add&&(Z.add.call(l,z),z.handler.guid||(z.handler.guid=f.guid)),E?j.splice(j.delegateCount++,0,z):j.push(z),m.event.global[G]=!0)},remove:function(l,d,f,y,E){var T,S,R,A,V,z,Z,j,G,we,Oe,Ee=be.hasData(l)&&be.get(l);if(!(!Ee||!(A=Ee.events))){for(d=(d||"").match(He)||[""],V=d.length;V--;){if(R=Xi.exec(d[V])||[],G=Oe=R[1],we=(R[2]||"").split(".").sort(),!G){for(G in A)m.event.remove(l,G+d[V],f,y,!0);continue}for(Z=m.event.special[G]||{},G=(y?Z.delegateType:Z.bindType)||G,j=A[G]||[],R=R[2]&&new RegExp("(^|\\.)"+we.join("\\.(?:.*\\.|)")+"(\\.|$)"),S=T=j.length;T--;)z=j[T],(E||Oe===z.origType)&&(!f||f.guid===z.guid)&&(!R||R.test(z.namespace))&&(!y||y===z.selector||y==="**"&&z.selector)&&(j.splice(T,1),z.selector&&j.delegateCount--,Z.remove&&Z.remove.call(l,z));S&&!j.length&&((!Z.teardown||Z.teardown.call(l,we,Ee.handle)===!1)&&m.removeEvent(l,G,Ee.handle),delete A[G])}m.isEmptyObject(A)&&be.remove(l,"handle events")}},dispatch:function(l){var d,f,y,E,T,S,R=new Array(arguments.length),A=m.event.fix(l),V=(be.get(this,"events")||Object.create(null))[A.type]||[],z=m.event.special[A.type]||{};for(R[0]=A,d=1;d<arguments.length;d++)R[d]=arguments[d];if(A.delegateTarget=this,!(z.preDispatch&&z.preDispatch.call(this,A)===!1)){for(S=m.event.handlers.call(this,A,V),d=0;(E=S[d++])&&!A.isPropagationStopped();)for(A.currentTarget=E.elem,f=0;(T=E.handlers[f++])&&!A.isImmediatePropagationStopped();)(!A.rnamespace||T.namespace===!1||A.rnamespace.test(T.namespace))&&(A.handleObj=T,A.data=T.data,y=((m.event.special[T.origType]||{}).handle||T.handler).apply(E.elem,R),y!==void 0&&(A.result=y)===!1&&(A.preventDefault(),A.stopPropagation()));return z.postDispatch&&z.postDispatch.call(this,A),A.result}},handlers:function(l,d){var f,y,E,T,S,R=[],A=d.delegateCount,V=l.target;if(A&&V.nodeType&&!(l.type==="click"&&l.button>=1)){for(;V!==this;V=V.parentNode||this)if(V.nodeType===1&&!(l.type==="click"&&V.disabled===!0)){for(T=[],S={},f=0;f<A;f++)y=d[f],E=y.selector+" ",S[E]===void 0&&(S[E]=y.needsContext?m(E,this).index(V)>-1:m.find(E,this,null,[V]).length),S[E]&&T.push(y);T.length&&R.push({elem:V,handlers:T})}}return V=this,A<d.length&&R.push({elem:V,handlers:d.slice(A)}),R},addProp:function(l,d){Object.defineProperty(m.Event.prototype,l,{enumerable:!0,configurable:!0,get:O(d)?function(){if(this.originalEvent)return d(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[l]},set:function(f){Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:f})}})},fix:function(l){return l[m.expando]?l:new m.Event(l)},special:{load:{noBubble:!0},click:{setup:function(l){var d=this||l;return Qa.test(d.type)&&d.click&&Kt(d,"input")&&So(d,"click",Br),!1},trigger:function(l){var d=this||l;return Qa.test(d.type)&&d.click&&Kt(d,"input")&&So(d,"click"),!0},_default:function(l){var d=l.target;return Qa.test(d.type)&&d.click&&Kt(d,"input")&&be.get(d,"click")||Kt(d,"a")}},beforeunload:{postDispatch:function(l){l.result!==void 0&&l.originalEvent&&(l.originalEvent.returnValue=l.result)}}}};function So(l,d,f){if(!f){be.get(l,d)===void 0&&m.event.add(l,d,Br);return}be.set(l,d,!1),m.event.add(l,d,{namespace:!1,handler:function(y){var E,T,S=be.get(this,d);if(y.isTrigger&1&&this[d]){if(S.length)(m.event.special[d]||{}).delegateType&&y.stopPropagation();else if(S=s.call(arguments),be.set(this,d,S),E=f(this,d),this[d](),T=be.get(this,d),S!==T||E?be.set(this,d,!1):T={},S!==T)return y.stopImmediatePropagation(),y.preventDefault(),T&&T.value}else S.length&&(be.set(this,d,{value:m.event.trigger(m.extend(S[0],m.Event.prototype),S.slice(1),this)}),y.stopImmediatePropagation())}})}m.removeEvent=function(l,d,f){l.removeEventListener&&l.removeEventListener(d,f)},m.Event=function(l,d){if(!(this instanceof m.Event))return new m.Event(l,d);l&&l.type?(this.originalEvent=l,this.type=l.type,this.isDefaultPrevented=l.defaultPrevented||l.defaultPrevented===void 0&&l.returnValue===!1?Br:Rs,this.target=l.target&&l.target.nodeType===3?l.target.parentNode:l.target,this.currentTarget=l.currentTarget,this.relatedTarget=l.relatedTarget):this.type=l,d&&m.extend(this,d),this.timeStamp=l&&l.timeStamp||Date.now(),this[m.expando]=!0},m.Event.prototype={constructor:m.Event,isDefaultPrevented:Rs,isPropagationStopped:Rs,isImmediatePropagationStopped:Rs,isSimulated:!1,preventDefault:function(){var l=this.originalEvent;this.isDefaultPrevented=Br,l&&!this.isSimulated&&l.preventDefault()},stopPropagation:function(){var l=this.originalEvent;this.isPropagationStopped=Br,l&&!this.isSimulated&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.originalEvent;this.isImmediatePropagationStopped=Br,l&&!this.isSimulated&&l.stopImmediatePropagation(),this.stopPropagation()}},m.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},m.event.addProp),m.each({focus:"focusin",blur:"focusout"},function(l,d){m.event.special[l]={setup:function(){return So(this,l,Ch),!1},trigger:function(){return So(this,l),!0},_default:function(f){return be.get(f.target,l)},delegateType:d}}),m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(l,d){m.event.special[l]={delegateType:d,bindType:d,handle:function(f){var y,E=this,T=f.relatedTarget,S=f.handleObj;return(!T||T!==E&&!m.contains(E,T))&&(f.type=S.origType,y=S.handler.apply(this,arguments),f.type=d),y}}}),m.fn.extend({on:function(l,d,f,y){return Tu(this,l,d,f,y)},one:function(l,d,f,y){return Tu(this,l,d,f,y,1)},off:function(l,d,f){var y,E;if(l&&l.preventDefault&&l.handleObj)return y=l.handleObj,m(l.delegateTarget).off(y.namespace?y.origType+"."+y.namespace:y.origType,y.selector,y.handler),this;if(typeof l=="object"){for(E in l)this.off(E,d,l[E]);return this}return(d===!1||typeof d=="function")&&(f=d,d=void 0),f===!1&&(f=Rs),this.each(function(){m.event.remove(this,l,f,d)})}});var bh=/<script|<style|<link/i,$p=/checked\s*(?:[^=]|=\s*.checked.)/i,Up=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function kh(l,d){return Kt(l,"table")&&Kt(d.nodeType!==11?d:d.firstChild,"tr")&&m(l).children("tbody")[0]||l}function Vp(l){return l.type=(l.getAttribute("type")!==null)+"/"+l.type,l}function Bp(l){return(l.type||"").slice(0,5)==="true/"?l.type=l.type.slice(5):l.removeAttribute("type"),l}function xh(l,d){var f,y,E,T,S,R,A;if(d.nodeType===1){if(be.hasData(l)&&(T=be.get(l),A=T.events,A)){be.remove(d,"handle events");for(E in A)for(f=0,y=A[E].length;f<y;f++)m.event.add(d,E,A[E][f])}en.hasData(l)&&(S=en.access(l),R=m.extend({},S),en.set(d,R))}}function jp(l,d){var f=d.nodeName.toLowerCase();f==="input"&&Qa.test(l.type)?d.checked=l.checked:(f==="input"||f==="textarea")&&(d.defaultValue=l.defaultValue)}function Os(l,d,f,y){d=o(d);var E,T,S,R,A,V,z=0,Z=l.length,j=Z-1,G=d[0],we=O(G);if(we||Z>1&&typeof G=="string"&&!k.checkClone&&$p.test(G))return l.each(function(Oe){var Ee=l.eq(Oe);we&&(d[0]=G.call(this,Oe,Ee.html())),Os(Ee,d,f,y)});if(Z&&(E=Ps(d,l[0].ownerDocument,!1,l,y),T=E.firstChild,E.childNodes.length===1&&(E=T),T||y)){for(S=m.map(gt(E,"script"),Vp),R=S.length;z<Z;z++)A=E,z!==j&&(A=m.clone(A,!0,!0),R&&m.merge(S,gt(A,"script"))),f.call(l[z],A,z);if(R)for(V=S[S.length-1].ownerDocument,m.map(S,Bp),z=0;z<R;z++)A=S[z],dn.test(A.type||"")&&!be.access(A,"globalEval")&&m.contains(V,A)&&(A.src&&(A.type||"").toLowerCase()!=="module"?m._evalUrl&&!A.noModule&&m._evalUrl(A.src,{nonce:A.nonce||A.getAttribute("nonce")},V):M(A.textContent.replace(Up,""),A,V))}return l}function Nh(l,d,f){for(var y,E=d?m.filter(d,l):l,T=0;(y=E[T])!=null;T++)!f&&y.nodeType===1&&m.cleanData(gt(y)),y.parentNode&&(f&&_o(y)&&sn(gt(y,"script")),y.parentNode.removeChild(y));return l}m.extend({htmlPrefilter:function(l){return l},clone:function(l,d,f){var y,E,T,S,R=l.cloneNode(!0),A=_o(l);if(!k.noCloneChecked&&(l.nodeType===1||l.nodeType===11)&&!m.isXMLDoc(l))for(S=gt(R),T=gt(l),y=0,E=T.length;y<E;y++)jp(T[y],S[y]);if(d)if(f)for(T=T||gt(l),S=S||gt(R),y=0,E=T.length;y<E;y++)xh(T[y],S[y]);else xh(l,R);return S=gt(R,"script"),S.length>0&&sn(S,!A&&gt(l,"script")),R},cleanData:function(l){for(var d,f,y,E=m.event.special,T=0;(f=l[T])!==void 0;T++)if(Wa(f)){if(d=f[be.expando]){if(d.events)for(y in d.events)E[y]?m.event.remove(f,y):m.removeEvent(f,y,d.handle);f[be.expando]=void 0}f[en.expando]&&(f[en.expando]=void 0)}}}),m.fn.extend({detach:function(l){return Nh(this,l,!0)},remove:function(l){return Nh(this,l)},text:function(l){return Tr(this,function(d){return d===void 0?m.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=d)})},null,l,arguments.length)},append:function(){return Os(this,arguments,function(l){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var d=kh(this,l);d.appendChild(l)}})},prepend:function(){return Os(this,arguments,function(l){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var d=kh(this,l);d.insertBefore(l,d.firstChild)}})},before:function(){return Os(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this)})},after:function(){return Os(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling)})},empty:function(){for(var l,d=0;(l=this[d])!=null;d++)l.nodeType===1&&(m.cleanData(gt(l,!1)),l.textContent="");return this},clone:function(l,d){return l=l==null?!1:l,d=d==null?l:d,this.map(function(){return m.clone(this,l,d)})},html:function(l){return Tr(this,function(d){var f=this[0]||{},y=0,E=this.length;if(d===void 0&&f.nodeType===1)return f.innerHTML;if(typeof d=="string"&&!bh.test(d)&&!wt[(Ds.exec(d)||["",""])[1].toLowerCase()]){d=m.htmlPrefilter(d);try{for(;y<E;y++)f=this[y]||{},f.nodeType===1&&(m.cleanData(gt(f,!1)),f.innerHTML=d);f=0}catch{}}f&&this.empty().append(d)},null,l,arguments.length)},replaceWith:function(){var l=[];return Os(this,arguments,function(d){var f=this.parentNode;m.inArray(this,l)<0&&(m.cleanData(gt(this)),f&&f.replaceChild(d,this))},l)}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,d){m.fn[l]=function(f){for(var y,E=[],T=m(f),S=T.length-1,R=0;R<=S;R++)y=R===S?this:this.clone(!0),m(T[R])[d](y),a.apply(E,y.get());return this.pushStack(E)}});var Iu=new RegExp("^("+Ih+")(?!px)[a-z%]+$","i"),Ir=/^--/,An=function(l){var d=l.ownerDocument.defaultView;return(!d||!d.opener)&&(d=e),d.getComputedStyle(l)},Ji=function(l,d,f){var y,E,T={};for(E in d)T[E]=l.style[E],l.style[E]=d[E];y=f.call(l);for(E in d)l.style[E]=T[E];return y},Sr=new RegExp(bi.join("|"),"i"),Su="[\\x20\\t\\r\\n\\f]",Ah=new RegExp("^"+Su+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Su+"+$","g");(function(){function l(){if(!!V){A.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",V.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",As.appendChild(A).appendChild(V);var z=e.getComputedStyle(V);f=z.top!=="1%",R=d(z.marginLeft)===12,V.style.right="60%",T=d(z.right)===36,y=d(z.width)===36,V.style.position="absolute",E=d(V.offsetWidth/3)===12,As.removeChild(A),V=null}}function d(z){return Math.round(parseFloat(z))}var f,y,E,T,S,R,A=N.createElement("div"),V=N.createElement("div");!V.style||(V.style.backgroundClip="content-box",V.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle=V.style.backgroundClip==="content-box",m.extend(k,{boxSizingReliable:function(){return l(),y},pixelBoxStyles:function(){return l(),T},pixelPosition:function(){return l(),f},reliableMarginLeft:function(){return l(),R},scrollboxSize:function(){return l(),E},reliableTrDimensions:function(){var z,Z,j,G;return S==null&&(z=N.createElement("table"),Z=N.createElement("tr"),j=N.createElement("div"),z.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Z.style.cssText="border:1px solid",Z.style.height="1px",j.style.height="9px",j.style.display="block",As.appendChild(z).appendChild(Z).appendChild(j),G=e.getComputedStyle(Z),S=parseInt(G.height,10)+parseInt(G.borderTopWidth,10)+parseInt(G.borderBottomWidth,10)===Z.offsetHeight,As.removeChild(z)),S}}))})();function Kn(l,d,f){var y,E,T,S,R=Ir.test(d),A=l.style;return f=f||An(l),f&&(S=f.getPropertyValue(d)||f[d],R&&S&&(S=S.replace(Ah,"$1")||void 0),S===""&&!_o(l)&&(S=m.style(l,d)),!k.pixelBoxStyles()&&Iu.test(S)&&Sr.test(d)&&(y=A.width,E=A.minWidth,T=A.maxWidth,A.minWidth=A.maxWidth=A.width=S,S=f.width,A.width=y,A.minWidth=E,A.maxWidth=T)),S!==void 0?S+"":S}function Zi(l,d){return{get:function(){if(l()){delete this.get;return}return(this.get=d).apply(this,arguments)}}}var Ya=["Webkit","Moz","ms"],Ls=N.createElement("div").style,Cu={};function qp(l){for(var d=l[0].toUpperCase()+l.slice(1),f=Ya.length;f--;)if(l=Ya[f]+d,l in Ls)return l}function es(l){var d=m.cssProps[l]||Cu[l];return d||(l in Ls?l:Cu[l]=qp(l)||l)}var Dh=/^(none|table(?!-c[ea]).+)/,zp={position:"absolute",visibility:"hidden",display:"block"},ii={letterSpacing:"0",fontWeight:"400"};function Wp(l,d,f){var y=Yi.exec(d);return y?Math.max(0,y[2]-(f||0))+(y[3]||"px"):d}function si(l,d,f,y,E,T){var S=d==="width"?1:0,R=0,A=0;if(f===(y?"border":"content"))return 0;for(;S<4;S+=2)f==="margin"&&(A+=m.css(l,f+bi[S],!0,E)),y?(f==="content"&&(A-=m.css(l,"padding"+bi[S],!0,E)),f!=="margin"&&(A-=m.css(l,"border"+bi[S]+"Width",!0,E))):(A+=m.css(l,"padding"+bi[S],!0,E),f!=="padding"?A+=m.css(l,"border"+bi[S]+"Width",!0,E):R+=m.css(l,"border"+bi[S]+"Width",!0,E));return!y&&T>=0&&(A+=Math.max(0,Math.ceil(l["offset"+d[0].toUpperCase()+d.slice(1)]-T-A-R-.5))||0),A}function Xa(l,d,f){var y=An(l),E=!k.boxSizingReliable()||f,T=E&&m.css(l,"boxSizing",!1,y)==="border-box",S=T,R=Kn(l,d,y),A="offset"+d[0].toUpperCase()+d.slice(1);if(Iu.test(R)){if(!f)return R;R="auto"}return(!k.boxSizingReliable()&&T||!k.reliableTrDimensions()&&Kt(l,"tr")||R==="auto"||!parseFloat(R)&&m.css(l,"display",!1,y)==="inline")&&l.getClientRects().length&&(T=m.css(l,"boxSizing",!1,y)==="border-box",S=A in l,S&&(R=l[A])),R=parseFloat(R)||0,R+si(l,d,f||(T?"border":"content"),S,y,R)+"px"}m.extend({cssHooks:{opacity:{get:function(l,d){if(d){var f=Kn(l,"opacity");return f===""?"1":f}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(l,d,f,y){if(!(!l||l.nodeType===3||l.nodeType===8||!l.style)){var E,T,S,R=xe(d),A=Ir.test(d),V=l.style;if(A||(d=es(R)),S=m.cssHooks[d]||m.cssHooks[R],f!==void 0){if(T=typeof f,T==="string"&&(E=Yi.exec(f))&&E[1]&&(f=Ga(l,d,E),T="number"),f==null||f!==f)return;T==="number"&&!A&&(f+=E&&E[3]||(m.cssNumber[R]?"":"px")),!k.clearCloneStyle&&f===""&&d.indexOf("background")===0&&(V[d]="inherit"),(!S||!("set"in S)||(f=S.set(l,f,y))!==void 0)&&(A?V.setProperty(d,f):V[d]=f)}else return S&&"get"in S&&(E=S.get(l,!1,y))!==void 0?E:V[d]}},css:function(l,d,f,y){var E,T,S,R=xe(d),A=Ir.test(d);return A||(d=es(R)),S=m.cssHooks[d]||m.cssHooks[R],S&&"get"in S&&(E=S.get(l,!0,f)),E===void 0&&(E=Kn(l,d,y)),E==="normal"&&d in ii&&(E=ii[d]),f===""||f?(T=parseFloat(E),f===!0||isFinite(T)?T||0:E):E}}),m.each(["height","width"],function(l,d){m.cssHooks[d]={get:function(f,y,E){if(y)return Dh.test(m.css(f,"display"))&&(!f.getClientRects().length||!f.getBoundingClientRect().width)?Ji(f,zp,function(){return Xa(f,d,E)}):Xa(f,d,E)},set:function(f,y,E){var T,S=An(f),R=!k.scrollboxSize()&&S.position==="absolute",A=R||E,V=A&&m.css(f,"boxSizing",!1,S)==="border-box",z=E?si(f,d,E,V,S):0;return V&&R&&(z-=Math.ceil(f["offset"+d[0].toUpperCase()+d.slice(1)]-parseFloat(S[d])-si(f,d,"border",!1,S)-.5)),z&&(T=Yi.exec(y))&&(T[3]||"px")!=="px"&&(f.style[d]=y,y=m.css(f,d)),Wp(f,y,z)}}}),m.cssHooks.marginLeft=Zi(k.reliableMarginLeft,function(l,d){if(d)return(parseFloat(Kn(l,"marginLeft"))||l.getBoundingClientRect().left-Ji(l,{marginLeft:0},function(){return l.getBoundingClientRect().left}))+"px"}),m.each({margin:"",padding:"",border:"Width"},function(l,d){m.cssHooks[l+d]={expand:function(f){for(var y=0,E={},T=typeof f=="string"?f.split(" "):[f];y<4;y++)E[l+bi[y]+d]=T[y]||T[y-2]||T[0];return E}},l!=="margin"&&(m.cssHooks[l+d].set=Wp)}),m.fn.extend({css:function(l,d){return Tr(this,function(f,y,E){var T,S,R={},A=0;if(Array.isArray(y)){for(T=An(f),S=y.length;A<S;A++)R[y[A]]=m.css(f,y[A],!1,T);return R}return E!==void 0?m.style(f,y,E):m.css(f,y)},l,d,arguments.length>1)}});function Dn(l,d,f,y,E){return new Dn.prototype.init(l,d,f,y,E)}m.Tween=Dn,Dn.prototype={constructor:Dn,init:function(l,d,f,y,E,T){this.elem=l,this.prop=f,this.easing=E||m.easing._default,this.options=d,this.start=this.now=this.cur(),this.end=y,this.unit=T||(m.cssNumber[f]?"":"px")},cur:function(){var l=Dn.propHooks[this.prop];return l&&l.get?l.get(this):Dn.propHooks._default.get(this)},run:function(l){var d,f=Dn.propHooks[this.prop];return this.options.duration?this.pos=d=m.easing[this.easing](l,this.options.duration*l,0,1,this.options.duration):this.pos=d=l,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),f&&f.set?f.set(this):Dn.propHooks._default.set(this),this}},Dn.prototype.init.prototype=Dn.prototype,Dn.propHooks={_default:{get:function(l){var d;return l.elem.nodeType!==1||l.elem[l.prop]!=null&&l.elem.style[l.prop]==null?l.elem[l.prop]:(d=m.css(l.elem,l.prop,""),!d||d==="auto"?0:d)},set:function(l){m.fx.step[l.prop]?m.fx.step[l.prop](l):l.elem.nodeType===1&&(m.cssHooks[l.prop]||l.elem.style[es(l.prop)]!=null)?m.style(l.elem,l.prop,l.now+l.unit):l.elem[l.prop]=l.now}}},Dn.propHooks.scrollTop=Dn.propHooks.scrollLeft={set:function(l){l.elem.nodeType&&l.elem.parentNode&&(l.elem[l.prop]=l.now)}},m.easing={linear:function(l){return l},swing:function(l){return .5-Math.cos(l*Math.PI)/2},_default:"swing"},m.fx=Dn.prototype.init,m.fx.step={};var oi,Co,Ja=/^(?:toggle|show|hide)$/,Hp=/queueHooks$/;function bu(){Co&&(N.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(bu):e.setTimeout(bu,m.fx.interval),m.fx.tick())}function Ph(){return e.setTimeout(function(){oi=void 0}),oi=Date.now()}function ki(l,d){var f,y=0,E={height:l};for(d=d?1:0;y<4;y+=2-d)f=bi[y],E["margin"+f]=E["padding"+f]=l;return d&&(E.opacity=E.width=l),E}function Gp(l,d,f){for(var y,E=(Qn.tweeners[d]||[]).concat(Qn.tweeners["*"]),T=0,S=E.length;T<S;T++)if(y=E[T].call(f,d,l))return y}function Kp(l,d,f){var y,E,T,S,R,A,V,z,Z="width"in d||"height"in d,j=this,G={},we=l.style,Oe=l.nodeType&&Eo(l),Ee=be.get(l,"fxshow");f.queue||(S=m._queueHooks(l,"fx"),S.unqueued==null&&(S.unqueued=0,R=S.empty.fire,S.empty.fire=function(){S.unqueued||R()}),S.unqueued++,j.always(function(){j.always(function(){S.unqueued--,m.queue(l,"fx").length||S.empty.fire()})}));for(y in d)if(E=d[y],Ja.test(E)){if(delete d[y],T=T||E==="toggle",E===(Oe?"hide":"show"))if(E==="show"&&Ee&&Ee[y]!==void 0)Oe=!0;else continue;G[y]=Ee&&Ee[y]||m.style(l,y)}if(A=!m.isEmptyObject(d),!(!A&&m.isEmptyObject(G))){Z&&l.nodeType===1&&(f.overflow=[we.overflow,we.overflowX,we.overflowY],V=Ee&&Ee.display,V==null&&(V=be.get(l,"display")),z=m.css(l,"display"),z==="none"&&(V?z=V:(To([l],!0),V=l.style.display||V,z=m.css(l,"display"),To([l]))),(z==="inline"||z==="inline-block"&&V!=null)&&m.css(l,"float")==="none"&&(A||(j.done(function(){we.display=V}),V==null&&(z=we.display,V=z==="none"?"":z)),we.display="inline-block")),f.overflow&&(we.overflow="hidden",j.always(function(){we.overflow=f.overflow[0],we.overflowX=f.overflow[1],we.overflowY=f.overflow[2]})),A=!1;for(y in G)A||(Ee?"hidden"in Ee&&(Oe=Ee.hidden):Ee=be.access(l,"fxshow",{display:V}),T&&(Ee.hidden=!Oe),Oe&&To([l],!0),j.done(function(){Oe||To([l]),be.remove(l,"fxshow");for(y in G)m.style(l,y,G[y])})),A=Gp(Oe?Ee[y]:0,y,j),y in Ee||(Ee[y]=A.start,Oe&&(A.end=A.start,A.start=0))}}function Rh(l,d){var f,y,E,T,S;for(f in l)if(y=xe(f),E=d[y],T=l[f],Array.isArray(T)&&(E=T[1],T=l[f]=T[0]),f!==y&&(l[y]=T,delete l[f]),S=m.cssHooks[y],S&&"expand"in S){T=S.expand(T),delete l[y];for(f in T)f in l||(l[f]=T[f],d[f]=E)}else d[y]=E}function Qn(l,d,f){var y,E,T=0,S=Qn.prefilters.length,R=m.Deferred().always(function(){delete A.elem}),A=function(){if(E)return!1;for(var Z=oi||Ph(),j=Math.max(0,V.startTime+V.duration-Z),G=j/V.duration||0,we=1-G,Oe=0,Ee=V.tweens.length;Oe<Ee;Oe++)V.tweens[Oe].run(we);return R.notifyWith(l,[V,we,j]),we<1&&Ee?j:(Ee||R.notifyWith(l,[V,1,0]),R.resolveWith(l,[V]),!1)},V=R.promise({elem:l,props:m.extend({},d),opts:m.extend(!0,{specialEasing:{},easing:m.easing._default},f),originalProperties:d,originalOptions:f,startTime:oi||Ph(),duration:f.duration,tweens:[],createTween:function(Z,j){var G=m.Tween(l,V.opts,Z,j,V.opts.specialEasing[Z]||V.opts.easing);return V.tweens.push(G),G},stop:function(Z){var j=0,G=Z?V.tweens.length:0;if(E)return this;for(E=!0;j<G;j++)V.tweens[j].run(1);return Z?(R.notifyWith(l,[V,1,0]),R.resolveWith(l,[V,Z])):R.rejectWith(l,[V,Z]),this}}),z=V.props;for(Rh(z,V.opts.specialEasing);T<S;T++)if(y=Qn.prefilters[T].call(V,l,z,V.opts),y)return O(y.stop)&&(m._queueHooks(V.elem,V.opts.queue).stop=y.stop.bind(y)),y;return m.map(z,Gp,V),O(V.opts.start)&&V.opts.start.call(l,V),V.progress(V.opts.progress).done(V.opts.done,V.opts.complete).fail(V.opts.fail).always(V.opts.always),m.fx.timer(m.extend(A,{elem:l,anim:V,queue:V.opts.queue})),V}m.Animation=m.extend(Qn,{tweeners:{"*":[function(l,d){var f=this.createTween(l,d);return Ga(f.elem,l,Yi.exec(d),f),f}]},tweener:function(l,d){O(l)?(d=l,l=["*"]):l=l.match(He);for(var f,y=0,E=l.length;y<E;y++)f=l[y],Qn.tweeners[f]=Qn.tweeners[f]||[],Qn.tweeners[f].unshift(d)},prefilters:[Kp],prefilter:function(l,d){d?Qn.prefilters.unshift(l):Qn.prefilters.push(l)}}),m.speed=function(l,d,f){var y=l&&typeof l=="object"?m.extend({},l):{complete:f||!f&&d||O(l)&&l,duration:l,easing:f&&d||d&&!O(d)&&d};return m.fx.off?y.duration=0:typeof y.duration!="number"&&(y.duration in m.fx.speeds?y.duration=m.fx.speeds[y.duration]:y.duration=m.fx.speeds._default),(y.queue==null||y.queue===!0)&&(y.queue="fx"),y.old=y.complete,y.complete=function(){O(y.old)&&y.old.call(this),y.queue&&m.dequeue(this,y.queue)},y},m.fn.extend({fadeTo:function(l,d,f,y){return this.filter(Eo).css("opacity",0).show().end().animate({opacity:d},l,f,y)},animate:function(l,d,f,y){var E=m.isEmptyObject(l),T=m.speed(d,f,y),S=function(){var R=Qn(this,m.extend({},l),T);(E||be.get(this,"finish"))&&R.stop(!0)};return S.finish=S,E||T.queue===!1?this.each(S):this.queue(T.queue,S)},stop:function(l,d,f){var y=function(E){var T=E.stop;delete E.stop,T(f)};return typeof l!="string"&&(f=d,d=l,l=void 0),d&&this.queue(l||"fx",[]),this.each(function(){var E=!0,T=l!=null&&l+"queueHooks",S=m.timers,R=be.get(this);if(T)R[T]&&R[T].stop&&y(R[T]);else for(T in R)R[T]&&R[T].stop&&Hp.test(T)&&y(R[T]);for(T=S.length;T--;)S[T].elem===this&&(l==null||S[T].queue===l)&&(S[T].anim.stop(f),E=!1,S.splice(T,1));(E||!f)&&m.dequeue(this,l)})},finish:function(l){return l!==!1&&(l=l||"fx"),this.each(function(){var d,f=be.get(this),y=f[l+"queue"],E=f[l+"queueHooks"],T=m.timers,S=y?y.length:0;for(f.finish=!0,m.queue(this,l,[]),E&&E.stop&&E.stop.call(this,!0),d=T.length;d--;)T[d].elem===this&&T[d].queue===l&&(T[d].anim.stop(!0),T.splice(d,1));for(d=0;d<S;d++)y[d]&&y[d].finish&&y[d].finish.call(this);delete f.finish})}}),m.each(["toggle","show","hide"],function(l,d){var f=m.fn[d];m.fn[d]=function(y,E,T){return y==null||typeof y=="boolean"?f.apply(this,arguments):this.animate(ki(d,!0),y,E,T)}}),m.each({slideDown:ki("show"),slideUp:ki("hide"),slideToggle:ki("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(l,d){m.fn[l]=function(f,y,E){return this.animate(d,f,y,E)}}),m.timers=[],m.fx.tick=function(){var l,d=0,f=m.timers;for(oi=Date.now();d<f.length;d++)l=f[d],!l()&&f[d]===l&&f.splice(d--,1);f.length||m.fx.stop(),oi=void 0},m.fx.timer=function(l){m.timers.push(l),m.fx.start()},m.fx.interval=13,m.fx.start=function(){Co||(Co=!0,bu())},m.fx.stop=function(){Co=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(l,d){return l=m.fx&&m.fx.speeds[l]||l,d=d||"fx",this.queue(d,function(f,y){var E=e.setTimeout(f,l);y.stop=function(){e.clearTimeout(E)}})},function(){var l=N.createElement("input"),d=N.createElement("select"),f=d.appendChild(N.createElement("option"));l.type="checkbox",k.checkOn=l.value!=="",k.optSelected=f.selected,l=N.createElement("input"),l.value="t",l.type="radio",k.radioValue=l.value==="t"}();var ku,Za=m.expr.attrHandle;m.fn.extend({attr:function(l,d){return Tr(this,m.attr,l,d,arguments.length>1)},removeAttr:function(l){return this.each(function(){m.removeAttr(this,l)})}}),m.extend({attr:function(l,d,f){var y,E,T=l.nodeType;if(!(T===3||T===8||T===2)){if(typeof l.getAttribute>"u")return m.prop(l,d,f);if((T!==1||!m.isXMLDoc(l))&&(E=m.attrHooks[d.toLowerCase()]||(m.expr.match.bool.test(d)?ku:void 0)),f!==void 0){if(f===null){m.removeAttr(l,d);return}return E&&"set"in E&&(y=E.set(l,f,d))!==void 0?y:(l.setAttribute(d,f+""),f)}return E&&"get"in E&&(y=E.get(l,d))!==null?y:(y=m.find.attr(l,d),y==null?void 0:y)}},attrHooks:{type:{set:function(l,d){if(!k.radioValue&&d==="radio"&&Kt(l,"input")){var f=l.value;return l.setAttribute("type",d),f&&(l.value=f),d}}}},removeAttr:function(l,d){var f,y=0,E=d&&d.match(He);if(E&&l.nodeType===1)for(;f=E[y++];)l.removeAttribute(f)}}),ku={set:function(l,d,f){return d===!1?m.removeAttr(l,f):l.setAttribute(f,f),f}},m.each(m.expr.match.bool.source.match(/\w+/g),function(l,d){var f=Za[d]||m.find.attr;Za[d]=function(y,E,T){var S,R,A=E.toLowerCase();return T||(R=Za[A],Za[A]=S,S=f(y,E,T)!=null?A:null,Za[A]=R),S}});var xu=/^(?:input|select|textarea|button)$/i,m_=/^(?:a|area)$/i;m.fn.extend({prop:function(l,d){return Tr(this,m.prop,l,d,arguments.length>1)},removeProp:function(l){return this.each(function(){delete this[m.propFix[l]||l]})}}),m.extend({prop:function(l,d,f){var y,E,T=l.nodeType;if(!(T===3||T===8||T===2))return(T!==1||!m.isXMLDoc(l))&&(d=m.propFix[d]||d,E=m.propHooks[d]),f!==void 0?E&&"set"in E&&(y=E.set(l,f,d))!==void 0?y:l[d]=f:E&&"get"in E&&(y=E.get(l,d))!==null?y:l[d]},propHooks:{tabIndex:{get:function(l){var d=m.find.attr(l,"tabindex");return d?parseInt(d,10):xu.test(l.nodeName)||m_.test(l.nodeName)&&l.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),k.optSelected||(m.propHooks.selected={get:function(l){var d=l.parentNode;return d&&d.parentNode&&d.parentNode.selectedIndex,null},set:function(l){var d=l.parentNode;d&&(d.selectedIndex,d.parentNode&&d.parentNode.selectedIndex)}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this});function ts(l){var d=l.match(He)||[];return d.join(" ")}function xi(l){return l.getAttribute&&l.getAttribute("class")||""}function el(l){return Array.isArray(l)?l:typeof l=="string"?l.match(He)||[]:[]}m.fn.extend({addClass:function(l){var d,f,y,E,T,S;return O(l)?this.each(function(R){m(this).addClass(l.call(this,R,xi(this)))}):(d=el(l),d.length?this.each(function(){if(y=xi(this),f=this.nodeType===1&&" "+ts(y)+" ",f){for(T=0;T<d.length;T++)E=d[T],f.indexOf(" "+E+" ")<0&&(f+=E+" ");S=ts(f),y!==S&&this.setAttribute("class",S)}}):this)},removeClass:function(l){var d,f,y,E,T,S;return O(l)?this.each(function(R){m(this).removeClass(l.call(this,R,xi(this)))}):arguments.length?(d=el(l),d.length?this.each(function(){if(y=xi(this),f=this.nodeType===1&&" "+ts(y)+" ",f){for(T=0;T<d.length;T++)for(E=d[T];f.indexOf(" "+E+" ")>-1;)f=f.replace(" "+E+" "," ");S=ts(f),y!==S&&this.setAttribute("class",S)}}):this):this.attr("class","")},toggleClass:function(l,d){var f,y,E,T,S=typeof l,R=S==="string"||Array.isArray(l);return O(l)?this.each(function(A){m(this).toggleClass(l.call(this,A,xi(this),d),d)}):typeof d=="boolean"&&R?d?this.addClass(l):this.removeClass(l):(f=el(l),this.each(function(){if(R)for(T=m(this),E=0;E<f.length;E++)y=f[E],T.hasClass(y)?T.removeClass(y):T.addClass(y);else(l===void 0||S==="boolean")&&(y=xi(this),y&&be.set(this,"__className__",y),this.setAttribute&&this.setAttribute("class",y||l===!1?"":be.get(this,"__className__")||""))}))},hasClass:function(l){var d,f,y=0;for(d=" "+l+" ";f=this[y++];)if(f.nodeType===1&&(" "+ts(xi(f))+" ").indexOf(d)>-1)return!0;return!1}});var Oh=/\r/g;m.fn.extend({val:function(l){var d,f,y,E=this[0];return arguments.length?(y=O(l),this.each(function(T){var S;this.nodeType===1&&(y?S=l.call(this,T,m(this).val()):S=l,S==null?S="":typeof S=="number"?S+="":Array.isArray(S)&&(S=m.map(S,function(R){return R==null?"":R+""})),d=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],(!d||!("set"in d)||d.set(this,S,"value")===void 0)&&(this.value=S))})):E?(d=m.valHooks[E.type]||m.valHooks[E.nodeName.toLowerCase()],d&&"get"in d&&(f=d.get(E,"value"))!==void 0?f:(f=E.value,typeof f=="string"?f.replace(Oh,""):f==null?"":f)):void 0}}),m.extend({valHooks:{option:{get:function(l){var d=m.find.attr(l,"value");return d!=null?d:ts(m.text(l))}},select:{get:function(l){var d,f,y,E=l.options,T=l.selectedIndex,S=l.type==="select-one",R=S?null:[],A=S?T+1:E.length;for(T<0?y=A:y=S?T:0;y<A;y++)if(f=E[y],(f.selected||y===T)&&!f.disabled&&(!f.parentNode.disabled||!Kt(f.parentNode,"optgroup"))){if(d=m(f).val(),S)return d;R.push(d)}return R},set:function(l,d){for(var f,y,E=l.options,T=m.makeArray(d),S=E.length;S--;)y=E[S],(y.selected=m.inArray(m.valHooks.option.get(y),T)>-1)&&(f=!0);return f||(l.selectedIndex=-1),T}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(l,d){if(Array.isArray(d))return l.checked=m.inArray(m(l).val(),d)>-1}},k.checkOn||(m.valHooks[this].get=function(l){return l.getAttribute("value")===null?"on":l.value})}),k.focusin="onfocusin"in e;var Lh=/^(?:focusinfocus|focusoutblur)$/,bo=function(l){l.stopPropagation()};m.extend(m.event,{trigger:function(l,d,f,y){var E,T,S,R,A,V,z,Z,j=[f||N],G=v.call(l,"type")?l.type:l,we=v.call(l,"namespace")?l.namespace.split("."):[];if(T=Z=S=f=f||N,!(f.nodeType===3||f.nodeType===8)&&!Lh.test(G+m.event.triggered)&&(G.indexOf(".")>-1&&(we=G.split("."),G=we.shift(),we.sort()),A=G.indexOf(":")<0&&"on"+G,l=l[m.expando]?l:new m.Event(G,typeof l=="object"&&l),l.isTrigger=y?2:3,l.namespace=we.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+we.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=f),d=d==null?[l]:m.makeArray(d,[l]),z=m.event.special[G]||{},!(!y&&z.trigger&&z.trigger.apply(f,d)===!1))){if(!y&&!z.noBubble&&!J(f)){for(R=z.delegateType||G,Lh.test(R+G)||(T=T.parentNode);T;T=T.parentNode)j.push(T),S=T;S===(f.ownerDocument||N)&&j.push(S.defaultView||S.parentWindow||e)}for(E=0;(T=j[E++])&&!l.isPropagationStopped();)Z=T,l.type=E>1?R:z.bindType||G,V=(be.get(T,"events")||Object.create(null))[l.type]&&be.get(T,"handle"),V&&V.apply(T,d),V=A&&T[A],V&&V.apply&&Wa(T)&&(l.result=V.apply(T,d),l.result===!1&&l.preventDefault());return l.type=G,!y&&!l.isDefaultPrevented()&&(!z._default||z._default.apply(j.pop(),d)===!1)&&Wa(f)&&A&&O(f[G])&&!J(f)&&(S=f[A],S&&(f[A]=null),m.event.triggered=G,l.isPropagationStopped()&&Z.addEventListener(G,bo),f[G](),l.isPropagationStopped()&&Z.removeEventListener(G,bo),m.event.triggered=void 0,S&&(f[A]=S)),l.result}},simulate:function(l,d,f){var y=m.extend(new m.Event,f,{type:l,isSimulated:!0});m.event.trigger(y,null,d)}}),m.fn.extend({trigger:function(l,d){return this.each(function(){m.event.trigger(l,d,this)})},triggerHandler:function(l,d){var f=this[0];if(f)return m.event.trigger(l,d,f,!0)}}),k.focusin||m.each({focus:"focusin",blur:"focusout"},function(l,d){var f=function(y){m.event.simulate(d,y.target,m.event.fix(y))};m.event.special[d]={setup:function(){var y=this.ownerDocument||this.document||this,E=be.access(y,d);E||y.addEventListener(l,f,!0),be.access(y,d,(E||0)+1)},teardown:function(){var y=this.ownerDocument||this.document||this,E=be.access(y,d)-1;E?be.access(y,d,E):(y.removeEventListener(l,f,!0),be.remove(y,d))}}});var Ms=e.location,Mh={guid:Date.now()},Nu=/\?/;m.parseXML=function(l){var d,f;if(!l||typeof l!="string")return null;try{d=new e.DOMParser().parseFromString(l,"text/xml")}catch{}return f=d&&d.getElementsByTagName("parsererror")[0],(!d||f)&&m.error("Invalid XML: "+(f?m.map(f.childNodes,function(y){return y.textContent}).join(`
`):l)),d};var ko=/\[\]$/,Qp=/\r?\n/g,Yp=/^(?:submit|button|image|reset|file)$/i,Xp=/^(?:input|select|textarea|keygen)/i;function Au(l,d,f,y){var E;if(Array.isArray(d))m.each(d,function(T,S){f||ko.test(l)?y(l,S):Au(l+"["+(typeof S=="object"&&S!=null?T:"")+"]",S,f,y)});else if(!f&&Q(d)==="object")for(E in d)Au(l+"["+E+"]",d[E],f,y);else y(l,d)}m.param=function(l,d){var f,y=[],E=function(T,S){var R=O(S)?S():S;y[y.length]=encodeURIComponent(T)+"="+encodeURIComponent(R==null?"":R)};if(l==null)return"";if(Array.isArray(l)||l.jquery&&!m.isPlainObject(l))m.each(l,function(){E(this.name,this.value)});else for(f in l)Au(f,l[f],d,E);return y.join("&")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var l=m.prop(this,"elements");return l?m.makeArray(l):this}).filter(function(){var l=this.type;return this.name&&!m(this).is(":disabled")&&Xp.test(this.nodeName)&&!Yp.test(l)&&(this.checked||!Qa.test(l))}).map(function(l,d){var f=m(this).val();return f==null?null:Array.isArray(f)?m.map(f,function(y){return{name:d.name,value:y.replace(Qp,`\r
`)}}):{name:d.name,value:f.replace(Qp,`\r
`)}}).get()}});var Jp=/%20/g,Zp=/#.*$/,Fh=/([?&])_=[^&]*/,eg=/^(.*?):[ \t]*([^\r\n]*)$/mg,y_=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,v_=/^(?:GET|HEAD)$/,tg=/^\/\//,$h={},xo={},ng="*/".concat("*"),Uh=N.createElement("a");Uh.href=Ms.href;function Du(l){return function(d,f){typeof d!="string"&&(f=d,d="*");var y,E=0,T=d.toLowerCase().match(He)||[];if(O(f))for(;y=T[E++];)y[0]==="+"?(y=y.slice(1)||"*",(l[y]=l[y]||[]).unshift(f)):(l[y]=l[y]||[]).push(f)}}function Vh(l,d,f,y){var E={},T=l===xo;function S(R){var A;return E[R]=!0,m.each(l[R]||[],function(V,z){var Z=z(d,f,y);if(typeof Z=="string"&&!T&&!E[Z])return d.dataTypes.unshift(Z),S(Z),!1;if(T)return!(A=Z)}),A}return S(d.dataTypes[0])||!E["*"]&&S("*")}function Pu(l,d){var f,y,E=m.ajaxSettings.flatOptions||{};for(f in d)d[f]!==void 0&&((E[f]?l:y||(y={}))[f]=d[f]);return y&&m.extend(!0,l,y),l}function __(l,d,f){for(var y,E,T,S,R=l.contents,A=l.dataTypes;A[0]==="*";)A.shift(),y===void 0&&(y=l.mimeType||d.getResponseHeader("Content-Type"));if(y){for(E in R)if(R[E]&&R[E].test(y)){A.unshift(E);break}}if(A[0]in f)T=A[0];else{for(E in f){if(!A[0]||l.converters[E+" "+A[0]]){T=E;break}S||(S=E)}T=T||S}if(T)return T!==A[0]&&A.unshift(T),f[T]}function rg(l,d,f,y){var E,T,S,R,A,V={},z=l.dataTypes.slice();if(z[1])for(S in l.converters)V[S.toLowerCase()]=l.converters[S];for(T=z.shift();T;)if(l.responseFields[T]&&(f[l.responseFields[T]]=d),!A&&y&&l.dataFilter&&(d=l.dataFilter(d,l.dataType)),A=T,T=z.shift(),T){if(T==="*")T=A;else if(A!=="*"&&A!==T){if(S=V[A+" "+T]||V["* "+T],!S){for(E in V)if(R=E.split(" "),R[1]===T&&(S=V[A+" "+R[0]]||V["* "+R[0]],S)){S===!0?S=V[E]:V[E]!==!0&&(T=R[0],z.unshift(R[1]));break}}if(S!==!0)if(S&&l.throws)d=S(d);else try{d=S(d)}catch(Z){return{state:"parsererror",error:S?Z:"No conversion from "+A+" to "+T}}}}return{state:"success",data:d}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ms.href,type:"GET",isLocal:y_.test(Ms.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ng,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(l,d){return d?Pu(Pu(l,m.ajaxSettings),d):Pu(m.ajaxSettings,l)},ajaxPrefilter:Du($h),ajaxTransport:Du(xo),ajax:function(l,d){typeof l=="object"&&(d=l,l=void 0),d=d||{};var f,y,E,T,S,R,A,V,z,Z,j=m.ajaxSetup({},d),G=j.context||j,we=j.context&&(G.nodeType||G.jquery)?m(G):m.event,Oe=m.Deferred(),Ee=m.Callbacks("once memory"),Bt=j.statusCode||{},Lt={},Yn={},at="canceled",Pe={readyState:0,getResponseHeader:function(Ge){var Et;if(A){if(!T)for(T={};Et=eg.exec(E);)T[Et[1].toLowerCase()+" "]=(T[Et[1].toLowerCase()+" "]||[]).concat(Et[2]);Et=T[Ge.toLowerCase()+" "]}return Et==null?null:Et.join(", ")},getAllResponseHeaders:function(){return A?E:null},setRequestHeader:function(Ge,Et){return A==null&&(Ge=Yn[Ge.toLowerCase()]=Yn[Ge.toLowerCase()]||Ge,Lt[Ge]=Et),this},overrideMimeType:function(Ge){return A==null&&(j.mimeType=Ge),this},statusCode:function(Ge){var Et;if(Ge)if(A)Pe.always(Ge[Pe.status]);else for(Et in Ge)Bt[Et]=[Bt[Et],Ge[Et]];return this},abort:function(Ge){var Et=Ge||at;return f&&f.abort(Et),Pn(0,Et),this}};if(Oe.promise(Pe),j.url=((l||j.url||Ms.href)+"").replace(tg,Ms.protocol+"//"),j.type=d.method||d.type||j.method||j.type,j.dataTypes=(j.dataType||"*").toLowerCase().match(He)||[""],j.crossDomain==null){R=N.createElement("a");try{R.href=j.url,R.href=R.href,j.crossDomain=Uh.protocol+"//"+Uh.host!=R.protocol+"//"+R.host}catch{j.crossDomain=!0}}if(j.data&&j.processData&&typeof j.data!="string"&&(j.data=m.param(j.data,j.traditional)),Vh($h,j,d,Pe),A)return Pe;V=m.event&&j.global,V&&m.active++===0&&m.event.trigger("ajaxStart"),j.type=j.type.toUpperCase(),j.hasContent=!v_.test(j.type),y=j.url.replace(Zp,""),j.hasContent?j.data&&j.processData&&(j.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(j.data=j.data.replace(Jp,"+")):(Z=j.url.slice(y.length),j.data&&(j.processData||typeof j.data=="string")&&(y+=(Nu.test(y)?"&":"?")+j.data,delete j.data),j.cache===!1&&(y=y.replace(Fh,"$1"),Z=(Nu.test(y)?"&":"?")+"_="+Mh.guid+++Z),j.url=y+Z),j.ifModified&&(m.lastModified[y]&&Pe.setRequestHeader("If-Modified-Since",m.lastModified[y]),m.etag[y]&&Pe.setRequestHeader("If-None-Match",m.etag[y])),(j.data&&j.hasContent&&j.contentType!==!1||d.contentType)&&Pe.setRequestHeader("Content-Type",j.contentType),Pe.setRequestHeader("Accept",j.dataTypes[0]&&j.accepts[j.dataTypes[0]]?j.accepts[j.dataTypes[0]]+(j.dataTypes[0]!=="*"?", "+ng+"; q=0.01":""):j.accepts["*"]);for(z in j.headers)Pe.setRequestHeader(z,j.headers[z]);if(j.beforeSend&&(j.beforeSend.call(G,Pe,j)===!1||A))return Pe.abort();if(at="abort",Ee.add(j.complete),Pe.done(j.success),Pe.fail(j.error),f=Vh(xo,j,d,Pe),!f)Pn(-1,"No Transport");else{if(Pe.readyState=1,V&&we.trigger("ajaxSend",[Pe,j]),A)return Pe;j.async&&j.timeout>0&&(S=e.setTimeout(function(){Pe.abort("timeout")},j.timeout));try{A=!1,f.send(Lt,Pn)}catch(Ge){if(A)throw Ge;Pn(-1,Ge)}}function Pn(Ge,Et,Do,tl){var Rn,Fs,$s,jt,Ai,ar=Et;A||(A=!0,S&&e.clearTimeout(S),f=void 0,E=tl||"",Pe.readyState=Ge>0?4:0,Rn=Ge>=200&&Ge<300||Ge===304,Do&&(jt=__(j,Pe,Do)),!Rn&&m.inArray("script",j.dataTypes)>-1&&m.inArray("json",j.dataTypes)<0&&(j.converters["text script"]=function(){}),jt=rg(j,jt,Pe,Rn),Rn?(j.ifModified&&(Ai=Pe.getResponseHeader("Last-Modified"),Ai&&(m.lastModified[y]=Ai),Ai=Pe.getResponseHeader("etag"),Ai&&(m.etag[y]=Ai)),Ge===204||j.type==="HEAD"?ar="nocontent":Ge===304?ar="notmodified":(ar=jt.state,Fs=jt.data,$s=jt.error,Rn=!$s)):($s=ar,(Ge||!ar)&&(ar="error",Ge<0&&(Ge=0))),Pe.status=Ge,Pe.statusText=(Et||ar)+"",Rn?Oe.resolveWith(G,[Fs,ar,Pe]):Oe.rejectWith(G,[Pe,ar,$s]),Pe.statusCode(Bt),Bt=void 0,V&&we.trigger(Rn?"ajaxSuccess":"ajaxError",[Pe,j,Rn?Fs:$s]),Ee.fireWith(G,[Pe,ar]),V&&(we.trigger("ajaxComplete",[Pe,j]),--m.active||m.event.trigger("ajaxStop")))}return Pe},getJSON:function(l,d,f){return m.get(l,d,f,"json")},getScript:function(l,d){return m.get(l,void 0,d,"script")}}),m.each(["get","post"],function(l,d){m[d]=function(f,y,E,T){return O(y)&&(T=T||E,E=y,y=void 0),m.ajax(m.extend({url:f,type:d,dataType:T,data:y,success:E},m.isPlainObject(f)&&f))}}),m.ajaxPrefilter(function(l){var d;for(d in l.headers)d.toLowerCase()==="content-type"&&(l.contentType=l.headers[d]||"")}),m._evalUrl=function(l,d,f){return m.ajax({url:l,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(y){m.globalEval(y,d,f)}})},m.fn.extend({wrapAll:function(l){var d;return this[0]&&(O(l)&&(l=l.call(this[0])),d=m(l,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var f=this;f.firstElementChild;)f=f.firstElementChild;return f}).append(this)),this},wrapInner:function(l){return O(l)?this.each(function(d){m(this).wrapInner(l.call(this,d))}):this.each(function(){var d=m(this),f=d.contents();f.length?f.wrapAll(l):d.append(l)})},wrap:function(l){var d=O(l);return this.each(function(f){m(this).wrapAll(d?l.call(this,f):l)})},unwrap:function(l){return this.parent(l).not("body").each(function(){m(this).replaceWith(this.childNodes)}),this}}),m.expr.pseudos.hidden=function(l){return!m.expr.pseudos.visible(l)},m.expr.pseudos.visible=function(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)},m.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var ig={0:200,1223:204},No=m.ajaxSettings.xhr();k.cors=!!No&&"withCredentials"in No,k.ajax=No=!!No,m.ajaxTransport(function(l){var d,f;if(k.cors||No&&!l.crossDomain)return{send:function(y,E){var T,S=l.xhr();if(S.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(T in l.xhrFields)S[T]=l.xhrFields[T];l.mimeType&&S.overrideMimeType&&S.overrideMimeType(l.mimeType),!l.crossDomain&&!y["X-Requested-With"]&&(y["X-Requested-With"]="XMLHttpRequest");for(T in y)S.setRequestHeader(T,y[T]);d=function(R){return function(){d&&(d=f=S.onload=S.onerror=S.onabort=S.ontimeout=S.onreadystatechange=null,R==="abort"?S.abort():R==="error"?typeof S.status!="number"?E(0,"error"):E(S.status,S.statusText):E(ig[S.status]||S.status,S.statusText,(S.responseType||"text")!=="text"||typeof S.responseText!="string"?{binary:S.response}:{text:S.responseText},S.getAllResponseHeaders()))}},S.onload=d(),f=S.onerror=S.ontimeout=d("error"),S.onabort!==void 0?S.onabort=f:S.onreadystatechange=function(){S.readyState===4&&e.setTimeout(function(){d&&f()})},d=d("abort");try{S.send(l.hasContent&&l.data||null)}catch(R){if(d)throw R}},abort:function(){d&&d()}}}),m.ajaxPrefilter(function(l){l.crossDomain&&(l.contents.script=!1)}),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(l){return m.globalEval(l),l}}}),m.ajaxPrefilter("script",function(l){l.cache===void 0&&(l.cache=!1),l.crossDomain&&(l.type="GET")}),m.ajaxTransport("script",function(l){if(l.crossDomain||l.scriptAttrs){var d,f;return{send:function(y,E){d=m("<script>").attr(l.scriptAttrs||{}).prop({charset:l.scriptCharset,src:l.url}).on("load error",f=function(T){d.remove(),f=null,T&&E(T.type==="error"?404:200,T.type)}),N.head.appendChild(d[0])},abort:function(){f&&f()}}}});var Ao=[],Ni=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var l=Ao.pop()||m.expando+"_"+Mh.guid++;return this[l]=!0,l}}),m.ajaxPrefilter("json jsonp",function(l,d,f){var y,E,T,S=l.jsonp!==!1&&(Ni.test(l.url)?"url":typeof l.data=="string"&&(l.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ni.test(l.data)&&"data");if(S||l.dataTypes[0]==="jsonp")return y=l.jsonpCallback=O(l.jsonpCallback)?l.jsonpCallback():l.jsonpCallback,S?l[S]=l[S].replace(Ni,"$1"+y):l.jsonp!==!1&&(l.url+=(Nu.test(l.url)?"&":"?")+l.jsonp+"="+y),l.converters["script json"]=function(){return T||m.error(y+" was not called"),T[0]},l.dataTypes[0]="json",E=e[y],e[y]=function(){T=arguments},f.always(function(){E===void 0?m(e).removeProp(y):e[y]=E,l[y]&&(l.jsonpCallback=d.jsonpCallback,Ao.push(y)),T&&O(E)&&E(T[0]),T=E=void 0}),"script"}),k.createHTMLDocument=function(){var l=N.implementation.createHTMLDocument("").body;return l.innerHTML="<form></form><form></form>",l.childNodes.length===2}(),m.parseHTML=function(l,d,f){if(typeof l!="string")return[];typeof d=="boolean"&&(f=d,d=!1);var y,E,T;return d||(k.createHTMLDocument?(d=N.implementation.createHTMLDocument(""),y=d.createElement("base"),y.href=N.location.href,d.head.appendChild(y)):d=N),E=Ci.exec(l),T=!f&&[],E?[d.createElement(E[1])]:(E=Ps([l],d,T),T&&T.length&&m(T).remove(),m.merge([],E.childNodes))},m.fn.load=function(l,d,f){var y,E,T,S=this,R=l.indexOf(" ");return R>-1&&(y=ts(l.slice(R)),l=l.slice(0,R)),O(d)?(f=d,d=void 0):d&&typeof d=="object"&&(E="POST"),S.length>0&&m.ajax({url:l,type:E||"GET",dataType:"html",data:d}).done(function(A){T=arguments,S.html(y?m("<div>").append(m.parseHTML(A)).find(y):A)}).always(f&&function(A,V){S.each(function(){f.apply(this,T||[A.responseText,V,A])})}),this},m.expr.pseudos.animated=function(l){return m.grep(m.timers,function(d){return l===d.elem}).length},m.offset={setOffset:function(l,d,f){var y,E,T,S,R,A,V,z=m.css(l,"position"),Z=m(l),j={};z==="static"&&(l.style.position="relative"),R=Z.offset(),T=m.css(l,"top"),A=m.css(l,"left"),V=(z==="absolute"||z==="fixed")&&(T+A).indexOf("auto")>-1,V?(y=Z.position(),S=y.top,E=y.left):(S=parseFloat(T)||0,E=parseFloat(A)||0),O(d)&&(d=d.call(l,f,m.extend({},R))),d.top!=null&&(j.top=d.top-R.top+S),d.left!=null&&(j.left=d.left-R.left+E),"using"in d?d.using.call(l,j):Z.css(j)}},m.fn.extend({offset:function(l){if(arguments.length)return l===void 0?this:this.each(function(E){m.offset.setOffset(this,l,E)});var d,f,y=this[0];if(!!y)return y.getClientRects().length?(d=y.getBoundingClientRect(),f=y.ownerDocument.defaultView,{top:d.top+f.pageYOffset,left:d.left+f.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var l,d,f,y=this[0],E={top:0,left:0};if(m.css(y,"position")==="fixed")d=y.getBoundingClientRect();else{for(d=this.offset(),f=y.ownerDocument,l=y.offsetParent||f.documentElement;l&&(l===f.body||l===f.documentElement)&&m.css(l,"position")==="static";)l=l.parentNode;l&&l!==y&&l.nodeType===1&&(E=m(l).offset(),E.top+=m.css(l,"borderTopWidth",!0),E.left+=m.css(l,"borderLeftWidth",!0))}return{top:d.top-E.top-m.css(y,"marginTop",!0),left:d.left-E.left-m.css(y,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var l=this.offsetParent;l&&m.css(l,"position")==="static";)l=l.offsetParent;return l||As})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(l,d){var f=d==="pageYOffset";m.fn[l]=function(y){return Tr(this,function(E,T,S){var R;if(J(E)?R=E:E.nodeType===9&&(R=E.defaultView),S===void 0)return R?R[d]:E[T];R?R.scrollTo(f?R.pageXOffset:S,f?S:R.pageYOffset):E[T]=S},l,y,arguments.length)}}),m.each(["top","left"],function(l,d){m.cssHooks[d]=Zi(k.pixelPosition,function(f,y){if(y)return y=Kn(f,d),Iu.test(y)?m(f).position()[d]+"px":y})}),m.each({Height:"height",Width:"width"},function(l,d){m.each({padding:"inner"+l,content:d,"":"outer"+l},function(f,y){m.fn[y]=function(E,T){var S=arguments.length&&(f||typeof E!="boolean"),R=f||(E===!0||T===!0?"margin":"border");return Tr(this,function(A,V,z){var Z;return J(A)?y.indexOf("outer")===0?A["inner"+l]:A.document.documentElement["client"+l]:A.nodeType===9?(Z=A.documentElement,Math.max(A.body["scroll"+l],Z["scroll"+l],A.body["offset"+l],Z["offset"+l],Z["client"+l])):z===void 0?m.css(A,V,R):m.style(A,V,z,R)},d,S?E:void 0,S)}})}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(l,d){m.fn[d]=function(f){return this.on(d,f)}}),m.fn.extend({bind:function(l,d,f){return this.on(l,null,d,f)},unbind:function(l,d){return this.off(l,null,d)},delegate:function(l,d,f,y){return this.on(d,l,f,y)},undelegate:function(l,d,f){return arguments.length===1?this.off(l,"**"):this.off(d,l||"**",f)},hover:function(l,d){return this.mouseenter(l).mouseleave(d||l)}}),m.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(l,d){m.fn[d]=function(f,y){return arguments.length>0?this.on(d,null,f,y):this.trigger(d)}});var w_=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;m.proxy=function(l,d){var f,y,E;if(typeof d=="string"&&(f=l[d],d=l,l=f),!!O(l))return y=s.call(arguments,2),E=function(){return l.apply(d||this,y.concat(s.call(arguments)))},E.guid=l.guid=l.guid||m.guid++,E},m.holdReady=function(l){l?m.readyWait++:m.ready(!0)},m.isArray=Array.isArray,m.parseJSON=JSON.parse,m.nodeName=Kt,m.isFunction=O,m.isWindow=J,m.camelCase=xe,m.type=Q,m.now=Date.now,m.isNumeric=function(l){var d=m.type(l);return(d==="number"||d==="string")&&!isNaN(l-parseFloat(l))},m.trim=function(l){return l==null?"":(l+"").replace(w_,"$1")};var Ru=e.jQuery,E_=e.$;return m.noConflict=function(l){return e.$===m&&(e.$=E_),l&&e.jQuery===m&&(e.jQuery=Ru),m},typeof n>"u"&&(e.jQuery=e.$=m),m})})(hF);const Cc=hF.exports;class G8 extends ve.exports.Component{componentDidMount(){setTimeout(()=>{Cc("#"+this.props.Convo).animate({scrollTop:7e4},1e3)},1e3)}constructor(e){super(e),this.state={Messages:[],Complete:!1},this.props.Convo&&ce.database().ref("chats/"+this.props.Convo+"/messages").once("value").then(n=>{var r=n.val()||"Anonym";r!=="Anonym"&&(n.forEach(i=>{var s=i.val();Px.push(s),this.setState({Messages:Px})}),this.setState({Complete:!0}))})}render(){return this.state.Complete?U("div",{children:this.state.Messages.map(e=>(Rx++,e.By==this.props.User1.ID?Uw=this.props.User1.Photo:Uw=this.props.User2.Photo,Me("div",{className:"msgdiv",children:[U("img",{id:"Msgfaces",className:"rounded-circle",src:Uw}),U("p",{className:"msgtexts",children:e.says}),U("br",{}),"      ",U("br",{})]},Rx)))}):U("div",{})}}var Px=[],Uw,Rx=1;class K8 extends ve.exports.Component{constructor(e){super(e),this.state={}}render(){return Me("div",{children:[U("img",{className:"rounded-circle",id:"X",src:this.props.X.Photo}),U("img",{className:"rounded-circle",id:"Y",src:this.props.Y.Photo})]})}}class Q8 extends ve.exports.Component{constructor(e){super(e),this.state={Message:[],Complete:!1},this.props.Convo&&ce.database().ref("chats/"+this.props.Convo+"/messages").limitToLast(1).on("child_added",n=>{var r=n.val();this.setState({Message:r})})}Jquery(e,n){Cc("#"+this.props.Convo).append("  <div>  <div class = 'msgdiv' >  <img id = 'Msgfaces' class = 'rounded-circle' src = "+e+" ></img> <p class = 'msgtexts' > "+n.says+"</p>   <br></br>   </div>   </div> ")}render(){return this.state.Message&&(Cc("#"+this.props.Convo).animate({scrollTop:7e3},1e3),this.state.Message.By==this.props.User1.ID?(Hg=this.props.User1.Photo,this.Jquery(Hg,this.state.Message)):(Hg=this.props.User2.Photo,this.Jquery(Hg,this.state.Message))),U("div",{})}}var Hg;class Y8{construcor(){this.xperia=0}Set_Initial_Structure(){this.SetUsers().then(()=>{this.SetUserInbox()})}SetUserInbox(){var e=ce.auth().currentUser.uid;const n="users/"+e+"/inbox";ce.database().ref(n).once("value").then(r=>{var i=r.val()||"Anonym";console.log(i),i==="Anonym"&&this.NewSet().then(()=>{this.ReadLastkey("chats",e).then(s=>{this.Inform(e,s)})})})}Inform(e,n,r){console.log("u1: "+e),console.log("key: "+n),console.log("u2: "+r),r===void 0?(console.log("undef"),ce.database().ref("storage").once("value").then(i=>{var s=i.val();r=s.value,ce.database().ref("users/"+e+"/inbox").push({Partner:r,Convo:"$"+n}),alert("my inbox set"),ce.database().ref("users/"+r+"/inbox").push({Partner:e,Convo:"$"+n})})):ce.database().ref("users/"+e+"inbox").push({Partner:r,Convo:n})}async ReadLastkey(e,n){return ce.database().ref(e).limitToLast(1).once("value").then(r=>{var i=r.val(),s=Object.keys(i);return console.log("last key : "+s),ce.database().ref("chats/"+s+"/messages").push({By:n,says:"thanks"}),s})}NewSet(){return ce.database().ref("chats").push({system:!0})}async SetUsers(){return this.SetSystem().then(()=>this.SetMe())}async SetMe(){var e=ce.auth().currentUser.uid;this.RefExist("users/"+e).then(n=>{if(!n)return console.log("setme"),ce.database().ref("users/"+e).set({ID:e,IP:"ip",Name:"My Name",Online:!1,Photo:"photo"})})}async SetSystem(){console.log("system"),ce.database().ref("unique").push({created:!0}),this.LastRead("unique").then(e=>{console.log("key: "+e),e=e+"",ce.database().ref("storage").set({value:e}),ce.database().ref("users/"+e).set({Name:"System",ID:e,IP:"1.2.3.4.5",Photo:"hkhjkhjkhjk",Online:!0})})}Animate(e){Cc("#"+e).animate({scrollTop:Cc(document).height()},1e3)}Track_Online_Users(){this.RefExist("OnlineUsers").then(e=>{e?this.MyIP().then(n=>{this.SetKey("OnlineUsers/Existing",n.ip),setInterval(()=>{this.MyIP().then(r=>{this.Clean(),this.SetKey("OnlineUsers/Updating",r.ip),this.PatternMatch()})},7e3)}):(this.Createref("OnlineUsers"),this.Track_Online_Users())})}Clean(){ce.database().ref("OnlineUsers/Updating").remove()}async RefExist(e){return ce.database().ref(e).once("value").then(n=>{var r=n.val()||"Anonym";return r!=="Anonym"})}MyIP(){return Cc.getJSON("https://api.ipify.org?format=json",function(e){return e})}Createref(e){ce.database().ref(e).push({created:!0})}SetKey(e,n){var r=ce.auth().currentUser.uid;ce.database().ref(e).push({ID:r,IP:n})}PatternMatch(e){ce.database().ref("OnlineUsers/Updating").on("value",n=>{n.forEach(r=>{var i=r.val();Lx.push(i)}),this.MapArray("OnlineUsers/Existing",Ox).then(()=>{Lx.forEach(r=>{Ox.forEach(i=>{r.IP,i.IP}),ce.database().ref("users/"+r.ID).update({Online:!1}),console.log("updated")})})})}MapArray(e,n){return(e===void 0||n===void 0)&&console.error("MapArray :: Arguments Undefined "),ce.database().ref(e).once("value",r=>{r.forEach(i=>{n.push(i.val())})})}async FindKey(e,n,r){const i=ce.database(),s=e;var o="",a=!1;return i.ref("users/"+s+"/inbox").once("value").then(u=>{if(u.forEach(h=>{var p=h.val();if(p.Partner===n){var v=p.Convo;return o=v.slice(1,v.length),a=!0,o}}),a)return o;if(o==="")return alert("not found"),ce.database().ref("chats").push({created:!0}),this.LastRead("chats").then(h=>(alert("lll"+h),this.Inform(e,h,n),this.Inform(n,h,e),h))})}iinform(e,n,r){r+="",n===void 0&&ce.database().ref("storage").once("value").then(i=>{var s=i.val();n=s.value}),ce.database().ref("users/"+e+"/inbox").push({Partner:n,Convo:"$"+r})}async CheckInbox(e,n){return ce.database().ref("users/"+e+"/inbox").once("value").then(i=>i)}CreateNewKey(){return ce.database().ref("chats").push({Created:!0}),this.ReadLast("chats")}async ReadLast(e,n){return console.log("created new , reading...."),ce.database().ref(e).limitToLast(1).once("value").then(r=>{var i=r.val(),s=Object.keys(i);return console.log("last key : "+s),ce.database().ref("chats/"+s+"/messages").push({By:n,says:"Connected"}),s})}async LastRead(e){return console.log("created new , reading...."),ce.database().ref(e).limitToLast(1).once("value").then(n=>{var r=n.val(),i=Object.keys(r);return console.log("last key : "+i),i})}}var Ox=[],Lx=[];class Py extends ve.exports.Component{constructor(n){super(n);it(this,"keyPress",n=>{if(n.keyCode===13){var r=ce.auth().currentUser.uid;ce.database().ref("chats/"+this.state.ConvoKey+"/messages").push({By:r,says:n.target.value})}});it(this,"Hidez",()=>{this.props.Toggle(this.props.Left)});if(this.state={ConvoKey:!1,MyProps:!1,active:!0},this.props.Partner&&!this.state.ConvoKey){var r=new Y8,i;r.FindKey(this.props.Me.ID,this.props.Partner.ID,i).then(s=>{alert(s),this.setState({ConvoKey:s})})}}render(){return this.state.ConvoKey?U("div",{children:Me("div",{style:{left:this.props.Left},className:"Chatbox",children:[U(H8,{hideme:this.Hidez,data:this.props.Partner}),Me("div",{onClick:()=>{alert(this.state.ConvoKey)},className:"ChatPad",id:this.state.ConvoKey,children:[U("br",{}),U("br",{}),U("br",{}),U("br",{}),U("br",{}),U(K8,{X:this.props.Me,Y:this.props.Partner}),U(G8,{Convo:this.state.ConvoKey,User1:this.props.Me,User2:this.props.Partner}),U(Q8,{Convo:this.state.ConvoKey,User1:this.props.Me,User2:this.props.Partner})]}),U("input",{type:"text",onKeyDown:this.keyPress,className:"WritePad",placeholder:"Type a Message Here"})]})}):U("p",{})}}class X8 extends ve.exports.Component{constructor(e){super(e),this.state={};var n=ce.auth().currentUser.uid;ce.database().ref("users/"+n+"/inbox").limitToLast(1).on("child_added",r=>{var i=r.val();Mx++,Mx!==1&&(alert("time +"),console.log("1: "+i),console.log("2: "+i.Partner),alert("someone initialized a conversation "),ce.database().ref("users/"+i.Partner).once("value",s=>{var o=s.val();console.log("3: "+o),console.log("4: "+o.ID),this.props.init(o)}))})}render(){return U("div",{})}}var Mx=0;class J8 extends ve.exports.Component{constructor(n){super(n);it(this,"OCFEC",n=>{hi=Bw,al===1&&hi===300&&(hi=850),al===1&&hi===850&&(hi=300),al++,this.setState({Choosen:n,active:this.state.active+1})});it(this,"Toggle",n=>{Bw=n,al-=1,this.setState({active:this.state.active-1})});it(this,"Initialized",()=>{});this.state={active:0,Choosen:[]}}Open_Command(n){hi=Bw,al===1&&hi===300&&(hi=850),al===1&&hi===850&&(hi=300),al++,this.setState({Choosen:this.props.Data,active:this.state.active+1})}render(){if(this.props.Data){var n=ce.auth().currentUser.uid;return this.props.Data.ID==n&&(Vw=this.props.Data),Me("div",{children:[this.props.Launch&&U(X8,{init:this.OCFEC}),this.state.active===1&&U(Py,{Me:Vw,Partner:this.state.Choosen,Toggle:this.Toggle,Left:hi}),this.state.active===2&&U(Py,{Me:Vw,Partner:this.state.Choosen,Toggle:this.Toggle,Left:hi}),Me("div",{className:"Y",children:[this.state.Online&&U("div",{id:"GreenCircle",className:"rounded-circle"}),U("p",{className:"name",children:this.props.Data.Name}),U("img",{id:"pic",className:"rounded-circle",src:this.props.Data.Photo}),U("button",{className:"msgbtn",onClick:()=>{this.Open_Command()},children:"  message "})]})]})}return U("p",{})}}var Vw=[],al=0,hi,Bw=850;class Z8 extends ve.exports.Component{constructor(n){super(n);it(this,"Open_Command",n=>{Kg=-20,ll=jw,Gg===1&&ll===300&&(ll=850),Gg===1&&ll===850&&(ll=300),Gg++,alert(this.state.active),this.state.active===1&&this.setState({active:this.state.active-1}),this.setState({Choosen:this.props.Data,active:this.state.active+1})});it(this,"Toggle",n=>{jw=n,alert(jw),Gg-=1,this.setState({active:this.state.active-1})});this.state={Complete:!1,active:0},alert("convolist");var r=ce.auth().currentUser.uid;this.props.Data&&ce.database().ref("users/"+r+"/inbox").once("value",i=>{i.forEach(s=>{var o=s.val();this.props.Data.map(a=>{a.ID===o.Partner&&Fx.push(a),a.ID===r&&(qw=a)})}),this.setState({Complete:!0})})}render(){return this.state.Complete?Me("div",{children:[this.state.active===1&&U(Py,{Me:qw,Partner:Qg,Toggle:this.Toggle,Left:ll}),this.state.active===2&&U(Py,{Me:qw,Partner:Qg,Toggle:this.Toggle,Left:ll}),U("div",{className:"unique",children:Fx.map(n=>(Kg+=50,U("div",{children:Me("div",{style:{top:Kg},className:"Slide",children:[U("img",{onClick:()=>{Qg=n},src:n.Photo,id:"abc",className:"rounded-circle"}),U("p",{onClick:()=>{Qg=n,this.Open_Command()},className:"Pname",children:n.Name})]})},Kg)))})]}):U("p",{})}}var ll,Gg=0,jw=850,Fx=[],Kg=30,Qg,qw;class eY extends ve.exports.Component{componentDidMount(){}constructor(){super(),this.state={Info:Yg,Complete:!1,Render:!1},ce.database().ref("users").once("value").then(e=>{e.forEach(n=>{Yg.push(n.val())}),this.setState({Complete:!0,Info:Yg})})}render(){return this.state.Complete?Me("div",{children:[U(Z8,{Data:Yg}),this.state.Info.map(e=>(Ux++,zw==!1&&($x+=300,Ww=!1),zw==!0&&(zw=!1,Ww=!0),U("div",{style:{top:$x},className:"Dynamic",children:U(J8,{Data:e,Command:this.state.Render,Launch:Ww})},Ux)))]}):U("p",{})}}var $x=30,Ux=0,zw=!0,Yg=[],Ww;function tY(){return ve.exports.useState({loggedIn:!1,count:0}),U(D8,{children:Me(A8,{children:[U(Yu,{exact:!0,path:"/",element:U(rF,{})}),U(Yu,{exact:!0,path:"/Profile/:id",element:U(q8,{})}),U(Yu,{exact:!0,path:"/Feed/:id",element:U(z8,{})}),U(Yu,{exact:!0,path:"/Groups/:id",element:U(W8,{})}),U(Yu,{exact:!0,path:"/Search/:id",element:U(eY,{})})]})})}var nY={exports:{}};/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,r){t.exports=r()})(Vx,function(){const n="transitionend",r=_=>{let c=_.getAttribute("data-bs-target");if(!c||c==="#"){let g=_.getAttribute("href");if(!g||!g.includes("#")&&!g.startsWith("."))return null;g.includes("#")&&!g.startsWith("#")&&(g=`#${g.split("#")[1]}`),c=g&&g!=="#"?g.trim():null}return c},i=_=>{const c=r(_);return c&&document.querySelector(c)?c:null},s=_=>{const c=r(_);return c?document.querySelector(c):null},o=_=>{_.dispatchEvent(new Event(n))},a=_=>!(!_||typeof _!="object")&&(_.jquery!==void 0&&(_=_[0]),_.nodeType!==void 0),u=_=>a(_)?_.jquery?_[0]:_:typeof _=="string"&&_.length>0?document.querySelector(_):null,h=_=>{if(!a(_)||_.getClientRects().length===0)return!1;const c=getComputedStyle(_).getPropertyValue("visibility")==="visible",g=_.closest("details:not([open])");if(!g)return c;if(g!==_){const I=_.closest("summary");if(I&&I.parentNode!==g||I===null)return!1}return c},p=_=>!_||_.nodeType!==Node.ELEMENT_NODE||!!_.classList.contains("disabled")||(_.disabled!==void 0?_.disabled:_.hasAttribute("disabled")&&_.getAttribute("disabled")!=="false"),v=_=>{if(!document.documentElement.attachShadow)return null;if(typeof _.getRootNode=="function"){const c=_.getRootNode();return c instanceof ShadowRoot?c:null}return _ instanceof ShadowRoot?_:_.parentNode?v(_.parentNode):null},w=()=>{},b=_=>{_.offsetHeight},k=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,O=[],J=()=>document.documentElement.dir==="rtl",N=_=>{var c;c=()=>{const g=k();if(g){const I=_.NAME,x=g.fn[I];g.fn[I]=_.jQueryInterface,g.fn[I].Constructor=_,g.fn[I].noConflict=()=>(g.fn[I]=x,_.jQueryInterface)}},document.readyState==="loading"?(O.length||document.addEventListener("DOMContentLoaded",()=>{for(const g of O)g()}),O.push(c)):c()},D=_=>{typeof _=="function"&&_()},M=(_,c,g=!0)=>{if(!g)return void D(_);const I=($=>{if(!$)return 0;let{transitionDuration:B,transitionDelay:Y}=window.getComputedStyle($);const ne=Number.parseFloat(B),X=Number.parseFloat(Y);return ne||X?(B=B.split(",")[0],Y=Y.split(",")[0],1e3*(Number.parseFloat(B)+Number.parseFloat(Y))):0})(c)+5;let x=!1;const L=({target:$})=>{$===c&&(x=!0,c.removeEventListener(n,L),D(_))};c.addEventListener(n,L),setTimeout(()=>{x||o(c)},I)},Q=(_,c,g,I)=>{const x=_.length;let L=_.indexOf(c);return L===-1?!g&&I?_[x-1]:_[0]:(L+=g?1:-1,I&&(L=(L+x)%x),_[Math.max(0,Math.min(L,x-1))])},re=/[^.]*(?=\..*)\.|.*/,m=/\..*/,le=/::\d+$/,he={};let Ye=1;const Fe={mouseenter:"mouseover",mouseleave:"mouseout"},Hn=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Kt(_,c){return c&&`${c}::${Ye++}`||_.uidEvent||Ye++}function Ci(_){const c=Kt(_);return _.uidEvent=c,he[c]=he[c]||{},he[c]}function xs(_,c,g=null){return Object.values(_).find(I=>I.callable===c&&I.delegationSelector===g)}function ja(_,c,g){const I=typeof c=="string",x=I?g:c||g;let L=Re(_);return Hn.has(L)||(L=_),[I,x,L]}function mo(_,c,g,I,x){if(typeof c!="string"||!_)return;let[L,$,B]=ja(c,g,I);c in Fe&&($=(fe=>function(ke){if(!ke.relatedTarget||ke.relatedTarget!==ke.delegateTarget&&!ke.delegateTarget.contains(ke.relatedTarget))return fe.call(this,ke)})($));const Y=Ci(_),ne=Y[B]||(Y[B]={}),X=xs(ne,$,L?g:null);if(X)return void(X.oneOff=X.oneOff&&x);const ie=Kt($,c.replace(re,"")),Se=L?function(_e,fe,ke){return function Ne($e){const Tt=_e.querySelectorAll(fe);for(let{target:ze}=$e;ze&&ze!==this;ze=ze.parentNode)for(const ot of Tt)if(ot===ze)return He($e,{delegateTarget:ze}),Ne.oneOff&&W.off(_e,$e.type,fe,ke),ke.apply(ze,[$e])}}(_,g,$):function(_e,fe){return function ke(Ne){return He(Ne,{delegateTarget:_e}),ke.oneOff&&W.off(_e,Ne.type,fe),fe.apply(_e,[Ne])}}(_,$);Se.delegationSelector=L?g:null,Se.callable=$,Se.oneOff=x,Se.uidEvent=ie,ne[ie]=Se,_.addEventListener(B,Se,L)}function Ns(_,c,g,I,x){const L=xs(c[g],I,x);L&&(_.removeEventListener(g,L,Boolean(x)),delete c[g][L.uidEvent])}function pe(_,c,g,I){const x=c[g]||{};for(const L of Object.keys(x))if(L.includes(I)){const $=x[L];Ns(_,c,g,$.callable,$.delegationSelector)}}function Re(_){return _=_.replace(m,""),Fe[_]||_}const W={on(_,c,g,I){mo(_,c,g,I,!1)},one(_,c,g,I){mo(_,c,g,I,!0)},off(_,c,g,I){if(typeof c!="string"||!_)return;const[x,L,$]=ja(c,g,I),B=$!==c,Y=Ci(_),ne=Y[$]||{},X=c.startsWith(".");if(L===void 0){if(X)for(const ie of Object.keys(Y))pe(_,Y,ie,c.slice(1));for(const ie of Object.keys(ne)){const Se=ie.replace(le,"");if(!B||c.includes(Se)){const _e=ne[ie];Ns(_,Y,$,_e.callable,_e.delegationSelector)}}}else{if(!Object.keys(ne).length)return;Ns(_,Y,$,L,x?g:null)}},trigger(_,c,g){if(typeof c!="string"||!_)return null;const I=k();let x=null,L=!0,$=!0,B=!1;c!==Re(c)&&I&&(x=I.Event(c,g),I(_).trigger(x),L=!x.isPropagationStopped(),$=!x.isImmediatePropagationStopped(),B=x.isDefaultPrevented());let Y=new Event(c,{bubbles:L,cancelable:!0});return Y=He(Y,g),B&&Y.preventDefault(),$&&_.dispatchEvent(Y),Y.defaultPrevented&&x&&x.preventDefault(),Y}};function He(_,c){for(const[g,I]of Object.entries(c||{}))try{_[g]=I}catch{Object.defineProperty(_,g,{configurable:!0,get:()=>I})}return _}const ut=new Map,sr={set(_,c,g){ut.has(_)||ut.set(_,new Map);const I=ut.get(_);I.has(c)||I.size===0?I.set(c,g):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(I.keys())[0]}.`)},get:(_,c)=>ut.has(_)&&ut.get(_).get(c)||null,remove(_,c){if(!ut.has(_))return;const g=ut.get(_);g.delete(c),g.size===0&&ut.delete(_)}};function or(_){if(_==="true")return!0;if(_==="false")return!1;if(_===Number(_).toString())return Number(_);if(_===""||_==="null")return null;if(typeof _!="string")return _;try{return JSON.parse(decodeURIComponent(_))}catch{return _}}function Qi(_){return _.replace(/[A-Z]/g,c=>`-${c.toLowerCase()}`)}const rn={setDataAttribute(_,c,g){_.setAttribute(`data-bs-${Qi(c)}`,g)},removeDataAttribute(_,c){_.removeAttribute(`data-bs-${Qi(c)}`)},getDataAttributes(_){if(!_)return{};const c={},g=Object.keys(_.dataset).filter(I=>I.startsWith("bs")&&!I.startsWith("bsConfig"));for(const I of g){let x=I.replace(/^bs/,"");x=x.charAt(0).toLowerCase()+x.slice(1,x.length),c[x]=or(_.dataset[I])}return c},getDataAttribute:(_,c)=>or(_.getAttribute(`data-bs-${Qi(c)}`))};class Er{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(c){return c=this._mergeConfigObj(c),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}_configAfterMerge(c){return c}_mergeConfigObj(c,g){const I=a(g)?rn.getDataAttribute(g,"config"):{};return{...this.constructor.Default,...typeof I=="object"?I:{},...a(g)?rn.getDataAttributes(g):{},...typeof c=="object"?c:{}}}_typeCheckConfig(c,g=this.constructor.DefaultType){for(const x of Object.keys(g)){const L=g[x],$=c[x],B=a($)?"element":(I=$)==null?`${I}`:Object.prototype.toString.call(I).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(L).test(B))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${x}" provided type "${B}" but expected type "${L}".`)}var I}}class Gn extends Er{constructor(c,g){super(),(c=u(c))&&(this._element=c,this._config=this._getConfig(g),sr.set(this._element,this.constructor.DATA_KEY,this))}dispose(){sr.remove(this._element,this.constructor.DATA_KEY),W.off(this._element,this.constructor.EVENT_KEY);for(const c of Object.getOwnPropertyNames(this))this[c]=null}_queueCallback(c,g,I=!0){M(c,g,I)}_getConfig(c){return c=this._mergeConfigObj(c,this._element),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}static getInstance(c){return sr.get(u(c),this.DATA_KEY)}static getOrCreateInstance(c,g={}){return this.getInstance(c)||new this(c,typeof g=="object"?g:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(c){return`${c}${this.EVENT_KEY}`}}const Tr=(_,c="hide")=>{const g=`click.dismiss${_.EVENT_KEY}`,I=_.NAME;W.on(document,g,`[data-bs-dismiss="${I}"]`,function(x){if(["A","AREA"].includes(this.tagName)&&x.preventDefault(),p(this))return;const L=s(this)||this.closest(`.${I}`);_.getOrCreateInstance(L)[c]()})};class qa extends Gn{static get NAME(){return"alert"}close(){if(W.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const c=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,c)}_destroyElement(){this._element.remove(),W.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(c){return this.each(function(){const g=qa.getOrCreateInstance(this);if(typeof c=="string"){if(g[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);g[c](this)}})}}Tr(qa,"close"),N(qa);const Fp='[data-bs-toggle="button"]';class za extends Gn{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(c){return this.each(function(){const g=za.getOrCreateInstance(this);c==="toggle"&&g[c]()})}}W.on(document,"click.bs.button.data-api",Fp,_=>{_.preventDefault();const c=_.target.closest(Fp);za.getOrCreateInstance(c).toggle()}),N(za);const xe={find:(_,c=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(c,_)),findOne:(_,c=document.documentElement)=>Element.prototype.querySelector.call(c,_),children:(_,c)=>[].concat(..._.children).filter(g=>g.matches(c)),parents(_,c){const g=[];let I=_.parentNode.closest(c);for(;I;)g.push(I),I=I.parentNode.closest(c);return g},prev(_,c){let g=_.previousElementSibling;for(;g;){if(g.matches(c))return[g];g=g.previousElementSibling}return[]},next(_,c){let g=_.nextElementSibling;for(;g;){if(g.matches(c))return[g];g=g.nextElementSibling}return[]},focusableChildren(_){const c=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(g=>`${g}:not([tabindex^="-"])`).join(",");return this.find(c,_).filter(g=>!p(g)&&h(g))}},Wa={endCallback:null,leftCallback:null,rightCallback:null},Ha={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class be extends Er{constructor(c,g){super(),this._element=c,c&&be.isSupported()&&(this._config=this._getConfig(g),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Wa}static get DefaultType(){return Ha}static get NAME(){return"swipe"}dispose(){W.off(this._element,".bs.swipe")}_start(c){this._supportPointerEvents?this._eventIsPointerPenTouch(c)&&(this._deltaX=c.clientX):this._deltaX=c.touches[0].clientX}_end(c){this._eventIsPointerPenTouch(c)&&(this._deltaX=c.clientX-this._deltaX),this._handleSwipe(),D(this._config.endCallback)}_move(c){this._deltaX=c.touches&&c.touches.length>1?0:c.touches[0].clientX-this._deltaX}_handleSwipe(){const c=Math.abs(this._deltaX);if(c<=40)return;const g=c/this._deltaX;this._deltaX=0,g&&D(g>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(W.on(this._element,"pointerdown.bs.swipe",c=>this._start(c)),W.on(this._element,"pointerup.bs.swipe",c=>this._end(c)),this._element.classList.add("pointer-event")):(W.on(this._element,"touchstart.bs.swipe",c=>this._start(c)),W.on(this._element,"touchmove.bs.swipe",c=>this._move(c)),W.on(this._element,"touchend.bs.swipe",c=>this._end(c)))}_eventIsPointerPenTouch(c){return this._supportPointerEvents&&(c.pointerType==="pen"||c.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const en="next",yo="prev",vo="left",_u="right",wu="slid.bs.carousel",Ih="carousel",Yi="active",bi={ArrowLeft:_u,ArrowRight:vo},As={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},_o={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class wo extends Gn{constructor(c,g){super(c,g),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=xe.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Ih&&this.cycle()}static get Default(){return As}static get DefaultType(){return _o}static get NAME(){return"carousel"}next(){this._slide(en)}nextWhenVisible(){!document.hidden&&h(this._element)&&this.next()}prev(){this._slide(yo)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?W.one(this._element,wu,()=>this.cycle()):this.cycle())}to(c){const g=this._getItems();if(c>g.length-1||c<0)return;if(this._isSliding)return void W.one(this._element,wu,()=>this.to(c));const I=this._getItemIndex(this._getActive());if(I===c)return;const x=c>I?en:yo;this._slide(x,g[c])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(c){return c.defaultInterval=c.interval,c}_addEventListeners(){this._config.keyboard&&W.on(this._element,"keydown.bs.carousel",c=>this._keydown(c)),this._config.pause==="hover"&&(W.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),W.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&be.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const g of xe.find(".carousel-item img",this._element))W.on(g,"dragstart.bs.carousel",I=>I.preventDefault());const c={leftCallback:()=>this._slide(this._directionToOrder(vo)),rightCallback:()=>this._slide(this._directionToOrder(_u)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new be(this._element,c)}_keydown(c){if(/input|textarea/i.test(c.target.tagName))return;const g=bi[c.key];g&&(c.preventDefault(),this._slide(this._directionToOrder(g)))}_getItemIndex(c){return this._getItems().indexOf(c)}_setActiveIndicatorElement(c){if(!this._indicatorsElement)return;const g=xe.findOne(".active",this._indicatorsElement);g.classList.remove(Yi),g.removeAttribute("aria-current");const I=xe.findOne(`[data-bs-slide-to="${c}"]`,this._indicatorsElement);I&&(I.classList.add(Yi),I.setAttribute("aria-current","true"))}_updateInterval(){const c=this._activeElement||this._getActive();if(!c)return;const g=Number.parseInt(c.getAttribute("data-bs-interval"),10);this._config.interval=g||this._config.defaultInterval}_slide(c,g=null){if(this._isSliding)return;const I=this._getActive(),x=c===en,L=g||Q(this._getItems(),I,x,this._config.wrap);if(L===I)return;const $=this._getItemIndex(L),B=ie=>W.trigger(this._element,ie,{relatedTarget:L,direction:this._orderToDirection(c),from:this._getItemIndex(I),to:$});if(B("slide.bs.carousel").defaultPrevented||!I||!L)return;const Y=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement($),this._activeElement=L;const ne=x?"carousel-item-start":"carousel-item-end",X=x?"carousel-item-next":"carousel-item-prev";L.classList.add(X),b(L),I.classList.add(ne),L.classList.add(ne),this._queueCallback(()=>{L.classList.remove(ne,X),L.classList.add(Yi),I.classList.remove(Yi,X,ne),this._isSliding=!1,B(wu)},I,this._isAnimated()),Y&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return xe.findOne(".active.carousel-item",this._element)}_getItems(){return xe.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(c){return J()?c===vo?yo:en:c===vo?en:yo}_orderToDirection(c){return J()?c===yo?vo:_u:c===yo?_u:vo}static jQueryInterface(c){return this.each(function(){const g=wo.getOrCreateInstance(this,c);if(typeof c!="number"){if(typeof c=="string"){if(g[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);g[c]()}}else g.to(c)})}}W.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(_){const c=s(this);if(!c||!c.classList.contains(Ih))return;_.preventDefault();const g=wo.getOrCreateInstance(c),I=this.getAttribute("data-bs-slide-to");return I?(g.to(I),void g._maybeEnableCycle()):rn.getDataAttribute(this,"slide")==="next"?(g.next(),void g._maybeEnableCycle()):(g.prev(),void g._maybeEnableCycle())}),W.on(window,"load.bs.carousel.data-api",()=>{const _=xe.find('[data-bs-ride="carousel"]');for(const c of _)wo.getOrCreateInstance(c)}),N(wo);const Eo="show",Ga="collapse",Ka="collapsing",Sh='[data-bs-toggle="collapse"]',To={parent:null,toggle:!0},Qa={parent:"(null|element)",toggle:"boolean"};class Ds extends Gn{constructor(c,g){super(c,g),this._isTransitioning=!1,this._triggerArray=[];const I=xe.find(Sh);for(const x of I){const L=i(x),$=xe.find(L).filter(B=>B===this._element);L!==null&&$.length&&this._triggerArray.push(x)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return To}static get DefaultType(){return Qa}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let c=[];if(this._config.parent&&(c=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(x=>x!==this._element).map(x=>Ds.getOrCreateInstance(x,{toggle:!1}))),c.length&&c[0]._isTransitioning||W.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const x of c)x.hide();const g=this._getDimension();this._element.classList.remove(Ga),this._element.classList.add(Ka),this._element.style[g]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const I=`scroll${g[0].toUpperCase()+g.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Ka),this._element.classList.add(Ga,Eo),this._element.style[g]="",W.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[g]=`${this._element[I]}px`}hide(){if(this._isTransitioning||!this._isShown()||W.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const c=this._getDimension();this._element.style[c]=`${this._element.getBoundingClientRect()[c]}px`,b(this._element),this._element.classList.add(Ka),this._element.classList.remove(Ga,Eo);for(const g of this._triggerArray){const I=s(g);I&&!this._isShown(I)&&this._addAriaAndCollapsedClass([g],!1)}this._isTransitioning=!0,this._element.style[c]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Ka),this._element.classList.add(Ga),W.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(c=this._element){return c.classList.contains(Eo)}_configAfterMerge(c){return c.toggle=Boolean(c.toggle),c.parent=u(c.parent),c}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const c=this._getFirstLevelChildren(Sh);for(const g of c){const I=s(g);I&&this._addAriaAndCollapsedClass([g],this._isShown(I))}}_getFirstLevelChildren(c){const g=xe.find(":scope .collapse .collapse",this._config.parent);return xe.find(c,this._config.parent).filter(I=>!g.includes(I))}_addAriaAndCollapsedClass(c,g){if(c.length)for(const I of c)I.classList.toggle("collapsed",!g),I.setAttribute("aria-expanded",g)}static jQueryInterface(c){const g={};return typeof c=="string"&&/show|hide/.test(c)&&(g.toggle=!1),this.each(function(){const I=Ds.getOrCreateInstance(this,g);if(typeof c=="string"){if(I[c]===void 0)throw new TypeError(`No method named "${c}"`);I[c]()}})}}W.on(document,"click.bs.collapse.data-api",Sh,function(_){(_.target.tagName==="A"||_.delegateTarget&&_.delegateTarget.tagName==="A")&&_.preventDefault();const c=i(this),g=xe.find(c);for(const I of g)Ds.getOrCreateInstance(I,{toggle:!1}).toggle()}),N(Ds);var dn="top",wt="bottom",gt="right",sn="left",Eu="auto",Ps=[dn,wt,gt,sn],Xi="start",Br="end",Rs="clippingParents",Ch="viewport",Io="popper",Tu="reference",So=Ps.reduce(function(_,c){return _.concat([c+"-"+Xi,c+"-"+Br])},[]),bh=[].concat(Ps,[Eu]).reduce(function(_,c){return _.concat([c,c+"-"+Xi,c+"-"+Br])},[]),$p="beforeRead",Up="read",kh="afterRead",Vp="beforeMain",Bp="main",xh="afterMain",jp="beforeWrite",Os="write",Nh="afterWrite",Iu=[$p,Up,kh,Vp,Bp,xh,jp,Os,Nh];function Ir(_){return _?(_.nodeName||"").toLowerCase():null}function An(_){if(_==null)return window;if(_.toString()!=="[object Window]"){var c=_.ownerDocument;return c&&c.defaultView||window}return _}function Ji(_){return _ instanceof An(_).Element||_ instanceof Element}function Sr(_){return _ instanceof An(_).HTMLElement||_ instanceof HTMLElement}function Su(_){return typeof ShadowRoot<"u"&&(_ instanceof An(_).ShadowRoot||_ instanceof ShadowRoot)}const Ah={name:"applyStyles",enabled:!0,phase:"write",fn:function(_){var c=_.state;Object.keys(c.elements).forEach(function(g){var I=c.styles[g]||{},x=c.attributes[g]||{},L=c.elements[g];Sr(L)&&Ir(L)&&(Object.assign(L.style,I),Object.keys(x).forEach(function($){var B=x[$];B===!1?L.removeAttribute($):L.setAttribute($,B===!0?"":B)}))})},effect:function(_){var c=_.state,g={popper:{position:c.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(c.elements.popper.style,g.popper),c.styles=g,c.elements.arrow&&Object.assign(c.elements.arrow.style,g.arrow),function(){Object.keys(c.elements).forEach(function(I){var x=c.elements[I],L=c.attributes[I]||{},$=Object.keys(c.styles.hasOwnProperty(I)?c.styles[I]:g[I]).reduce(function(B,Y){return B[Y]="",B},{});Sr(x)&&Ir(x)&&(Object.assign(x.style,$),Object.keys(L).forEach(function(B){x.removeAttribute(B)}))})}},requires:["computeStyles"]};function Kn(_){return _.split("-")[0]}var Zi=Math.max,Ya=Math.min,Ls=Math.round;function Cu(){var _=navigator.userAgentData;return _!=null&&_.brands?_.brands.map(function(c){return c.brand+"/"+c.version}).join(" "):navigator.userAgent}function qp(){return!/^((?!chrome|android).)*safari/i.test(Cu())}function es(_,c,g){c===void 0&&(c=!1),g===void 0&&(g=!1);var I=_.getBoundingClientRect(),x=1,L=1;c&&Sr(_)&&(x=_.offsetWidth>0&&Ls(I.width)/_.offsetWidth||1,L=_.offsetHeight>0&&Ls(I.height)/_.offsetHeight||1);var $=(Ji(_)?An(_):window).visualViewport,B=!qp()&&g,Y=(I.left+(B&&$?$.offsetLeft:0))/x,ne=(I.top+(B&&$?$.offsetTop:0))/L,X=I.width/x,ie=I.height/L;return{width:X,height:ie,top:ne,right:Y+X,bottom:ne+ie,left:Y,x:Y,y:ne}}function Dh(_){var c=es(_),g=_.offsetWidth,I=_.offsetHeight;return Math.abs(c.width-g)<=1&&(g=c.width),Math.abs(c.height-I)<=1&&(I=c.height),{x:_.offsetLeft,y:_.offsetTop,width:g,height:I}}function zp(_,c){var g=c.getRootNode&&c.getRootNode();if(_.contains(c))return!0;if(g&&Su(g)){var I=c;do{if(I&&_.isSameNode(I))return!0;I=I.parentNode||I.host}while(I)}return!1}function ii(_){return An(_).getComputedStyle(_)}function Wp(_){return["table","td","th"].indexOf(Ir(_))>=0}function si(_){return((Ji(_)?_.ownerDocument:_.document)||window.document).documentElement}function Xa(_){return Ir(_)==="html"?_:_.assignedSlot||_.parentNode||(Su(_)?_.host:null)||si(_)}function Dn(_){return Sr(_)&&ii(_).position!=="fixed"?_.offsetParent:null}function oi(_){for(var c=An(_),g=Dn(_);g&&Wp(g)&&ii(g).position==="static";)g=Dn(g);return g&&(Ir(g)==="html"||Ir(g)==="body"&&ii(g).position==="static")?c:g||function(I){var x=/firefox/i.test(Cu());if(/Trident/i.test(Cu())&&Sr(I)&&ii(I).position==="fixed")return null;var L=Xa(I);for(Su(L)&&(L=L.host);Sr(L)&&["html","body"].indexOf(Ir(L))<0;){var $=ii(L);if($.transform!=="none"||$.perspective!=="none"||$.contain==="paint"||["transform","perspective"].indexOf($.willChange)!==-1||x&&$.willChange==="filter"||x&&$.filter&&$.filter!=="none")return L;L=L.parentNode}return null}(_)||c}function Co(_){return["top","bottom"].indexOf(_)>=0?"x":"y"}function Ja(_,c,g){return Zi(_,Ya(c,g))}function Hp(_){return Object.assign({},{top:0,right:0,bottom:0,left:0},_)}function bu(_,c){return c.reduce(function(g,I){return g[I]=_,g},{})}const Ph={name:"arrow",enabled:!0,phase:"main",fn:function(_){var c,g=_.state,I=_.name,x=_.options,L=g.elements.arrow,$=g.modifiersData.popperOffsets,B=Kn(g.placement),Y=Co(B),ne=[sn,gt].indexOf(B)>=0?"height":"width";if(L&&$){var X=function(mt,dt){return Hp(typeof(mt=typeof mt=="function"?mt(Object.assign({},dt.rects,{placement:dt.placement})):mt)!="number"?mt:bu(mt,Ps))}(x.padding,g),ie=Dh(L),Se=Y==="y"?dn:sn,_e=Y==="y"?wt:gt,fe=g.rects.reference[ne]+g.rects.reference[Y]-$[Y]-g.rects.popper[ne],ke=$[Y]-g.rects.reference[Y],Ne=oi(L),$e=Ne?Y==="y"?Ne.clientHeight||0:Ne.clientWidth||0:0,Tt=fe/2-ke/2,ze=X[Se],ot=$e-ie[ne]-X[_e],Be=$e/2-ie[ne]/2+Tt,Xe=Ja(ze,Be,ot),ht=Y;g.modifiersData[I]=((c={})[ht]=Xe,c.centerOffset=Xe-Be,c)}},effect:function(_){var c=_.state,g=_.options.element,I=g===void 0?"[data-popper-arrow]":g;I!=null&&(typeof I!="string"||(I=c.elements.popper.querySelector(I)))&&zp(c.elements.popper,I)&&(c.elements.arrow=I)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ki(_){return _.split("-")[1]}var Gp={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Kp(_){var c,g=_.popper,I=_.popperRect,x=_.placement,L=_.variation,$=_.offsets,B=_.position,Y=_.gpuAcceleration,ne=_.adaptive,X=_.roundOffsets,ie=_.isFixed,Se=$.x,_e=Se===void 0?0:Se,fe=$.y,ke=fe===void 0?0:fe,Ne=typeof X=="function"?X({x:_e,y:ke}):{x:_e,y:ke};_e=Ne.x,ke=Ne.y;var $e=$.hasOwnProperty("x"),Tt=$.hasOwnProperty("y"),ze=sn,ot=dn,Be=window;if(ne){var Xe=oi(g),ht="clientHeight",mt="clientWidth";Xe===An(g)&&ii(Xe=si(g)).position!=="static"&&B==="absolute"&&(ht="scrollHeight",mt="scrollWidth"),(x===dn||(x===sn||x===gt)&&L===Br)&&(ot=wt,ke-=(ie&&Xe===Be&&Be.visualViewport?Be.visualViewport.height:Xe[ht])-I.height,ke*=Y?1:-1),x!==sn&&(x!==dn&&x!==wt||L!==Br)||(ze=gt,_e-=(ie&&Xe===Be&&Be.visualViewport?Be.visualViewport.width:Xe[mt])-I.width,_e*=Y?1:-1)}var dt,Qt=Object.assign({position:B},ne&&Gp),jr=X===!0?function(Oi){var lr=Oi.x,ui=Oi.y,ur=window.devicePixelRatio||1;return{x:Ls(lr*ur)/ur||0,y:Ls(ui*ur)/ur||0}}({x:_e,y:ke}):{x:_e,y:ke};return _e=jr.x,ke=jr.y,Y?Object.assign({},Qt,((dt={})[ot]=Tt?"0":"",dt[ze]=$e?"0":"",dt.transform=(Be.devicePixelRatio||1)<=1?"translate("+_e+"px, "+ke+"px)":"translate3d("+_e+"px, "+ke+"px, 0)",dt)):Object.assign({},Qt,((c={})[ot]=Tt?ke+"px":"",c[ze]=$e?_e+"px":"",c.transform="",c))}const Rh={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(_){var c=_.state,g=_.options,I=g.gpuAcceleration,x=I===void 0||I,L=g.adaptive,$=L===void 0||L,B=g.roundOffsets,Y=B===void 0||B,ne={placement:Kn(c.placement),variation:ki(c.placement),popper:c.elements.popper,popperRect:c.rects.popper,gpuAcceleration:x,isFixed:c.options.strategy==="fixed"};c.modifiersData.popperOffsets!=null&&(c.styles.popper=Object.assign({},c.styles.popper,Kp(Object.assign({},ne,{offsets:c.modifiersData.popperOffsets,position:c.options.strategy,adaptive:$,roundOffsets:Y})))),c.modifiersData.arrow!=null&&(c.styles.arrow=Object.assign({},c.styles.arrow,Kp(Object.assign({},ne,{offsets:c.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Y})))),c.attributes.popper=Object.assign({},c.attributes.popper,{"data-popper-placement":c.placement})},data:{}};var Qn={passive:!0};const ku={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(_){var c=_.state,g=_.instance,I=_.options,x=I.scroll,L=x===void 0||x,$=I.resize,B=$===void 0||$,Y=An(c.elements.popper),ne=[].concat(c.scrollParents.reference,c.scrollParents.popper);return L&&ne.forEach(function(X){X.addEventListener("scroll",g.update,Qn)}),B&&Y.addEventListener("resize",g.update,Qn),function(){L&&ne.forEach(function(X){X.removeEventListener("scroll",g.update,Qn)}),B&&Y.removeEventListener("resize",g.update,Qn)}},data:{}};var Za={left:"right",right:"left",bottom:"top",top:"bottom"};function xu(_){return _.replace(/left|right|bottom|top/g,function(c){return Za[c]})}var m_={start:"end",end:"start"};function ts(_){return _.replace(/start|end/g,function(c){return m_[c]})}function xi(_){var c=An(_);return{scrollLeft:c.pageXOffset,scrollTop:c.pageYOffset}}function el(_){return es(si(_)).left+xi(_).scrollLeft}function Oh(_){var c=ii(_),g=c.overflow,I=c.overflowX,x=c.overflowY;return/auto|scroll|overlay|hidden/.test(g+x+I)}function Lh(_){return["html","body","#document"].indexOf(Ir(_))>=0?_.ownerDocument.body:Sr(_)&&Oh(_)?_:Lh(Xa(_))}function bo(_,c){var g;c===void 0&&(c=[]);var I=Lh(_),x=I===((g=_.ownerDocument)==null?void 0:g.body),L=An(I),$=x?[L].concat(L.visualViewport||[],Oh(I)?I:[]):I,B=c.concat($);return x?B:B.concat(bo(Xa($)))}function Ms(_){return Object.assign({},_,{left:_.x,top:_.y,right:_.x+_.width,bottom:_.y+_.height})}function Mh(_,c,g){return c===Ch?Ms(function(I,x){var L=An(I),$=si(I),B=L.visualViewport,Y=$.clientWidth,ne=$.clientHeight,X=0,ie=0;if(B){Y=B.width,ne=B.height;var Se=qp();(Se||!Se&&x==="fixed")&&(X=B.offsetLeft,ie=B.offsetTop)}return{width:Y,height:ne,x:X+el(I),y:ie}}(_,g)):Ji(c)?function(I,x){var L=es(I,!1,x==="fixed");return L.top=L.top+I.clientTop,L.left=L.left+I.clientLeft,L.bottom=L.top+I.clientHeight,L.right=L.left+I.clientWidth,L.width=I.clientWidth,L.height=I.clientHeight,L.x=L.left,L.y=L.top,L}(c,g):Ms(function(I){var x,L=si(I),$=xi(I),B=(x=I.ownerDocument)==null?void 0:x.body,Y=Zi(L.scrollWidth,L.clientWidth,B?B.scrollWidth:0,B?B.clientWidth:0),ne=Zi(L.scrollHeight,L.clientHeight,B?B.scrollHeight:0,B?B.clientHeight:0),X=-$.scrollLeft+el(I),ie=-$.scrollTop;return ii(B||L).direction==="rtl"&&(X+=Zi(L.clientWidth,B?B.clientWidth:0)-Y),{width:Y,height:ne,x:X,y:ie}}(si(_)))}function Nu(_){var c,g=_.reference,I=_.element,x=_.placement,L=x?Kn(x):null,$=x?ki(x):null,B=g.x+g.width/2-I.width/2,Y=g.y+g.height/2-I.height/2;switch(L){case dn:c={x:B,y:g.y-I.height};break;case wt:c={x:B,y:g.y+g.height};break;case gt:c={x:g.x+g.width,y:Y};break;case sn:c={x:g.x-I.width,y:Y};break;default:c={x:g.x,y:g.y}}var ne=L?Co(L):null;if(ne!=null){var X=ne==="y"?"height":"width";switch($){case Xi:c[ne]=c[ne]-(g[X]/2-I[X]/2);break;case Br:c[ne]=c[ne]+(g[X]/2-I[X]/2)}}return c}function ko(_,c){c===void 0&&(c={});var g=c,I=g.placement,x=I===void 0?_.placement:I,L=g.strategy,$=L===void 0?_.strategy:L,B=g.boundary,Y=B===void 0?Rs:B,ne=g.rootBoundary,X=ne===void 0?Ch:ne,ie=g.elementContext,Se=ie===void 0?Io:ie,_e=g.altBoundary,fe=_e!==void 0&&_e,ke=g.padding,Ne=ke===void 0?0:ke,$e=Hp(typeof Ne!="number"?Ne:bu(Ne,Ps)),Tt=Se===Io?Tu:Io,ze=_.rects.popper,ot=_.elements[fe?Tt:Se],Be=function(lr,ui,ur,On){var ss=ui==="clippingParents"?function(vt){var cr=bo(Xa(vt)),ci=["absolute","fixed"].indexOf(ii(vt).position)>=0&&Sr(vt)?oi(vt):vt;return Ji(ci)?cr.filter(function(Lo){return Ji(Lo)&&zp(Lo,ci)&&Ir(Lo)!=="body"}):[]}(lr):[].concat(ui),os=[].concat(ss,[ur]),Bu=os[0],pn=os.reduce(function(vt,cr){var ci=Mh(lr,cr,On);return vt.top=Zi(ci.top,vt.top),vt.right=Ya(ci.right,vt.right),vt.bottom=Ya(ci.bottom,vt.bottom),vt.left=Zi(ci.left,vt.left),vt},Mh(lr,Bu,On));return pn.width=pn.right-pn.left,pn.height=pn.bottom-pn.top,pn.x=pn.left,pn.y=pn.top,pn}(Ji(ot)?ot:ot.contextElement||si(_.elements.popper),Y,X,$),Xe=es(_.elements.reference),ht=Nu({reference:Xe,element:ze,strategy:"absolute",placement:x}),mt=Ms(Object.assign({},ze,ht)),dt=Se===Io?mt:Xe,Qt={top:Be.top-dt.top+$e.top,bottom:dt.bottom-Be.bottom+$e.bottom,left:Be.left-dt.left+$e.left,right:dt.right-Be.right+$e.right},jr=_.modifiersData.offset;if(Se===Io&&jr){var Oi=jr[x];Object.keys(Qt).forEach(function(lr){var ui=[gt,wt].indexOf(lr)>=0?1:-1,ur=[dn,wt].indexOf(lr)>=0?"y":"x";Qt[lr]+=Oi[ur]*ui})}return Qt}function Qp(_,c){c===void 0&&(c={});var g=c,I=g.placement,x=g.boundary,L=g.rootBoundary,$=g.padding,B=g.flipVariations,Y=g.allowedAutoPlacements,ne=Y===void 0?bh:Y,X=ki(I),ie=X?B?So:So.filter(function(fe){return ki(fe)===X}):Ps,Se=ie.filter(function(fe){return ne.indexOf(fe)>=0});Se.length===0&&(Se=ie);var _e=Se.reduce(function(fe,ke){return fe[ke]=ko(_,{placement:ke,boundary:x,rootBoundary:L,padding:$})[Kn(ke)],fe},{});return Object.keys(_e).sort(function(fe,ke){return _e[fe]-_e[ke]})}const Yp={name:"flip",enabled:!0,phase:"main",fn:function(_){var c=_.state,g=_.options,I=_.name;if(!c.modifiersData[I]._skip){for(var x=g.mainAxis,L=x===void 0||x,$=g.altAxis,B=$===void 0||$,Y=g.fallbackPlacements,ne=g.padding,X=g.boundary,ie=g.rootBoundary,Se=g.altBoundary,_e=g.flipVariations,fe=_e===void 0||_e,ke=g.allowedAutoPlacements,Ne=c.options.placement,$e=Kn(Ne),Tt=Y||($e!==Ne&&fe?function(vt){if(Kn(vt)===Eu)return[];var cr=xu(vt);return[ts(vt),cr,ts(cr)]}(Ne):[xu(Ne)]),ze=[Ne].concat(Tt).reduce(function(vt,cr){return vt.concat(Kn(cr)===Eu?Qp(c,{placement:cr,boundary:X,rootBoundary:ie,padding:ne,flipVariations:fe,allowedAutoPlacements:ke}):cr)},[]),ot=c.rects.reference,Be=c.rects.popper,Xe=new Map,ht=!0,mt=ze[0],dt=0;dt<ze.length;dt++){var Qt=ze[dt],jr=Kn(Qt),Oi=ki(Qt)===Xi,lr=[dn,wt].indexOf(jr)>=0,ui=lr?"width":"height",ur=ko(c,{placement:Qt,boundary:X,rootBoundary:ie,altBoundary:Se,padding:ne}),On=lr?Oi?gt:sn:Oi?wt:dn;ot[ui]>Be[ui]&&(On=xu(On));var ss=xu(On),os=[];if(L&&os.push(ur[jr]<=0),B&&os.push(ur[On]<=0,ur[ss]<=0),os.every(function(vt){return vt})){mt=Qt,ht=!1;break}Xe.set(Qt,os)}if(ht)for(var Bu=function(vt){var cr=ze.find(function(ci){var Lo=Xe.get(ci);if(Lo)return Lo.slice(0,vt).every(function(hg){return hg})});if(cr)return mt=cr,"break"},pn=fe?3:1;pn>0&&Bu(pn)!=="break";pn--);c.placement!==mt&&(c.modifiersData[I]._skip=!0,c.placement=mt,c.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Xp(_,c,g){return g===void 0&&(g={x:0,y:0}),{top:_.top-c.height-g.y,right:_.right-c.width+g.x,bottom:_.bottom-c.height+g.y,left:_.left-c.width-g.x}}function Au(_){return[dn,gt,wt,sn].some(function(c){return _[c]>=0})}const Jp={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(_){var c=_.state,g=_.name,I=c.rects.reference,x=c.rects.popper,L=c.modifiersData.preventOverflow,$=ko(c,{elementContext:"reference"}),B=ko(c,{altBoundary:!0}),Y=Xp($,I),ne=Xp(B,x,L),X=Au(Y),ie=Au(ne);c.modifiersData[g]={referenceClippingOffsets:Y,popperEscapeOffsets:ne,isReferenceHidden:X,hasPopperEscaped:ie},c.attributes.popper=Object.assign({},c.attributes.popper,{"data-popper-reference-hidden":X,"data-popper-escaped":ie})}},Zp={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(_){var c=_.state,g=_.options,I=_.name,x=g.offset,L=x===void 0?[0,0]:x,$=bh.reduce(function(X,ie){return X[ie]=function(Se,_e,fe){var ke=Kn(Se),Ne=[sn,dn].indexOf(ke)>=0?-1:1,$e=typeof fe=="function"?fe(Object.assign({},_e,{placement:Se})):fe,Tt=$e[0],ze=$e[1];return Tt=Tt||0,ze=(ze||0)*Ne,[sn,gt].indexOf(ke)>=0?{x:ze,y:Tt}:{x:Tt,y:ze}}(ie,c.rects,L),X},{}),B=$[c.placement],Y=B.x,ne=B.y;c.modifiersData.popperOffsets!=null&&(c.modifiersData.popperOffsets.x+=Y,c.modifiersData.popperOffsets.y+=ne),c.modifiersData[I]=$}},Fh={name:"popperOffsets",enabled:!0,phase:"read",fn:function(_){var c=_.state,g=_.name;c.modifiersData[g]=Nu({reference:c.rects.reference,element:c.rects.popper,strategy:"absolute",placement:c.placement})},data:{}},eg={name:"preventOverflow",enabled:!0,phase:"main",fn:function(_){var c=_.state,g=_.options,I=_.name,x=g.mainAxis,L=x===void 0||x,$=g.altAxis,B=$!==void 0&&$,Y=g.boundary,ne=g.rootBoundary,X=g.altBoundary,ie=g.padding,Se=g.tether,_e=Se===void 0||Se,fe=g.tetherOffset,ke=fe===void 0?0:fe,Ne=ko(c,{boundary:Y,rootBoundary:ne,padding:ie,altBoundary:X}),$e=Kn(c.placement),Tt=ki(c.placement),ze=!Tt,ot=Co($e),Be=ot==="x"?"y":"x",Xe=c.modifiersData.popperOffsets,ht=c.rects.reference,mt=c.rects.popper,dt=typeof ke=="function"?ke(Object.assign({},c.rects,{placement:c.placement})):ke,Qt=typeof dt=="number"?{mainAxis:dt,altAxis:dt}:Object.assign({mainAxis:0,altAxis:0},dt),jr=c.modifiersData.offset?c.modifiersData.offset[c.placement]:null,Oi={x:0,y:0};if(Xe){if(L){var lr,ui=ot==="y"?dn:sn,ur=ot==="y"?wt:gt,On=ot==="y"?"height":"width",ss=Xe[ot],os=ss+Ne[ui],Bu=ss-Ne[ur],pn=_e?-mt[On]/2:0,vt=Tt===Xi?ht[On]:mt[On],cr=Tt===Xi?-mt[On]:-ht[On],ci=c.elements.arrow,Lo=_e&&ci?Dh(ci):{width:0,height:0},hg=c.modifiersData["arrow#persistent"]?c.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},TC=hg[ui],IC=hg[ur],dg=Ja(0,ht[On],Lo[On]),dF=ze?ht[On]/2-pn-dg-TC-Qt.mainAxis:vt-dg-TC-Qt.mainAxis,fF=ze?-ht[On]/2+pn+dg+IC+Qt.mainAxis:cr+dg+IC+Qt.mainAxis,A_=c.elements.arrow&&oi(c.elements.arrow),pF=A_?ot==="y"?A_.clientTop||0:A_.clientLeft||0:0,SC=(lr=jr==null?void 0:jr[ot])!=null?lr:0,gF=ss+fF-SC,CC=Ja(_e?Ya(os,ss+dF-SC-pF):os,ss,_e?Zi(Bu,gF):Bu);Xe[ot]=CC,Oi[ot]=CC-ss}if(B){var bC,mF=ot==="x"?dn:sn,yF=ot==="x"?wt:gt,sl=Xe[Be],fg=Be==="y"?"height":"width",kC=sl+Ne[mF],xC=sl-Ne[yF],D_=[dn,sn].indexOf($e)!==-1,NC=(bC=jr==null?void 0:jr[Be])!=null?bC:0,AC=D_?kC:sl-ht[fg]-mt[fg]-NC+Qt.altAxis,DC=D_?sl+ht[fg]+mt[fg]-NC-Qt.altAxis:xC,PC=_e&&D_?function(vF,_F,P_){var RC=Ja(vF,_F,P_);return RC>P_?P_:RC}(AC,sl,DC):Ja(_e?AC:kC,sl,_e?DC:xC);Xe[Be]=PC,Oi[Be]=PC-sl}c.modifiersData[I]=Oi}},requiresIfExists:["offset"]};function y_(_,c,g){g===void 0&&(g=!1);var I,x,L=Sr(c),$=Sr(c)&&function(ie){var Se=ie.getBoundingClientRect(),_e=Ls(Se.width)/ie.offsetWidth||1,fe=Ls(Se.height)/ie.offsetHeight||1;return _e!==1||fe!==1}(c),B=si(c),Y=es(_,$,g),ne={scrollLeft:0,scrollTop:0},X={x:0,y:0};return(L||!L&&!g)&&((Ir(c)!=="body"||Oh(B))&&(ne=(I=c)!==An(I)&&Sr(I)?{scrollLeft:(x=I).scrollLeft,scrollTop:x.scrollTop}:xi(I)),Sr(c)?((X=es(c,!0)).x+=c.clientLeft,X.y+=c.clientTop):B&&(X.x=el(B))),{x:Y.left+ne.scrollLeft-X.x,y:Y.top+ne.scrollTop-X.y,width:Y.width,height:Y.height}}function v_(_){var c=new Map,g=new Set,I=[];function x(L){g.add(L.name),[].concat(L.requires||[],L.requiresIfExists||[]).forEach(function($){if(!g.has($)){var B=c.get($);B&&x(B)}}),I.push(L)}return _.forEach(function(L){c.set(L.name,L)}),_.forEach(function(L){g.has(L.name)||x(L)}),I}var tg={placement:"bottom",modifiers:[],strategy:"absolute"};function $h(){for(var _=arguments.length,c=new Array(_),g=0;g<_;g++)c[g]=arguments[g];return!c.some(function(I){return!(I&&typeof I.getBoundingClientRect=="function")})}function xo(_){_===void 0&&(_={});var c=_,g=c.defaultModifiers,I=g===void 0?[]:g,x=c.defaultOptions,L=x===void 0?tg:x;return function($,B,Y){Y===void 0&&(Y=L);var ne,X,ie={placement:"bottom",orderedModifiers:[],options:Object.assign({},tg,L),modifiersData:{},elements:{reference:$,popper:B},attributes:{},styles:{}},Se=[],_e=!1,fe={state:ie,setOptions:function(Ne){var $e=typeof Ne=="function"?Ne(ie.options):Ne;ke(),ie.options=Object.assign({},L,ie.options,$e),ie.scrollParents={reference:Ji($)?bo($):$.contextElement?bo($.contextElement):[],popper:bo(B)};var Tt,ze,ot=function(Be){var Xe=v_(Be);return Iu.reduce(function(ht,mt){return ht.concat(Xe.filter(function(dt){return dt.phase===mt}))},[])}((Tt=[].concat(I,ie.options.modifiers),ze=Tt.reduce(function(Be,Xe){var ht=Be[Xe.name];return Be[Xe.name]=ht?Object.assign({},ht,Xe,{options:Object.assign({},ht.options,Xe.options),data:Object.assign({},ht.data,Xe.data)}):Xe,Be},{}),Object.keys(ze).map(function(Be){return ze[Be]})));return ie.orderedModifiers=ot.filter(function(Be){return Be.enabled}),ie.orderedModifiers.forEach(function(Be){var Xe=Be.name,ht=Be.options,mt=ht===void 0?{}:ht,dt=Be.effect;if(typeof dt=="function"){var Qt=dt({state:ie,name:Xe,instance:fe,options:mt});Se.push(Qt||function(){})}}),fe.update()},forceUpdate:function(){if(!_e){var Ne=ie.elements,$e=Ne.reference,Tt=Ne.popper;if($h($e,Tt)){ie.rects={reference:y_($e,oi(Tt),ie.options.strategy==="fixed"),popper:Dh(Tt)},ie.reset=!1,ie.placement=ie.options.placement,ie.orderedModifiers.forEach(function(dt){return ie.modifiersData[dt.name]=Object.assign({},dt.data)});for(var ze=0;ze<ie.orderedModifiers.length;ze++)if(ie.reset!==!0){var ot=ie.orderedModifiers[ze],Be=ot.fn,Xe=ot.options,ht=Xe===void 0?{}:Xe,mt=ot.name;typeof Be=="function"&&(ie=Be({state:ie,options:ht,name:mt,instance:fe})||ie)}else ie.reset=!1,ze=-1}}},update:(ne=function(){return new Promise(function(Ne){fe.forceUpdate(),Ne(ie)})},function(){return X||(X=new Promise(function(Ne){Promise.resolve().then(function(){X=void 0,Ne(ne())})})),X}),destroy:function(){ke(),_e=!0}};if(!$h($,B))return fe;function ke(){Se.forEach(function(Ne){return Ne()}),Se=[]}return fe.setOptions(Y).then(function(Ne){!_e&&Y.onFirstUpdate&&Y.onFirstUpdate(Ne)}),fe}}var ng=xo(),Uh=xo({defaultModifiers:[ku,Fh,Rh,Ah]}),Du=xo({defaultModifiers:[ku,Fh,Rh,Ah,Zp,Yp,eg,Ph,Jp]});const Vh=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:xo,detectOverflow:ko,createPopperBase:ng,createPopper:Du,createPopperLite:Uh,top:dn,bottom:wt,right:gt,left:sn,auto:Eu,basePlacements:Ps,start:Xi,end:Br,clippingParents:Rs,viewport:Ch,popper:Io,reference:Tu,variationPlacements:So,placements:bh,beforeRead:$p,read:Up,afterRead:kh,beforeMain:Vp,main:Bp,afterMain:xh,beforeWrite:jp,write:Os,afterWrite:Nh,modifierPhases:Iu,applyStyles:Ah,arrow:Ph,computeStyles:Rh,eventListeners:ku,flip:Yp,hide:Jp,offset:Zp,popperOffsets:Fh,preventOverflow:eg},Symbol.toStringTag,{value:"Module"})),Pu="dropdown",__="ArrowUp",rg="ArrowDown",ig="click.bs.dropdown.data-api",No="keydown.bs.dropdown.data-api",Ao="show",Ni='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',w_=`${Ni}.show`,Ru=".dropdown-menu",E_=J()?"top-end":"top-start",l=J()?"top-start":"top-end",d=J()?"bottom-end":"bottom-start",f=J()?"bottom-start":"bottom-end",y=J()?"left-start":"right-start",E=J()?"right-start":"left-start",T={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},S={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class R extends Gn{constructor(c,g){super(c,g),this._popper=null,this._parent=this._element.parentNode,this._menu=xe.next(this._element,Ru)[0]||xe.prev(this._element,Ru)[0]||xe.findOne(Ru,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return T}static get DefaultType(){return S}static get NAME(){return Pu}toggle(){return this._isShown()?this.hide():this.show()}show(){if(p(this._element)||this._isShown())return;const c={relatedTarget:this._element};if(!W.trigger(this._element,"show.bs.dropdown",c).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const g of[].concat(...document.body.children))W.on(g,"mouseover",w);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ao),this._element.classList.add(Ao),W.trigger(this._element,"shown.bs.dropdown",c)}}hide(){if(p(this._element)||!this._isShown())return;const c={relatedTarget:this._element};this._completeHide(c)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(c){if(!W.trigger(this._element,"hide.bs.dropdown",c).defaultPrevented){if("ontouchstart"in document.documentElement)for(const g of[].concat(...document.body.children))W.off(g,"mouseover",w);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ao),this._element.classList.remove(Ao),this._element.setAttribute("aria-expanded","false"),rn.removeDataAttribute(this._menu,"popper"),W.trigger(this._element,"hidden.bs.dropdown",c)}}_getConfig(c){if(typeof(c=super._getConfig(c)).reference=="object"&&!a(c.reference)&&typeof c.reference.getBoundingClientRect!="function")throw new TypeError(`${Pu.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return c}_createPopper(){if(Vh===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let c=this._element;this._config.reference==="parent"?c=this._parent:a(this._config.reference)?c=u(this._config.reference):typeof this._config.reference=="object"&&(c=this._config.reference);const g=this._getPopperConfig();this._popper=Du(c,this._menu,g)}_isShown(){return this._menu.classList.contains(Ao)}_getPlacement(){const c=this._parent;if(c.classList.contains("dropend"))return y;if(c.classList.contains("dropstart"))return E;if(c.classList.contains("dropup-center"))return"top";if(c.classList.contains("dropdown-center"))return"bottom";const g=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return c.classList.contains("dropup")?g?l:E_:g?f:d}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:c}=this._config;return typeof c=="string"?c.split(",").map(g=>Number.parseInt(g,10)):typeof c=="function"?g=>c(g,this._element):c}_getPopperConfig(){const c={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(rn.setDataAttribute(this._menu,"popper","static"),c.modifiers=[{name:"applyStyles",enabled:!1}]),{...c,...typeof this._config.popperConfig=="function"?this._config.popperConfig(c):this._config.popperConfig}}_selectMenuItem({key:c,target:g}){const I=xe.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(x=>h(x));I.length&&Q(I,g,c===rg,!I.includes(g)).focus()}static jQueryInterface(c){return this.each(function(){const g=R.getOrCreateInstance(this,c);if(typeof c=="string"){if(g[c]===void 0)throw new TypeError(`No method named "${c}"`);g[c]()}})}static clearMenus(c){if(c.button===2||c.type==="keyup"&&c.key!=="Tab")return;const g=xe.find(w_);for(const I of g){const x=R.getInstance(I);if(!x||x._config.autoClose===!1)continue;const L=c.composedPath(),$=L.includes(x._menu);if(L.includes(x._element)||x._config.autoClose==="inside"&&!$||x._config.autoClose==="outside"&&$||x._menu.contains(c.target)&&(c.type==="keyup"&&c.key==="Tab"||/input|select|option|textarea|form/i.test(c.target.tagName)))continue;const B={relatedTarget:x._element};c.type==="click"&&(B.clickEvent=c),x._completeHide(B)}}static dataApiKeydownHandler(c){const g=/input|textarea/i.test(c.target.tagName),I=c.key==="Escape",x=[__,rg].includes(c.key);if(!x&&!I||g&&!I)return;c.preventDefault();const L=this.matches(Ni)?this:xe.prev(this,Ni)[0]||xe.next(this,Ni)[0]||xe.findOne(Ni,c.delegateTarget.parentNode),$=R.getOrCreateInstance(L);if(x)return c.stopPropagation(),$.show(),void $._selectMenuItem(c);$._isShown()&&(c.stopPropagation(),$.hide(),L.focus())}}W.on(document,No,Ni,R.dataApiKeydownHandler),W.on(document,No,Ru,R.dataApiKeydownHandler),W.on(document,ig,R.clearMenus),W.on(document,"keyup.bs.dropdown.data-api",R.clearMenus),W.on(document,ig,Ni,function(_){_.preventDefault(),R.getOrCreateInstance(this).toggle()}),N(R);const A=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",V=".sticky-top",z="padding-right",Z="margin-right";class j{constructor(){this._element=document.body}getWidth(){const c=document.documentElement.clientWidth;return Math.abs(window.innerWidth-c)}hide(){const c=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,z,g=>g+c),this._setElementAttributes(A,z,g=>g+c),this._setElementAttributes(V,Z,g=>g-c)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,z),this._resetElementAttributes(A,z),this._resetElementAttributes(V,Z)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(c,g,I){const x=this.getWidth();this._applyManipulationCallback(c,L=>{if(L!==this._element&&window.innerWidth>L.clientWidth+x)return;this._saveInitialAttribute(L,g);const $=window.getComputedStyle(L).getPropertyValue(g);L.style.setProperty(g,`${I(Number.parseFloat($))}px`)})}_saveInitialAttribute(c,g){const I=c.style.getPropertyValue(g);I&&rn.setDataAttribute(c,g,I)}_resetElementAttributes(c,g){this._applyManipulationCallback(c,I=>{const x=rn.getDataAttribute(I,g);x!==null?(rn.removeDataAttribute(I,g),I.style.setProperty(g,x)):I.style.removeProperty(g)})}_applyManipulationCallback(c,g){if(a(c))g(c);else for(const I of xe.find(c,this._element))g(I)}}const G="show",we="mousedown.bs.backdrop",Oe={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ee={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Bt extends Er{constructor(c){super(),this._config=this._getConfig(c),this._isAppended=!1,this._element=null}static get Default(){return Oe}static get DefaultType(){return Ee}static get NAME(){return"backdrop"}show(c){if(!this._config.isVisible)return void D(c);this._append();const g=this._getElement();this._config.isAnimated&&b(g),g.classList.add(G),this._emulateAnimation(()=>{D(c)})}hide(c){this._config.isVisible?(this._getElement().classList.remove(G),this._emulateAnimation(()=>{this.dispose(),D(c)})):D(c)}dispose(){this._isAppended&&(W.off(this._element,we),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const c=document.createElement("div");c.className=this._config.className,this._config.isAnimated&&c.classList.add("fade"),this._element=c}return this._element}_configAfterMerge(c){return c.rootElement=u(c.rootElement),c}_append(){if(this._isAppended)return;const c=this._getElement();this._config.rootElement.append(c),W.on(c,we,()=>{D(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(c){M(c,this._getElement(),this._config.isAnimated)}}const Lt=".bs.focustrap",Yn="backward",at={autofocus:!0,trapElement:null},Pe={autofocus:"boolean",trapElement:"element"};class Pn extends Er{constructor(c){super(),this._config=this._getConfig(c),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return at}static get DefaultType(){return Pe}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),W.off(document,Lt),W.on(document,"focusin.bs.focustrap",c=>this._handleFocusin(c)),W.on(document,"keydown.tab.bs.focustrap",c=>this._handleKeydown(c)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,W.off(document,Lt))}_handleFocusin(c){const{trapElement:g}=this._config;if(c.target===document||c.target===g||g.contains(c.target))return;const I=xe.focusableChildren(g);I.length===0?g.focus():this._lastTabNavDirection===Yn?I[I.length-1].focus():I[0].focus()}_handleKeydown(c){c.key==="Tab"&&(this._lastTabNavDirection=c.shiftKey?Yn:"forward")}}const Ge="hidden.bs.modal",Et="show.bs.modal",Do="modal-open",tl="show",Rn="modal-static",Fs={backdrop:!0,focus:!0,keyboard:!0},$s={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class jt extends Gn{constructor(c,g){super(c,g),this._dialog=xe.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new j,this._addEventListeners()}static get Default(){return Fs}static get DefaultType(){return $s}static get NAME(){return"modal"}toggle(c){return this._isShown?this.hide():this.show(c)}show(c){this._isShown||this._isTransitioning||W.trigger(this._element,Et,{relatedTarget:c}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Do),this._adjustDialog(),this._backdrop.show(()=>this._showElement(c)))}hide(){this._isShown&&!this._isTransitioning&&(W.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(tl),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){for(const c of[window,this._dialog])W.off(c,".bs.modal");this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Bt({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Pn({trapElement:this._element})}_showElement(c){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const g=xe.findOne(".modal-body",this._dialog);g&&(g.scrollTop=0),b(this._element),this._element.classList.add(tl),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,W.trigger(this._element,"shown.bs.modal",{relatedTarget:c})},this._dialog,this._isAnimated())}_addEventListeners(){W.on(this._element,"keydown.dismiss.bs.modal",c=>{if(c.key==="Escape")return this._config.keyboard?(c.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),W.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),W.on(this._element,"mousedown.dismiss.bs.modal",c=>{W.one(this._element,"click.dismiss.bs.modal",g=>{this._element===c.target&&this._element===g.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Do),this._resetAdjustments(),this._scrollBar.reset(),W.trigger(this._element,Ge)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(W.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const c=this._element.scrollHeight>document.documentElement.clientHeight,g=this._element.style.overflowY;g==="hidden"||this._element.classList.contains(Rn)||(c||(this._element.style.overflowY="hidden"),this._element.classList.add(Rn),this._queueCallback(()=>{this._element.classList.remove(Rn),this._queueCallback(()=>{this._element.style.overflowY=g},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const c=this._element.scrollHeight>document.documentElement.clientHeight,g=this._scrollBar.getWidth(),I=g>0;if(I&&!c){const x=J()?"paddingLeft":"paddingRight";this._element.style[x]=`${g}px`}if(!I&&c){const x=J()?"paddingRight":"paddingLeft";this._element.style[x]=`${g}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(c,g){return this.each(function(){const I=jt.getOrCreateInstance(this,c);if(typeof c=="string"){if(I[c]===void 0)throw new TypeError(`No method named "${c}"`);I[c](g)}})}}W.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(_){const c=s(this);["A","AREA"].includes(this.tagName)&&_.preventDefault(),W.one(c,Et,I=>{I.defaultPrevented||W.one(c,Ge,()=>{h(this)&&this.focus()})});const g=xe.findOne(".modal.show");g&&jt.getInstance(g).hide(),jt.getOrCreateInstance(c).toggle(this)}),Tr(jt),N(jt);const Ai="show",ar="showing",Di="hiding",Bh=".offcanvas.show",ns="hidePrevented.bs.offcanvas",Ou="hidden.bs.offcanvas",rt={backdrop:!0,keyboard:!0,scroll:!1},Us={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ai extends Gn{constructor(c,g){super(c,g),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return rt}static get DefaultType(){return Us}static get NAME(){return"offcanvas"}toggle(c){return this._isShown?this.hide():this.show(c)}show(c){this._isShown||W.trigger(this._element,"show.bs.offcanvas",{relatedTarget:c}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new j().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ar),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Ai),this._element.classList.remove(ar),W.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:c})},this._element,!0))}hide(){this._isShown&&(W.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Di),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Ai,Di),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new j().reset(),W.trigger(this._element,Ou)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const c=Boolean(this._config.backdrop);return new Bt({className:"offcanvas-backdrop",isVisible:c,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:c?()=>{this._config.backdrop!=="static"?this.hide():W.trigger(this._element,ns)}:null})}_initializeFocusTrap(){return new Pn({trapElement:this._element})}_addEventListeners(){W.on(this._element,"keydown.dismiss.bs.offcanvas",c=>{c.key==="Escape"&&(this._config.keyboard?this.hide():W.trigger(this._element,ns))})}static jQueryInterface(c){return this.each(function(){const g=ai.getOrCreateInstance(this,c);if(typeof c=="string"){if(g[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);g[c](this)}})}}W.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(_){const c=s(this);if(["A","AREA"].includes(this.tagName)&&_.preventDefault(),p(this))return;W.one(c,Ou,()=>{h(this)&&this.focus()});const g=xe.findOne(Bh);g&&g!==c&&ai.getInstance(g).hide(),ai.getOrCreateInstance(c).toggle(this)}),W.on(window,"load.bs.offcanvas.data-api",()=>{for(const _ of xe.find(Bh))ai.getOrCreateInstance(_).show()}),W.on(window,"resize.bs.offcanvas",()=>{for(const _ of xe.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(_).position!=="fixed"&&ai.getOrCreateInstance(_).hide()}),Tr(ai),N(ai);const jh=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),T_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Lu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,I_=(_,c)=>{const g=_.nodeName.toLowerCase();return c.includes(g)?!jh.has(g)||Boolean(T_.test(_.nodeValue)||Lu.test(_.nodeValue)):c.filter(I=>I instanceof RegExp).some(I=>I.test(g))},qh={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},S_={allowList:qh,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},C_={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},b_={entry:"(string|element|function|null)",selector:"(string|element)"};class Mu extends Er{constructor(c){super(),this._config=this._getConfig(c)}static get Default(){return S_}static get DefaultType(){return C_}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(c=>this._resolvePossibleFunction(c)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(c){return this._checkContent(c),this._config.content={...this._config.content,...c},this}toHtml(){const c=document.createElement("div");c.innerHTML=this._maybeSanitize(this._config.template);for(const[x,L]of Object.entries(this._config.content))this._setContent(c,L,x);const g=c.children[0],I=this._resolvePossibleFunction(this._config.extraClass);return I&&g.classList.add(...I.split(" ")),g}_typeCheckConfig(c){super._typeCheckConfig(c),this._checkContent(c.content)}_checkContent(c){for(const[g,I]of Object.entries(c))super._typeCheckConfig({selector:g,entry:I},b_)}_setContent(c,g,I){const x=xe.findOne(I,c);x&&((g=this._resolvePossibleFunction(g))?a(g)?this._putElementInTemplate(u(g),x):this._config.html?x.innerHTML=this._maybeSanitize(g):x.textContent=g:x.remove())}_maybeSanitize(c){return this._config.sanitize?function(g,I,x){if(!g.length)return g;if(x&&typeof x=="function")return x(g);const L=new window.DOMParser().parseFromString(g,"text/html"),$=[].concat(...L.body.querySelectorAll("*"));for(const B of $){const Y=B.nodeName.toLowerCase();if(!Object.keys(I).includes(Y)){B.remove();continue}const ne=[].concat(...B.attributes),X=[].concat(I["*"]||[],I[Y]||[]);for(const ie of ne)I_(ie,X)||B.removeAttribute(ie.nodeName)}return L.body.innerHTML}(c,this._config.allowList,this._config.sanitizeFn):c}_resolvePossibleFunction(c){return typeof c=="function"?c(this):c}_putElementInTemplate(c,g){if(this._config.html)return g.innerHTML="",void g.append(c);g.textContent=c.textContent}}const k_=new Set(["sanitize","allowList","sanitizeFn"]),zh="fade",Fu="show",Po=".modal",sg="hide.bs.modal",Ro="hover",li="focus",Pi={AUTO:"auto",TOP:"top",RIGHT:J()?"left":"right",BOTTOM:"bottom",LEFT:J()?"right":"left"},og={allowList:qh,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},ag={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class rs extends Gn{constructor(c,g){if(Vh===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(c,g),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return og}static get DefaultType(){return ag}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),W.off(this._element.closest(Po),sg,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const c=W.trigger(this._element,this.constructor.eventName("show")),g=(v(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(c.defaultPrevented||!g)return;this._disposePopper();const I=this._getTipElement();this._element.setAttribute("aria-describedby",I.getAttribute("id"));const{container:x}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(x.append(I),W.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(I),I.classList.add(Fu),"ontouchstart"in document.documentElement)for(const L of[].concat(...document.body.children))W.on(L,"mouseover",w);this._queueCallback(()=>{W.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!W.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Fu),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))W.off(c,"mouseover",w);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),W.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(c){const g=this._getTemplateFactory(c).toHtml();if(!g)return null;g.classList.remove(zh,Fu),g.classList.add(`bs-${this.constructor.NAME}-auto`);const I=(x=>{do x+=Math.floor(1e6*Math.random());while(document.getElementById(x));return x})(this.constructor.NAME).toString();return g.setAttribute("id",I),this._isAnimated()&&g.classList.add(zh),g}setContent(c){this._newContent=c,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(c){return this._templateFactory?this._templateFactory.changeContent(c):this._templateFactory=new Mu({...this._config,content:c,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(c){return this.constructor.getOrCreateInstance(c.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(zh)}_isShown(){return this.tip&&this.tip.classList.contains(Fu)}_createPopper(c){const g=typeof this._config.placement=="function"?this._config.placement.call(this,c,this._element):this._config.placement,I=Pi[g.toUpperCase()];return Du(this._element,c,this._getPopperConfig(I))}_getOffset(){const{offset:c}=this._config;return typeof c=="string"?c.split(",").map(g=>Number.parseInt(g,10)):typeof c=="function"?g=>c(g,this._element):c}_resolvePossibleFunction(c){return typeof c=="function"?c.call(this._element):c}_getPopperConfig(c){const g={placement:c,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:I=>{this._getTipElement().setAttribute("data-popper-placement",I.state.placement)}}]};return{...g,...typeof this._config.popperConfig=="function"?this._config.popperConfig(g):this._config.popperConfig}}_setListeners(){const c=this._config.trigger.split(" ");for(const g of c)if(g==="click")W.on(this._element,this.constructor.eventName("click"),this._config.selector,I=>{this._initializeOnDelegatedTarget(I).toggle()});else if(g!=="manual"){const I=g===Ro?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),x=g===Ro?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");W.on(this._element,I,this._config.selector,L=>{const $=this._initializeOnDelegatedTarget(L);$._activeTrigger[L.type==="focusin"?li:Ro]=!0,$._enter()}),W.on(this._element,x,this._config.selector,L=>{const $=this._initializeOnDelegatedTarget(L);$._activeTrigger[L.type==="focusout"?li:Ro]=$._element.contains(L.relatedTarget),$._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},W.on(this._element.closest(Po),sg,this._hideModalHandler)}_fixTitle(){const c=this._element.getAttribute("title");c&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",c),this._element.setAttribute("data-bs-original-title",c),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(c,g){clearTimeout(this._timeout),this._timeout=setTimeout(c,g)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(c){const g=rn.getDataAttributes(this._element);for(const I of Object.keys(g))k_.has(I)&&delete g[I];return c={...g,...typeof c=="object"&&c?c:{}},c=this._mergeConfigObj(c),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}_configAfterMerge(c){return c.container=c.container===!1?document.body:u(c.container),typeof c.delay=="number"&&(c.delay={show:c.delay,hide:c.delay}),typeof c.title=="number"&&(c.title=c.title.toString()),typeof c.content=="number"&&(c.content=c.content.toString()),c}_getDelegateConfig(){const c={};for(const g in this._config)this.constructor.Default[g]!==this._config[g]&&(c[g]=this._config[g]);return c.selector=!1,c.trigger="manual",c}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(c){return this.each(function(){const g=rs.getOrCreateInstance(this,c);if(typeof c=="string"){if(g[c]===void 0)throw new TypeError(`No method named "${c}"`);g[c]()}})}}N(rs);const x_={...rs.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},ct={...rs.DefaultType,content:"(null|string|element|function)"};class Vs extends rs{static get Default(){return x_}static get DefaultType(){return ct}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(c){return this.each(function(){const g=Vs.getOrCreateInstance(this,c);if(typeof c=="string"){if(g[c]===void 0)throw new TypeError(`No method named "${c}"`);g[c]()}})}}N(Vs);const Cr="click.bs.scrollspy",fn="active",$u="[href]",lg={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},N_={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class nl extends Gn{constructor(c,g){super(c,g),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return lg}static get DefaultType(){return N_}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const c of this._observableSections.values())this._observer.observe(c)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(c){return c.target=u(c.target)||document.body,c.rootMargin=c.offset?`${c.offset}px 0px -30%`:c.rootMargin,typeof c.threshold=="string"&&(c.threshold=c.threshold.split(",").map(g=>Number.parseFloat(g))),c}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(W.off(this._config.target,Cr),W.on(this._config.target,Cr,$u,c=>{const g=this._observableSections.get(c.target.hash);if(g){c.preventDefault();const I=this._rootElement||window,x=g.offsetTop-this._element.offsetTop;if(I.scrollTo)return void I.scrollTo({top:x,behavior:"smooth"});I.scrollTop=x}}))}_getNewObserver(){const c={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(g=>this._observerCallback(g),c)}_observerCallback(c){const g=$=>this._targetLinks.get(`#${$.target.id}`),I=$=>{this._previousScrollData.visibleEntryTop=$.target.offsetTop,this._process(g($))},x=(this._rootElement||document.documentElement).scrollTop,L=x>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=x;for(const $ of c){if(!$.isIntersecting){this._activeTarget=null,this._clearActiveClass(g($));continue}const B=$.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(L&&B){if(I($),!x)return}else L||B||I($)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const c=xe.find($u,this._config.target);for(const g of c){if(!g.hash||p(g))continue;const I=xe.findOne(g.hash,this._element);h(I)&&(this._targetLinks.set(g.hash,g),this._observableSections.set(g.hash,I))}}_process(c){this._activeTarget!==c&&(this._clearActiveClass(this._config.target),this._activeTarget=c,c.classList.add(fn),this._activateParents(c),W.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:c}))}_activateParents(c){if(c.classList.contains("dropdown-item"))xe.findOne(".dropdown-toggle",c.closest(".dropdown")).classList.add(fn);else for(const g of xe.parents(c,".nav, .list-group"))for(const I of xe.prev(g,".nav-link, .nav-item > .nav-link, .list-group-item"))I.classList.add(fn)}_clearActiveClass(c){c.classList.remove(fn);const g=xe.find("[href].active",c);for(const I of g)I.classList.remove(fn)}static jQueryInterface(c){return this.each(function(){const g=nl.getOrCreateInstance(this,c);if(typeof c=="string"){if(g[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);g[c]()}})}}W.on(window,"load.bs.scrollspy.data-api",()=>{for(const _ of xe.find('[data-bs-spy="scroll"]'))nl.getOrCreateInstance(_)}),N(nl);const ug="ArrowLeft",is="ArrowRight",Wh="ArrowUp",Hh="ArrowDown",Bs="active",rl="fade",il="show",cg='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Oo=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${cg}`;class Ri extends Gn{constructor(c){super(c),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),W.on(this._element,"keydown.bs.tab",g=>this._keydown(g)))}static get NAME(){return"tab"}show(){const c=this._element;if(this._elemIsActive(c))return;const g=this._getActiveElem(),I=g?W.trigger(g,"hide.bs.tab",{relatedTarget:c}):null;W.trigger(c,"show.bs.tab",{relatedTarget:g}).defaultPrevented||I&&I.defaultPrevented||(this._deactivate(g,c),this._activate(c,g))}_activate(c,g){c&&(c.classList.add(Bs),this._activate(s(c)),this._queueCallback(()=>{c.getAttribute("role")==="tab"?(c.removeAttribute("tabindex"),c.setAttribute("aria-selected",!0),this._toggleDropDown(c,!0),W.trigger(c,"shown.bs.tab",{relatedTarget:g})):c.classList.add(il)},c,c.classList.contains(rl)))}_deactivate(c,g){c&&(c.classList.remove(Bs),c.blur(),this._deactivate(s(c)),this._queueCallback(()=>{c.getAttribute("role")==="tab"?(c.setAttribute("aria-selected",!1),c.setAttribute("tabindex","-1"),this._toggleDropDown(c,!1),W.trigger(c,"hidden.bs.tab",{relatedTarget:g})):c.classList.remove(il)},c,c.classList.contains(rl)))}_keydown(c){if(![ug,is,Wh,Hh].includes(c.key))return;c.stopPropagation(),c.preventDefault();const g=[is,Hh].includes(c.key),I=Q(this._getChildren().filter(x=>!p(x)),c.target,g,!0);I&&(I.focus({preventScroll:!0}),Ri.getOrCreateInstance(I).show())}_getChildren(){return xe.find(Oo,this._parent)}_getActiveElem(){return this._getChildren().find(c=>this._elemIsActive(c))||null}_setInitialAttributes(c,g){this._setAttributeIfNotExists(c,"role","tablist");for(const I of g)this._setInitialAttributesOnChild(I)}_setInitialAttributesOnChild(c){c=this._getInnerElement(c);const g=this._elemIsActive(c),I=this._getOuterElement(c);c.setAttribute("aria-selected",g),I!==c&&this._setAttributeIfNotExists(I,"role","presentation"),g||c.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(c,"role","tab"),this._setInitialAttributesOnTargetPanel(c)}_setInitialAttributesOnTargetPanel(c){const g=s(c);g&&(this._setAttributeIfNotExists(g,"role","tabpanel"),c.id&&this._setAttributeIfNotExists(g,"aria-labelledby",`#${c.id}`))}_toggleDropDown(c,g){const I=this._getOuterElement(c);if(!I.classList.contains("dropdown"))return;const x=(L,$)=>{const B=xe.findOne(L,I);B&&B.classList.toggle($,g)};x(".dropdown-toggle",Bs),x(".dropdown-menu",il),I.setAttribute("aria-expanded",g)}_setAttributeIfNotExists(c,g,I){c.hasAttribute(g)||c.setAttribute(g,I)}_elemIsActive(c){return c.classList.contains(Bs)}_getInnerElement(c){return c.matches(Oo)?c:xe.findOne(Oo,c)}_getOuterElement(c){return c.closest(".nav-item, .list-group-item")||c}static jQueryInterface(c){return this.each(function(){const g=Ri.getOrCreateInstance(this);if(typeof c=="string"){if(g[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);g[c]()}})}}W.on(document,"click.bs.tab",cg,function(_){["A","AREA"].includes(this.tagName)&&_.preventDefault(),p(this)||Ri.getOrCreateInstance(this).show()}),W.on(window,"load.bs.tab",()=>{for(const _ of xe.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))Ri.getOrCreateInstance(_)}),N(Ri);const Uu="hide",Vu="show",C="showing",P={animation:"boolean",autohide:"boolean",delay:"number"},F={animation:!0,autohide:!0,delay:5e3};class K extends Gn{constructor(c,g){super(c,g),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return F}static get DefaultType(){return P}static get NAME(){return"toast"}show(){W.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Uu),b(this._element),this._element.classList.add(Vu,C),this._queueCallback(()=>{this._element.classList.remove(C),W.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(W.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(C),this._queueCallback(()=>{this._element.classList.add(Uu),this._element.classList.remove(C,Vu),W.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Vu),super.dispose()}isShown(){return this._element.classList.contains(Vu)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(c,g){switch(c.type){case"mouseover":case"mouseout":this._hasMouseInteraction=g;break;case"focusin":case"focusout":this._hasKeyboardInteraction=g}if(g)return void this._clearTimeout();const I=c.relatedTarget;this._element===I||this._element.contains(I)||this._maybeScheduleHide()}_setListeners(){W.on(this._element,"mouseover.bs.toast",c=>this._onInteraction(c,!0)),W.on(this._element,"mouseout.bs.toast",c=>this._onInteraction(c,!1)),W.on(this._element,"focusin.bs.toast",c=>this._onInteraction(c,!0)),W.on(this._element,"focusout.bs.toast",c=>this._onInteraction(c,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(c){return this.each(function(){const g=K.getOrCreateInstance(this,c);if(typeof c=="string"){if(g[c]===void 0)throw new TypeError(`No method named "${c}"`);g[c](this)}})}}return Tr(K),N(K),{Alert:qa,Button:za,Carousel:wo,Collapse:Ds,Dropdown:R,Modal:jt,Offcanvas:ai,Popover:Vs,ScrollSpy:nl,Tab:Ri,Toast:K,Tooltip:rs}})})(nY);Gw.createRoot(document.getElementById("root")).render(U(Kx.StrictMode,{children:U(tY,{})}));
