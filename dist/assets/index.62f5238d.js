var FF=Object.defineProperty;var $F=(t,e,n)=>e in t?FF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var it=(t,e,n)=>($F(t,typeof e!="symbol"?e+"":e,n),n);function UF(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Gx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function VF(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var le={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf=Symbol.for("react.element"),BF=Symbol.for("react.portal"),jF=Symbol.for("react.fragment"),qF=Symbol.for("react.strict_mode"),zF=Symbol.for("react.profiler"),WF=Symbol.for("react.provider"),HF=Symbol.for("react.context"),KF=Symbol.for("react.forward_ref"),GF=Symbol.for("react.suspense"),QF=Symbol.for("react.memo"),YF=Symbol.for("react.lazy"),VC=Symbol.iterator;function XF(t){return t===null||typeof t!="object"?null:(t=VC&&t[VC]||t["@@iterator"],typeof t=="function"?t:null)}var Qx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yx=Object.assign,Xx={};function th(t,e,n){this.props=t,this.context=e,this.refs=Xx,this.updater=n||Qx}th.prototype.isReactComponent={};th.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};th.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jx(){}Jx.prototype=th.prototype;function iI(t,e,n){this.props=t,this.context=e,this.refs=Xx,this.updater=n||Qx}var sI=iI.prototype=new Jx;sI.constructor=iI;Yx(sI,th.prototype);sI.isPureReactComponent=!0;var BC=Array.isArray,Zx=Object.prototype.hasOwnProperty,oI={current:null},eN={key:!0,ref:!0,__self:!0,__source:!0};function tN(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Zx.call(e,r)&&!eN.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),h=0;h<a;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Zf,type:t,key:s,ref:o,props:i,_owner:oI.current}}function JF(t,e){return{$$typeof:Zf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function aI(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zf}function ZF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jC=/\/+/g;function F_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ZF(""+t.key):e.toString(36)}function nm(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zf:case BF:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+F_(o,0):r,BC(i)?(n="",t!=null&&(n=t.replace(jC,"$&/")+"/"),nm(i,e,n,"",function(h){return h})):i!=null&&(aI(i)&&(i=JF(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(jC,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",BC(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+F_(s,a);o+=nm(s,e,n,u,i)}else if(u=XF(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+F_(s,a++),o+=nm(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _g(t,e,n){if(t==null)return t;var r=[],i=0;return nm(t,r,"","",function(s){return e.call(n,s,i++)}),r}function e$(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wr={current:null},rm={transition:null},t$={ReactCurrentDispatcher:wr,ReactCurrentBatchConfig:rm,ReactCurrentOwner:oI};Qe.Children={map:_g,forEach:function(t,e,n){_g(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _g(t,function(){e++}),e},toArray:function(t){return _g(t,function(e){return e})||[]},only:function(t){if(!aI(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Qe.Component=th;Qe.Fragment=jF;Qe.Profiler=zF;Qe.PureComponent=iI;Qe.StrictMode=qF;Qe.Suspense=GF;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t$;Qe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Yx({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=oI.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)Zx.call(e,u)&&!eN.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var h=0;h<u;h++)a[h]=arguments[h+2];r.children=a}return{$$typeof:Zf,type:t.type,key:i,ref:s,props:r,_owner:o}};Qe.createContext=function(t){return t={$$typeof:HF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:WF,_context:t},t.Consumer=t};Qe.createElement=tN;Qe.createFactory=function(t){var e=tN.bind(null,t);return e.type=t,e};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(t){return{$$typeof:KF,render:t}};Qe.isValidElement=aI;Qe.lazy=function(t){return{$$typeof:YF,_payload:{_status:-1,_result:t},_init:e$}};Qe.memo=function(t,e){return{$$typeof:QF,type:t,compare:e===void 0?null:e}};Qe.startTransition=function(t){var e=rm.transition;rm.transition={};try{t()}finally{rm.transition=e}};Qe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Qe.useCallback=function(t,e){return wr.current.useCallback(t,e)};Qe.useContext=function(t){return wr.current.useContext(t)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(t){return wr.current.useDeferredValue(t)};Qe.useEffect=function(t,e){return wr.current.useEffect(t,e)};Qe.useId=function(){return wr.current.useId()};Qe.useImperativeHandle=function(t,e,n){return wr.current.useImperativeHandle(t,e,n)};Qe.useInsertionEffect=function(t,e){return wr.current.useInsertionEffect(t,e)};Qe.useLayoutEffect=function(t,e){return wr.current.useLayoutEffect(t,e)};Qe.useMemo=function(t,e){return wr.current.useMemo(t,e)};Qe.useReducer=function(t,e,n){return wr.current.useReducer(t,e,n)};Qe.useRef=function(t){return wr.current.useRef(t)};Qe.useState=function(t){return wr.current.useState(t)};Qe.useSyncExternalStore=function(t,e,n){return wr.current.useSyncExternalStore(t,e,n)};Qe.useTransition=function(){return wr.current.useTransition()};Qe.version="18.2.0";(function(t){t.exports=Qe})(le);const nN=VF(le.exports),Xw=UF({__proto__:null,default:nN},[le.exports]);var Jw={},rN={exports:{}},ri={},iN={exports:{}},sN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ge,Oe){var W=ge.length;ge.push(Oe);e:for(;0<W;){var He=W-1>>>1,ut=ge[He];if(0<i(ut,Oe))ge[He]=Oe,ge[W]=ut,W=He;else break e}}function n(ge){return ge.length===0?null:ge[0]}function r(ge){if(ge.length===0)return null;var Oe=ge[0],W=ge.pop();if(W!==Oe){ge[0]=W;e:for(var He=0,ut=ge.length,or=ut>>>1;He<or;){var ar=2*(He+1)-1,Qi=ge[ar],rn=ar+1,Ir=ge[rn];if(0>i(Qi,W))rn<ut&&0>i(Ir,Qi)?(ge[He]=Ir,ge[rn]=W,He=rn):(ge[He]=Qi,ge[ar]=W,He=ar);else if(rn<ut&&0>i(Ir,W))ge[He]=Ir,ge[rn]=W,He=rn;else break e}}return Oe}function i(ge,Oe){var W=ge.sortIndex-Oe.sortIndex;return W!==0?W:ge.id-Oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],h=[],p=1,v=null,w=3,b=!1,k=!1,R=!1,J=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(ge){for(var Oe=n(h);Oe!==null;){if(Oe.callback===null)r(h);else if(Oe.startTime<=ge)r(h),Oe.sortIndex=Oe.expirationTime,e(u,Oe);else break;Oe=n(h)}}function Q(ge){if(R=!1,M(ge),!k)if(n(u)!==null)k=!0,mo(re);else{var Oe=n(h);Oe!==null&&Ns(Q,Oe.startTime-ge)}}function re(ge,Oe){k=!1,R&&(R=!1,N(he),he=-1),b=!0;var W=w;try{for(M(Oe),v=n(u);v!==null&&(!(v.expirationTime>Oe)||ge&&!Kn());){var He=v.callback;if(typeof He=="function"){v.callback=null,w=v.priorityLevel;var ut=He(v.expirationTime<=Oe);Oe=t.unstable_now(),typeof ut=="function"?v.callback=ut:v===n(u)&&r(u),M(Oe)}else r(u);v=n(u)}if(v!==null)var or=!0;else{var ar=n(h);ar!==null&&Ns(Q,ar.startTime-Oe),or=!1}return or}finally{v=null,w=W,b=!1}}var m=!1,ue=null,he=-1,Ye=5,Fe=-1;function Kn(){return!(t.unstable_now()-Fe<Ye)}function Gt(){if(ue!==null){var ge=t.unstable_now();Fe=ge;var Oe=!0;try{Oe=ue(!0,ge)}finally{Oe?Ci():(m=!1,ue=null)}}else m=!1}var Ci;if(typeof D=="function")Ci=function(){D(Gt)};else if(typeof MessageChannel<"u"){var xs=new MessageChannel,qa=xs.port2;xs.port1.onmessage=Gt,Ci=function(){qa.postMessage(null)}}else Ci=function(){J(Gt,0)};function mo(ge){ue=ge,m||(m=!0,Ci())}function Ns(ge,Oe){he=J(function(){ge(t.unstable_now())},Oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ge){ge.callback=null},t.unstable_continueExecution=function(){k||b||(k=!0,mo(re))},t.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ye=0<ge?Math.floor(1e3/ge):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(ge){switch(w){case 1:case 2:case 3:var Oe=3;break;default:Oe=w}var W=w;w=Oe;try{return ge()}finally{w=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ge,Oe){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var W=w;w=ge;try{return Oe()}finally{w=W}},t.unstable_scheduleCallback=function(ge,Oe,W){var He=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?He+W:He):W=He,ge){case 1:var ut=-1;break;case 2:ut=250;break;case 5:ut=1073741823;break;case 4:ut=1e4;break;default:ut=5e3}return ut=W+ut,ge={id:p++,callback:Oe,priorityLevel:ge,startTime:W,expirationTime:ut,sortIndex:-1},W>He?(ge.sortIndex=W,e(h,ge),n(u)===null&&ge===n(h)&&(R?(N(he),he=-1):R=!0,Ns(Q,W-He))):(ge.sortIndex=ut,e(u,ge),k||b||(k=!0,mo(re))),ge},t.unstable_shouldYield=Kn,t.unstable_wrapCallback=function(ge){var Oe=w;return function(){var W=w;w=Oe;try{return ge.apply(this,arguments)}finally{w=W}}}})(sN);(function(t){t.exports=sN})(iN);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oN=le.exports,Xr=iN.exports;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var aN=new Set,Yd={};function ou(t,e){kc(t,e),kc(t+"Capture",e)}function kc(t,e){for(Yd[t]=e,t=0;t<e.length;t++)aN.add(e[t])}var eo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zw=Object.prototype.hasOwnProperty,n$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qC={},zC={};function r$(t){return Zw.call(zC,t)?!0:Zw.call(qC,t)?!1:n$.test(t)?zC[t]=!0:(qC[t]=!0,!1)}function i$(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function s$(t,e,n,r){if(e===null||typeof e>"u"||i$(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Er(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qn[t]=new Er(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qn[e]=new Er(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qn[t]=new Er(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qn[t]=new Er(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qn[t]=new Er(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qn[t]=new Er(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qn[t]=new Er(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qn[t]=new Er(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qn[t]=new Er(t,5,!1,t.toLowerCase(),null,!1,!1)});var lI=/[\-:]([a-z])/g;function uI(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lI,uI);qn[e]=new Er(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lI,uI);qn[e]=new Er(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lI,uI);qn[e]=new Er(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qn[t]=new Er(t,1,!1,t.toLowerCase(),null,!1,!1)});qn.xlinkHref=new Er("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qn[t]=new Er(t,1,!1,t.toLowerCase(),null,!0,!0)});function cI(t,e,n,r){var i=qn.hasOwnProperty(e)?qn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(s$(e,n,i,r)&&(n=null),r||i===null?r$(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var uo=oN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wg=Symbol.for("react.element"),Zu=Symbol.for("react.portal"),ec=Symbol.for("react.fragment"),hI=Symbol.for("react.strict_mode"),e0=Symbol.for("react.profiler"),lN=Symbol.for("react.provider"),uN=Symbol.for("react.context"),dI=Symbol.for("react.forward_ref"),t0=Symbol.for("react.suspense"),n0=Symbol.for("react.suspense_list"),fI=Symbol.for("react.memo"),Bo=Symbol.for("react.lazy"),cN=Symbol.for("react.offscreen"),WC=Symbol.iterator;function Qh(t){return t===null||typeof t!="object"?null:(t=WC&&t[WC]||t["@@iterator"],typeof t=="function"?t:null)}var Ut=Object.assign,$_;function yd(t){if($_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$_=e&&e[1]||""}return`
`+$_+t}var U_=!1;function V_(t,e){if(!t||U_)return"";U_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{U_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?yd(t):""}function o$(t){switch(t.tag){case 5:return yd(t.type);case 16:return yd("Lazy");case 13:return yd("Suspense");case 19:return yd("SuspenseList");case 0:case 2:case 15:return t=V_(t.type,!1),t;case 11:return t=V_(t.type.render,!1),t;case 1:return t=V_(t.type,!0),t;default:return""}}function r0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ec:return"Fragment";case Zu:return"Portal";case e0:return"Profiler";case hI:return"StrictMode";case t0:return"Suspense";case n0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case uN:return(t.displayName||"Context")+".Consumer";case lN:return(t._context.displayName||"Context")+".Provider";case dI:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fI:return e=t.displayName||null,e!==null?e:r0(t.type)||"Memo";case Bo:e=t._payload,t=t._init;try{return r0(t(e))}catch{}}return null}function a$(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return r0(e);case 8:return e===hI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function l$(t){var e=hN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Eg(t){t._valueTracker||(t._valueTracker=l$(t))}function dN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function i0(t,e){var n=e.checked;return Ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function HC(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pa(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fN(t,e){e=e.checked,e!=null&&cI(t,"checked",e,!1)}function s0(t,e){fN(t,e);var n=pa(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?o0(t,e.type,n):e.hasOwnProperty("defaultValue")&&o0(t,e.type,pa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function KC(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function o0(t,e,n){(e!=="number"||Tm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var vd=Array.isArray;function fc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pa(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function a0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return Ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function GC(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(se(92));if(vd(n)){if(1<n.length)throw Error(se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pa(n)}}function pN(t,e){var n=pa(e.value),r=pa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function QC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function l0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ig,mN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ig=Ig||document.createElement("div"),Ig.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ig.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},u$=["Webkit","ms","Moz","O"];Object.keys(kd).forEach(function(t){u$.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kd[e]=kd[t]})});function yN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||kd.hasOwnProperty(t)&&kd[t]?(""+e).trim():e+"px"}function vN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=yN(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var c$=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function u0(t,e){if(e){if(c$[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function c0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var h0=null;function pI(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var d0=null,pc=null,gc=null;function YC(t){if(t=np(t)){if(typeof d0!="function")throw Error(se(280));var e=t.stateNode;e&&(e=By(e),d0(t.stateNode,t.type,e))}}function _N(t){pc?gc?gc.push(t):gc=[t]:pc=t}function wN(){if(pc){var t=pc,e=gc;if(gc=pc=null,YC(t),e)for(t=0;t<e.length;t++)YC(e[t])}}function EN(t,e){return t(e)}function IN(){}var B_=!1;function TN(t,e,n){if(B_)return t(e,n);B_=!0;try{return EN(t,e,n)}finally{B_=!1,(pc!==null||gc!==null)&&(IN(),wN())}}function Jd(t,e){var n=t.stateNode;if(n===null)return null;var r=By(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(se(231,e,typeof n));return n}var f0=!1;if(eo)try{var Yh={};Object.defineProperty(Yh,"passive",{get:function(){f0=!0}}),window.addEventListener("test",Yh,Yh),window.removeEventListener("test",Yh,Yh)}catch{f0=!1}function h$(t,e,n,r,i,s,o,a,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var xd=!1,Sm=null,Cm=!1,p0=null,d$={onError:function(t){xd=!0,Sm=t}};function f$(t,e,n,r,i,s,o,a,u){xd=!1,Sm=null,h$.apply(d$,arguments)}function p$(t,e,n,r,i,s,o,a,u){if(f$.apply(this,arguments),xd){if(xd){var h=Sm;xd=!1,Sm=null}else throw Error(se(198));Cm||(Cm=!0,p0=h)}}function au(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function SN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function XC(t){if(au(t)!==t)throw Error(se(188))}function g$(t){var e=t.alternate;if(!e){if(e=au(t),e===null)throw Error(se(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return XC(i),t;if(s===r)return XC(i),e;s=s.sibling}throw Error(se(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(se(189))}}if(n.alternate!==r)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?t:e}function CN(t){return t=g$(t),t!==null?bN(t):null}function bN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bN(t);if(e!==null)return e;t=t.sibling}return null}var kN=Xr.unstable_scheduleCallback,JC=Xr.unstable_cancelCallback,m$=Xr.unstable_shouldYield,y$=Xr.unstable_requestPaint,Yt=Xr.unstable_now,v$=Xr.unstable_getCurrentPriorityLevel,gI=Xr.unstable_ImmediatePriority,xN=Xr.unstable_UserBlockingPriority,bm=Xr.unstable_NormalPriority,_$=Xr.unstable_LowPriority,NN=Xr.unstable_IdlePriority,Fy=null,vs=null;function w$(t){if(vs&&typeof vs.onCommitFiberRoot=="function")try{vs.onCommitFiberRoot(Fy,t,void 0,(t.current.flags&128)===128)}catch{}}var ji=Math.clz32?Math.clz32:T$,E$=Math.log,I$=Math.LN2;function T$(t){return t>>>=0,t===0?32:31-(E$(t)/I$|0)|0}var Tg=64,Sg=4194304;function _d(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function km(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=_d(a):(s&=o,s!==0&&(r=_d(s)))}else o=n&~i,o!==0?r=_d(o):s!==0&&(r=_d(s));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ji(e),i=1<<n,r|=t[n],e&=~i;return r}function S$(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function C$(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ji(s),a=1<<o,u=i[o];u===-1?((a&n)===0||(a&r)!==0)&&(i[o]=S$(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function g0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function AN(){var t=Tg;return Tg<<=1,(Tg&4194240)===0&&(Tg=64),t}function j_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ep(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ji(e),t[e]=n}function b$(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ji(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function mI(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ji(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var pt=0;function DN(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var PN,yI,RN,ON,LN,m0=!1,Cg=[],ea=null,ta=null,na=null,Zd=new Map,ef=new Map,qo=[],k$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ZC(t,e){switch(t){case"focusin":case"focusout":ea=null;break;case"dragenter":case"dragleave":ta=null;break;case"mouseover":case"mouseout":na=null;break;case"pointerover":case"pointerout":Zd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ef.delete(e.pointerId)}}function Xh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=np(e),e!==null&&yI(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function x$(t,e,n,r,i){switch(e){case"focusin":return ea=Xh(ea,t,e,n,r,i),!0;case"dragenter":return ta=Xh(ta,t,e,n,r,i),!0;case"mouseover":return na=Xh(na,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Zd.set(s,Xh(Zd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ef.set(s,Xh(ef.get(s)||null,t,e,n,r,i)),!0}return!1}function MN(t){var e=wl(t.target);if(e!==null){var n=au(e);if(n!==null){if(e=n.tag,e===13){if(e=SN(n),e!==null){t.blockedOn=e,LN(t.priority,function(){RN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function im(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=y0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);h0=r,n.target.dispatchEvent(r),h0=null}else return e=np(n),e!==null&&yI(e),t.blockedOn=n,!1;e.shift()}return!0}function eb(t,e,n){im(t)&&n.delete(e)}function N$(){m0=!1,ea!==null&&im(ea)&&(ea=null),ta!==null&&im(ta)&&(ta=null),na!==null&&im(na)&&(na=null),Zd.forEach(eb),ef.forEach(eb)}function Jh(t,e){t.blockedOn===e&&(t.blockedOn=null,m0||(m0=!0,Xr.unstable_scheduleCallback(Xr.unstable_NormalPriority,N$)))}function tf(t){function e(i){return Jh(i,t)}if(0<Cg.length){Jh(Cg[0],t);for(var n=1;n<Cg.length;n++){var r=Cg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ea!==null&&Jh(ea,t),ta!==null&&Jh(ta,t),na!==null&&Jh(na,t),Zd.forEach(e),ef.forEach(e),n=0;n<qo.length;n++)r=qo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qo.length&&(n=qo[0],n.blockedOn===null);)MN(n),n.blockedOn===null&&qo.shift()}var mc=uo.ReactCurrentBatchConfig,xm=!0;function A$(t,e,n,r){var i=pt,s=mc.transition;mc.transition=null;try{pt=1,vI(t,e,n,r)}finally{pt=i,mc.transition=s}}function D$(t,e,n,r){var i=pt,s=mc.transition;mc.transition=null;try{pt=4,vI(t,e,n,r)}finally{pt=i,mc.transition=s}}function vI(t,e,n,r){if(xm){var i=y0(t,e,n,r);if(i===null)J_(t,e,r,Nm,n),ZC(t,r);else if(x$(i,t,e,n,r))r.stopPropagation();else if(ZC(t,r),e&4&&-1<k$.indexOf(t)){for(;i!==null;){var s=np(i);if(s!==null&&PN(s),s=y0(t,e,n,r),s===null&&J_(t,e,r,Nm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else J_(t,e,r,null,n)}}var Nm=null;function y0(t,e,n,r){if(Nm=null,t=pI(r),t=wl(t),t!==null)if(e=au(t),e===null)t=null;else if(n=e.tag,n===13){if(t=SN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nm=t,null}function FN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(v$()){case gI:return 1;case xN:return 4;case bm:case _$:return 16;case NN:return 536870912;default:return 16}default:return 16}}var Ko=null,_I=null,sm=null;function $N(){if(sm)return sm;var t,e=_I,n=e.length,r,i="value"in Ko?Ko.value:Ko.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return sm=i.slice(t,1<r?1-r:void 0)}function om(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bg(){return!0}function tb(){return!1}function ii(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?bg:tb,this.isPropagationStopped=tb,this}return Ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bg)},persist:function(){},isPersistent:bg}),e}var nh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wI=ii(nh),tp=Ut({},nh,{view:0,detail:0}),P$=ii(tp),q_,z_,Zh,$y=Ut({},tp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:EI,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zh&&(Zh&&t.type==="mousemove"?(q_=t.screenX-Zh.screenX,z_=t.screenY-Zh.screenY):z_=q_=0,Zh=t),q_)},movementY:function(t){return"movementY"in t?t.movementY:z_}}),nb=ii($y),R$=Ut({},$y,{dataTransfer:0}),O$=ii(R$),L$=Ut({},tp,{relatedTarget:0}),W_=ii(L$),M$=Ut({},nh,{animationName:0,elapsedTime:0,pseudoElement:0}),F$=ii(M$),$$=Ut({},nh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),U$=ii($$),V$=Ut({},nh,{data:0}),rb=ii(V$),B$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},j$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z$(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=q$[t])?!!e[t]:!1}function EI(){return z$}var W$=Ut({},tp,{key:function(t){if(t.key){var e=B$[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=om(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?j$[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:EI,charCode:function(t){return t.type==="keypress"?om(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?om(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),H$=ii(W$),K$=Ut({},$y,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ib=ii(K$),G$=Ut({},tp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:EI}),Q$=ii(G$),Y$=Ut({},nh,{propertyName:0,elapsedTime:0,pseudoElement:0}),X$=ii(Y$),J$=Ut({},$y,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Z$=ii(J$),eU=[9,13,27,32],II=eo&&"CompositionEvent"in window,Nd=null;eo&&"documentMode"in document&&(Nd=document.documentMode);var tU=eo&&"TextEvent"in window&&!Nd,UN=eo&&(!II||Nd&&8<Nd&&11>=Nd),sb=String.fromCharCode(32),ob=!1;function VN(t,e){switch(t){case"keyup":return eU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tc=!1;function nU(t,e){switch(t){case"compositionend":return BN(e);case"keypress":return e.which!==32?null:(ob=!0,sb);case"textInput":return t=e.data,t===sb&&ob?null:t;default:return null}}function rU(t,e){if(tc)return t==="compositionend"||!II&&VN(t,e)?(t=$N(),sm=_I=Ko=null,tc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return UN&&e.locale!=="ko"?null:e.data;default:return null}}var iU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ab(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iU[t.type]:e==="textarea"}function jN(t,e,n,r){_N(r),e=Am(e,"onChange"),0<e.length&&(n=new wI("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ad=null,nf=null;function sU(t){ZN(t,0)}function Uy(t){var e=ic(t);if(dN(e))return t}function oU(t,e){if(t==="change")return e}var qN=!1;if(eo){var H_;if(eo){var K_="oninput"in document;if(!K_){var lb=document.createElement("div");lb.setAttribute("oninput","return;"),K_=typeof lb.oninput=="function"}H_=K_}else H_=!1;qN=H_&&(!document.documentMode||9<document.documentMode)}function ub(){Ad&&(Ad.detachEvent("onpropertychange",zN),nf=Ad=null)}function zN(t){if(t.propertyName==="value"&&Uy(nf)){var e=[];jN(e,nf,t,pI(t)),TN(sU,e)}}function aU(t,e,n){t==="focusin"?(ub(),Ad=e,nf=n,Ad.attachEvent("onpropertychange",zN)):t==="focusout"&&ub()}function lU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uy(nf)}function uU(t,e){if(t==="click")return Uy(e)}function cU(t,e){if(t==="input"||t==="change")return Uy(e)}function hU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hi=typeof Object.is=="function"?Object.is:hU;function rf(t,e){if(Hi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Zw.call(e,i)||!Hi(t[i],e[i]))return!1}return!0}function cb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hb(t,e){var n=cb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cb(n)}}function WN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?WN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function HN(){for(var t=window,e=Tm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tm(t.document)}return e}function TI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dU(t){var e=HN(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&WN(n.ownerDocument.documentElement,n)){if(r!==null&&TI(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=hb(n,s);var o=hb(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fU=eo&&"documentMode"in document&&11>=document.documentMode,nc=null,v0=null,Dd=null,_0=!1;function db(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_0||nc==null||nc!==Tm(r)||(r=nc,"selectionStart"in r&&TI(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Dd&&rf(Dd,r)||(Dd=r,r=Am(v0,"onSelect"),0<r.length&&(e=new wI("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=nc)))}function kg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rc={animationend:kg("Animation","AnimationEnd"),animationiteration:kg("Animation","AnimationIteration"),animationstart:kg("Animation","AnimationStart"),transitionend:kg("Transition","TransitionEnd")},G_={},KN={};eo&&(KN=document.createElement("div").style,"AnimationEvent"in window||(delete rc.animationend.animation,delete rc.animationiteration.animation,delete rc.animationstart.animation),"TransitionEvent"in window||delete rc.transitionend.transition);function Vy(t){if(G_[t])return G_[t];if(!rc[t])return t;var e=rc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in KN)return G_[t]=e[n];return t}var GN=Vy("animationend"),QN=Vy("animationiteration"),YN=Vy("animationstart"),XN=Vy("transitionend"),JN=new Map,fb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Da(t,e){JN.set(t,e),ou(e,[t])}for(var Q_=0;Q_<fb.length;Q_++){var Y_=fb[Q_],pU=Y_.toLowerCase(),gU=Y_[0].toUpperCase()+Y_.slice(1);Da(pU,"on"+gU)}Da(GN,"onAnimationEnd");Da(QN,"onAnimationIteration");Da(YN,"onAnimationStart");Da("dblclick","onDoubleClick");Da("focusin","onFocus");Da("focusout","onBlur");Da(XN,"onTransitionEnd");kc("onMouseEnter",["mouseout","mouseover"]);kc("onMouseLeave",["mouseout","mouseover"]);kc("onPointerEnter",["pointerout","pointerover"]);kc("onPointerLeave",["pointerout","pointerover"]);ou("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ou("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ou("onBeforeInput",["compositionend","keypress","textInput","paste"]);ou("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ou("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ou("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mU=new Set("cancel close invalid load scroll toggle".split(" ").concat(wd));function pb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,p$(r,e,void 0,t),t.currentTarget=null}function ZN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,h=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;pb(i,a,h),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,h=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;pb(i,a,h),s=u}}}if(Cm)throw t=p0,Cm=!1,p0=null,t}function bt(t,e){var n=e[S0];n===void 0&&(n=e[S0]=new Set);var r=t+"__bubble";n.has(r)||(eA(e,t,2,!1),n.add(r))}function X_(t,e,n){var r=0;e&&(r|=4),eA(n,t,r,e)}var xg="_reactListening"+Math.random().toString(36).slice(2);function sf(t){if(!t[xg]){t[xg]=!0,aN.forEach(function(n){n!=="selectionchange"&&(mU.has(n)||X_(n,!1,t),X_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xg]||(e[xg]=!0,X_("selectionchange",!1,e))}}function eA(t,e,n,r){switch(FN(e)){case 1:var i=A$;break;case 4:i=D$;break;default:i=vI}n=i.bind(null,e,n,t),i=void 0,!f0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function J_(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=wl(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}TN(function(){var h=s,p=pI(n),v=[];e:{var w=JN.get(t);if(w!==void 0){var b=wI,k=t;switch(t){case"keypress":if(om(n)===0)break e;case"keydown":case"keyup":b=H$;break;case"focusin":k="focus",b=W_;break;case"focusout":k="blur",b=W_;break;case"beforeblur":case"afterblur":b=W_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=nb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=O$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Q$;break;case GN:case QN:case YN:b=F$;break;case XN:b=X$;break;case"scroll":b=P$;break;case"wheel":b=Z$;break;case"copy":case"cut":case"paste":b=U$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=ib}var R=(e&4)!==0,J=!R&&t==="scroll",N=R?w!==null?w+"Capture":null:w;R=[];for(var D=h,M;D!==null;){M=D;var Q=M.stateNode;if(M.tag===5&&Q!==null&&(M=Q,N!==null&&(Q=Jd(D,N),Q!=null&&R.push(of(D,Q,M)))),J)break;D=D.return}0<R.length&&(w=new b(w,k,null,n,p),v.push({event:w,listeners:R}))}}if((e&7)===0){e:{if(w=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",w&&n!==h0&&(k=n.relatedTarget||n.fromElement)&&(wl(k)||k[to]))break e;if((b||w)&&(w=p.window===p?p:(w=p.ownerDocument)?w.defaultView||w.parentWindow:window,b?(k=n.relatedTarget||n.toElement,b=h,k=k?wl(k):null,k!==null&&(J=au(k),k!==J||k.tag!==5&&k.tag!==6)&&(k=null)):(b=null,k=h),b!==k)){if(R=nb,Q="onMouseLeave",N="onMouseEnter",D="mouse",(t==="pointerout"||t==="pointerover")&&(R=ib,Q="onPointerLeave",N="onPointerEnter",D="pointer"),J=b==null?w:ic(b),M=k==null?w:ic(k),w=new R(Q,D+"leave",b,n,p),w.target=J,w.relatedTarget=M,Q=null,wl(p)===h&&(R=new R(N,D+"enter",k,n,p),R.target=M,R.relatedTarget=J,Q=R),J=Q,b&&k)t:{for(R=b,N=k,D=0,M=R;M;M=qu(M))D++;for(M=0,Q=N;Q;Q=qu(Q))M++;for(;0<D-M;)R=qu(R),D--;for(;0<M-D;)N=qu(N),M--;for(;D--;){if(R===N||N!==null&&R===N.alternate)break t;R=qu(R),N=qu(N)}R=null}else R=null;b!==null&&gb(v,w,b,R,!1),k!==null&&J!==null&&gb(v,J,k,R,!0)}}e:{if(w=h?ic(h):window,b=w.nodeName&&w.nodeName.toLowerCase(),b==="select"||b==="input"&&w.type==="file")var re=oU;else if(ab(w))if(qN)re=cU;else{re=lU;var m=aU}else(b=w.nodeName)&&b.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(re=uU);if(re&&(re=re(t,h))){jN(v,re,n,p);break e}m&&m(t,w,h),t==="focusout"&&(m=w._wrapperState)&&m.controlled&&w.type==="number"&&o0(w,"number",w.value)}switch(m=h?ic(h):window,t){case"focusin":(ab(m)||m.contentEditable==="true")&&(nc=m,v0=h,Dd=null);break;case"focusout":Dd=v0=nc=null;break;case"mousedown":_0=!0;break;case"contextmenu":case"mouseup":case"dragend":_0=!1,db(v,n,p);break;case"selectionchange":if(fU)break;case"keydown":case"keyup":db(v,n,p)}var ue;if(II)e:{switch(t){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else tc?VN(t,n)&&(he="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(he="onCompositionStart");he&&(UN&&n.locale!=="ko"&&(tc||he!=="onCompositionStart"?he==="onCompositionEnd"&&tc&&(ue=$N()):(Ko=p,_I="value"in Ko?Ko.value:Ko.textContent,tc=!0)),m=Am(h,he),0<m.length&&(he=new rb(he,t,null,n,p),v.push({event:he,listeners:m}),ue?he.data=ue:(ue=BN(n),ue!==null&&(he.data=ue)))),(ue=tU?nU(t,n):rU(t,n))&&(h=Am(h,"onBeforeInput"),0<h.length&&(p=new rb("onBeforeInput","beforeinput",null,n,p),v.push({event:p,listeners:h}),p.data=ue))}ZN(v,e)})}function of(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Am(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Jd(t,n),s!=null&&r.unshift(of(t,s,i)),s=Jd(t,e),s!=null&&r.push(of(t,s,i))),t=t.return}return r}function qu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gb(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,h=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&h!==null&&(a=h,i?(u=Jd(n,s),u!=null&&o.unshift(of(n,u,a))):i||(u=Jd(n,s),u!=null&&o.push(of(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var yU=/\r\n?/g,vU=/\u0000|\uFFFD/g;function mb(t){return(typeof t=="string"?t:""+t).replace(yU,`
`).replace(vU,"")}function Ng(t,e,n){if(e=mb(e),mb(t)!==e&&n)throw Error(se(425))}function Dm(){}var w0=null,E0=null;function I0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var T0=typeof setTimeout=="function"?setTimeout:void 0,_U=typeof clearTimeout=="function"?clearTimeout:void 0,yb=typeof Promise=="function"?Promise:void 0,wU=typeof queueMicrotask=="function"?queueMicrotask:typeof yb<"u"?function(t){return yb.resolve(null).then(t).catch(EU)}:T0;function EU(t){setTimeout(function(){throw t})}function Z_(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),tf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);tf(e)}function ra(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var rh=Math.random().toString(36).slice(2),us="__reactFiber$"+rh,af="__reactProps$"+rh,to="__reactContainer$"+rh,S0="__reactEvents$"+rh,IU="__reactListeners$"+rh,TU="__reactHandles$"+rh;function wl(t){var e=t[us];if(e)return e;for(var n=t.parentNode;n;){if(e=n[to]||n[us]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vb(t);t!==null;){if(n=t[us])return n;t=vb(t)}return e}t=n,n=t.parentNode}return null}function np(t){return t=t[us]||t[to],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ic(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function By(t){return t[af]||null}var C0=[],sc=-1;function Pa(t){return{current:t}}function xt(t){0>sc||(t.current=C0[sc],C0[sc]=null,sc--)}function St(t,e){sc++,C0[sc]=t.current,t.current=e}var ga={},sr=Pa(ga),Mr=Pa(!1),Fl=ga;function xc(t,e){var n=t.type.contextTypes;if(!n)return ga;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Fr(t){return t=t.childContextTypes,t!=null}function Pm(){xt(Mr),xt(sr)}function _b(t,e,n){if(sr.current!==ga)throw Error(se(168));St(sr,e),St(Mr,n)}function tA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(se(108,a$(t)||"Unknown",i));return Ut({},n,r)}function Rm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ga,Fl=sr.current,St(sr,t),St(Mr,Mr.current),!0}function wb(t,e,n){var r=t.stateNode;if(!r)throw Error(se(169));n?(t=tA(t,e,Fl),r.__reactInternalMemoizedMergedChildContext=t,xt(Mr),xt(sr),St(sr,t)):xt(Mr),St(Mr,n)}var qs=null,jy=!1,ew=!1;function nA(t){qs===null?qs=[t]:qs.push(t)}function SU(t){jy=!0,nA(t)}function Ra(){if(!ew&&qs!==null){ew=!0;var t=0,e=pt;try{var n=qs;for(pt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qs=null,jy=!1}catch(i){throw qs!==null&&(qs=qs.slice(t+1)),kN(gI,Ra),i}finally{pt=e,ew=!1}}return null}var oc=[],ac=0,Om=null,Lm=0,fi=[],pi=0,$l=null,zs=1,Ws="";function cl(t,e){oc[ac++]=Lm,oc[ac++]=Om,Om=t,Lm=e}function rA(t,e,n){fi[pi++]=zs,fi[pi++]=Ws,fi[pi++]=$l,$l=t;var r=zs;t=Ws;var i=32-ji(r)-1;r&=~(1<<i),n+=1;var s=32-ji(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,zs=1<<32-ji(e)+i|n<<i|r,Ws=s+t}else zs=1<<s|n<<i|r,Ws=t}function SI(t){t.return!==null&&(cl(t,1),rA(t,1,0))}function CI(t){for(;t===Om;)Om=oc[--ac],oc[ac]=null,Lm=oc[--ac],oc[ac]=null;for(;t===$l;)$l=fi[--pi],fi[pi]=null,Ws=fi[--pi],fi[pi]=null,zs=fi[--pi],fi[pi]=null}var Qr=null,Kr=null,At=!1,Ui=null;function iA(t,e){var n=mi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Eb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qr=t,Kr=ra(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qr=t,Kr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$l!==null?{id:zs,overflow:Ws}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qr=t,Kr=null,!0):!1;default:return!1}}function b0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function k0(t){if(At){var e=Kr;if(e){var n=e;if(!Eb(t,e)){if(b0(t))throw Error(se(418));e=ra(n.nextSibling);var r=Qr;e&&Eb(t,e)?iA(r,n):(t.flags=t.flags&-4097|2,At=!1,Qr=t)}}else{if(b0(t))throw Error(se(418));t.flags=t.flags&-4097|2,At=!1,Qr=t}}}function Ib(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qr=t}function Ag(t){if(t!==Qr)return!1;if(!At)return Ib(t),At=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!I0(t.type,t.memoizedProps)),e&&(e=Kr)){if(b0(t))throw sA(),Error(se(418));for(;e;)iA(t,e),e=ra(e.nextSibling)}if(Ib(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kr=ra(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kr=null}}else Kr=Qr?ra(t.stateNode.nextSibling):null;return!0}function sA(){for(var t=Kr;t;)t=ra(t.nextSibling)}function Nc(){Kr=Qr=null,At=!1}function bI(t){Ui===null?Ui=[t]:Ui.push(t)}var CU=uo.ReactCurrentBatchConfig;function Fi(t,e){if(t&&t.defaultProps){e=Ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Mm=Pa(null),Fm=null,lc=null,kI=null;function xI(){kI=lc=Fm=null}function NI(t){var e=Mm.current;xt(Mm),t._currentValue=e}function x0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function yc(t,e){Fm=t,kI=lc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Dr=!0),t.firstContext=null)}function Ei(t){var e=t._currentValue;if(kI!==t)if(t={context:t,memoizedValue:e,next:null},lc===null){if(Fm===null)throw Error(se(308));lc=t,Fm.dependencies={lanes:0,firstContext:t}}else lc=lc.next=t;return e}var El=null;function AI(t){El===null?El=[t]:El.push(t)}function oA(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,AI(e)):(n.next=i.next,i.next=n),e.interleaved=n,no(t,r)}function no(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jo=!1;function DI(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ys(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ia(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(tt&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,no(t,n)}return i=r.interleaved,i===null?(e.next=e,AI(r)):(e.next=i.next,i.next=e),r.interleaved=e,no(t,n)}function am(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mI(t,n)}}function Tb(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $m(t,e,n,r){var i=t.updateQueue;jo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==o&&(a===null?p.firstBaseUpdate=h:a.next=h,p.lastBaseUpdate=u))}if(s!==null){var v=i.baseState;o=0,p=h=u=null,a=s;do{var w=a.lane,b=a.eventTime;if((r&w)===w){p!==null&&(p=p.next={eventTime:b,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=t,R=a;switch(w=e,b=n,R.tag){case 1:if(k=R.payload,typeof k=="function"){v=k.call(b,v,w);break e}v=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=R.payload,w=typeof k=="function"?k.call(b,v,w):k,w==null)break e;v=Ut({},v,w);break e;case 2:jo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,w=i.effects,w===null?i.effects=[a]:w.push(a))}else b={eventTime:b,lane:w,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(h=p=b,u=v):p=p.next=b,o|=w;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;w=a,a=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(1);if(p===null&&(u=v),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Vl|=o,t.lanes=o,t.memoizedState=v}}function Sb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(se(191,i));i.call(r)}}}var lA=new oN.Component().refs;function N0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qy={isMounted:function(t){return(t=t._reactInternals)?au(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yr(),i=oa(t),s=Ys(r,i);s.payload=e,n!=null&&(s.callback=n),e=ia(t,s,i),e!==null&&(qi(e,t,i,r),am(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yr(),i=oa(t),s=Ys(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ia(t,s,i),e!==null&&(qi(e,t,i,r),am(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yr(),r=oa(t),i=Ys(n,r);i.tag=2,e!=null&&(i.callback=e),e=ia(t,i,r),e!==null&&(qi(e,t,r,n),am(e,t,r))}};function Cb(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!rf(n,r)||!rf(i,s):!0}function uA(t,e,n){var r=!1,i=ga,s=e.contextType;return typeof s=="object"&&s!==null?s=Ei(s):(i=Fr(e)?Fl:sr.current,r=e.contextTypes,s=(r=r!=null)?xc(t,i):ga),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function bb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qy.enqueueReplaceState(e,e.state,null)}function A0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=lA,DI(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ei(s):(s=Fr(e)?Fl:sr.current,i.context=xc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(N0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qy.enqueueReplaceState(i,i.state,null),$m(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ed(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var r=n.stateNode}if(!r)throw Error(se(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===lA&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,t))}return t}function Dg(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kb(t){var e=t._init;return e(t._payload)}function cA(t){function e(N,D){if(t){var M=N.deletions;M===null?(N.deletions=[D],N.flags|=16):M.push(D)}}function n(N,D){if(!t)return null;for(;D!==null;)e(N,D),D=D.sibling;return null}function r(N,D){for(N=new Map;D!==null;)D.key!==null?N.set(D.key,D):N.set(D.index,D),D=D.sibling;return N}function i(N,D){return N=aa(N,D),N.index=0,N.sibling=null,N}function s(N,D,M){return N.index=M,t?(M=N.alternate,M!==null?(M=M.index,M<D?(N.flags|=2,D):M):(N.flags|=2,D)):(N.flags|=1048576,D)}function o(N){return t&&N.alternate===null&&(N.flags|=2),N}function a(N,D,M,Q){return D===null||D.tag!==6?(D=aw(M,N.mode,Q),D.return=N,D):(D=i(D,M),D.return=N,D)}function u(N,D,M,Q){var re=M.type;return re===ec?p(N,D,M.props.children,Q,M.key):D!==null&&(D.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Bo&&kb(re)===D.type)?(Q=i(D,M.props),Q.ref=ed(N,D,M),Q.return=N,Q):(Q=fm(M.type,M.key,M.props,null,N.mode,Q),Q.ref=ed(N,D,M),Q.return=N,Q)}function h(N,D,M,Q){return D===null||D.tag!==4||D.stateNode.containerInfo!==M.containerInfo||D.stateNode.implementation!==M.implementation?(D=lw(M,N.mode,Q),D.return=N,D):(D=i(D,M.children||[]),D.return=N,D)}function p(N,D,M,Q,re){return D===null||D.tag!==7?(D=Al(M,N.mode,Q,re),D.return=N,D):(D=i(D,M),D.return=N,D)}function v(N,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return D=aw(""+D,N.mode,M),D.return=N,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case wg:return M=fm(D.type,D.key,D.props,null,N.mode,M),M.ref=ed(N,null,D),M.return=N,M;case Zu:return D=lw(D,N.mode,M),D.return=N,D;case Bo:var Q=D._init;return v(N,Q(D._payload),M)}if(vd(D)||Qh(D))return D=Al(D,N.mode,M,null),D.return=N,D;Dg(N,D)}return null}function w(N,D,M,Q){var re=D!==null?D.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return re!==null?null:a(N,D,""+M,Q);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case wg:return M.key===re?u(N,D,M,Q):null;case Zu:return M.key===re?h(N,D,M,Q):null;case Bo:return re=M._init,w(N,D,re(M._payload),Q)}if(vd(M)||Qh(M))return re!==null?null:p(N,D,M,Q,null);Dg(N,M)}return null}function b(N,D,M,Q,re){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return N=N.get(M)||null,a(D,N,""+Q,re);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case wg:return N=N.get(Q.key===null?M:Q.key)||null,u(D,N,Q,re);case Zu:return N=N.get(Q.key===null?M:Q.key)||null,h(D,N,Q,re);case Bo:var m=Q._init;return b(N,D,M,m(Q._payload),re)}if(vd(Q)||Qh(Q))return N=N.get(M)||null,p(D,N,Q,re,null);Dg(D,Q)}return null}function k(N,D,M,Q){for(var re=null,m=null,ue=D,he=D=0,Ye=null;ue!==null&&he<M.length;he++){ue.index>he?(Ye=ue,ue=null):Ye=ue.sibling;var Fe=w(N,ue,M[he],Q);if(Fe===null){ue===null&&(ue=Ye);break}t&&ue&&Fe.alternate===null&&e(N,ue),D=s(Fe,D,he),m===null?re=Fe:m.sibling=Fe,m=Fe,ue=Ye}if(he===M.length)return n(N,ue),At&&cl(N,he),re;if(ue===null){for(;he<M.length;he++)ue=v(N,M[he],Q),ue!==null&&(D=s(ue,D,he),m===null?re=ue:m.sibling=ue,m=ue);return At&&cl(N,he),re}for(ue=r(N,ue);he<M.length;he++)Ye=b(ue,N,he,M[he],Q),Ye!==null&&(t&&Ye.alternate!==null&&ue.delete(Ye.key===null?he:Ye.key),D=s(Ye,D,he),m===null?re=Ye:m.sibling=Ye,m=Ye);return t&&ue.forEach(function(Kn){return e(N,Kn)}),At&&cl(N,he),re}function R(N,D,M,Q){var re=Qh(M);if(typeof re!="function")throw Error(se(150));if(M=re.call(M),M==null)throw Error(se(151));for(var m=re=null,ue=D,he=D=0,Ye=null,Fe=M.next();ue!==null&&!Fe.done;he++,Fe=M.next()){ue.index>he?(Ye=ue,ue=null):Ye=ue.sibling;var Kn=w(N,ue,Fe.value,Q);if(Kn===null){ue===null&&(ue=Ye);break}t&&ue&&Kn.alternate===null&&e(N,ue),D=s(Kn,D,he),m===null?re=Kn:m.sibling=Kn,m=Kn,ue=Ye}if(Fe.done)return n(N,ue),At&&cl(N,he),re;if(ue===null){for(;!Fe.done;he++,Fe=M.next())Fe=v(N,Fe.value,Q),Fe!==null&&(D=s(Fe,D,he),m===null?re=Fe:m.sibling=Fe,m=Fe);return At&&cl(N,he),re}for(ue=r(N,ue);!Fe.done;he++,Fe=M.next())Fe=b(ue,N,he,Fe.value,Q),Fe!==null&&(t&&Fe.alternate!==null&&ue.delete(Fe.key===null?he:Fe.key),D=s(Fe,D,he),m===null?re=Fe:m.sibling=Fe,m=Fe);return t&&ue.forEach(function(Gt){return e(N,Gt)}),At&&cl(N,he),re}function J(N,D,M,Q){if(typeof M=="object"&&M!==null&&M.type===ec&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case wg:e:{for(var re=M.key,m=D;m!==null;){if(m.key===re){if(re=M.type,re===ec){if(m.tag===7){n(N,m.sibling),D=i(m,M.props.children),D.return=N,N=D;break e}}else if(m.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Bo&&kb(re)===m.type){n(N,m.sibling),D=i(m,M.props),D.ref=ed(N,m,M),D.return=N,N=D;break e}n(N,m);break}else e(N,m);m=m.sibling}M.type===ec?(D=Al(M.props.children,N.mode,Q,M.key),D.return=N,N=D):(Q=fm(M.type,M.key,M.props,null,N.mode,Q),Q.ref=ed(N,D,M),Q.return=N,N=Q)}return o(N);case Zu:e:{for(m=M.key;D!==null;){if(D.key===m)if(D.tag===4&&D.stateNode.containerInfo===M.containerInfo&&D.stateNode.implementation===M.implementation){n(N,D.sibling),D=i(D,M.children||[]),D.return=N,N=D;break e}else{n(N,D);break}else e(N,D);D=D.sibling}D=lw(M,N.mode,Q),D.return=N,N=D}return o(N);case Bo:return m=M._init,J(N,D,m(M._payload),Q)}if(vd(M))return k(N,D,M,Q);if(Qh(M))return R(N,D,M,Q);Dg(N,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,D!==null&&D.tag===6?(n(N,D.sibling),D=i(D,M),D.return=N,N=D):(n(N,D),D=aw(M,N.mode,Q),D.return=N,N=D),o(N)):n(N,D)}return J}var Ac=cA(!0),hA=cA(!1),rp={},_s=Pa(rp),lf=Pa(rp),uf=Pa(rp);function Il(t){if(t===rp)throw Error(se(174));return t}function PI(t,e){switch(St(uf,e),St(lf,t),St(_s,rp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:l0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=l0(e,t)}xt(_s),St(_s,e)}function Dc(){xt(_s),xt(lf),xt(uf)}function dA(t){Il(uf.current);var e=Il(_s.current),n=l0(e,t.type);e!==n&&(St(lf,t),St(_s,n))}function RI(t){lf.current===t&&(xt(_s),xt(lf))}var Mt=Pa(0);function Um(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tw=[];function OI(){for(var t=0;t<tw.length;t++)tw[t]._workInProgressVersionPrimary=null;tw.length=0}var lm=uo.ReactCurrentDispatcher,nw=uo.ReactCurrentBatchConfig,Ul=0,$t=null,on=null,yn=null,Vm=!1,Pd=!1,cf=0,bU=0;function Jn(){throw Error(se(321))}function LI(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hi(t[n],e[n]))return!1;return!0}function MI(t,e,n,r,i,s){if(Ul=s,$t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lm.current=t===null||t.memoizedState===null?AU:DU,t=n(r,i),Pd){s=0;do{if(Pd=!1,cf=0,25<=s)throw Error(se(301));s+=1,yn=on=null,e.updateQueue=null,lm.current=PU,t=n(r,i)}while(Pd)}if(lm.current=Bm,e=on!==null&&on.next!==null,Ul=0,yn=on=$t=null,Vm=!1,e)throw Error(se(300));return t}function FI(){var t=cf!==0;return cf=0,t}function ls(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?$t.memoizedState=yn=t:yn=yn.next=t,yn}function Ii(){if(on===null){var t=$t.alternate;t=t!==null?t.memoizedState:null}else t=on.next;var e=yn===null?$t.memoizedState:yn.next;if(e!==null)yn=e,on=t;else{if(t===null)throw Error(se(310));on=t,t={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},yn===null?$t.memoizedState=yn=t:yn=yn.next=t}return yn}function hf(t,e){return typeof e=="function"?e(t):e}function rw(t){var e=Ii(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var r=on,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,h=s;do{var p=h.lane;if((Ul&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var v={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(a=u=v,o=r):u=u.next=v,$t.lanes|=p,Vl|=p}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=a,Hi(r,e.memoizedState)||(Dr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,$t.lanes|=s,Vl|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function iw(t){var e=Ii(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Hi(s,e.memoizedState)||(Dr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function fA(){}function pA(t,e){var n=$t,r=Ii(),i=e(),s=!Hi(r.memoizedState,i);if(s&&(r.memoizedState=i,Dr=!0),r=r.queue,$I(yA.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||yn!==null&&yn.memoizedState.tag&1){if(n.flags|=2048,df(9,mA.bind(null,n,r,i,e),void 0,null),In===null)throw Error(se(349));(Ul&30)!==0||gA(n,e,i)}return i}function gA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$t.updateQueue,e===null?(e={lastEffect:null,stores:null},$t.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mA(t,e,n,r){e.value=n,e.getSnapshot=r,vA(e)&&_A(t)}function yA(t,e,n){return n(function(){vA(e)&&_A(t)})}function vA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hi(t,n)}catch{return!0}}function _A(t){var e=no(t,1);e!==null&&qi(e,t,1,-1)}function xb(t){var e=ls();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hf,lastRenderedState:t},e.queue=t,t=t.dispatch=NU.bind(null,$t,t),[e.memoizedState,t]}function df(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$t.updateQueue,e===null?(e={lastEffect:null,stores:null},$t.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wA(){return Ii().memoizedState}function um(t,e,n,r){var i=ls();$t.flags|=t,i.memoizedState=df(1|e,n,void 0,r===void 0?null:r)}function zy(t,e,n,r){var i=Ii();r=r===void 0?null:r;var s=void 0;if(on!==null){var o=on.memoizedState;if(s=o.destroy,r!==null&&LI(r,o.deps)){i.memoizedState=df(e,n,s,r);return}}$t.flags|=t,i.memoizedState=df(1|e,n,s,r)}function Nb(t,e){return um(8390656,8,t,e)}function $I(t,e){return zy(2048,8,t,e)}function EA(t,e){return zy(4,2,t,e)}function IA(t,e){return zy(4,4,t,e)}function TA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function SA(t,e,n){return n=n!=null?n.concat([t]):null,zy(4,4,TA.bind(null,e,t),n)}function UI(){}function CA(t,e){var n=Ii();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&LI(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bA(t,e){var n=Ii();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&LI(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kA(t,e,n){return(Ul&21)===0?(t.baseState&&(t.baseState=!1,Dr=!0),t.memoizedState=n):(Hi(n,e)||(n=AN(),$t.lanes|=n,Vl|=n,t.baseState=!0),e)}function kU(t,e){var n=pt;pt=n!==0&&4>n?n:4,t(!0);var r=nw.transition;nw.transition={};try{t(!1),e()}finally{pt=n,nw.transition=r}}function xA(){return Ii().memoizedState}function xU(t,e,n){var r=oa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},NA(t))AA(e,n);else if(n=oA(t,e,n,r),n!==null){var i=yr();qi(n,t,r,i),DA(n,e,r)}}function NU(t,e,n){var r=oa(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(NA(t))AA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Hi(a,o)){var u=e.interleaved;u===null?(i.next=i,AI(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=oA(t,e,i,r),n!==null&&(i=yr(),qi(n,t,r,i),DA(n,e,r))}}function NA(t){var e=t.alternate;return t===$t||e!==null&&e===$t}function AA(t,e){Pd=Vm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function DA(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mI(t,n)}}var Bm={readContext:Ei,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useInsertionEffect:Jn,useLayoutEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useMutableSource:Jn,useSyncExternalStore:Jn,useId:Jn,unstable_isNewReconciler:!1},AU={readContext:Ei,useCallback:function(t,e){return ls().memoizedState=[t,e===void 0?null:e],t},useContext:Ei,useEffect:Nb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,um(4194308,4,TA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return um(4194308,4,t,e)},useInsertionEffect:function(t,e){return um(4,2,t,e)},useMemo:function(t,e){var n=ls();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ls();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=xU.bind(null,$t,t),[r.memoizedState,t]},useRef:function(t){var e=ls();return t={current:t},e.memoizedState=t},useState:xb,useDebugValue:UI,useDeferredValue:function(t){return ls().memoizedState=t},useTransition:function(){var t=xb(!1),e=t[0];return t=kU.bind(null,t[1]),ls().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$t,i=ls();if(At){if(n===void 0)throw Error(se(407));n=n()}else{if(n=e(),In===null)throw Error(se(349));(Ul&30)!==0||gA(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Nb(yA.bind(null,r,s,t),[t]),r.flags|=2048,df(9,mA.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ls(),e=In.identifierPrefix;if(At){var n=Ws,r=zs;n=(r&~(1<<32-ji(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=cf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bU++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},DU={readContext:Ei,useCallback:CA,useContext:Ei,useEffect:$I,useImperativeHandle:SA,useInsertionEffect:EA,useLayoutEffect:IA,useMemo:bA,useReducer:rw,useRef:wA,useState:function(){return rw(hf)},useDebugValue:UI,useDeferredValue:function(t){var e=Ii();return kA(e,on.memoizedState,t)},useTransition:function(){var t=rw(hf)[0],e=Ii().memoizedState;return[t,e]},useMutableSource:fA,useSyncExternalStore:pA,useId:xA,unstable_isNewReconciler:!1},PU={readContext:Ei,useCallback:CA,useContext:Ei,useEffect:$I,useImperativeHandle:SA,useInsertionEffect:EA,useLayoutEffect:IA,useMemo:bA,useReducer:iw,useRef:wA,useState:function(){return iw(hf)},useDebugValue:UI,useDeferredValue:function(t){var e=Ii();return on===null?e.memoizedState=t:kA(e,on.memoizedState,t)},useTransition:function(){var t=iw(hf)[0],e=Ii().memoizedState;return[t,e]},useMutableSource:fA,useSyncExternalStore:pA,useId:xA,unstable_isNewReconciler:!1};function Pc(t,e){try{var n="",r=e;do n+=o$(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function sw(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function D0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RU=typeof WeakMap=="function"?WeakMap:Map;function PA(t,e,n){n=Ys(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qm||(qm=!0,B0=r),D0(t,e)},n}function RA(t,e,n){n=Ys(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){D0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){D0(t,e),typeof r!="function"&&(sa===null?sa=new Set([this]):sa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ab(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RU;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=KU.bind(null,t,e,n),e.then(t,t))}function Db(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Pb(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ys(-1,1),e.tag=2,ia(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var OU=uo.ReactCurrentOwner,Dr=!1;function dr(t,e,n,r){e.child=t===null?hA(e,null,n,r):Ac(e,t.child,n,r)}function Rb(t,e,n,r,i){n=n.render;var s=e.ref;return yc(e,i),r=MI(t,e,n,r,s,i),n=FI(),t!==null&&!Dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ro(t,e,i)):(At&&n&&SI(e),e.flags|=1,dr(t,e,r,i),e.child)}function Ob(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!KI(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,OA(t,e,s,r,i)):(t=fm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&i)===0){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:rf,n(o,r)&&t.ref===e.ref)return ro(t,e,i)}return e.flags|=1,t=aa(s,r),t.ref=e.ref,t.return=e,e.child=t}function OA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(rf(s,r)&&t.ref===e.ref)if(Dr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)(t.flags&131072)!==0&&(Dr=!0);else return e.lanes=t.lanes,ro(t,e,i)}return P0(t,e,n,r,i)}function LA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(cc,zr),zr|=n;else{if((n&1073741824)===0)return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,St(cc,zr),zr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,St(cc,zr),zr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,St(cc,zr),zr|=r;return dr(t,e,i,n),e.child}function MA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function P0(t,e,n,r,i){var s=Fr(n)?Fl:sr.current;return s=xc(e,s),yc(e,i),n=MI(t,e,n,r,s,i),r=FI(),t!==null&&!Dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ro(t,e,i)):(At&&r&&SI(e),e.flags|=1,dr(t,e,n,i),e.child)}function Lb(t,e,n,r,i){if(Fr(n)){var s=!0;Rm(e)}else s=!1;if(yc(e,i),e.stateNode===null)cm(t,e),uA(e,n,r),A0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ei(h):(h=Fr(n)?Fl:sr.current,h=xc(e,h));var p=n.getDerivedStateFromProps,v=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";v||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==h)&&bb(e,o,r,h),jo=!1;var w=e.memoizedState;o.state=w,$m(e,r,o,i),u=e.memoizedState,a!==r||w!==u||Mr.current||jo?(typeof p=="function"&&(N0(e,n,p,r),u=e.memoizedState),(a=jo||Cb(e,n,a,r,w,u,h))?(v||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,aA(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:Fi(e.type,a),o.props=h,v=e.pendingProps,w=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ei(u):(u=Fr(n)?Fl:sr.current,u=xc(e,u));var b=n.getDerivedStateFromProps;(p=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==v||w!==u)&&bb(e,o,r,u),jo=!1,w=e.memoizedState,o.state=w,$m(e,r,o,i);var k=e.memoizedState;a!==v||w!==k||Mr.current||jo?(typeof b=="function"&&(N0(e,n,b,r),k=e.memoizedState),(h=jo||Cb(e,n,h,r,w,k,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),r=!1)}return R0(t,e,n,r,s,i)}function R0(t,e,n,r,i,s){MA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&wb(e,n,!1),ro(t,e,s);r=e.stateNode,OU.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ac(e,t.child,null,s),e.child=Ac(e,null,a,s)):dr(t,e,a,s),e.memoizedState=r.state,i&&wb(e,n,!0),e.child}function FA(t){var e=t.stateNode;e.pendingContext?_b(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_b(t,e.context,!1),PI(t,e.containerInfo)}function Mb(t,e,n,r,i){return Nc(),bI(i),e.flags|=256,dr(t,e,n,r),e.child}var O0={dehydrated:null,treeContext:null,retryLane:0};function L0(t){return{baseLanes:t,cachePool:null,transitions:null}}function $A(t,e,n){var r=e.pendingProps,i=Mt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),St(Mt,i&1),t===null)return k0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ky(o,r,0,null),t=Al(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=L0(n),e.memoizedState=O0,t):VI(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return LU(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return(o&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=aa(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=aa(a,s):(s=Al(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?L0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=O0,r}return s=t.child,t=s.sibling,r=aa(s,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function VI(t,e){return e=Ky({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pg(t,e,n,r){return r!==null&&bI(r),Ac(e,t.child,null,n),t=VI(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function LU(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=sw(Error(se(422))),Pg(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ky({mode:"visible",children:r.children},i,0,null),s=Al(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,(e.mode&1)!==0&&Ac(e,t.child,null,o),e.child.memoizedState=L0(o),e.memoizedState=O0,s);if((e.mode&1)===0)return Pg(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(se(419)),r=sw(s,r,void 0),Pg(t,e,o,r)}if(a=(o&t.childLanes)!==0,Dr||a){if(r=In,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|o))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,no(t,i),qi(r,t,i,-1))}return HI(),r=sw(Error(se(421))),Pg(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=GU.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Kr=ra(i.nextSibling),Qr=e,At=!0,Ui=null,t!==null&&(fi[pi++]=zs,fi[pi++]=Ws,fi[pi++]=$l,zs=t.id,Ws=t.overflow,$l=e),e=VI(e,r.children),e.flags|=4096,e)}function Fb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),x0(t.return,e,n)}function ow(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function UA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(dr(t,e,r.children,n),r=Mt.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fb(t,n,e);else if(t.tag===19)Fb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(St(Mt,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Um(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ow(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Um(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ow(e,!0,n,null,s);break;case"together":ow(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cm(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ro(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vl|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,n=aa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=aa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MU(t,e,n){switch(e.tag){case 3:FA(e),Nc();break;case 5:dA(e);break;case 1:Fr(e.type)&&Rm(e);break;case 4:PI(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;St(Mm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(St(Mt,Mt.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?$A(t,e,n):(St(Mt,Mt.current&1),t=ro(t,e,n),t!==null?t.sibling:null);St(Mt,Mt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return UA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),St(Mt,Mt.current),r)break;return null;case 22:case 23:return e.lanes=0,LA(t,e,n)}return ro(t,e,n)}var VA,M0,BA,jA;VA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};M0=function(){};BA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Il(_s.current);var s=null;switch(n){case"input":i=i0(t,i),r=i0(t,r),s=[];break;case"select":i=Ut({},i,{value:void 0}),r=Ut({},r,{value:void 0}),s=[];break;case"textarea":i=a0(t,i),r=a0(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Dm)}u0(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var a=i[h];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Yd.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(a=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==a&&(u!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Yd.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&bt("scroll",t),s||a===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};jA=function(t,e,n,r){n!==r&&(e.flags|=4)};function td(t,e){if(!At)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function FU(t,e,n){var r=e.pendingProps;switch(CI(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(e),null;case 1:return Fr(e.type)&&Pm(),Zn(e),null;case 3:return r=e.stateNode,Dc(),xt(Mr),xt(sr),OI(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ag(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Ui!==null&&(z0(Ui),Ui=null))),M0(t,e),Zn(e),null;case 5:RI(e);var i=Il(uf.current);if(n=e.type,t!==null&&e.stateNode!=null)BA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(se(166));return Zn(e),null}if(t=Il(_s.current),Ag(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[us]=e,r[af]=s,t=(e.mode&1)!==0,n){case"dialog":bt("cancel",r),bt("close",r);break;case"iframe":case"object":case"embed":bt("load",r);break;case"video":case"audio":for(i=0;i<wd.length;i++)bt(wd[i],r);break;case"source":bt("error",r);break;case"img":case"image":case"link":bt("error",r),bt("load",r);break;case"details":bt("toggle",r);break;case"input":HC(r,s),bt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},bt("invalid",r);break;case"textarea":GC(r,s),bt("invalid",r)}u0(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ng(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ng(r.textContent,a,t),i=["children",""+a]):Yd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&bt("scroll",r)}switch(n){case"input":Eg(r),KC(r,s,!0);break;case"textarea":Eg(r),QC(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Dm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[us]=e,t[af]=r,VA(t,e,!1,!1),e.stateNode=t;e:{switch(o=c0(n,r),n){case"dialog":bt("cancel",t),bt("close",t),i=r;break;case"iframe":case"object":case"embed":bt("load",t),i=r;break;case"video":case"audio":for(i=0;i<wd.length;i++)bt(wd[i],t);i=r;break;case"source":bt("error",t),i=r;break;case"img":case"image":case"link":bt("error",t),bt("load",t),i=r;break;case"details":bt("toggle",t),i=r;break;case"input":HC(t,r),i=i0(t,r),bt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ut({},r,{value:void 0}),bt("invalid",t);break;case"textarea":GC(t,r),i=a0(t,r),bt("invalid",t);break;default:i=r}u0(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?vN(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&mN(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Xd(t,u):typeof u=="number"&&Xd(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Yd.hasOwnProperty(s)?u!=null&&s==="onScroll"&&bt("scroll",t):u!=null&&cI(t,s,u,o))}switch(n){case"input":Eg(t),KC(t,r,!1);break;case"textarea":Eg(t),QC(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pa(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?fc(t,!!r.multiple,s,!1):r.defaultValue!=null&&fc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Dm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zn(e),null;case 6:if(t&&e.stateNode!=null)jA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(se(166));if(n=Il(uf.current),Il(_s.current),Ag(e)){if(r=e.stateNode,n=e.memoizedProps,r[us]=e,(s=r.nodeValue!==n)&&(t=Qr,t!==null))switch(t.tag){case 3:Ng(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ng(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[us]=e,e.stateNode=r}return Zn(e),null;case 13:if(xt(Mt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(At&&Kr!==null&&(e.mode&1)!==0&&(e.flags&128)===0)sA(),Nc(),e.flags|=98560,s=!1;else if(s=Ag(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(se(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(se(317));s[us]=e}else Nc(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Zn(e),s=!1}else Ui!==null&&(z0(Ui),Ui=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(Mt.current&1)!==0?un===0&&(un=3):HI())),e.updateQueue!==null&&(e.flags|=4),Zn(e),null);case 4:return Dc(),M0(t,e),t===null&&sf(e.stateNode.containerInfo),Zn(e),null;case 10:return NI(e.type._context),Zn(e),null;case 17:return Fr(e.type)&&Pm(),Zn(e),null;case 19:if(xt(Mt),s=e.memoizedState,s===null)return Zn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)td(s,!1);else{if(un!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=Um(t),o!==null){for(e.flags|=128,td(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return St(Mt,Mt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Yt()>Rc&&(e.flags|=128,r=!0,td(s,!1),e.lanes=4194304)}else{if(!r)if(t=Um(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),td(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!At)return Zn(e),null}else 2*Yt()-s.renderingStartTime>Rc&&n!==1073741824&&(e.flags|=128,r=!0,td(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Yt(),e.sibling=null,n=Mt.current,St(Mt,r?n&1|2:n&1),e):(Zn(e),null);case 22:case 23:return WI(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(zr&1073741824)!==0&&(Zn(e),e.subtreeFlags&6&&(e.flags|=8192)):Zn(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function $U(t,e){switch(CI(e),e.tag){case 1:return Fr(e.type)&&Pm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Dc(),xt(Mr),xt(sr),OI(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return RI(e),null;case 13:if(xt(Mt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));Nc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xt(Mt),null;case 4:return Dc(),null;case 10:return NI(e.type._context),null;case 22:case 23:return WI(),null;case 24:return null;default:return null}}var Rg=!1,tr=!1,UU=typeof WeakSet=="function"?WeakSet:Set,ve=null;function uc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qt(t,e,r)}else n.current=null}function F0(t,e,n){try{n()}catch(r){qt(t,e,r)}}var $b=!1;function VU(t,e){if(w0=xm,t=HN(),TI(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,h=0,p=0,v=t,w=null;t:for(;;){for(var b;v!==n||i!==0&&v.nodeType!==3||(a=o+i),v!==s||r!==0&&v.nodeType!==3||(u=o+r),v.nodeType===3&&(o+=v.nodeValue.length),(b=v.firstChild)!==null;)w=v,v=b;for(;;){if(v===t)break t;if(w===n&&++h===i&&(a=o),w===s&&++p===r&&(u=o),(b=v.nextSibling)!==null)break;v=w,w=v.parentNode}v=b}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(E0={focusedElem:t,selectionRange:n},xm=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var k=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var R=k.memoizedProps,J=k.memoizedState,N=e.stateNode,D=N.getSnapshotBeforeUpdate(e.elementType===e.type?R:Fi(e.type,R),J);N.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var M=e.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(Q){qt(e,e.return,Q)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return k=$b,$b=!1,k}function Rd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&F0(e,n,s)}i=i.next}while(i!==r)}}function Wy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qA(t){var e=t.alternate;e!==null&&(t.alternate=null,qA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[us],delete e[af],delete e[S0],delete e[IU],delete e[TU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zA(t){return t.tag===5||t.tag===3||t.tag===4}function Ub(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function U0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Dm));else if(r!==4&&(t=t.child,t!==null))for(U0(t,e,n),t=t.sibling;t!==null;)U0(t,e,n),t=t.sibling}function V0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(V0(t,e,n),t=t.sibling;t!==null;)V0(t,e,n),t=t.sibling}var Fn=null,$i=!1;function Mo(t,e,n){for(n=n.child;n!==null;)WA(t,e,n),n=n.sibling}function WA(t,e,n){if(vs&&typeof vs.onCommitFiberUnmount=="function")try{vs.onCommitFiberUnmount(Fy,n)}catch{}switch(n.tag){case 5:tr||uc(n,e);case 6:var r=Fn,i=$i;Fn=null,Mo(t,e,n),Fn=r,$i=i,Fn!==null&&($i?(t=Fn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Fn.removeChild(n.stateNode));break;case 18:Fn!==null&&($i?(t=Fn,n=n.stateNode,t.nodeType===8?Z_(t.parentNode,n):t.nodeType===1&&Z_(t,n),tf(t)):Z_(Fn,n.stateNode));break;case 4:r=Fn,i=$i,Fn=n.stateNode.containerInfo,$i=!0,Mo(t,e,n),Fn=r,$i=i;break;case 0:case 11:case 14:case 15:if(!tr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&F0(n,e,o),i=i.next}while(i!==r)}Mo(t,e,n);break;case 1:if(!tr&&(uc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){qt(n,e,a)}Mo(t,e,n);break;case 21:Mo(t,e,n);break;case 22:n.mode&1?(tr=(r=tr)||n.memoizedState!==null,Mo(t,e,n),tr=r):Mo(t,e,n);break;default:Mo(t,e,n)}}function Vb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new UU),e.forEach(function(r){var i=QU.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Li(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Fn=a.stateNode,$i=!1;break e;case 3:Fn=a.stateNode.containerInfo,$i=!0;break e;case 4:Fn=a.stateNode.containerInfo,$i=!0;break e}a=a.return}if(Fn===null)throw Error(se(160));WA(s,o,i),Fn=null,$i=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){qt(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)HA(e,t),e=e.sibling}function HA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Li(e,t),as(t),r&4){try{Rd(3,t,t.return),Wy(3,t)}catch(R){qt(t,t.return,R)}try{Rd(5,t,t.return)}catch(R){qt(t,t.return,R)}}break;case 1:Li(e,t),as(t),r&512&&n!==null&&uc(n,n.return);break;case 5:if(Li(e,t),as(t),r&512&&n!==null&&uc(n,n.return),t.flags&32){var i=t.stateNode;try{Xd(i,"")}catch(R){qt(t,t.return,R)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&fN(i,s),c0(a,o);var h=c0(a,s);for(o=0;o<u.length;o+=2){var p=u[o],v=u[o+1];p==="style"?vN(i,v):p==="dangerouslySetInnerHTML"?mN(i,v):p==="children"?Xd(i,v):cI(i,p,v,h)}switch(a){case"input":s0(i,s);break;case"textarea":pN(i,s);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var b=s.value;b!=null?fc(i,!!s.multiple,b,!1):w!==!!s.multiple&&(s.defaultValue!=null?fc(i,!!s.multiple,s.defaultValue,!0):fc(i,!!s.multiple,s.multiple?[]:"",!1))}i[af]=s}catch(R){qt(t,t.return,R)}}break;case 6:if(Li(e,t),as(t),r&4){if(t.stateNode===null)throw Error(se(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(R){qt(t,t.return,R)}}break;case 3:if(Li(e,t),as(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{tf(e.containerInfo)}catch(R){qt(t,t.return,R)}break;case 4:Li(e,t),as(t);break;case 13:Li(e,t),as(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(qI=Yt())),r&4&&Vb(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(tr=(h=tr)||p,Li(e,t),tr=h):Li(e,t),as(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&(t.mode&1)!==0)for(ve=t,p=t.child;p!==null;){for(v=ve=p;ve!==null;){switch(w=ve,b=w.child,w.tag){case 0:case 11:case 14:case 15:Rd(4,w,w.return);break;case 1:uc(w,w.return);var k=w.stateNode;if(typeof k.componentWillUnmount=="function"){r=w,n=w.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(R){qt(r,n,R)}}break;case 5:uc(w,w.return);break;case 22:if(w.memoizedState!==null){jb(v);continue}}b!==null?(b.return=w,ve=b):jb(v)}p=p.sibling}e:for(p=null,v=t;;){if(v.tag===5){if(p===null){p=v;try{i=v.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=v.stateNode,u=v.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=yN("display",o))}catch(R){qt(t,t.return,R)}}}else if(v.tag===6){if(p===null)try{v.stateNode.nodeValue=h?"":v.memoizedProps}catch(R){qt(t,t.return,R)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;p===v&&(p=null),v=v.return}p===v&&(p=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Li(e,t),as(t),r&4&&Vb(t);break;case 21:break;default:Li(e,t),as(t)}}function as(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zA(n)){var r=n;break e}n=n.return}throw Error(se(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Xd(i,""),r.flags&=-33);var s=Ub(t);V0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ub(t);U0(t,a,o);break;default:throw Error(se(161))}}catch(u){qt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function BU(t,e,n){ve=t,KA(t)}function KA(t,e,n){for(var r=(t.mode&1)!==0;ve!==null;){var i=ve,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Rg;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||tr;a=Rg;var h=tr;if(Rg=o,(tr=u)&&!h)for(ve=i;ve!==null;)o=ve,u=o.child,o.tag===22&&o.memoizedState!==null?qb(i):u!==null?(u.return=o,ve=u):qb(i);for(;s!==null;)ve=s,KA(s),s=s.sibling;ve=i,Rg=a,tr=h}Bb(t)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,ve=s):Bb(t)}}function Bb(t){for(;ve!==null;){var e=ve;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:tr||Wy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Fi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Sb(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sb(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var v=p.dehydrated;v!==null&&tf(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}tr||e.flags&512&&$0(e)}catch(w){qt(e,e.return,w)}}if(e===t){ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,ve=n;break}ve=e.return}}function jb(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ve=n;break}ve=e.return}}function qb(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wy(4,e)}catch(u){qt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){qt(e,i,u)}}var s=e.return;try{$0(e)}catch(u){qt(e,s,u)}break;case 5:var o=e.return;try{$0(e)}catch(u){qt(e,o,u)}}}catch(u){qt(e,e.return,u)}if(e===t){ve=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ve=a;break}ve=e.return}}var jU=Math.ceil,jm=uo.ReactCurrentDispatcher,BI=uo.ReactCurrentOwner,wi=uo.ReactCurrentBatchConfig,tt=0,In=null,nn=null,Vn=0,zr=0,cc=Pa(0),un=0,ff=null,Vl=0,Hy=0,jI=0,Od=null,Nr=null,qI=0,Rc=1/0,js=null,qm=!1,B0=null,sa=null,Og=!1,Go=null,zm=0,Ld=0,j0=null,hm=-1,dm=0;function yr(){return(tt&6)!==0?Yt():hm!==-1?hm:hm=Yt()}function oa(t){return(t.mode&1)===0?1:(tt&2)!==0&&Vn!==0?Vn&-Vn:CU.transition!==null?(dm===0&&(dm=AN()),dm):(t=pt,t!==0||(t=window.event,t=t===void 0?16:FN(t.type)),t)}function qi(t,e,n,r){if(50<Ld)throw Ld=0,j0=null,Error(se(185));ep(t,n,r),((tt&2)===0||t!==In)&&(t===In&&((tt&2)===0&&(Hy|=n),un===4&&zo(t,Vn)),$r(t,r),n===1&&tt===0&&(e.mode&1)===0&&(Rc=Yt()+500,jy&&Ra()))}function $r(t,e){var n=t.callbackNode;C$(t,e);var r=km(t,t===In?Vn:0);if(r===0)n!==null&&JC(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&JC(n),e===1)t.tag===0?SU(zb.bind(null,t)):nA(zb.bind(null,t)),wU(function(){(tt&6)===0&&Ra()}),n=null;else{switch(DN(r)){case 1:n=gI;break;case 4:n=xN;break;case 16:n=bm;break;case 536870912:n=NN;break;default:n=bm}n=tD(n,GA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function GA(t,e){if(hm=-1,dm=0,(tt&6)!==0)throw Error(se(327));var n=t.callbackNode;if(vc()&&t.callbackNode!==n)return null;var r=km(t,t===In?Vn:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=Wm(t,r);else{e=r;var i=tt;tt|=2;var s=YA();(In!==t||Vn!==e)&&(js=null,Rc=Yt()+500,Nl(t,e));do try{WU();break}catch(a){QA(t,a)}while(1);xI(),jm.current=s,tt=i,nn!==null?e=0:(In=null,Vn=0,e=un)}if(e!==0){if(e===2&&(i=g0(t),i!==0&&(r=i,e=q0(t,i))),e===1)throw n=ff,Nl(t,0),zo(t,r),$r(t,Yt()),n;if(e===6)zo(t,r);else{if(i=t.current.alternate,(r&30)===0&&!qU(i)&&(e=Wm(t,r),e===2&&(s=g0(t),s!==0&&(r=s,e=q0(t,s))),e===1))throw n=ff,Nl(t,0),zo(t,r),$r(t,Yt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(se(345));case 2:hl(t,Nr,js);break;case 3:if(zo(t,r),(r&130023424)===r&&(e=qI+500-Yt(),10<e)){if(km(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){yr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=T0(hl.bind(null,t,Nr,js),e);break}hl(t,Nr,js);break;case 4:if(zo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ji(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jU(r/1960))-r,10<r){t.timeoutHandle=T0(hl.bind(null,t,Nr,js),r);break}hl(t,Nr,js);break;case 5:hl(t,Nr,js);break;default:throw Error(se(329))}}}return $r(t,Yt()),t.callbackNode===n?GA.bind(null,t):null}function q0(t,e){var n=Od;return t.current.memoizedState.isDehydrated&&(Nl(t,e).flags|=256),t=Wm(t,e),t!==2&&(e=Nr,Nr=n,e!==null&&z0(e)),t}function z0(t){Nr===null?Nr=t:Nr.push.apply(Nr,t)}function qU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hi(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zo(t,e){for(e&=~jI,e&=~Hy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ji(e),r=1<<n;t[n]=-1,e&=~r}}function zb(t){if((tt&6)!==0)throw Error(se(327));vc();var e=km(t,0);if((e&1)===0)return $r(t,Yt()),null;var n=Wm(t,e);if(t.tag!==0&&n===2){var r=g0(t);r!==0&&(e=r,n=q0(t,r))}if(n===1)throw n=ff,Nl(t,0),zo(t,e),$r(t,Yt()),n;if(n===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hl(t,Nr,js),$r(t,Yt()),null}function zI(t,e){var n=tt;tt|=1;try{return t(e)}finally{tt=n,tt===0&&(Rc=Yt()+500,jy&&Ra())}}function Bl(t){Go!==null&&Go.tag===0&&(tt&6)===0&&vc();var e=tt;tt|=1;var n=wi.transition,r=pt;try{if(wi.transition=null,pt=1,t)return t()}finally{pt=r,wi.transition=n,tt=e,(tt&6)===0&&Ra()}}function WI(){zr=cc.current,xt(cc)}function Nl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_U(n)),nn!==null)for(n=nn.return;n!==null;){var r=n;switch(CI(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pm();break;case 3:Dc(),xt(Mr),xt(sr),OI();break;case 5:RI(r);break;case 4:Dc();break;case 13:xt(Mt);break;case 19:xt(Mt);break;case 10:NI(r.type._context);break;case 22:case 23:WI()}n=n.return}if(In=t,nn=t=aa(t.current,null),Vn=zr=e,un=0,ff=null,jI=Hy=Vl=0,Nr=Od=null,El!==null){for(e=0;e<El.length;e++)if(n=El[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}El=null}return t}function QA(t,e){do{var n=nn;try{if(xI(),lm.current=Bm,Vm){for(var r=$t.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Vm=!1}if(Ul=0,yn=on=$t=null,Pd=!1,cf=0,BI.current=null,n===null||n.return===null){un=1,ff=e,nn=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=Vn,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=a,v=p.tag;if((p.mode&1)===0&&(v===0||v===11||v===15)){var w=p.alternate;w?(p.updateQueue=w.updateQueue,p.memoizedState=w.memoizedState,p.lanes=w.lanes):(p.updateQueue=null,p.memoizedState=null)}var b=Db(o);if(b!==null){b.flags&=-257,Pb(b,o,a,s,e),b.mode&1&&Ab(s,h,e),e=b,u=h;var k=e.updateQueue;if(k===null){var R=new Set;R.add(u),e.updateQueue=R}else k.add(u);break e}else{if((e&1)===0){Ab(s,h,e),HI();break e}u=Error(se(426))}}else if(At&&a.mode&1){var J=Db(o);if(J!==null){(J.flags&65536)===0&&(J.flags|=256),Pb(J,o,a,s,e),bI(Pc(u,a));break e}}s=u=Pc(u,a),un!==4&&(un=2),Od===null?Od=[s]:Od.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var N=PA(s,u,e);Tb(s,N);break e;case 1:a=u;var D=s.type,M=s.stateNode;if((s.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(sa===null||!sa.has(M)))){s.flags|=65536,e&=-e,s.lanes|=e;var Q=RA(s,a,e);Tb(s,Q);break e}}s=s.return}while(s!==null)}JA(n)}catch(re){e=re,nn===n&&n!==null&&(nn=n=n.return);continue}break}while(1)}function YA(){var t=jm.current;return jm.current=Bm,t===null?Bm:t}function HI(){(un===0||un===3||un===2)&&(un=4),In===null||(Vl&268435455)===0&&(Hy&268435455)===0||zo(In,Vn)}function Wm(t,e){var n=tt;tt|=2;var r=YA();(In!==t||Vn!==e)&&(js=null,Nl(t,e));do try{zU();break}catch(i){QA(t,i)}while(1);if(xI(),tt=n,jm.current=r,nn!==null)throw Error(se(261));return In=null,Vn=0,un}function zU(){for(;nn!==null;)XA(nn)}function WU(){for(;nn!==null&&!m$();)XA(nn)}function XA(t){var e=eD(t.alternate,t,zr);t.memoizedProps=t.pendingProps,e===null?JA(t):nn=e,BI.current=null}function JA(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=FU(n,e,zr),n!==null){nn=n;return}}else{if(n=$U(n,e),n!==null){n.flags&=32767,nn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{un=6,nn=null;return}}if(e=e.sibling,e!==null){nn=e;return}nn=e=t}while(e!==null);un===0&&(un=5)}function hl(t,e,n){var r=pt,i=wi.transition;try{wi.transition=null,pt=1,HU(t,e,n,r)}finally{wi.transition=i,pt=r}return null}function HU(t,e,n,r){do vc();while(Go!==null);if((tt&6)!==0)throw Error(se(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(b$(t,s),t===In&&(nn=In=null,Vn=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Og||(Og=!0,tD(bm,function(){return vc(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=wi.transition,wi.transition=null;var o=pt;pt=1;var a=tt;tt|=4,BI.current=null,VU(t,n),HA(n,t),dU(E0),xm=!!w0,E0=w0=null,t.current=n,BU(n),y$(),tt=a,pt=o,wi.transition=s}else t.current=n;if(Og&&(Og=!1,Go=t,zm=i),s=t.pendingLanes,s===0&&(sa=null),w$(n.stateNode),$r(t,Yt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qm)throw qm=!1,t=B0,B0=null,t;return(zm&1)!==0&&t.tag!==0&&vc(),s=t.pendingLanes,(s&1)!==0?t===j0?Ld++:(Ld=0,j0=t):Ld=0,Ra(),null}function vc(){if(Go!==null){var t=DN(zm),e=wi.transition,n=pt;try{if(wi.transition=null,pt=16>t?16:t,Go===null)var r=!1;else{if(t=Go,Go=null,zm=0,(tt&6)!==0)throw Error(se(331));var i=tt;for(tt|=4,ve=t.current;ve!==null;){var s=ve,o=s.child;if((ve.flags&16)!==0){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var h=a[u];for(ve=h;ve!==null;){var p=ve;switch(p.tag){case 0:case 11:case 15:Rd(8,p,s)}var v=p.child;if(v!==null)v.return=p,ve=v;else for(;ve!==null;){p=ve;var w=p.sibling,b=p.return;if(qA(p),p===h){ve=null;break}if(w!==null){w.return=b,ve=w;break}ve=b}}}var k=s.alternate;if(k!==null){var R=k.child;if(R!==null){k.child=null;do{var J=R.sibling;R.sibling=null,R=J}while(R!==null)}}ve=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,ve=o;else e:for(;ve!==null;){if(s=ve,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Rd(9,s,s.return)}var N=s.sibling;if(N!==null){N.return=s.return,ve=N;break e}ve=s.return}}var D=t.current;for(ve=D;ve!==null;){o=ve;var M=o.child;if((o.subtreeFlags&2064)!==0&&M!==null)M.return=o,ve=M;else e:for(o=D;ve!==null;){if(a=ve,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:Wy(9,a)}}catch(re){qt(a,a.return,re)}if(a===o){ve=null;break e}var Q=a.sibling;if(Q!==null){Q.return=a.return,ve=Q;break e}ve=a.return}}if(tt=i,Ra(),vs&&typeof vs.onPostCommitFiberRoot=="function")try{vs.onPostCommitFiberRoot(Fy,t)}catch{}r=!0}return r}finally{pt=n,wi.transition=e}}return!1}function Wb(t,e,n){e=Pc(n,e),e=PA(t,e,1),t=ia(t,e,1),e=yr(),t!==null&&(ep(t,1,e),$r(t,e))}function qt(t,e,n){if(t.tag===3)Wb(t,t,n);else for(;e!==null;){if(e.tag===3){Wb(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sa===null||!sa.has(r))){t=Pc(n,t),t=RA(e,t,1),e=ia(e,t,1),t=yr(),e!==null&&(ep(e,1,t),$r(e,t));break}}e=e.return}}function KU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yr(),t.pingedLanes|=t.suspendedLanes&n,In===t&&(Vn&n)===n&&(un===4||un===3&&(Vn&130023424)===Vn&&500>Yt()-qI?Nl(t,0):jI|=n),$r(t,e)}function ZA(t,e){e===0&&((t.mode&1)===0?e=1:(e=Sg,Sg<<=1,(Sg&130023424)===0&&(Sg=4194304)));var n=yr();t=no(t,e),t!==null&&(ep(t,e,n),$r(t,n))}function GU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ZA(t,n)}function QU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(se(314))}r!==null&&r.delete(e),ZA(t,n)}var eD;eD=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mr.current)Dr=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return Dr=!1,MU(t,e,n);Dr=(t.flags&131072)!==0}else Dr=!1,At&&(e.flags&1048576)!==0&&rA(e,Lm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;cm(t,e),t=e.pendingProps;var i=xc(e,sr.current);yc(e,n),i=MI(null,e,r,t,i,n);var s=FI();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fr(r)?(s=!0,Rm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,DI(e),i.updater=qy,e.stateNode=i,i._reactInternals=e,A0(e,r,t,n),e=R0(null,e,r,!0,s,n)):(e.tag=0,At&&s&&SI(e),dr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(cm(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=XU(r),t=Fi(r,t),i){case 0:e=P0(null,e,r,t,n);break e;case 1:e=Lb(null,e,r,t,n);break e;case 11:e=Rb(null,e,r,t,n);break e;case 14:e=Ob(null,e,r,Fi(r.type,t),n);break e}throw Error(se(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fi(r,i),P0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fi(r,i),Lb(t,e,r,i,n);case 3:e:{if(FA(e),t===null)throw Error(se(387));r=e.pendingProps,s=e.memoizedState,i=s.element,aA(t,e),$m(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Pc(Error(se(423)),e),e=Mb(t,e,r,n,i);break e}else if(r!==i){i=Pc(Error(se(424)),e),e=Mb(t,e,r,n,i);break e}else for(Kr=ra(e.stateNode.containerInfo.firstChild),Qr=e,At=!0,Ui=null,n=hA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Nc(),r===i){e=ro(t,e,n);break e}dr(t,e,r,n)}e=e.child}return e;case 5:return dA(e),t===null&&k0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,I0(r,i)?o=null:s!==null&&I0(r,s)&&(e.flags|=32),MA(t,e),dr(t,e,o,n),e.child;case 6:return t===null&&k0(e),null;case 13:return $A(t,e,n);case 4:return PI(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ac(e,null,r,n):dr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fi(r,i),Rb(t,e,r,i,n);case 7:return dr(t,e,e.pendingProps,n),e.child;case 8:return dr(t,e,e.pendingProps.children,n),e.child;case 12:return dr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,St(Mm,r._currentValue),r._currentValue=o,s!==null)if(Hi(s.value,o)){if(s.children===i.children&&!Mr.current){e=ro(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Ys(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),x0(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(se(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),x0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}dr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,yc(e,n),i=Ei(i),r=r(i),e.flags|=1,dr(t,e,r,n),e.child;case 14:return r=e.type,i=Fi(r,e.pendingProps),i=Fi(r.type,i),Ob(t,e,r,i,n);case 15:return OA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fi(r,i),cm(t,e),e.tag=1,Fr(r)?(t=!0,Rm(e)):t=!1,yc(e,n),uA(e,r,i),A0(e,r,i,n),R0(null,e,r,!0,t,n);case 19:return UA(t,e,n);case 22:return LA(t,e,n)}throw Error(se(156,e.tag))};function tD(t,e){return kN(t,e)}function YU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(t,e,n,r){return new YU(t,e,n,r)}function KI(t){return t=t.prototype,!(!t||!t.isReactComponent)}function XU(t){if(typeof t=="function")return KI(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dI)return 11;if(t===fI)return 14}return 2}function aa(t,e){var n=t.alternate;return n===null?(n=mi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fm(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")KI(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ec:return Al(n.children,i,s,e);case hI:o=8,i|=8;break;case e0:return t=mi(12,n,e,i|2),t.elementType=e0,t.lanes=s,t;case t0:return t=mi(13,n,e,i),t.elementType=t0,t.lanes=s,t;case n0:return t=mi(19,n,e,i),t.elementType=n0,t.lanes=s,t;case cN:return Ky(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lN:o=10;break e;case uN:o=9;break e;case dI:o=11;break e;case fI:o=14;break e;case Bo:o=16,r=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=mi(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Al(t,e,n,r){return t=mi(7,t,r,e),t.lanes=n,t}function Ky(t,e,n,r){return t=mi(22,t,r,e),t.elementType=cN,t.lanes=n,t.stateNode={isHidden:!1},t}function aw(t,e,n){return t=mi(6,t,null,e),t.lanes=n,t}function lw(t,e,n){return e=mi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function JU(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=j_(0),this.expirationTimes=j_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=j_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function GI(t,e,n,r,i,s,o,a,u){return t=new JU(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=mi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},DI(s),t}function ZU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function nD(t){if(!t)return ga;t=t._reactInternals;e:{if(au(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var n=t.type;if(Fr(n))return tA(t,n,e)}return e}function rD(t,e,n,r,i,s,o,a,u){return t=GI(n,r,!0,t,i,s,o,a,u),t.context=nD(null),n=t.current,r=yr(),i=oa(n),s=Ys(r,i),s.callback=e!=null?e:null,ia(n,s,i),t.current.lanes=i,ep(t,i,r),$r(t,r),t}function Gy(t,e,n,r){var i=e.current,s=yr(),o=oa(i);return n=nD(n),e.context===null?e.context=n:e.pendingContext=n,e=Ys(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ia(i,e,o),t!==null&&(qi(t,i,o,s),am(t,i,o)),o}function Hm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function QI(t,e){Hb(t,e),(t=t.alternate)&&Hb(t,e)}function e2(){return null}var iD=typeof reportError=="function"?reportError:function(t){console.error(t)};function YI(t){this._internalRoot=t}Qy.prototype.render=YI.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));Gy(t,e,null,null)};Qy.prototype.unmount=YI.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bl(function(){Gy(null,t,null,null)}),e[to]=null}};function Qy(t){this._internalRoot=t}Qy.prototype.unstable_scheduleHydration=function(t){if(t){var e=ON();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qo.length&&e!==0&&e<qo[n].priority;n++);qo.splice(n,0,t),n===0&&MN(t)}};function XI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Kb(){}function t2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Hm(o);s.call(h)}}var o=rD(e,r,t,0,null,!1,!1,"",Kb);return t._reactRootContainer=o,t[to]=o.current,sf(t.nodeType===8?t.parentNode:t),Bl(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var h=Hm(u);a.call(h)}}var u=GI(t,0,!1,null,null,!1,!1,"",Kb);return t._reactRootContainer=u,t[to]=u.current,sf(t.nodeType===8?t.parentNode:t),Bl(function(){Gy(e,u,n,r)}),u}function Xy(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Hm(o);a.call(u)}}Gy(e,o,t,i)}else o=t2(n,e,t,i,r);return Hm(o)}PN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_d(e.pendingLanes);n!==0&&(mI(e,n|1),$r(e,Yt()),(tt&6)===0&&(Rc=Yt()+500,Ra()))}break;case 13:Bl(function(){var r=no(t,1);if(r!==null){var i=yr();qi(r,t,1,i)}}),QI(t,1)}};yI=function(t){if(t.tag===13){var e=no(t,134217728);if(e!==null){var n=yr();qi(e,t,134217728,n)}QI(t,134217728)}};RN=function(t){if(t.tag===13){var e=oa(t),n=no(t,e);if(n!==null){var r=yr();qi(n,t,e,r)}QI(t,e)}};ON=function(){return pt};LN=function(t,e){var n=pt;try{return pt=t,e()}finally{pt=n}};d0=function(t,e,n){switch(e){case"input":if(s0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=By(r);if(!i)throw Error(se(90));dN(r),s0(r,i)}}}break;case"textarea":pN(t,n);break;case"select":e=n.value,e!=null&&fc(t,!!n.multiple,e,!1)}};EN=zI;IN=Bl;var n2={usingClientEntryPoint:!1,Events:[np,ic,By,_N,wN,zI]},nd={findFiberByHostInstance:wl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},r2={bundleType:nd.bundleType,version:nd.version,rendererPackageName:nd.rendererPackageName,rendererConfig:nd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:uo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=CN(t),t===null?null:t.stateNode},findFiberByHostInstance:nd.findFiberByHostInstance||e2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lg.isDisabled&&Lg.supportsFiber)try{Fy=Lg.inject(r2),vs=Lg}catch{}}ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n2;ri.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!XI(e))throw Error(se(200));return ZU(t,e,null,n)};ri.createRoot=function(t,e){if(!XI(t))throw Error(se(299));var n=!1,r="",i=iD;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=GI(t,1,!1,null,null,n,!1,r,i),t[to]=e.current,sf(t.nodeType===8?t.parentNode:t),new YI(e)};ri.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=CN(e),t=t===null?null:t.stateNode,t};ri.flushSync=function(t){return Bl(t)};ri.hydrate=function(t,e,n){if(!Yy(e))throw Error(se(200));return Xy(null,t,e,!0,n)};ri.hydrateRoot=function(t,e,n){if(!XI(t))throw Error(se(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=iD;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=rD(e,null,t,1,n!=null?n:null,i,!1,s,o),t[to]=e.current,sf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Qy(e)};ri.render=function(t,e,n){if(!Yy(e))throw Error(se(200));return Xy(null,t,e,!1,n)};ri.unmountComponentAtNode=function(t){if(!Yy(t))throw Error(se(40));return t._reactRootContainer?(Bl(function(){Xy(null,null,t,!1,function(){t._reactRootContainer=null,t[to]=null})}),!0):!1};ri.unstable_batchedUpdates=zI;ri.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yy(n))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return Xy(t,e,n,!1,r)};ri.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=ri})(rN);var Gb=rN.exports;Jw.createRoot=Gb.createRoot,Jw.hydrateRoot=Gb.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae=function(t,e){if(!t)throw ih(e)},ih=function(t){return new Error("Firebase Database ("+sD.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},i2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},JI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,p=s>>2,v=(s&3)<<4|a>>4;let w=(a&15)<<2|h>>6,b=h&63;u||(b=64,o||(w=64)),r.push(n[p],n[v],n[w],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):i2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||h==null||v==null)throw new s2;const w=s<<2|a>>4;if(r.push(w),h!==64){const b=a<<4&240|h>>2;if(r.push(b),v!==64){const k=h<<6&192|v;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class s2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aD=function(t){const e=oD(t);return JI.encodeByteArray(e,!0)},Km=function(t){return aD(t).replace(/\./g,"")},Gm=function(t){try{return JI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t){return pf(void 0,t)}function pf(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!a2(n)||(t[n]=pf(t[n],e[n]));return t}function a2(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=()=>l2().__FIREBASE_DEFAULTS__,c2=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},h2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Gm(t[1]);return e&&JSON.parse(e)},ZI=()=>{try{return u2()||c2()||h2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},d2=()=>{var t;return(t=ZI())===null||t===void 0?void 0:t.config},f2=t=>{var e;return(e=ZI())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Km(JSON.stringify(n)),Km(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function tT(){var t;const e=(t=ZI())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function p2(){return typeof self=="object"&&self.self===self}function uD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Jy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cD(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hD(){return sD.NODE_ADMIN===!0}function g2(){return!tT()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gf(){try{return typeof indexedDB=="object"}catch{return!1}}function m2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2="FirebaseError";class vr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=y2,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lu.prototype.create)}}class lu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?v2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new vr(i,a,r)}}function v2(t,e){return t.replace(_2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const _2=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t){return JSON.parse(t)}function ln(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=mf(Gm(s[0])||""),n=mf(Gm(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},w2=function(t){const e=dD(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},E2=function(t){const e=dD(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function jl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Qm(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ym(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function W0(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Qb(s)&&Qb(o)){if(!W0(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ed(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)r[v]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let v=0;v<16;v++)r[v]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let v=16;v<80;v++){const w=r[v-3]^r[v-8]^r[v-14]^r[v-16];r[v]=(w<<1|w>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4],h,p;for(let v=0;v<80;v++){v<40?v<20?(h=a^s&(o^a),p=1518500249):(h=s^o^a,p=1859775393):v<60?(h=s&o|a&(s|o),p=2400959708):(h=s^o^a,p=3395469782);const w=(i<<5|i>>>27)+h+u+p+r[v]&4294967295;u=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=w}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function fD(t,e){const n=new T2(t,e);return n.subscribe.bind(n)}class T2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");S2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=uw),i.error===void 0&&(i.error=uw),i.complete===void 0&&(i.complete=uw);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function S2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function uw(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const De=function(t,e,n,r){let i;if(r<e?i="at least "+e:r>n&&(i=n===0?"none":"no more than "+n),i){const s=t+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function Ur(t,e){return`${t} failed: ${e} argument `}function vn(t,e,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(Ur(t,e)+"must be a valid function.")}function Yb(t,e,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(Ur(t,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ae(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Zy=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t){return t&&t._delegate?t._delegate:t}class Zr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ar;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(k2(e))try{this.getOrInitializeService({instanceIdentifier:dl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=dl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=dl){return this.instances.has(e)}getOptions(e=dl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:b2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=dl){return this.component?this.component.multipleInstances?e:dl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function b2(t){return t===dl?void 0:t}function k2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=[];var Ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ze||(Ze={}));const mD={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},x2=Ze.INFO,N2={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},A2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=N2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sh{constructor(e){this.name=e,this._logLevel=x2,this._logHandler=A2,this._userLogHandler=null,nT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}function D2(t){nT.forEach(e=>{e.setLogLevel(t)})}function P2(t,e){for(const n of nT){let r=null;e&&e.level&&(r=mD[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");s>=(r!=null?r:i.logLevel)&&t({level:Ze[s].toLowerCase(),message:a,args:o,type:i.name})}}}const R2=(t,e)=>e.some(n=>t instanceof n);let Xb,Jb;function O2(){return Xb||(Xb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function L2(){return Jb||(Jb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yD=new WeakMap,H0=new WeakMap,vD=new WeakMap,cw=new WeakMap,rT=new WeakMap;function M2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(la(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&yD.set(n,t)}).catch(()=>{}),rT.set(e,t),e}function F2(t){if(H0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});H0.set(t,e)}let K0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return H0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return la(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $2(t){K0=t(K0)}function U2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(hw(this),e,...n);return vD.set(r,e.sort?e.sort():[e]),la(r)}:L2().includes(t)?function(...e){return t.apply(hw(this),e),la(yD.get(this))}:function(...e){return la(t.apply(hw(this),e))}}function V2(t){return typeof t=="function"?U2(t):(t instanceof IDBTransaction&&F2(t),R2(t,O2())?new Proxy(t,K0):t)}function la(t){if(t instanceof IDBRequest)return M2(t);if(cw.has(t))return cw.get(t);const e=V2(t);return e!==t&&(cw.set(t,e),rT.set(e,t)),e}const hw=t=>rT.get(t);function B2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=la(o);return r&&o.addEventListener("upgradeneeded",u=>{r(la(o.result),u.oldVersion,u.newVersion,la(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const j2=["get","getKey","getAll","getAllKeys","count"],q2=["put","add","delete","clear"],dw=new Map;function Zb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(dw.get(e))return dw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=q2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||j2.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(a.shift())),(await Promise.all([h[n](...a),i&&u.done]))[0]};return dw.set(e,s),s}$2(t=>({...t,get:(e,n,r)=>Zb(e,n)||t.get(e,n,r),has:(e,n)=>!!Zb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(W2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function W2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const G0="@firebase/app",e1="0.9.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=new sh("@firebase/app"),H2="@firebase/app-compat",K2="@firebase/analytics-compat",G2="@firebase/analytics",Q2="@firebase/app-check-compat",Y2="@firebase/app-check",X2="@firebase/auth",J2="@firebase/auth-compat",Z2="@firebase/database",eV="@firebase/database-compat",tV="@firebase/functions",nV="@firebase/functions-compat",rV="@firebase/installations",iV="@firebase/installations-compat",sV="@firebase/messaging",oV="@firebase/messaging-compat",aV="@firebase/performance",lV="@firebase/performance-compat",uV="@firebase/remote-config",cV="@firebase/remote-config-compat",hV="@firebase/storage",dV="@firebase/storage-compat",fV="@firebase/firestore",pV="@firebase/firestore-compat",gV="firebase",mV="9.18.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="[DEFAULT]",yV={[G0]:"fire-core",[H2]:"fire-core-compat",[G2]:"fire-analytics",[K2]:"fire-analytics-compat",[Y2]:"fire-app-check",[Q2]:"fire-app-check-compat",[X2]:"fire-auth",[J2]:"fire-auth-compat",[Z2]:"fire-rtdb",[eV]:"fire-rtdb-compat",[tV]:"fire-fn",[nV]:"fire-fn-compat",[rV]:"fire-iid",[iV]:"fire-iid-compat",[sV]:"fire-fcm",[oV]:"fire-fcm-compat",[aV]:"fire-perf",[lV]:"fire-perf-compat",[uV]:"fire-rc",[cV]:"fire-rc-compat",[hV]:"fire-gcs",[dV]:"fire-gcs-compat",[fV]:"fire-fst",[pV]:"fire-fst-compat","fire-js":"fire-js",[gV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new Map,yf=new Map;function Xm(t,e){try{t.container.addComponent(e)}catch(n){ql.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _D(t,e){t.container.addOrOverwriteComponent(e)}function io(t){const e=t.name;if(yf.has(e))return ql.debug(`There were multiple attempts to register component ${e}.`),!1;yf.set(e,t);for(const n of ya.values())Xm(n,t);return!0}function wD(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vV(t,e,n=ma){wD(t,e).clearInstance(n)}function _V(){yf.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Xs=new lu("app","Firebase",wV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=mV;function iT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ma,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xs.create("bad-app-name",{appName:String(i)});if(n||(n=d2()),!n)throw Xs.create("no-options");const s=ya.get(i);if(s){if(W0(n,s.options)&&W0(r,s.config))return s;throw Xs.create("duplicate-app",{appName:i})}const o=new gD(i);for(const u of yf.values())o.addComponent(u);const a=new EV(n,r,o);return ya.set(i,a),a}function IV(t=ma){const e=ya.get(t);if(!e&&t===ma)return iT();if(!e)throw Xs.create("no-app",{appName:t});return e}function TV(){return Array.from(ya.values())}async function ED(t){const e=t.name;ya.has(e)&&(ya.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Yr(t,e,n){var r;let i=(r=yV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ql.warn(a.join(" "));return}io(new Zr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function ID(t,e){if(t!==null&&typeof t!="function")throw Xs.create("invalid-log-argument");P2(t,e)}function TD(t){D2(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="firebase-heartbeat-database",CV=1,vf="firebase-heartbeat-store";let fw=null;function SD(){return fw||(fw=B2(SV,CV,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(vf)}}}).catch(t=>{throw Xs.create("idb-open",{originalErrorMessage:t.message})})),fw}async function bV(t){try{return(await SD()).transaction(vf).objectStore(vf).get(CD(t))}catch(e){if(e instanceof vr)ql.warn(e.message);else{const n=Xs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ql.warn(n.message)}}}async function t1(t,e){try{const r=(await SD()).transaction(vf,"readwrite");return await r.objectStore(vf).put(e,CD(t)),r.done}catch(n){if(n instanceof vr)ql.warn(n.message);else{const r=Xs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ql.warn(r.message)}}}function CD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=1024,xV=30*24*60*60*1e3;class NV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=n1();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=xV}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=n1(),{heartbeatsToSend:n,unsentEntries:r}=AV(this._heartbeatsCache.heartbeats),i=Km(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function n1(){return new Date().toISOString().substring(0,10)}function AV(t,e=kV){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),r1(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),r1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gf()?m2().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await bV(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return t1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return t1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function r1(t){return Km(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(t){io(new Zr("platform-logger",e=>new z2(e),"PRIVATE")),io(new Zr("heartbeat",e=>new NV(e),"PRIVATE")),Yr(G0,e1,t),Yr(G0,e1,"esm2017"),Yr("fire-js","")}PV("");const RV=Object.freeze(Object.defineProperty({__proto__:null,SDK_VERSION:Oa,_DEFAULT_ENTRY_NAME:ma,_addComponent:Xm,_addOrOverwriteComponent:_D,_apps:ya,_clearComponents:_V,_components:yf,_getProvider:wD,_registerComponent:io,_removeServiceInstance:vV,deleteApp:ED,getApp:IV,getApps:TV,initializeApp:iT,onLog:ID,registerVersion:Yr,setLogLevel:TD,FirebaseError:vr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e,n){this._delegate=e,this.firebase=n,Xm(e,new Zr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),ED(this._delegate)))}_getService(e,n=ma){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=ma){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Xm(this._delegate,e)}_addOrOverwriteComponent(e){_D(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},i1=new lu("app-compat","Firebase",LV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Yr,setLogLevel:TD,onLog:ID,apps:null,SDK_VERSION:Oa,INTERNAL:{registerComponent:a,removeApp:r,useAsService:u,modularAPIs:RV}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(h){delete e[h]}function i(h){if(h=h||ma,!Jr(e,h))throw i1.create("no-app",{appName:h});return e[h]}i.App=t;function s(h,p={}){const v=iT(h,p);if(Jr(e,v.name))return e[v.name];const w=new t(v,n);return e[v.name]=w,w}function o(){return Object.keys(e).map(h=>e[h])}function a(h){const p=h.name,v=p.replace("-compat","");if(io(h)&&h.type==="PUBLIC"){const w=(b=i())=>{if(typeof b[v]!="function")throw i1.create("invalid-app-argument",{appName:p});return b[v]()};h.serviceProps!==void 0&&pf(w,h.serviceProps),n[v]=w,t.prototype[v]=function(...b){return this._getService.bind(this,p).apply(this,h.multipleInstances?b:[])}}return h.type==="PUBLIC"?n[v]:null}function u(h,p){return p==="serverAuth"?null:p}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(){const t=MV(OV);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:bD,extendNamespace:e,createSubscribe:fD,ErrorFactory:lu,deepExtend:pf});function e(n){pf(t,n)}return t}const FV=bD();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=new sh("@firebase/app-compat"),$V="@firebase/app-compat",UV="0.2.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t){Yr($V,UV,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(p2()&&self.firebase!==void 0){s1.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&s1.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const de=FV;VV();var BV="firebase",jV="9.18.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */de.registerVersion(BV,jV,"app-compat");function sT(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const rd={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},zu={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function kD(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zV=qV,WV=kD,xD=new lu("auth","Firebase",kD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=new sh("@firebase/auth");function pm(t,...e){o1.logLevel<=Ze.ERROR&&o1.error(`Auth (${Oa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t,...e){throw oT(t,...e)}function Bn(t,...e){return oT(t,...e)}function ND(t,e,n){const r=Object.assign(Object.assign({},WV()),{[e]:n});return new lu("auth","Firebase",r).create(e,{appName:t.name})}function oh(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&zn(t,"argument-error"),ND(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function oT(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xD.create(t,...e)}function oe(t,e,...n){if(!t)throw oT(e,...n)}function gs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pm(e),new Error(e)}function Ki(t,e){t||gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=new Map;function Gr(t){Ki(t instanceof Function,"Expected a class definition");let e=a1.get(t);return e?(Ki(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,a1.set(t,e),e)}function HV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function aT(){return l1()==="http:"||l1()==="https:"}function l1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aT()||uD()||"connection"in navigator)?navigator.onLine:!0}function GV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ki(n>e,"Short delay should be less than long delay!"),this.isMobile=eT()||Jy()}get(){return KV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(t,e){Ki(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=new ip(3e4,6e4);function hn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function xn(t,e,n,r,i={}){return DD(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=uu(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),AD.fetch()(PD(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))})}async function DD(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},QV),e);try{const i=new XV(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Id(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,h]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Id(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Id(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Id(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ND(t,p,h);zn(t,p)}}catch(i){if(i instanceof vr)throw i;zn(t,"internal-error",{message:String(i)})}}async function co(t,e,n,r,i={}){const s=await xn(t,e,n,r,i);return"mfaPendingCredential"in s&&zn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function PD(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?lT(t.config,i):`${t.config.apiScheme}://${i}`}class XV{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Bn(this.auth,"network-request-failed")),YV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Id(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Bn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JV(t,e){return xn(t,"POST","/v1/accounts:delete",e)}async function ZV(t,e){return xn(t,"POST","/v1/accounts:update",e)}async function eB(t,e){return xn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tB(t,e=!1){const n=ye(t),r=await n.getIdToken(e),i=ev(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Md(pw(i.auth_time)),issuedAtTime:Md(pw(i.iat)),expirationTime:Md(pw(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function pw(t){return Number(t)*1e3}function ev(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return pm("JWT malformed, contained fewer than 3 sections"),null;try{const i=Gm(n);return i?JSON.parse(i):(pm("Failed to decode base64 JWT payload"),null)}catch(i){return pm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function nB(t){const e=ev(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof vr&&rB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function rB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Md(this.lastLoginAt),this.creationTime=Md(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await so(t,eB(n,{idToken:r}));oe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?aB(s.providerUserInfo):[],a=oB(t.providerData,o),u=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),p=u?h:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new RD(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,v)}async function sB(t){const e=ye(t);await wf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function aB(t){return t.map(e=>{var{providerId:n}=e,r=sT(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lB(t,e){const n=await DD(t,{},async()=>{const r=uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=PD(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",AD.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nB(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return oe(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await lB(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ef;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ef,this.toJSON())}_performRefresh(){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Dl{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=sT(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new RD(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await so(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tB(this,e)}reload(){return sB(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Dl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await wf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await so(this,JV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,h,p;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(i=n.email)!==null&&i!==void 0?i:void 0,b=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,k=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,J=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,N=(h=n.createdAt)!==null&&h!==void 0?h:void 0,D=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:M,emailVerified:Q,isAnonymous:re,providerData:m,stsTokenManager:ue}=n;oe(M&&ue,e,"internal-error");const he=Ef.fromJSON(this.name,ue);oe(typeof M=="string",e,"internal-error"),Fo(v,e.name),Fo(w,e.name),oe(typeof Q=="boolean",e,"internal-error"),oe(typeof re=="boolean",e,"internal-error"),Fo(b,e.name),Fo(k,e.name),Fo(R,e.name),Fo(J,e.name),Fo(N,e.name),Fo(D,e.name);const Ye=new Dl({uid:M,auth:e,email:w,emailVerified:Q,displayName:v,isAnonymous:re,photoURL:k,phoneNumber:b,tenantId:R,stsTokenManager:he,createdAt:N,lastLoginAt:D});return m&&Array.isArray(m)&&(Ye.providerData=m.map(Fe=>Object.assign({},Fe))),J&&(Ye._redirectEventId=J),Ye}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ef;i.updateFromServerResponse(n);const s=new Dl({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await wf(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}OD.type="NONE";const Oc=OD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(t,e,n){return`firebase:${t}:${e}:${n}`}class _c{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Pl(this.userKey,i.apiKey,s),this.fullPersistenceKey=Pl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Dl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new _c(Gr(Oc),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Gr(Oc);const o=Pl(r,e.config.apiKey,e.name);let a=null;for(const h of n)try{const p=await h._get(o);if(p){const v=Dl._fromJSON(e,p);h!==s&&(a=v),s=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new _c(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new _c(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($D(e))return"Blackberry";if(UD(e))return"Webos";if(uT(e))return"Safari";if((e.includes("chrome/")||MD(e))&&!e.includes("edge/"))return"Chrome";if(sp(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function LD(t=Vt()){return/firefox\//i.test(t)}function uT(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MD(t=Vt()){return/crios\//i.test(t)}function FD(t=Vt()){return/iemobile/i.test(t)}function sp(t=Vt()){return/android/i.test(t)}function $D(t=Vt()){return/blackberry/i.test(t)}function UD(t=Vt()){return/webos/i.test(t)}function ah(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uB(t=Vt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function cB(t=Vt()){var e;return ah(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hB(){return cD()&&document.documentMode===10}function VD(t=Vt()){return ah(t)||sp(t)||UD(t)||$D(t)||/windows phone/i.test(t)||FD(t)}function dB(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t,e=[]){let n;switch(t){case"Browser":n=u1(Vt());break;case"Worker":n=`${u1(Vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c1(this),this.idTokenSubscription=new c1(this),this.beforeStateQueue=new fB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xD,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await _c.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u==null?void 0:u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await wf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ye(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Gr(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new lu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gr(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await _c.create(this,[Gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return oe(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function Cn(t){return ye(t)}class c1{constructor(e){this.auth=e,this.observer=null,this.addObserver=fD(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function gB(t,e,n){const r=Cn(t);oe(r._canInitEmulator,r,"emulator-config-failed"),oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=jD(e),{host:o,port:a}=mB(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||yB()}function jD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mB(t){const e=jD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:h1(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:h1(o)}}}function h1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,n){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qD(t,e){return xn(t,"POST","/v1/accounts:resetPassword",hn(t,e))}async function zD(t,e){return xn(t,"POST","/v1/accounts:update",e)}async function vB(t,e){return xn(t,"POST","/v1/accounts:update",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _B(t,e){return co(t,"POST","/v1/accounts:signInWithPassword",hn(t,e))}async function tv(t,e){return xn(t,"POST","/v1/accounts:sendOobCode",hn(t,e))}async function wB(t,e){return tv(t,e)}async function EB(t,e){return tv(t,e)}async function IB(t,e){return tv(t,e)}async function TB(t,e){return tv(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SB(t,e){return co(t,"POST","/v1/accounts:signInWithEmailLink",hn(t,e))}async function CB(t,e){return co(t,"POST","/v1/accounts:signInWithEmailLink",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends lh{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new If(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new If(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return _B(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return SB(e,{email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return zD(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return CB(e,{idToken:n,email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(t,e){return co(t,"POST","/v1/accounts:signInWithIdp",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB="http://localhost";class Ts extends lh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=sT(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ts(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Js(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Js(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Js(e,n)}buildRequest(){const e={requestUri:bB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=uu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kB(t,e){return xn(t,"POST","/v1/accounts:sendVerificationCode",hn(t,e))}async function xB(t,e){return co(t,"POST","/v1/accounts:signInWithPhoneNumber",hn(t,e))}async function NB(t,e){const n=await co(t,"POST","/v1/accounts:signInWithPhoneNumber",hn(t,e));if(n.temporaryProof)throw Id(t,"account-exists-with-different-credential",n);return n}const AB={USER_NOT_FOUND:"user-not-found"};async function DB(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return co(t,"POST","/v1/accounts:signInWithPhoneNumber",hn(t,n),AB)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends lh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Rl({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Rl({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return xB(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return NB(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return DB(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Rl({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RB(t){const e=hc(Ed(t)).link,n=e?hc(Ed(e)).deep_link_id:null,r=hc(Ed(t)).deep_link_id;return(r?hc(Ed(r)).link:null)||r||n||e||t}class nv{constructor(e){var n,r,i,s,o,a;const u=hc(Ed(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,p=(r=u.oobCode)!==null&&r!==void 0?r:null,v=PB((i=u.mode)!==null&&i!==void 0?i:null);oe(h&&p&&v,"argument-error"),this.apiKey=h,this.operation=v,this.code=p,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=RB(e);try{return new nv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.providerId=La.PROVIDER_ID}static credential(e,n){return If._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=nv.parseLink(n);return oe(r,"argument-error"),If._fromEmailAndCode(e,r.code,r.tenantId)}}La.PROVIDER_ID="password";La.EMAIL_PASSWORD_SIGN_IN_METHOD="password";La.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh extends ho{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class wc extends uh{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return oe("providerId"in n&&"signInMethod"in n,"argument-error"),Ts._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return oe(e.idToken||e.accessToken,"argument-error"),Ts._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return wc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return wc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new wc(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends uh{constructor(){super("facebook.com")}static credential(e){return Ts._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends uh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ts._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return hs.credential(n,r)}catch{return null}}}hs.GOOGLE_SIGN_IN_METHOD="google.com";hs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends uh{constructor(){super("github.com")}static credential(e){return Ts._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB="http://localhost";class Lc extends lh{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Js(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Js(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Js(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Lc(r,s)}static _create(e,n){return new Lc(e,n)}buildRequest(){return{requestUri:OB,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LB="saml.";class Jm extends ho{constructor(e){oe(e.startsWith(LB),"argument-error"),super(e)}static credentialFromResult(e){return Jm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Jm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Lc.fromJSON(e);return oe(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Lc._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends uh{constructor(){super("twitter.com")}static credential(e,n){return Ts._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fs.credential(n,r)}catch{return null}}}fs.TWITTER_SIGN_IN_METHOD="twitter.com";fs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(t,e){return co(t,"POST","/v1/accounts:signUp",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Dl._fromIdTokenResponse(e,r,i),o=d1(r);return new Ti({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=d1(r);return new Ti({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function d1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MB(t){var e;const n=Cn(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Ti({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await WD(n,{returnSecureToken:!0}),i=await Ti._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm extends vr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Zm.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Zm(e,n,r,i)}}function HD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Zm._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FB(t,e){const n=ye(t);await rv(!0,n,e);const{providerUserInfo:r}=await ZV(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=KD(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function cT(t,e,n=!1){const r=await so(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ti._forOperation(t,"link",r)}async function rv(t,e,n){await wf(e);const r=KD(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";oe(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await so(t,HD(r,i,e,t),n);oe(s.idToken,r,"internal-error");const o=ev(s.idToken);oe(o,r,"internal-error");const{sub:a}=o;return oe(t.uid===a,r,"user-mismatch"),Ti._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&zn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(t,e,n=!1){const r="signIn",i=await HD(t,r,e),s=await Ti._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function iv(t,e){return QD(Cn(t),e)}async function YD(t,e){const n=ye(t);return await rv(!1,n,e.providerId),cT(n,e)}async function XD(t,e){return GD(ye(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $B(t,e){return co(t,"POST","/v1/accounts:signInWithCustomToken",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UB(t,e){const n=Cn(t),r=await $B(n,{token:e,returnSecureToken:!0}),i=await Ti._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?hT._fromServerResponse(e,n):zn(e,"internal-error")}}class hT extends sv{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new hT(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(t,e,n){var r;oe(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),oe(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(oe(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(oe(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VB(t,e,n){const r=ye(t),i={requestType:"PASSWORD_RESET",email:e};n&&ov(r,i,n),await EB(r,i)}async function BB(t,e,n){await qD(ye(t),{oobCode:e,newPassword:n})}async function jB(t,e){await vB(ye(t),{oobCode:e})}async function JD(t,e){const n=ye(t),r=await qD(n,{oobCode:e}),i=r.requestType;switch(oe(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(r.mfaInfo,n,"internal-error");default:oe(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=sv._fromServerResponse(Cn(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function qB(t,e){const{data:n}=await JD(ye(t),e);return n.email}async function zB(t,e,n){const r=Cn(t),i=await WD(r,{returnSecureToken:!0,email:e,password:n}),s=await Ti._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function WB(t,e,n){return iv(ye(t),La.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HB(t,e,n){const r=ye(t),i={requestType:"EMAIL_SIGNIN",email:e};oe(n.handleCodeInApp,r,"argument-error"),n&&ov(r,i,n),await IB(r,i)}function KB(t,e){const n=nv.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function GB(t,e,n){const r=ye(t),i=La.credentialWithLink(e,n||_f());return oe(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),iv(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QB(t,e){return xn(t,"POST","/v1/accounts:createAuthUri",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YB(t,e){const n=aT()?_f():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await QB(ye(t),r);return i||[]}async function XB(t,e){const n=ye(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&ov(n.auth,i,e);const{email:s}=await wB(n.auth,i);s!==t.email&&await t.reload()}async function JB(t,e,n){const r=ye(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&ov(r.auth,s,n);const{email:o}=await TB(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZB(t,e){return xn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ej(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ye(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await so(r,ZB(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function tj(t,e){return ZD(ye(t),e,null)}function nj(t,e){return ZD(ye(t),null,e)}async function ZD(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await so(t,zD(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t==null?void 0:t.idToken)){const o=(n=(e=ev(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Ec(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new ij(s,i);case"github.com":return new sj(s,i);case"google.com":return new oj(s,i);case"twitter.com":return new aj(s,i,t.screenName||null);case"custom":case"anonymous":return new Ec(s,null);default:return new Ec(s,r,i)}}class Ec{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class eP extends Ec{constructor(e,n,r,i){super(e,n,r),this.username=i}}class ij extends Ec{constructor(e,n){super(e,"facebook.com",n)}}class sj extends eP{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class oj extends Ec{constructor(e,n){super(e,"google.com",n)}}class aj extends eP{constructor(e,n,r){super(e,"twitter.com",n,r)}}function lj(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:rj(n)}class Tl{constructor(e,n,r){this.type=e,this.credential=n,this.auth=r}static _fromIdtoken(e,n){return new Tl("enroll",e,n)}static _fromMfaPendingCredential(e){return new Tl("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Tl._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Tl._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Cn(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>sv._fromServerResponse(r,a));oe(i.mfaPendingCredential,r,"internal-error");const o=Tl._fromMfaPendingCredential(i.mfaPendingCredential);return new dT(o,s,async a=>{const u=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const h=Object.assign(Object.assign({},i),{idToken:u.idToken,refreshToken:u.refreshToken});switch(n.operationType){case"signIn":const p=await Ti._fromIdTokenResponse(r,n.operationType,h);return await r._updateCurrentUser(p.user),p;case"reauthenticate":return oe(n.user,r,"internal-error"),Ti._forOperation(n.user,n.operationType,h);default:zn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function uj(t,e){var n;const r=ye(t),i=e;return oe(e.customData.operationType,r,"argument-error"),oe((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),dT._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(t,e){return xn(t,"POST","/v2/accounts/mfaEnrollment:start",hn(t,e))}function hj(t,e){return xn(t,"POST","/v2/accounts/mfaEnrollment:finalize",hn(t,e))}function dj(t,e){return xn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",hn(t,e))}class fT{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>sv._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new fT(e)}async getSession(){return Tl._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const r=e,i=await this.getSession(),s=await so(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await so(this.user,dj(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const gw=new WeakMap;function fj(t){const e=ye(t);return gw.has(e)||gw.set(e,fT._fromUser(e)),gw.get(e)}const ey="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ey,"1"),this.storage.removeItem(ey),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(){const t=Vt();return uT(t)||ah(t)}const gj=1e3,mj=10;class nP extends tP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=pj()&&dB(),this.fallbackToPolling=VD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);hB()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,mj):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},gj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nP.type="LOCAL";const pT=nP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP extends tP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rP.type="SESSION";const zl=rP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new av(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async h=>h(n.origin,s)),u=await yj(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}av.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const h=op("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(v){const w=v;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(w.data.response);break;default:clearTimeout(p),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return window}function _j(t){an().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(){return typeof an().WorkerGlobalScope<"u"&&typeof an().importScripts=="function"}async function wj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ej(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Ij(){return gT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="firebaseLocalStorageDb",Tj=1,ty="firebaseLocalStorage",sP="fbase_key";class ap{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lv(t,e){return t.transaction([ty],e?"readwrite":"readonly").objectStore(ty)}function Sj(){const t=indexedDB.deleteDatabase(iP);return new ap(t).toPromise()}function Q0(){const t=indexedDB.open(iP,Tj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ty,{keyPath:sP})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ty)?e(r):(r.close(),await Sj(),e(await Q0()))})})}async function f1(t,e,n){const r=lv(t,!0).put({[sP]:e,value:n});return new ap(r).toPromise()}async function Cj(t,e){const n=lv(t,!1).get(e),r=await new ap(n).toPromise();return r===void 0?null:r.value}function p1(t,e){const n=lv(t,!0).delete(e);return new ap(n).toPromise()}const bj=800,kj=3;class oP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Q0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>kj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=av._getInstance(Ij()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await wj(),!this.activeServiceWorker)return;this.sender=new vj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ej()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Q0();return await f1(e,ey,"1"),await p1(e,ey),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>f1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Cj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>p1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=lv(i,!1).getAll();return new ap(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oP.type="LOCAL";const Tf=oP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(t,e){return xn(t,"POST","/v2/accounts/mfaSignIn:start",hn(t,e))}function Nj(t,e){return xn(t,"POST","/v2/accounts/mfaSignIn:finalize",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aj(t){return(await xn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function aP(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Bn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Dj().appendChild(r)})}function lP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=500,Rj=6e4,Mg=1e12;class Oj{constructor(e){this.auth=e,this.counter=Mg,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new Lj(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Mg;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Mg;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Mg;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class Lj{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;oe(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Mj(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},Rj)},Pj))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Mj(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw=lP("rcb"),Fj=new ip(3e4,6e4),$j="https://www.google.com/recaptcha/api.js?";class Uj{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=an().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return oe(Vj(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(an().grecaptcha):new Promise((r,i)=>{const s=an().setTimeout(()=>{i(Bn(e,"network-request-failed"))},Fj.get());an()[mw]=()=>{an().clearTimeout(s),delete an()[mw];const a=an().grecaptcha;if(!a){i(Bn(e,"internal-error"));return}const u=a.render;a.render=(h,p)=>{const v=u(h,p);return this.counter++,v},this.hostLanguage=n,r(a)};const o=`${$j}?${uu({onload:mw,render:"explicit",hl:n})}`;aP(o).catch(()=>{clearTimeout(s),i(Bn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=an().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Vj(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Bj{async load(e){return new Oj(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="recaptcha",jj={theme:"light",type:"image"};class qj{constructor(e,n=Object.assign({},jj),r){this.parameters=n,this.type=uP,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cn(r),this.isInvisible=this.parameters.size==="invisible",oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;oe(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bj:new Uj,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{!o||(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=an()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){oe(aT()&&!gT(),this.auth,"internal-error"),await zj(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Aj(this.auth);oe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function zj(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Rl._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Wj(t,e,n){const r=Cn(t),i=await uv(r,e,ye(n));return new mT(i,s=>iv(r,s))}async function Hj(t,e,n){const r=ye(t);await rv(!1,r,"phone");const i=await uv(r.auth,e,ye(n));return new mT(i,s=>YD(r,s))}async function Kj(t,e,n){const r=ye(t),i=await uv(r.auth,e,ye(n));return new mT(i,s=>XD(r,s))}async function uv(t,e,n){var r;const i=await n.verify();try{oe(typeof i=="string",t,"argument-error"),oe(n.type===uP,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return oe(o.type==="enroll",t,"internal-error"),(await cj(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{oe(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return oe(a,t,"missing-multi-factor-info"),(await xj(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await kB(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function Gj(t,e){await cT(ye(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.providerId=zi.PROVIDER_ID,this.auth=Cn(e)}verifyPhoneNumber(e,n){return uv(this.auth,e,ye(n))}static credential(e,n){return Rl._fromVerification(e,n)}static credentialFromResult(e){const n=e;return zi.credentialFromTaggedObject(n)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Rl._fromTokenResponse(n,r):null}}zi.PROVIDER_ID="phone";zi.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t,e){return e?Gr(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT extends lh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Js(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Js(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Js(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Qj(t){return QD(t.auth,new yT(t),t.bypassAuthState)}function Yj(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),GD(n,new yT(t),t.bypassAuthState)}async function Xj(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),cT(n,new yT(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qj;case"linkViaPopup":case"linkViaRedirect":return Xj;case"reauthViaPopup":case"reauthViaRedirect":return Yj;default:zn(this.auth,"internal-error")}}resolve(e){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=new ip(2e3,1e4);async function Zj(t,e,n){const r=Cn(t);oh(t,e,ho);const i=cu(r,n);return new Hs(r,"signInViaPopup",e,i).executeNotNull()}async function eq(t,e,n){const r=ye(t);oh(r.auth,e,ho);const i=cu(r.auth,n);return new Hs(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function tq(t,e,n){const r=ye(t);oh(r.auth,e,ho);const i=cu(r.auth,n);return new Hs(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Hs extends cP{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Hs.currentPopupAction&&Hs.currentPopupAction.cancel(),Hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){Ki(this.filter.length===1,"Popup operations only handle one event");const e=op();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,Jj.get())};e()}}Hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nq="pendingRedirect",Fd=new Map;class rq extends cP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fd.get(this.auth._key());if(!e){try{const r=await iq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fd.set(this.auth._key(),e)}return this.bypassAuthState||Fd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iq(t,e){const n=dP(e),r=hP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function vT(t,e){return hP(t)._set(dP(e),"true")}function sq(){Fd.clear()}function _T(t,e){Fd.set(t._key(),e)}function hP(t){return Gr(t._redirectPersistence)}function dP(t){return Pl(nq,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oq(t,e,n){return aq(t,e,n)}async function aq(t,e,n){const r=Cn(t);oh(t,e,ho),await r._initializationPromise;const i=cu(r,n);return await vT(i,r),i._openRedirect(r,e,"signInViaRedirect")}function lq(t,e,n){return uq(t,e,n)}async function uq(t,e,n){const r=ye(t);oh(r.auth,e,ho),await r.auth._initializationPromise;const i=cu(r.auth,n);await vT(i,r.auth);const s=await fP(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function cq(t,e,n){return hq(t,e,n)}async function hq(t,e,n){const r=ye(t);oh(r.auth,e,ho),await r.auth._initializationPromise;const i=cu(r.auth,n);await rv(!1,r,e.providerId),await vT(i,r.auth);const s=await fP(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function dq(t,e){return await Cn(t)._initializationPromise,cv(t,e,!1)}async function cv(t,e,n=!1){const r=Cn(t),i=cu(r,e),o=await new rq(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function fP(t){const e=op(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fq=10*60*1e3;class pP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!gP(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Bn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fq&&this.cachedEventUids.clear(),this.cachedEventUids.has(g1(e))}saveEventToCache(e){this.cachedEventUids.add(g1(e)),this.lastProcessedEventTime=Date.now()}}function g1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function gP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(t,e={}){return xn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mq=/^https?/;async function yq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mP(t);for(const n of e)try{if(vq(n))return}catch{}zn(t,"unauthorized-domain")}function vq(t){const e=_f(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!mq.test(n))return!1;if(gq.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _q=new ip(3e4,6e4);function m1(){const t=an().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wq(t){return new Promise((e,n)=>{var r,i,s;function o(){m1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{m1(),n(Bn(t,"network-request-failed"))},timeout:_q.get()})}if(!((i=(r=an().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=an().gapi)===null||s===void 0)&&s.load)o();else{const a=lP("iframefcb");return an()[a]=()=>{gapi.load?o():n(Bn(t,"network-request-failed"))},aP(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw gm=null,e})}let gm=null;function Eq(t){return gm=gm||wq(t),gm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iq=new ip(5e3,15e3),Tq="__/auth/iframe",Sq="emulator/auth/iframe",Cq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kq(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?lT(e,Sq):`https://${t.config.authDomain}/${Tq}`,r={apiKey:e.apiKey,appName:t.name,v:Oa},i=bq.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${uu(r).slice(1)}`}async function xq(t){const e=await Eq(t),n=an().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:kq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cq,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Bn(t,"network-request-failed"),a=an().setTimeout(()=>{s(o)},Iq.get());function u(){an().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Aq=500,Dq=600,Pq="_blank",Rq="http://localhost";class y1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Oq(t,e,n,r=Aq,i=Dq){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Nq),{width:r.toString(),height:i.toString(),top:s,left:o}),h=Vt().toLowerCase();n&&(a=MD(h)?Pq:n),LD(h)&&(e=e||Rq,u.scrollbars="yes");const p=Object.entries(u).reduce((w,[b,k])=>`${w}${b}=${k},`,"");if(cB(h)&&a!=="_self")return Lq(e||"",a),new y1(null);const v=window.open(e||"",a,p);oe(v,t,"popup-blocked");try{v.focus()}catch{}return new y1(v)}function Lq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mq="__/auth/handler",Fq="emulator/auth/handler";function Y0(t,e,n,r,i,s){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Oa,eventId:i};if(e instanceof ho){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Qm(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof uh){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];return`${$q(t)}?${uu(a).slice(1)}`}function $q({config:t}){return t.emulator?lT(t,Fq):`https://${t.authDomain}/${Mq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="webStorageSupport";class Uq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zl,this._completeRedirectFn=cv,this._overrideRedirectResult=_T}async _openPopup(e,n,r,i){var s;Ki((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=Y0(e,n,r,_f(),i);return Oq(e,o,op())}async _openRedirect(e,n,r,i){return await this._originValidation(e),_j(Y0(e,n,r,_f(),i)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ki(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await xq(e),r=new pP(e);return n.register("authEvent",i=>(oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yw,{type:yw},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[yw];o!==void 0&&n(!!o),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VD()||uT()||ah()}}const Vq=Uq;class Bq{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return gs("unexpected MultiFactorSessionType")}}}class wT extends Bq{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new wT(e)}_finalizeEnroll(e,n,r){return hj(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return Nj(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class yP{constructor(){}static assertion(e){return wT._fromCredential(e)}}yP.FACTOR_ID="phone";var v1="@firebase/auth",_1="0.21.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function zq(t){io(new Zr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,u)=>{oe(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),oe(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const h={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BD(t)},p=new pB(a,u,h);return HV(p,n),p})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),io(new Zr("auth-internal",e=>{const n=Cn(e.getProvider("auth").getImmediate());return(r=>new jq(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yr(v1,_1,qq(t)),Yr(v1,_1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wq=5*60;f2("authIdTokenMaxAge");zq("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hq=2e3;async function Kq(t,e,n){var r;const{BuildInfo:i}=Wl();Ki(e.sessionId,"AuthEvent did not contain a session ID");const s=await Jq(e.sessionId),o={};return ah()?o.ibi=i.packageName:sp()?o.apn=i.packageName:zn(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Y0(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function Gq(t){const{BuildInfo:e}=Wl(),n={};ah()?n.iosBundleId=e.packageName:sp()?n.androidPackageName=e.packageName:zn(t,"operation-not-supported-in-this-environment"),await mP(t,n)}function Qq(t){const{cordova:e}=Wl();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,uB()?"_blank":"_system","location=yes"),n(i)})})}async function Yq(t,e,n){const{cordova:r}=Wl();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function u(){var v;s();const w=(v=r.plugins.browsertab)===null||v===void 0?void 0:v.close;typeof w=="function"&&w(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function h(){a||(a=window.setTimeout(()=>{o(Bn(t,"redirect-cancelled-by-user"))},Hq))}function p(){(document==null?void 0:document.visibilityState)==="visible"&&h()}e.addPassiveListener(u),document.addEventListener("resume",h,!1),sp()&&document.addEventListener("visibilitychange",p,!1),i=()=>{e.removePassiveListener(u),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",p,!1),a&&window.clearTimeout(a)}})}finally{i()}}function Xq(t){var e,n,r,i,s,o,a,u,h,p;const v=Wl();oe(typeof((e=v==null?void 0:v.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oe(typeof((n=v==null?void 0:v.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oe(typeof((s=(i=(r=v==null?void 0:v.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe(typeof((u=(a=(o=v==null?void 0:v.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||u===void 0?void 0:u.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe(typeof((p=(h=v==null?void 0:v.cordova)===null||h===void 0?void 0:h.InAppBrowser)===null||p===void 0?void 0:p.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Jq(t){const e=Zq(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function Zq(t){if(Ki(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez=20;class tz extends pP{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function nz(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:sz(),postBody:null,tenantId:t.tenantId,error:Bn(t,"no-auth-event")}}function rz(t,e){return X0()._set(J0(t),e)}async function w1(t){const e=await X0()._get(J0(t));return e&&await X0()._remove(J0(t)),e}function iz(t,e){var n,r;const i=az(e);if(i.includes("/__/auth/callback")){const s=mm(i),o=s.firebaseError?oz(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],u=a?Bn(a):null;return u?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function sz(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<ez;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function X0(){return Gr(pT)}function J0(t){return Pl("authEvent",t.config.apiKey,t.name)}function oz(t){try{return JSON.parse(t)}catch{return null}}function az(t){const e=mm(t),n=e.link?decodeURIComponent(e.link):void 0,r=mm(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return mm(i).link||i||r||n||t}function mm(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return hc(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz=500;class uz{constructor(){this._redirectPersistence=zl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=cv,this._overrideRedirectResult=_T}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new tz(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){zn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){Xq(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),sq(),await this._originValidation(e);const o=nz(e,r,i);await rz(e,o);const a=await Kq(e,o,n),u=await Qq(a);return Yq(e,s,u)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Gq(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Wl(),o=setTimeout(async()=>{await w1(e),n.onEvent(E1())},lz),a=async p=>{clearTimeout(o);const v=await w1(e);let w=null;v&&(p==null?void 0:p.url)&&(w=iz(v,p.url)),n.onEvent(w||E1())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const u=i,h=`${s.packageName.toLowerCase()}://`;Wl().handleOpenURL=async p=>{if(p.toLowerCase().startsWith(h)&&a({url:p}),typeof u=="function")try{u(p)}catch(v){console.error(v)}}}}const cz=uz;function E1(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Bn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hz(t,e){Cn(t)._logFramework(e)}var dz="@firebase/auth-compat",fz="0.3.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pz=1e3;function $d(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function gz(){return $d()==="http:"||$d()==="https:"}function vP(t=Vt()){return!!(($d()==="file:"||$d()==="ionic:"||$d()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function mz(){return Jy()||tT()}function yz(){return cD()&&(document==null?void 0:document.documentMode)===11}function vz(t=Vt()){return/Edge\/\d+/.test(t)}function _z(t=Vt()){return yz()||vz(t)}function _P(){try{const t=self.localStorage,e=op();if(t)return t.setItem(e,"1"),t.removeItem(e),_z()?gf():!0}catch{return ET()&&gf()}return!1}function ET(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function vw(){return(gz()||uD()||vP())&&!mz()&&_P()&&!ET()}function wP(){return vP()&&typeof document<"u"}async function wz(){return wP()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},pz);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function Ez(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr={LOCAL:"local",NONE:"none",SESSION:"session"},id=oe,EP="persistence";function Iz(t,e){if(id(Object.values(Wr).includes(e),t,"invalid-persistence-type"),Jy()){id(e!==Wr.SESSION,t,"unsupported-persistence-type");return}if(tT()){id(e===Wr.NONE,t,"unsupported-persistence-type");return}if(ET()){id(e===Wr.NONE||e===Wr.LOCAL&&gf(),t,"unsupported-persistence-type");return}id(e===Wr.NONE||_P(),t,"unsupported-persistence-type")}async function Z0(t){await t._initializationPromise;const e=IP(),n=Pl(EP,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function Tz(t,e){const n=IP();if(!n)return[];const r=Pl(EP,t,e);switch(n.getItem(r)){case Wr.NONE:return[Oc];case Wr.LOCAL:return[Tf,zl];case Wr.SESSION:return[zl];default:return[]}}function IP(){var t;try{return((t=Ez())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sz=oe;class Qo{constructor(){this.browserResolver=Gr(Vq),this.cordovaResolver=Gr(cz),this.underlyingResolver=null,this._redirectPersistence=zl,this._completeRedirectFn=cv,this._overrideRedirectResult=_T}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return wP()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Sz(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await wz();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t){return t.unwrap()}function Cz(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bz(t){return SP(t)}function kz(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new xz(t,uj(t,e))}else if(r){const i=SP(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function SP(t){const{_tokenResponse:e}=t instanceof vr?t.customData:t;if(!e)return null;if(!(t instanceof vr)&&"temporaryProof"in e&&"phoneNumber"in e)return zi.credentialFromResult(t);const n=e.providerId;if(!n||n===rd.PASSWORD)return null;let r;switch(n){case rd.GOOGLE:r=hs;break;case rd.FACEBOOK:r=cs;break;case rd.GITHUB:r=ds;break;case rd.TWITTER:r=fs;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:u}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?Lc._create(n,a):Ts._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new wc(n).credential({idToken:i,accessToken:s,rawNonce:u})}return t instanceof vr?r.credentialFromError(t):r.credentialFromResult(t)}function kr(t,e){return e.catch(n=>{throw n instanceof vr&&kz(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:bz(n),additionalUserInfo:lj(n),user:Ks.getOrCreate(i)}})}async function eE(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>kr(t,n.confirm(r))}}class xz{constructor(e,n){this.resolver=n,this.auth=Cz(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return kr(TP(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this._delegate=e,this.multiFactor=fj(e)}static getOrCreate(e){return Ks.USER_MAP.has(e)||Ks.USER_MAP.set(e,new Ks(e)),Ks.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return kr(this.auth,YD(this._delegate,e))}async linkWithPhoneNumber(e,n){return eE(this.auth,Hj(this._delegate,e,n))}async linkWithPopup(e){return kr(this.auth,tq(this._delegate,e,Qo))}async linkWithRedirect(e){return await Z0(Cn(this.auth)),cq(this._delegate,e,Qo)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return kr(this.auth,XD(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return eE(this.auth,Kj(this._delegate,e,n))}reauthenticateWithPopup(e){return kr(this.auth,eq(this._delegate,e,Qo))}async reauthenticateWithRedirect(e){return await Z0(Cn(this.auth)),lq(this._delegate,e,Qo)}sendEmailVerification(e){return XB(this._delegate,e)}async unlink(e){return await FB(this._delegate,e),this}updateEmail(e){return tj(this._delegate,e)}updatePassword(e){return nj(this._delegate,e)}updatePhoneNumber(e){return Gj(this._delegate,e)}updateProfile(e){return ej(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return JB(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ks.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=oe;class tE{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;sd(r,"invalid-api-key",{appName:e.name}),sd(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Qo:void 0;this._delegate=n.initialize({options:{persistence:Nz(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(zV),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ks.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){gB(this._delegate,e,n)}applyActionCode(e){return jB(this._delegate,e)}checkActionCode(e){return JD(this._delegate,e)}confirmPasswordReset(e,n){return BB(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return kr(this._delegate,zB(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return YB(this._delegate,e)}isSignInWithEmailLink(e){return KB(this._delegate,e)}async getRedirectResult(){sd(vw(),this._delegate,"operation-not-supported-in-this-environment");const e=await dq(this._delegate,Qo);return e?kr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){hz(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=I1(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=I1(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return HB(this._delegate,e,n)}sendPasswordResetEmail(e,n){return VB(this._delegate,e,n||void 0)}async setPersistence(e){Iz(this._delegate,e);let n;switch(e){case Wr.SESSION:n=zl;break;case Wr.LOCAL:n=await Gr(Tf)._isAvailable()?Tf:pT;break;case Wr.NONE:n=Oc;break;default:return zn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return kr(this._delegate,MB(this._delegate))}signInWithCredential(e){return kr(this._delegate,iv(this._delegate,e))}signInWithCustomToken(e){return kr(this._delegate,UB(this._delegate,e))}signInWithEmailAndPassword(e,n){return kr(this._delegate,WB(this._delegate,e,n))}signInWithEmailLink(e,n){return kr(this._delegate,GB(this._delegate,e,n))}signInWithPhoneNumber(e,n){return eE(this._delegate,Wj(this._delegate,e,n))}async signInWithPopup(e){return sd(vw(),this._delegate,"operation-not-supported-in-this-environment"),kr(this._delegate,Zj(this._delegate,e,Qo))}async signInWithRedirect(e){return sd(vw(),this._delegate,"operation-not-supported-in-this-environment"),await Z0(this._delegate),oq(this._delegate,e,Qo)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return qB(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}tE.Persistence=Wr;function I1(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&Ks.getOrCreate(o)),error:e,complete:n}}function Nz(t,e){const n=Tz(t,e);if(typeof self<"u"&&!n.includes(Tf)&&n.push(Tf),typeof window<"u")for(const r of[pT,zl])n.includes(r)||n.push(r);return n.includes(Oc)||n.push(Oc),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.providerId="phone",this._delegate=new zi(TP(de.auth()))}static credential(e,n){return zi.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}IT.PHONE_SIGN_IN_METHOD=zi.PHONE_SIGN_IN_METHOD;IT.PROVIDER_ID=zi.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Az=oe;class Dz{constructor(e,n,r=de.app()){var i;Az((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new qj(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz="auth-compat";function Rz(t){t.INTERNAL.registerComponent(new Zr(Pz,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new tE(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:zu.EMAIL_SIGNIN,PASSWORD_RESET:zu.PASSWORD_RESET,RECOVER_EMAIL:zu.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:zu.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:zu.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:zu.VERIFY_EMAIL}},EmailAuthProvider:La,FacebookAuthProvider:cs,GithubAuthProvider:ds,GoogleAuthProvider:hs,OAuthProvider:wc,SAMLAuthProvider:Jm,PhoneAuthProvider:IT,PhoneMultiFactorGenerator:yP,RecaptchaVerifier:Dz,TwitterAuthProvider:fs,Auth:tE,AuthCredential:lh,Error:vr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(dz,fz)}Rz(de);const T1="@firebase/database",S1="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CP="";function bP(t){CP=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ln(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:mf(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Jr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Oz(e)}}catch{}return new Lz},Sl=kP("localStorage"),nE=kP("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new sh("@firebase/database"),xP=function(){let t=1;return function(){return t++}}(),NP=function(t){const e=C2(t),n=new I2;n.update(e);const r=n.digest();return JI.encodeByteArray(r)},lp=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=lp.apply(null,r):typeof r=="object"?e+=ln(r):e+=r,e+=" "}return e};let Ol=null,C1=!0;const AP=function(t,e){ae(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ic.logLevel=Ze.VERBOSE,Ol=Ic.log.bind(Ic),e&&nE.set("logging_enabled",!0)):typeof t=="function"?Ol=t:(Ol=null,nE.remove("logging_enabled"))},En=function(...t){if(C1===!0&&(C1=!1,Ol===null&&nE.get("logging_enabled")===!0&&AP(!0)),Ol){const e=lp.apply(null,t);Ol(e)}},up=function(t){return function(...e){En(t,...e)}},rE=function(...t){const e="FIREBASE INTERNAL ERROR: "+lp(...t);Ic.error(e)},Ss=function(...t){const e=`FIREBASE FATAL ERROR: ${lp(...t)}`;throw Ic.error(e),new Error(e)},nr=function(...t){const e="FIREBASE WARNING: "+lp(...t);Ic.warn(e)},Mz=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&nr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},hv=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Fz=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},va="[MIN_NAME]",oo="[MAX_NAME]",hu=function(t,e){if(t===e)return 0;if(t===va||e===oo)return-1;if(e===va||t===oo)return 1;{const n=b1(t),r=b1(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},$z=function(t,e){return t===e?0:t<e?-1:1},od=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ln(e))},TT=function(t){if(typeof t!="object"||t===null)return ln(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ln(e[r]),n+=":",n+=TT(t[e[r]]);return n+="}",n},DP=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function bn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const PP=function(t){ae(!hv(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,u;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const h=[];for(u=n;u;u-=1)h.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)h.push(s%2?1:0),s=Math.floor(s/2);h.push(i?1:0),h.reverse();const p=h.join("");let v="";for(u=0;u<64;u+=8){let w=parseInt(p.substr(u,8),2).toString(16);w.length===1&&(w="0"+w),v=v+w}return v.toLowerCase()},Uz=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Vz=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Bz(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const jz=new RegExp("^-?(0*)\\d{1,10}$"),qz=-2147483648,zz=2147483647,b1=function(t){if(jz.test(t)){const e=Number(t);if(e>=qz&&e<=zz)return e}return null},ch=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw nr("Exception was thrown by user callback.",n),e},Math.floor(0))}},Wz=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ud=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){nr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(En("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',nr(e)}}class Tc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Tc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="5",RP="v",OP="s",LP="r",MP="f",FP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$P="ls",UP="p",iE="ac",VP="websocket",BP="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n,r,i,s=!1,o="",a=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Sl.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Sl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Gz(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function qP(t,e,n){ae(typeof e=="string","typeof type must == string"),ae(typeof n=="object","typeof params must == object");let r;if(e===VP)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===BP)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Gz(t)&&(n.ns=t.namespace);const i=[];return bn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(){this.counters_={}}incrementCounter(e,n=1){Jr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return o2(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w={},ww={};function CT(t){const e=t.toString();return _w[e]||(_w[e]=new Qz),_w[e]}function Yz(t,e){const n=t.toString();return ww[n]||(ww[n]=e()),ww[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ch(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="start",Jz="close",Zz="pLPCommand",eW="pRTLPCB",zP="id",WP="pw",HP="ser",tW="cb",nW="seg",rW="ts",iW="d",sW="dframe",KP=1870,GP=30,oW=KP-GP,aW=25e3,lW=3e4;class Yo{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=up(e),this.stats_=CT(n),this.urlFn=u=>(this.appCheckToken&&(u[iE]=this.appCheckToken),qP(n,BP,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Xz(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(lW)),Fz(()=>{if(this.isClosed_)return;this.scriptTagHolder=new bT((...s)=>{const[o,a,u,h,p]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===k1)this.id=a,this.password=u;else if(o===Jz)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[k1]="t",r[HP]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[tW]=this.scriptTagHolder.uniqueCallbackIdentifier),r[RP]=ST,this.transportSessionId&&(r[OP]=this.transportSessionId),this.lastSessionId&&(r[$P]=this.lastSessionId),this.applicationId&&(r[UP]=this.applicationId),this.appCheckToken&&(r[iE]=this.appCheckToken),typeof location<"u"&&location.hostname&&FP.test(location.hostname)&&(r[LP]=MP);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Yo.forceAllow_=!0}static forceDisallow(){Yo.forceDisallow_=!0}static isAvailable(){return Yo.forceAllow_?!0:!Yo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Uz()&&!Vz()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ln(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=aD(n),i=DP(r,oW);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[sW]="t",r[zP]=e,r[WP]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ln(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class bT{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=xP(),window[Zz+this.uniqueCallbackIdentifier]=e,window[eW+this.uniqueCallbackIdentifier]=n,this.myIFrame=bT.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){En("frame writing exception"),a.stack&&En(a.stack),En(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||En("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[zP]=this.myID,e[WP]=this.myPW,e[HP]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+GP+r.length<=KP;){const o=this.pendingSegs.shift();r=r+"&"+nW+i+"="+o.seg+"&"+rW+i+"="+o.ts+"&"+iW+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(aW)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{En("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uW=16384,cW=45e3;let ny=null;typeof MozWebSocket<"u"?ny=MozWebSocket:typeof WebSocket<"u"&&(ny=WebSocket);class gi{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=up(this.connId),this.stats_=CT(n),this.connURL=gi.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[RP]=ST,typeof location<"u"&&location.hostname&&FP.test(location.hostname)&&(o[LP]=MP),n&&(o[OP]=n),r&&(o[$P]=r),i&&(o[iE]=i),s&&(o[UP]=s),qP(e,VP,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Sl.set("previous_websocket_failure",!0);try{let r;hD(),this.mySock=new ny(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){gi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&ny!==null&&!gi.forceDisallow_}static previouslyFailed(){return Sl.isInMemoryStorage||Sl.get("previous_websocket_failure")===!0}markConnectionHealthy(){Sl.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=mf(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ae(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ln(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=DP(n,uW);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(cW))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}gi.responsesRequiredToBeHealthy=2;gi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Yo,gi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=gi&&gi.isAvailable();let r=n&&!gi.previouslyFailed();if(e.webSocketOnly&&(n||nr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[gi];else{const i=this.transports_=[];for(const s of Mc.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Mc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Mc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hW=6e4,dW=5e3,fW=10*1024,pW=100*1024,Ew="t",x1="d",gW="s",N1="r",mW="e",A1="o",D1="a",P1="n",R1="p",yW="h";class vW{constructor(e,n,r,i,s,o,a,u,h,p){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=h,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=up("c:"+this.id+":"),this.transportManager_=new Mc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ud(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>pW?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>fW?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ew in e){const n=e[Ew];n===D1?this.upgradeIfSecondaryHealthy_():n===N1?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===A1&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=od("t",e),r=od("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:R1,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:D1,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:P1,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=od("t",e),r=od("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=od(Ew,e);if(x1 in e){const r=e[x1];if(n===yW){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===P1){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===gW?this.onConnectionShutdown_(r):n===N1?this.onReset_(r):n===mW?rE("Server Error: "+r):n===A1?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rE("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ST!==r&&nr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ud(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(hW))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ud(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(dW))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:R1,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Sl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.allowedEvents_=e,this.listeners_={},ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){ae(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry extends YP{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!eT()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ry}getInitialEvent(e){return ae(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=32,L1=768;class lt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function st(){return new lt("")}function je(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function _a(t){return t.pieces_.length-t.pieceNum_}function _t(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new lt(t.pieces_,e)}function kT(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function _W(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Sf(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function XP(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new lt(e,0)}function Pt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof lt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new lt(n,0)}function qe(t){return t.pieceNum_>=t.pieces_.length}function gr(t,e){const n=je(t),r=je(e);if(n===null)return e;if(n===r)return gr(_t(t),_t(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function wW(t,e){const n=Sf(t,0),r=Sf(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=hu(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function xT(t,e){if(_a(t)!==_a(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function yi(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(_a(t)>_a(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class EW{constructor(e,n){this.errorPrefix_=n,this.parts_=Sf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Zy(this.parts_[r]);JP(this)}}function IW(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Zy(e),JP(t)}function TW(t){const e=t.parts_.pop();t.byteLength_-=Zy(e),t.parts_.length>0&&(t.byteLength_-=1)}function JP(t){if(t.byteLength_>L1)throw new Error(t.errorPrefix_+"has a key path longer than "+L1+" bytes ("+t.byteLength_+").");if(t.parts_.length>O1)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+O1+") or object contains a cycle "+fl(t))}function fl(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT extends YP{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new NT}getInitialEvent(e){return ae(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=1e3,SW=60*5*1e3,M1=30*1e3,CW=1.3,bW=3e4,kW="server_kill",F1=3;class Zs extends QP{constructor(e,n,r,i,s,o,a,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=u,this.id=Zs.nextPersistentConnectionId_++,this.log_=up("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ad,this.maxReconnectDelay_=SW,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!hD())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");NT.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ry.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(ln(s)),ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Ar,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ae(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const u=a.d,h=a.s;Zs.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),h!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(h,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Jr(e,"w")){const r=jl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();nr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||E2(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=M1)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=w2(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ln(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):rE("Unrecognized action received from server: "+ln(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ad,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ad,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>bW&&(this.reconnectDelay_=ad),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*CW)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Zs.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const u=function(){a?a.close():(o=!0,r())},h=function(v){ae(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(v)};this.realtime_={close:u,sendRequest:h};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,w]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);o?En("getToken() completed but was canceled"):(En("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=w&&w.token,a=new vW(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,b=>{nr(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(kW)},s))}catch(v){this.log_("Failed to get token: "+v),o||(this.repoInfo_.nodeAdmin&&nr(v),u())}}}interrupt(e){En("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){En("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Qm(this.interruptReasons_)&&(this.reconnectDelay_=ad,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>TT(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new lt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){En("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=F1&&(this.reconnectDelay_=M1,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){En("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=F1&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+CP.replace(/\./g,"-")]=1,eT()?e["framework.cordova"]=1:Jy()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ry.getInstance().currentlyOnline();return Qm(this.interruptReasons_)&&e}}Zs.nextPersistentConnectionId_=0;Zs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new We(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new We(va,e),i=new We(va,n);return this.compare(r,i)!==0}minPost(){return We.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fg;class ZP extends dv{static get __EMPTY_NODE(){return Fg}static set __EMPTY_NODE(e){Fg=e}compare(e,n){return hu(e.name,n.name)}isDefinedOn(e){throw ih("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return We.MIN}maxPost(){return new We(oo,Fg)}makePost(e,n){return ae(typeof e=="string","KeyIndex indexValue must always be a string."),new We(e,Fg)}toString(){return".key"}}const ws=new ZP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class _n{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:_n.RED,this.left=i!=null?i:Pr.EMPTY_NODE,this.right=s!=null?s:Pr.EMPTY_NODE}copy(e,n,r,i,s){return new _n(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Pr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Pr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}_n.RED=!0;_n.BLACK=!1;class xW{copy(e,n,r,i,s){return this}insert(e,n,r){return new _n(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Pr{constructor(e,n=Pr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Pr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,_n.BLACK,null,null))}remove(e){return new Pr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_n.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $g(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new $g(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new $g(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new $g(this.root_,null,this.comparator_,!0,e)}}Pr.EMPTY_NODE=new xW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NW(t,e){return hu(t.name,e.name)}function AT(t,e){return hu(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sE;function AW(t){sE=t}const eR=function(t){return typeof t=="number"?"number:"+PP(t):"string:"+t},tR=function(t){if(t.isLeafNode()){const e=t.val();ae(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Jr(e,".sv"),"Priority must be a string or number.")}else ae(t===sE||t.isEmpty(),"priority of unexpected type.");ae(t===sE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $1;class gn{constructor(e,n=gn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ae(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),tR(this.priorityNode_)}static set __childrenNodeConstructor(e){$1=e}static get __childrenNodeConstructor(){return $1}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new gn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:gn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return qe(e)?this:je(e)===".priority"?this.priorityNode_:gn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:gn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=je(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ae(r!==".priority"||_a(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,gn.__childrenNodeConstructor.EMPTY_NODE.updateChild(_t(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+eR(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=PP(this.value_):e+=this.value_,this.lazyHash_=NP(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===gn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof gn.__childrenNodeConstructor?-1:(ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=gn.VALUE_TYPE_ORDER.indexOf(n),s=gn.VALUE_TYPE_ORDER.indexOf(r);return ae(i>=0,"Unknown leaf type: "+n),ae(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}gn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nR,rR;function DW(t){nR=t}function PW(t){rR=t}class RW extends dv{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?hu(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return We.MIN}maxPost(){return new We(oo,new gn("[PRIORITY-POST]",rR))}makePost(e,n){const r=nR(e);return new We(n,new gn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ct=new RW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OW=Math.log(2);class LW{constructor(e){const n=s=>parseInt(Math.log(s)/OW,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const iy=function(t,e,n,r){t.sort(e);const i=function(u,h){const p=h-u;let v,w;if(p===0)return null;if(p===1)return v=t[u],w=n?n(v):v,new _n(w,v.node,_n.BLACK,null,null);{const b=parseInt(p/2,10)+u,k=i(u,b),R=i(b+1,h);return v=t[b],w=n?n(v):v,new _n(w,v.node,_n.BLACK,k,R)}},s=function(u){let h=null,p=null,v=t.length;const w=function(k,R){const J=v-k,N=v;v-=k;const D=i(J+1,N),M=t[J],Q=n?n(M):M;b(new _n(Q,M.node,R,null,D))},b=function(k){h?(h.left=k,h=k):(p=k,h=k)};for(let k=0;k<u.count;++k){const R=u.nextBitIsOne(),J=Math.pow(2,u.count-(k+1));R?w(J,_n.BLACK):(w(J,_n.BLACK),w(J,_n.RED))}return p},o=new LW(t.length),a=s(o);return new Pr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iw;const Wu={};class Gs{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ae(Wu&&Ct,"ChildrenNode.ts has not been loaded"),Iw=Iw||new Gs({".priority":Wu},{".priority":Ct}),Iw}get(e){const n=jl(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Pr?n:null}hasIndex(e){return Jr(this.indexSet_,e.toString())}addIndex(e,n){ae(e!==ws,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(We.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=iy(r,e.getCompare()):a=Wu;const u=e.toString(),h=Object.assign({},this.indexSet_);h[u]=e;const p=Object.assign({},this.indexes_);return p[u]=a,new Gs(p,h)}addToIndexes(e,n){const r=Ym(this.indexes_,(i,s)=>{const o=jl(this.indexSet_,s);if(ae(o,"Missing index implementation for "+s),i===Wu)if(o.isDefinedOn(e.node)){const a=[],u=n.getIterator(We.Wrap);let h=u.getNext();for(;h;)h.name!==e.name&&a.push(h),h=u.getNext();return a.push(e),iy(a,o.getCompare())}else return Wu;else{const a=n.get(e.name);let u=i;return a&&(u=u.remove(new We(e.name,a))),u.insert(e,e.node)}});return new Gs(r,this.indexSet_)}removeFromIndexes(e,n){const r=Ym(this.indexes_,i=>{if(i===Wu)return i;{const s=n.get(e.name);return s?i.remove(new We(e.name,s)):i}});return new Gs(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld;class Ae{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&tR(this.priorityNode_),this.children_.isEmpty()&&ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ld||(ld=new Ae(new Pr(AT),null,Gs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ld}updatePriority(e){return this.children_.isEmpty()?this:new Ae(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ld:n}}getChild(e){const n=je(e);return n===null?this:this.getImmediateChild(n).getChild(_t(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ae(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new We(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?ld:this.priorityNode_;return new Ae(i,o,s)}}updateChild(e,n){const r=je(e);if(r===null)return n;{ae(je(e)!==".priority"||_a(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(_t(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Ct,(o,a)=>{n[o]=a.val(e),r++,s&&Ae.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+eR(this.getPriority().val())+":"),this.forEachChild(Ct,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":NP(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new We(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new We(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new We(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,We.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,We.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===cp?-1:0}withIndex(e){if(e===ws||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ae(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ws||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ct),i=n.getIterator(Ct);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ws?null:this.indexMap_.get(e.toString())}}Ae.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MW extends Ae{constructor(){super(new Pr(AT),Ae.EMPTY_NODE,Gs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ae.EMPTY_NODE}isEmpty(){return!1}}const cp=new MW;Object.defineProperties(We,{MIN:{value:new We(va,Ae.EMPTY_NODE)},MAX:{value:new We(oo,cp)}});ZP.__EMPTY_NODE=Ae.EMPTY_NODE;gn.__childrenNodeConstructor=Ae;AW(cp);PW(cp);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FW=!0;function Ft(t,e=null){if(t===null)return Ae.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ae(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new gn(n,Ft(e))}if(!(t instanceof Array)&&FW){const n=[];let r=!1;if(bn(t,(o,a)=>{if(o.substring(0,1)!=="."){const u=Ft(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new We(o,u)))}}),n.length===0)return Ae.EMPTY_NODE;const s=iy(n,NW,o=>o.name,AT);if(r){const o=iy(n,Ct.getCompare());return new Ae(s,Ft(e),new Gs({".priority":o},{".priority":Ct}))}else return new Ae(s,Ft(e),Gs.Default)}else{let n=Ae.EMPTY_NODE;return bn(t,(r,i)=>{if(Jr(t,r)&&r.substring(0,1)!=="."){const s=Ft(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ft(e))}}DW(Ft);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT extends dv{constructor(e){super(),this.indexPath_=e,ae(!qe(e)&&je(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?hu(e.name,n.name):s}makePost(e,n){const r=Ft(e),i=Ae.EMPTY_NODE.updateChild(this.indexPath_,r);return new We(n,i)}maxPost(){const e=Ae.EMPTY_NODE.updateChild(this.indexPath_,cp);return new We(oo,e)}toString(){return Sf(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W extends dv{compare(e,n){const r=e.node.compareTo(n.node);return r===0?hu(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return We.MIN}maxPost(){return We.MAX}makePost(e,n){const r=Ft(e);return new We(n,r)}toString(){return".value"}}const PT=new $W;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(t){return{type:"value",snapshotNode:t}}function Fc(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Cf(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function bf(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function UW(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){ae(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Cf(n,a)):ae(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Fc(n,r)):o.trackChildChange(bf(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ct,(i,s)=>{n.hasChild(i)||r.trackChildChange(Cf(i,s))}),n.isLeafNode()||n.forEachChild(Ct,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(bf(i,s,o))}else r.trackChildChange(Fc(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ae.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e){this.indexedFilter_=new RT(e.getIndex()),this.index_=e.getIndex(),this.startPost_=kf.getStartPost_(e),this.endPost_=kf.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new We(n,r))||(r=Ae.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Ae.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Ae.EMPTY_NODE);const s=this;return n.forEachChild(Ct,(o,a)=>{s.matches(new We(o,a))||(i=i.updateImmediateChild(o,Ae.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new kf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new We(n,r))||(r=Ae.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Ae.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Ae.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Ae.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Ae.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const v=this.index_.getCompare();o=(w,b)=>v(b,w)}else o=this.index_.getCompare();const a=e;ae(a.numChildren()===this.limit_,"");const u=new We(n,r),h=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),p=this.rangedFilter_.matches(u);if(a.hasChild(n)){const v=a.getImmediateChild(n);let w=i.getChildAfterChild(this.index_,h,this.reverse_);for(;w!=null&&(w.name===n||a.hasChild(w.name));)w=i.getChildAfterChild(this.index_,w,this.reverse_);const b=w==null?1:o(w,u);if(p&&!r.isEmpty()&&b>=0)return s!=null&&s.trackChildChange(bf(n,r,v)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Cf(n,v));const R=a.updateImmediateChild(n,Ae.EMPTY_NODE);return w!=null&&this.rangedFilter_.matches(w)?(s!=null&&s.trackChildChange(Fc(w.name,w.node)),R.updateImmediateChild(w.name,w.node)):R}}else return r.isEmpty()?e:p&&o(h,u)>=0?(s!=null&&(s.trackChildChange(Cf(h.name,h.node)),s.trackChildChange(Fc(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(h.name,Ae.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ct}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:va}hasEnd(){return this.endSet_}getIndexEndValue(){return ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:oo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ct}copy(){const e=new fv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function BW(t){return t.loadsAllData()?new RT(t.getIndex()):t.hasLimit()?new VW(t):new kf(t)}function jW(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function qW(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function oE(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function zW(t,e,n){let r;return t.index_===ws||!!n?r=oE(t,e,n):r=oE(t,e,oo),r.startAfterSet_=!0,r}function aE(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function WW(t,e,n){let r;return t.index_===ws||!!n?r=aE(t,e,n):r=aE(t,e,va),r.endBeforeSet_=!0,r}function pv(t,e){const n=t.copy();return n.index_=e,n}function U1(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ct?n="$priority":t.index_===PT?n="$value":t.index_===ws?n="$key":(ae(t.index_ instanceof DT,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ln(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ln(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ln(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ln(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ln(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function V1(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ct&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy extends QP{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=up("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=sy.getListenId_(e,r),a={};this.listens_[o]=a;const u=U1(e._queryParams);this.restRequest_(s+".json",u,(h,p)=>{let v=p;if(h===404&&(v=null,h=null),h===null&&this.onDataUpdate_(s,v,!1,r),jl(this.listens_,o)===a){let w;h?h===401?w="permission_denied":w="rest_error:"+h:w="ok",i(w,null)}})}unlisten(e,n){const r=sy.getListenId_(e,n);delete this.listens_[r]}get(e){const n=U1(e._queryParams),r=e._path.toString(),i=new Ar;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+uu(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=mf(a.responseText)}catch{nr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else a.status!==401&&a.status!==404&&nr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HW{constructor(){this.rootNode_=Ae.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(){return{value:null,children:new Map}}function hh(t,e,n){if(qe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=je(e);t.children.has(r)||t.children.set(r,oy());const i=t.children.get(r);e=_t(e),hh(i,e,n)}}function lE(t,e){if(qe(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(Ct,(r,i)=>{hh(t,new lt(r),i)}),lE(t,e)}}else if(t.children.size>0){const n=je(e);return e=_t(e),t.children.has(n)&&lE(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function uE(t,e,n){t.value!==null?n(e,t.value):KW(t,(r,i)=>{const s=new lt(e.toString()+"/"+r);uE(i,s,n)})}function KW(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&bn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=10*1e3,QW=30*1e3,YW=5*60*1e3;class XW{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new GW(e);const r=B1+(QW-B1)*Math.random();Ud(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;bn(e,(i,s)=>{s>0&&Jr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Ud(this.reportStats_.bind(this),Math.floor(Math.random()*2*YW))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vi;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Vi||(Vi={}));function OT(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function LT(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function MT(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Vi.ACK_USER_WRITE,this.source=OT()}operationForChild(e){if(qe(this.path)){if(this.affectedTree.value!=null)return ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new lt(e));return new ay(st(),n,this.revert)}}else return ae(je(this.path)===e,"operationForChild called for unrelated child."),new ay(_t(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n){this.source=e,this.path=n,this.type=Vi.LISTEN_COMPLETE}operationForChild(e){return qe(this.path)?new xf(this.source,st()):new xf(this.source,_t(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Vi.OVERWRITE}operationForChild(e){return qe(this.path)?new Hl(this.source,st(),this.snap.getImmediateChild(e)):new Hl(this.source,_t(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Vi.MERGE}operationForChild(e){if(qe(this.path)){const n=this.children.subtree(new lt(e));return n.isEmpty()?null:n.value?new Hl(this.source,st(),n.value):new $c(this.source,st(),n)}else return ae(je(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new $c(this.source,_t(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(qe(e))return this.isFullyInitialized()&&!this.filtered_;const n=je(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JW{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ZW(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(UW(o.childName,o.snapshotNode))}),ud(t,i,"child_removed",e,r,n),ud(t,i,"child_added",e,r,n),ud(t,i,"child_moved",s,r,n),ud(t,i,"child_changed",e,r,n),ud(t,i,"value",e,r,n),i}function ud(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,u)=>tH(t,a,u)),o.forEach(a=>{const u=eH(t,a,s);i.forEach(h=>{h.respondsTo(a.type)&&e.push(h.createEvent(u,t.query_))})})}function eH(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function tH(t,e,n){if(e.childName==null||n.childName==null)throw ih("Should only compare child_ events.");const r=new We(e.childName,e.snapshotNode),i=new We(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t,e){return{eventCache:t,serverCache:e}}function Vd(t,e,n,r){return gv(new wa(e,n,r),t.serverCache)}function sR(t,e,n,r){return gv(t.eventCache,new wa(e,n,r))}function ly(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Kl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tw;const nH=()=>(Tw||(Tw=new Pr($z)),Tw);class Tt{constructor(e,n=nH()){this.value=e,this.children=n}static fromObject(e){let n=new Tt(null);return bn(e,(r,i)=>{n=n.set(new lt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:st(),value:this.value};if(qe(e))return null;{const r=je(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(_t(e),n);return s!=null?{path:Pt(new lt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(qe(e))return this;{const n=je(e),r=this.children.get(n);return r!==null?r.subtree(_t(e)):new Tt(null)}}set(e,n){if(qe(e))return new Tt(n,this.children);{const r=je(e),s=(this.children.get(r)||new Tt(null)).set(_t(e),n),o=this.children.insert(r,s);return new Tt(this.value,o)}}remove(e){if(qe(e))return this.children.isEmpty()?new Tt(null):new Tt(null,this.children);{const n=je(e),r=this.children.get(n);if(r){const i=r.remove(_t(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Tt(null):new Tt(this.value,s)}else return this}}get(e){if(qe(e))return this.value;{const n=je(e),r=this.children.get(n);return r?r.get(_t(e)):null}}setTree(e,n){if(qe(e))return n;{const r=je(e),s=(this.children.get(r)||new Tt(null)).setTree(_t(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Tt(this.value,o)}}fold(e){return this.fold_(st(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Pt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,st(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(qe(e))return null;{const s=je(e),o=this.children.get(s);return o?o.findOnPath_(_t(e),Pt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,st(),n)}foreachOnPath_(e,n,r){if(qe(e))return this;{this.value&&r(n,this.value);const i=je(e),s=this.children.get(i);return s?s.foreachOnPath_(_t(e),Pt(n,i),r):new Tt(null)}}foreach(e){this.foreach_(st(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Pt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.writeTree_=e}static empty(){return new Wi(new Tt(null))}}function Bd(t,e,n){if(qe(e))return new Wi(new Tt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=gr(i,e);return s=s.updateChild(o,n),new Wi(t.writeTree_.set(i,s))}else{const i=new Tt(n),s=t.writeTree_.setTree(e,i);return new Wi(s)}}}function cE(t,e,n){let r=t;return bn(n,(i,s)=>{r=Bd(r,Pt(e,i),s)}),r}function j1(t,e){if(qe(e))return Wi.empty();{const n=t.writeTree_.setTree(e,new Tt(null));return new Wi(n)}}function hE(t,e){return du(t,e)!=null}function du(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(gr(n.path,e)):null}function q1(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ct,(r,i)=>{e.push(new We(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new We(r,i.value))}),e}function ua(t,e){if(qe(e))return t;{const n=du(t,e);return n!=null?new Wi(new Tt(n)):new Wi(t.writeTree_.subtree(e))}}function dE(t){return t.writeTree_.isEmpty()}function Uc(t,e){return oR(st(),t.writeTree_,e)}function oR(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(ae(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=oR(Pt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Pt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t,e){return cR(e,t)}function rH(t,e,n,r,i){ae(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Bd(t.visibleWrites,e,n)),t.lastWriteId=r}function iH(t,e,n,r){ae(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=cE(t.visibleWrites,e,n),t.lastWriteId=r}function sH(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function oH(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ae(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&aH(a,r.path)?i=!1:yi(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return lH(t),!0;if(r.snap)t.visibleWrites=j1(t.visibleWrites,r.path);else{const a=r.children;bn(a,u=>{t.visibleWrites=j1(t.visibleWrites,Pt(r.path,u))})}return!0}else return!1}function aH(t,e){if(t.snap)return yi(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&yi(Pt(t.path,n),e))return!0;return!1}function lH(t){t.visibleWrites=aR(t.allWrites,uH,st()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function uH(t){return t.visible}function aR(t,e,n){let r=Wi.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)yi(n,o)?(a=gr(n,o),r=Bd(r,a,s.snap)):yi(o,n)&&(a=gr(o,n),r=Bd(r,st(),s.snap.getChild(a)));else if(s.children){if(yi(n,o))a=gr(n,o),r=cE(r,a,s.children);else if(yi(o,n))if(a=gr(o,n),qe(a))r=cE(r,st(),s.children);else{const u=jl(s.children,je(a));if(u){const h=u.getChild(_t(a));r=Bd(r,st(),h)}}}else throw ih("WriteRecord should have .snap or .children")}}return r}function lR(t,e,n,r,i){if(!r&&!i){const s=du(t.visibleWrites,e);if(s!=null)return s;{const o=ua(t.visibleWrites,e);if(dE(o))return n;if(n==null&&!hE(o,st()))return null;{const a=n||Ae.EMPTY_NODE;return Uc(o,a)}}}else{const s=ua(t.visibleWrites,e);if(!i&&dE(s))return n;if(!i&&n==null&&!hE(s,st()))return null;{const o=function(h){return(h.visible||i)&&(!r||!~r.indexOf(h.writeId))&&(yi(h.path,e)||yi(e,h.path))},a=aR(t.allWrites,o,e),u=n||Ae.EMPTY_NODE;return Uc(a,u)}}}function cH(t,e,n){let r=Ae.EMPTY_NODE;const i=du(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ct,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=ua(t.visibleWrites,e);return n.forEachChild(Ct,(o,a)=>{const u=Uc(ua(s,new lt(o)),a);r=r.updateImmediateChild(o,u)}),q1(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=ua(t.visibleWrites,e);return q1(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function hH(t,e,n,r,i){ae(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Pt(e,n);if(hE(t.visibleWrites,s))return null;{const o=ua(t.visibleWrites,s);return dE(o)?i.getChild(n):Uc(o,i.getChild(n))}}function dH(t,e,n,r){const i=Pt(e,n),s=du(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=ua(t.visibleWrites,i);return Uc(o,r.getNode().getImmediateChild(n))}else return null}function fH(t,e){return du(t.visibleWrites,e)}function pH(t,e,n,r,i,s,o){let a;const u=ua(t.visibleWrites,e),h=du(u,st());if(h!=null)a=h;else if(n!=null)a=Uc(u,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const p=[],v=o.getCompare(),w=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let b=w.getNext();for(;b&&p.length<i;)v(b,r)!==0&&p.push(b),b=w.getNext();return p}else return[]}function gH(){return{visibleWrites:Wi.empty(),allWrites:[],lastWriteId:-1}}function uy(t,e,n,r){return lR(t.writeTree,t.treePath,e,n,r)}function FT(t,e){return cH(t.writeTree,t.treePath,e)}function z1(t,e,n,r){return hH(t.writeTree,t.treePath,e,n,r)}function cy(t,e){return fH(t.writeTree,Pt(t.treePath,e))}function mH(t,e,n,r,i,s){return pH(t.writeTree,t.treePath,e,n,r,i,s)}function $T(t,e,n){return dH(t.writeTree,t.treePath,e,n)}function uR(t,e){return cR(Pt(t.treePath,e),t.writeTree)}function cR(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ae(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ae(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,bf(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Cf(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Fc(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,bf(r,e.snapshotNode,i.oldSnap));else throw ih("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const hR=new vH;class UT{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new wa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $T(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Kl(this.viewCache_),s=mH(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _H(t){return{filter:t}}function wH(t,e){ae(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ae(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function EH(t,e,n,r,i){const s=new yH;let o,a;if(n.type===Vi.OVERWRITE){const h=n;h.source.fromUser?o=fE(t,e,h.path,h.snap,r,i,s):(ae(h.source.fromServer,"Unknown source."),a=h.source.tagged||e.serverCache.isFiltered()&&!qe(h.path),o=hy(t,e,h.path,h.snap,r,i,a,s))}else if(n.type===Vi.MERGE){const h=n;h.source.fromUser?o=TH(t,e,h.path,h.children,r,i,s):(ae(h.source.fromServer,"Unknown source."),a=h.source.tagged||e.serverCache.isFiltered(),o=pE(t,e,h.path,h.children,r,i,a,s))}else if(n.type===Vi.ACK_USER_WRITE){const h=n;h.revert?o=bH(t,e,h.path,r,i,s):o=SH(t,e,h.path,h.affectedTree,r,i,s)}else if(n.type===Vi.LISTEN_COMPLETE)o=CH(t,e,n.path,r,s);else throw ih("Unknown operation type: "+n.type);const u=s.getChanges();return IH(e,o,u),{viewCache:o,changes:u}}function IH(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ly(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(iR(ly(e)))}}function dR(t,e,n,r,i,s){const o=e.eventCache;if(cy(r,n)!=null)return e;{let a,u;if(qe(n))if(ae(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const h=Kl(e),p=h instanceof Ae?h:Ae.EMPTY_NODE,v=FT(r,p);a=t.filter.updateFullNode(e.eventCache.getNode(),v,s)}else{const h=uy(r,Kl(e));a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const h=je(n);if(h===".priority"){ae(_a(n)===1,"Can't have a priority with additional path components");const p=o.getNode();u=e.serverCache.getNode();const v=z1(r,n,p,u);v!=null?a=t.filter.updatePriority(p,v):a=o.getNode()}else{const p=_t(n);let v;if(o.isCompleteForChild(h)){u=e.serverCache.getNode();const w=z1(r,n,o.getNode(),u);w!=null?v=o.getNode().getImmediateChild(h).updateChild(p,w):v=o.getNode().getImmediateChild(h)}else v=$T(r,h,e.serverCache);v!=null?a=t.filter.updateChild(o.getNode(),h,v,p,i,s):a=o.getNode()}}return Vd(e,a,o.isFullyInitialized()||qe(n),t.filter.filtersNodes())}}function hy(t,e,n,r,i,s,o,a){const u=e.serverCache;let h;const p=o?t.filter:t.filter.getIndexedFilter();if(qe(n))h=p.updateFullNode(u.getNode(),r,null);else if(p.filtersNodes()&&!u.isFiltered()){const b=u.getNode().updateChild(n,r);h=p.updateFullNode(u.getNode(),b,null)}else{const b=je(n);if(!u.isCompleteForPath(n)&&_a(n)>1)return e;const k=_t(n),J=u.getNode().getImmediateChild(b).updateChild(k,r);b===".priority"?h=p.updatePriority(u.getNode(),J):h=p.updateChild(u.getNode(),b,J,k,hR,null)}const v=sR(e,h,u.isFullyInitialized()||qe(n),p.filtersNodes()),w=new UT(i,v,s);return dR(t,v,n,i,w,a)}function fE(t,e,n,r,i,s,o){const a=e.eventCache;let u,h;const p=new UT(i,e,s);if(qe(n))h=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=Vd(e,h,!0,t.filter.filtersNodes());else{const v=je(n);if(v===".priority")h=t.filter.updatePriority(e.eventCache.getNode(),r),u=Vd(e,h,a.isFullyInitialized(),a.isFiltered());else{const w=_t(n),b=a.getNode().getImmediateChild(v);let k;if(qe(w))k=r;else{const R=p.getCompleteChild(v);R!=null?kT(w)===".priority"&&R.getChild(XP(w)).isEmpty()?k=R:k=R.updateChild(w,r):k=Ae.EMPTY_NODE}if(b.equals(k))u=e;else{const R=t.filter.updateChild(a.getNode(),v,k,w,p,o);u=Vd(e,R,a.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function W1(t,e){return t.eventCache.isCompleteForChild(e)}function TH(t,e,n,r,i,s,o){let a=e;return r.foreach((u,h)=>{const p=Pt(n,u);W1(e,je(p))&&(a=fE(t,a,p,h,i,s,o))}),r.foreach((u,h)=>{const p=Pt(n,u);W1(e,je(p))||(a=fE(t,a,p,h,i,s,o))}),a}function H1(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function pE(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,h;qe(n)?h=r:h=new Tt(null).setTree(n,r);const p=e.serverCache.getNode();return h.children.inorderTraversal((v,w)=>{if(p.hasChild(v)){const b=e.serverCache.getNode().getImmediateChild(v),k=H1(t,b,w);u=hy(t,u,new lt(v),k,i,s,o,a)}}),h.children.inorderTraversal((v,w)=>{const b=!e.serverCache.isCompleteForChild(v)&&w.value===null;if(!p.hasChild(v)&&!b){const k=e.serverCache.getNode().getImmediateChild(v),R=H1(t,k,w);u=hy(t,u,new lt(v),R,i,s,o,a)}}),u}function SH(t,e,n,r,i,s,o){if(cy(i,n)!=null)return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(qe(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return hy(t,e,n,u.getNode().getChild(n),i,s,a,o);if(qe(n)){let h=new Tt(null);return u.getNode().forEachChild(ws,(p,v)=>{h=h.set(new lt(p),v)}),pE(t,e,n,h,i,s,a,o)}else return e}else{let h=new Tt(null);return r.foreach((p,v)=>{const w=Pt(n,p);u.isCompleteForPath(w)&&(h=h.set(p,u.getNode().getChild(w)))}),pE(t,e,n,h,i,s,a,o)}}function CH(t,e,n,r,i){const s=e.serverCache,o=sR(e,s.getNode(),s.isFullyInitialized()||qe(n),s.isFiltered());return dR(t,o,n,r,hR,i)}function bH(t,e,n,r,i,s){let o;if(cy(r,n)!=null)return e;{const a=new UT(r,e,i),u=e.eventCache.getNode();let h;if(qe(n)||je(n)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=uy(r,Kl(e));else{const v=e.serverCache.getNode();ae(v instanceof Ae,"serverChildren would be complete if leaf node"),p=FT(r,v)}p=p,h=t.filter.updateFullNode(u,p,s)}else{const p=je(n);let v=$T(r,p,e.serverCache);v==null&&e.serverCache.isCompleteForChild(p)&&(v=u.getImmediateChild(p)),v!=null?h=t.filter.updateChild(u,p,v,_t(n),a,s):e.eventCache.getNode().hasChild(p)?h=t.filter.updateChild(u,p,Ae.EMPTY_NODE,_t(n),a,s):h=u,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=uy(r,Kl(e)),o.isLeafNode()&&(h=t.filter.updateFullNode(h,o,s)))}return o=e.serverCache.isFullyInitialized()||cy(r,st())!=null,Vd(e,h,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new RT(r.getIndex()),s=BW(r);this.processor_=_H(s);const o=n.serverCache,a=n.eventCache,u=i.updateFullNode(Ae.EMPTY_NODE,o.getNode(),null),h=s.updateFullNode(Ae.EMPTY_NODE,a.getNode(),null),p=new wa(u,o.isFullyInitialized(),i.filtersNodes()),v=new wa(h,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=gv(v,p),this.eventGenerator_=new JW(this.query_)}get query(){return this.query_}}function xH(t){return t.viewCache_.serverCache.getNode()}function NH(t){return ly(t.viewCache_)}function AH(t,e){const n=Kl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!qe(e)&&!n.getImmediateChild(je(e)).isEmpty())?n.getChild(e):null}function K1(t){return t.eventRegistrations_.length===0}function DH(t,e){t.eventRegistrations_.push(e)}function G1(t,e,n){const r=[];if(n){ae(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Q1(t,e,n,r){e.type===Vi.MERGE&&e.source.queryId!==null&&(ae(Kl(t.viewCache_),"We should always have a full cache before handling merges"),ae(ly(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=EH(t.processor_,i,e,n,r);return wH(t.processor_,s.viewCache),ae(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,fR(t,s.changes,s.viewCache.eventCache.getNode(),null)}function PH(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ct,(s,o)=>{r.push(Fc(s,o))}),n.isFullyInitialized()&&r.push(iR(n.getNode())),fR(t,r,n.getNode(),e)}function fR(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return ZW(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dy;class pR{constructor(){this.views=new Map}}function RH(t){ae(!dy,"__referenceConstructor has already been defined"),dy=t}function OH(){return ae(dy,"Reference.ts has not been loaded"),dy}function LH(t){return t.views.size===0}function VT(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return ae(s!=null,"SyncTree gave us an op for an invalid query."),Q1(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Q1(o,e,n,r));return s}}function gR(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=uy(n,i?r:null),u=!1;a?u=!0:r instanceof Ae?(a=FT(n,r),u=!1):(a=Ae.EMPTY_NODE,u=!1);const h=gv(new wa(a,u,!1),new wa(r,i,!1));return new kH(e,h)}return o}function MH(t,e,n,r,i,s){const o=gR(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),DH(o,n),PH(o,n)}function FH(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=Ea(t);if(i==="default")for(const[u,h]of t.views.entries())o=o.concat(G1(h,n,r)),K1(h)&&(t.views.delete(u),h.query._queryParams.loadsAllData()||s.push(h.query));else{const u=t.views.get(i);u&&(o=o.concat(G1(u,n,r)),K1(u)&&(t.views.delete(i),u.query._queryParams.loadsAllData()||s.push(u.query)))}return a&&!Ea(t)&&s.push(new(OH())(e._repo,e._path)),{removed:s,events:o}}function mR(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ca(t,e){let n=null;for(const r of t.views.values())n=n||AH(r,e);return n}function yR(t,e){if(e._queryParams.loadsAllData())return yv(t);{const r=e._queryIdentifier;return t.views.get(r)}}function vR(t,e){return yR(t,e)!=null}function Ea(t){return yv(t)!=null}function yv(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fy;function $H(t){ae(!fy,"__referenceConstructor has already been defined"),fy=t}function UH(){return ae(fy,"Reference.ts has not been loaded"),fy}let VH=1;class Y1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Tt(null),this.pendingWriteTree_=gH(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function BT(t,e,n,r,i){return rH(t.pendingWriteTree_,e,n,r,i),i?dh(t,new Hl(OT(),e,n)):[]}function BH(t,e,n,r){iH(t.pendingWriteTree_,e,n,r);const i=Tt.fromObject(n);return dh(t,new $c(OT(),e,i))}function Xo(t,e,n=!1){const r=sH(t.pendingWriteTree_,e);if(oH(t.pendingWriteTree_,e)){let s=new Tt(null);return r.snap!=null?s=s.set(st(),!0):bn(r.children,o=>{s=s.set(new lt(o),!0)}),dh(t,new ay(r.path,s,n))}else return[]}function hp(t,e,n){return dh(t,new Hl(LT(),e,n))}function jH(t,e,n){const r=Tt.fromObject(n);return dh(t,new $c(LT(),e,r))}function qH(t,e){return dh(t,new xf(LT(),e))}function zH(t,e,n){const r=jT(t,n);if(r){const i=qT(r),s=i.path,o=i.queryId,a=gr(s,e),u=new xf(MT(o),a);return zT(t,s,u)}else return[]}function py(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||vR(o,e))){const u=FH(o,e,n,r);LH(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const h=u.removed;if(a=u.events,!i){const p=h.findIndex(w=>w._queryParams.loadsAllData())!==-1,v=t.syncPointTree_.findOnPath(s,(w,b)=>Ea(b));if(p&&!v){const w=t.syncPointTree_.subtree(s);if(!w.isEmpty()){const b=KH(w);for(let k=0;k<b.length;++k){const R=b[k],J=R.query,N=IR(t,R);t.listenProvider_.startListening(jd(J),Nf(t,J),N.hashFn,N.onComplete)}}}!v&&h.length>0&&!r&&(p?t.listenProvider_.stopListening(jd(e),null):h.forEach(w=>{const b=t.queryToTagMap.get(_v(w));t.listenProvider_.stopListening(jd(w),b)}))}GH(t,h)}return a}function _R(t,e,n,r){const i=jT(t,r);if(i!=null){const s=qT(i),o=s.path,a=s.queryId,u=gr(o,e),h=new Hl(MT(a),u,n);return zT(t,o,h)}else return[]}function WH(t,e,n,r){const i=jT(t,r);if(i){const s=qT(i),o=s.path,a=s.queryId,u=gr(o,e),h=Tt.fromObject(n),p=new $c(MT(a),u,h);return zT(t,o,p)}else return[]}function gE(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(w,b)=>{const k=gr(w,i);s=s||ca(b,k),o=o||Ea(b)});let a=t.syncPointTree_.get(i);a?(o=o||Ea(a),s=s||ca(a,st())):(a=new pR,t.syncPointTree_=t.syncPointTree_.set(i,a));let u;s!=null?u=!0:(u=!1,s=Ae.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((b,k)=>{const R=ca(k,st());R&&(s=s.updateImmediateChild(b,R))}));const h=vR(a,e);if(!h&&!e._queryParams.loadsAllData()){const w=_v(e);ae(!t.queryToTagMap.has(w),"View does not exist, but we have a tag");const b=QH();t.queryToTagMap.set(w,b),t.tagToQueryMap.set(b,w)}const p=mv(t.pendingWriteTree_,i);let v=MH(a,e,n,p,s,u);if(!h&&!o&&!r){const w=yR(a,e);v=v.concat(YH(t,e,w))}return v}function vv(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const u=gr(o,e),h=ca(a,u);if(h)return h});return lR(i,e,s,n,!0)}function HH(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(h,p)=>{const v=gr(h,n);r=r||ca(p,v)});let i=t.syncPointTree_.get(n);i?r=r||ca(i,st()):(i=new pR,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new wa(r,!0,!1):null,a=mv(t.pendingWriteTree_,e._path),u=gR(i,e,a,s?o.getNode():Ae.EMPTY_NODE,s);return NH(u)}function dh(t,e){return wR(e,t.syncPointTree_,null,mv(t.pendingWriteTree_,st()))}function wR(t,e,n,r){if(qe(t.path))return ER(t,e,n,r);{const i=e.get(st());n==null&&i!=null&&(n=ca(i,st()));let s=[];const o=je(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const h=n?n.getImmediateChild(o):null,p=uR(r,o);s=s.concat(wR(a,u,h,p))}return i&&(s=s.concat(VT(i,t,r,n))),s}}function ER(t,e,n,r){const i=e.get(st());n==null&&i!=null&&(n=ca(i,st()));let s=[];return e.children.inorderTraversal((o,a)=>{const u=n?n.getImmediateChild(o):null,h=uR(r,o),p=t.operationForChild(o);p&&(s=s.concat(ER(p,a,u,h)))}),i&&(s=s.concat(VT(i,t,r,n))),s}function IR(t,e){const n=e.query,r=Nf(t,n);return{hashFn:()=>(xH(e)||Ae.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?zH(t,n._path,r):qH(t,n._path);{const s=Bz(i,n);return py(t,n,null,s)}}}}function Nf(t,e){const n=_v(e);return t.queryToTagMap.get(n)}function _v(t){return t._path.toString()+"$"+t._queryIdentifier}function jT(t,e){return t.tagToQueryMap.get(e)}function qT(t){const e=t.indexOf("$");return ae(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new lt(t.substr(0,e))}}function zT(t,e,n){const r=t.syncPointTree_.get(e);ae(r,"Missing sync point for query tag that we're tracking");const i=mv(t.pendingWriteTree_,e);return VT(r,n,i,null)}function KH(t){return t.fold((e,n,r)=>{if(n&&Ea(n))return[yv(n)];{let i=[];return n&&(i=mR(n)),bn(r,(s,o)=>{i=i.concat(o)}),i}})}function jd(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(UH())(t._repo,t._path):t}function GH(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=_v(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function QH(){return VH++}function YH(t,e,n){const r=e._path,i=Nf(t,e),s=IR(t,n),o=t.listenProvider_.startListening(jd(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)ae(!Ea(a.value),"If we're adding a query, it shouldn't be shadowed");else{const u=a.fold((h,p,v)=>{if(!qe(h)&&p&&Ea(p))return[yv(p).query];{let w=[];return p&&(w=w.concat(mR(p).map(b=>b.query))),bn(v,(b,k)=>{w=w.concat(k)}),w}});for(let h=0;h<u.length;++h){const p=u[h];t.listenProvider_.stopListening(jd(p),Nf(t,p))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new WT(n)}node(){return this.node_}}class HT{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Pt(this.path_,e);return new HT(this.syncTree_,n)}node(){return vv(this.syncTree_,this.path_)}}const XH=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},X1=function(t,e,n){if(!t||typeof t!="object")return t;if(ae(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return JH(t[".sv"],e,n);if(typeof t[".sv"]=="object")return ZH(t[".sv"],e);ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},JH=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ae(!1,"Unexpected server value: "+t)}},ZH=function(t,e,n){t.hasOwnProperty("increment")||ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ae(!1,"Unexpected increment value: "+r);const i=e.node();if(ae(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},TR=function(t,e,n,r){return GT(e,new HT(n,t),r)},KT=function(t,e,n){return GT(t,new WT(e),n)};function GT(t,e,n){const r=t.getPriority().val(),i=X1(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=X1(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new gn(a,Ft(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new gn(i))),o.forEachChild(Ct,(a,u)=>{const h=GT(u,e.getImmediateChild(a),n);h!==u&&(s=s.updateImmediateChild(a,h))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function wv(t,e){let n=e instanceof lt?e:new lt(e),r=t,i=je(n);for(;i!==null;){const s=jl(r.node.children,i)||{children:{},childCount:0};r=new QT(i,r,s),n=_t(n),i=je(n)}return r}function fu(t){return t.node.value}function YT(t,e){t.node.value=e,mE(t)}function SR(t){return t.node.childCount>0}function e3(t){return fu(t)===void 0&&!SR(t)}function Ev(t,e){bn(t.node.children,(n,r)=>{e(new QT(n,t,r))})}function CR(t,e,n,r){n&&!r&&e(t),Ev(t,i=>{CR(i,e,!0,r)}),n&&r&&e(t)}function t3(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function dp(t){return new lt(t.parent===null?t.name:dp(t.parent)+"/"+t.name)}function mE(t){t.parent!==null&&n3(t.parent,t.name,t)}function n3(t,e,n){const r=e3(n),i=Jr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,mE(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,mE(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3=/[\[\].#$\/\u0000-\u001F\u007F]/,i3=/[\[\].#$\u0000-\u001F\u007F]/,Sw=10*1024*1024,Iv=function(t){return typeof t=="string"&&t.length!==0&&!r3.test(t)},bR=function(t){return typeof t=="string"&&t.length!==0&&!i3.test(t)},s3=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),bR(t)},Af=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!hv(t)||t&&typeof t=="object"&&Jr(t,".sv")},Cs=function(t,e,n,r){r&&e===void 0||fp(Ur(t,"value"),e,n)},fp=function(t,e,n){const r=n instanceof lt?new EW(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+fl(r));if(typeof e=="function")throw new Error(t+"contains a function "+fl(r)+" with contents = "+e.toString());if(hv(e))throw new Error(t+"contains "+e.toString()+" "+fl(r));if(typeof e=="string"&&e.length>Sw/3&&Zy(e)>Sw)throw new Error(t+"contains a string greater than "+Sw+" utf8 bytes "+fl(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(bn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Iv(o)))throw new Error(t+" contains an invalid key ("+o+") "+fl(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);IW(r,o),fp(t,a,r),TW(r)}),i&&s)throw new Error(t+' contains ".value" child '+fl(r)+" in addition to actual children.")}},o3=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Sf(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Iv(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(wW);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&yi(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},kR=function(t,e,n,r){if(r&&e===void 0)return;const i=Ur(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];bn(e,(o,a)=>{const u=new lt(o);if(fp(i,a,Pt(n,u)),kT(u)===".priority"&&!Af(a))throw new Error(i+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(u)}),o3(i,s)},XT=function(t,e,n){if(!(n&&e===void 0)){if(hv(e))throw new Error(Ur(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Af(e))throw new Error(Ur(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pp=function(t,e,n,r){if(!(r&&n===void 0)&&!Iv(n))throw new Error(Ur(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Df=function(t,e,n,r){if(!(r&&n===void 0)&&!bR(n))throw new Error(Ur(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},a3=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Df(t,e,n,r)},vi=function(t,e){if(je(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},xR=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Iv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!s3(n))throw new Error(Ur(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Tv(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!xT(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function NR(t,e,n){Tv(t,n),AR(t,r=>xT(r,e))}function ei(t,e,n){Tv(t,n),AR(t,r=>yi(r,e)||yi(e,r))}function AR(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(u3(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function u3(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ol&&En("event: "+n.toString()),ch(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="repo_interrupt",c3=25;class h3{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new l3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oy(),this.transactionQueueTree_=new QT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function d3(t,e,n){if(t.stats_=CT(t.repoInfo_),t.forceRestClient_||Wz())t.server_=new sy(t.repoInfo_,(r,i,s,o)=>{J1(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Z1(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ln(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Zs(t.repoInfo_,e,(r,i,s,o)=>{J1(t,r,i,s,o)},r=>{Z1(t,r)},r=>{f3(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Yz(t.repoInfo_,()=>new XW(t.stats_,t.server_)),t.infoData_=new HW,t.infoSyncTree_=new Y1({startListening:(r,i,s,o)=>{let a=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(a=hp(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),JT(t,"connected",!1),t.serverSyncTree_=new Y1({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,u)=>{const h=o(a,u);ei(t.eventQueue_,r._path,h)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function PR(t){const n=t.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function gp(t){return XH({timestamp:PR(t)})}function J1(t,e,n,r,i){t.dataUpdateCount++;const s=new lt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const u=Ym(n,h=>Ft(h));o=WH(t.serverSyncTree_,s,u,i)}else{const u=Ft(n);o=_R(t.serverSyncTree_,s,u,i)}else if(r){const u=Ym(n,h=>Ft(h));o=jH(t.serverSyncTree_,s,u)}else{const u=Ft(n);o=hp(t.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=Vc(t,s)),ei(t.eventQueue_,a,o)}function Z1(t,e){JT(t,"connected",e),e===!1&&m3(t)}function f3(t,e){bn(e,(n,r)=>{JT(t,n,r)})}function JT(t,e,n){const r=new lt("/.info/"+e),i=Ft(n);t.infoData_.updateSnapshot(r,i);const s=hp(t.infoSyncTree_,r,i);ei(t.eventQueue_,r,s)}function Sv(t){return t.nextWriteId_++}function p3(t,e,n){const r=HH(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Ft(i).withIndex(e._queryParams.getIndex());gE(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=hp(t.serverSyncTree_,e._path,s);else{const a=Nf(t.serverSyncTree_,e);o=_R(t.serverSyncTree_,e._path,s,a)}return ei(t.eventQueue_,e._path,o),py(t.serverSyncTree_,e,n,null,!0),s},i=>(fh(t,"get for query "+ln(e)+" failed: "+i),Promise.reject(new Error(i))))}function ZT(t,e,n,r,i){fh(t,"set",{path:e.toString(),value:n,priority:r});const s=gp(t),o=Ft(n,r),a=vv(t.serverSyncTree_,e),u=KT(o,a,s),h=Sv(t),p=BT(t.serverSyncTree_,e,u,h,!0);Tv(t.eventQueue_,p),t.server_.put(e.toString(),o.val(!0),(w,b)=>{const k=w==="ok";k||nr("set at "+e+" failed: "+w);const R=Xo(t.serverSyncTree_,h,!k);ei(t.eventQueue_,e,R),Ia(t,i,w,b)});const v=tS(t,e);Vc(t,v),ei(t.eventQueue_,v,[])}function g3(t,e,n,r){fh(t,"update",{path:e.toString(),value:n});let i=!0;const s=gp(t),o={};if(bn(n,(a,u)=>{i=!1,o[a]=TR(Pt(e,a),Ft(u),t.serverSyncTree_,s)}),i)En("update() called with empty data.  Don't do anything."),Ia(t,r,"ok",void 0);else{const a=Sv(t),u=BH(t.serverSyncTree_,e,o,a);Tv(t.eventQueue_,u),t.server_.merge(e.toString(),n,(h,p)=>{const v=h==="ok";v||nr("update at "+e+" failed: "+h);const w=Xo(t.serverSyncTree_,a,!v),b=w.length>0?Vc(t,e):e;ei(t.eventQueue_,b,w),Ia(t,r,h,p)}),bn(n,h=>{const p=tS(t,Pt(e,h));Vc(t,p)}),ei(t.eventQueue_,e,[])}}function m3(t){fh(t,"onDisconnectEvents");const e=gp(t),n=oy();uE(t.onDisconnect_,st(),(i,s)=>{const o=TR(i,s,t.serverSyncTree_,e);hh(n,i,o)});let r=[];uE(n,st(),(i,s)=>{r=r.concat(hp(t.serverSyncTree_,i,s));const o=tS(t,i);Vc(t,o)}),t.onDisconnect_=oy(),ei(t.eventQueue_,st(),r)}function y3(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&lE(t.onDisconnect_,e),Ia(t,n,r,i)})}function ek(t,e,n,r){const i=Ft(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&hh(t.onDisconnect_,e,i),Ia(t,r,s,o)})}function v3(t,e,n,r,i){const s=Ft(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&hh(t.onDisconnect_,e,s),Ia(t,i,o,a)})}function _3(t,e,n,r){if(Qm(n)){En("onDisconnect().update() called with empty data.  Don't do anything."),Ia(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&bn(n,(o,a)=>{const u=Ft(a);hh(t.onDisconnect_,Pt(e,o),u)}),Ia(t,r,i,s)})}function w3(t,e,n){let r;je(e._path)===".info"?r=gE(t.infoSyncTree_,e,n):r=gE(t.serverSyncTree_,e,n),NR(t.eventQueue_,e._path,r)}function yE(t,e,n){let r;je(e._path)===".info"?r=py(t.infoSyncTree_,e,n):r=py(t.serverSyncTree_,e,n),NR(t.eventQueue_,e._path,r)}function RR(t){t.persistentConnection_&&t.persistentConnection_.interrupt(DR)}function E3(t){t.persistentConnection_&&t.persistentConnection_.resume(DR)}function fh(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),En(n,...e)}function Ia(t,e,n,r){e&&ch(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function I3(t,e,n,r,i,s){fh(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:xP(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=eS(t,e,void 0);o.currentInputSnapshot=a;const u=o.update(a.val());if(u===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{fp("transaction failed: Data returned ",u,o.path),o.status=0;const h=wv(t.transactionQueueTree_,e),p=fu(h)||[];p.push(o),YT(h,p);let v;typeof u=="object"&&u!==null&&Jr(u,".priority")?(v=jl(u,".priority"),ae(Af(v),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):v=(vv(t.serverSyncTree_,e)||Ae.EMPTY_NODE).getPriority().val();const w=gp(t),b=Ft(u,v),k=KT(b,a,w);o.currentOutputSnapshotRaw=b,o.currentOutputSnapshotResolved=k,o.currentWriteId=Sv(t);const R=BT(t.serverSyncTree_,e,k,o.currentWriteId,o.applyLocally);ei(t.eventQueue_,e,R),Cv(t,t.transactionQueueTree_)}}function eS(t,e,n){return vv(t.serverSyncTree_,e,n)||Ae.EMPTY_NODE}function Cv(t,e=t.transactionQueueTree_){if(e||bv(t,e),fu(e)){const n=LR(t,e);ae(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&T3(t,dp(e),n)}else SR(e)&&Ev(e,n=>{Cv(t,n)})}function T3(t,e,n){const r=n.map(h=>h.currentWriteId),i=eS(t,e,r);let s=i;const o=i.hash();for(let h=0;h<n.length;h++){const p=n[h];ae(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const v=gr(e,p.path);s=s.updateChild(v,p.currentOutputSnapshotRaw)}const a=s.val(!0),u=e;t.server_.put(u.toString(),a,h=>{fh(t,"transaction put response",{path:u.toString(),status:h});let p=[];if(h==="ok"){const v=[];for(let w=0;w<n.length;w++)n[w].status=2,p=p.concat(Xo(t.serverSyncTree_,n[w].currentWriteId)),n[w].onComplete&&v.push(()=>n[w].onComplete(null,!0,n[w].currentOutputSnapshotResolved)),n[w].unwatcher();bv(t,wv(t.transactionQueueTree_,e)),Cv(t,t.transactionQueueTree_),ei(t.eventQueue_,e,p);for(let w=0;w<v.length;w++)ch(v[w])}else{if(h==="datastale")for(let v=0;v<n.length;v++)n[v].status===3?n[v].status=4:n[v].status=0;else{nr("transaction at "+u.toString()+" failed: "+h);for(let v=0;v<n.length;v++)n[v].status=4,n[v].abortReason=h}Vc(t,e)}},o)}function Vc(t,e){const n=OR(t,e),r=dp(n),i=LR(t,n);return S3(t,i,r),r}function S3(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const u=e[a],h=gr(n,u.path);let p=!1,v;if(ae(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)p=!0,v=u.abortReason,i=i.concat(Xo(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=c3)p=!0,v="maxretry",i=i.concat(Xo(t.serverSyncTree_,u.currentWriteId,!0));else{const w=eS(t,u.path,o);u.currentInputSnapshot=w;const b=e[a].update(w.val());if(b!==void 0){fp("transaction failed: Data returned ",b,u.path);let k=Ft(b);typeof b=="object"&&b!=null&&Jr(b,".priority")||(k=k.updatePriority(w.getPriority()));const J=u.currentWriteId,N=gp(t),D=KT(k,w,N);u.currentOutputSnapshotRaw=k,u.currentOutputSnapshotResolved=D,u.currentWriteId=Sv(t),o.splice(o.indexOf(J),1),i=i.concat(BT(t.serverSyncTree_,u.path,D,u.currentWriteId,u.applyLocally)),i=i.concat(Xo(t.serverSyncTree_,J,!0))}else p=!0,v="nodata",i=i.concat(Xo(t.serverSyncTree_,u.currentWriteId,!0))}ei(t.eventQueue_,n,i),i=[],p&&(e[a].status=2,function(w){setTimeout(w,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(v==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(v),!1,null))))}bv(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ch(r[a]);Cv(t,t.transactionQueueTree_)}function OR(t,e){let n,r=t.transactionQueueTree_;for(n=je(e);n!==null&&fu(r)===void 0;)r=wv(r,n),e=_t(e),n=je(e);return r}function LR(t,e){const n=[];return MR(t,e,n),n.sort((r,i)=>r.order-i.order),n}function MR(t,e,n){const r=fu(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Ev(e,i=>{MR(t,i,n)})}function bv(t,e){const n=fu(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,YT(e,n.length>0?n:void 0)}Ev(e,r=>{bv(t,r)})}function tS(t,e){const n=dp(OR(t,e)),r=wv(t.transactionQueueTree_,e);return t3(r,i=>{Cw(t,i)}),Cw(t,r),CR(r,i=>{Cw(t,i)}),n}function Cw(t,e){const n=fu(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ae(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(ae(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Xo(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?YT(e,void 0):n.length=s+1,ei(t.eventQueue_,dp(e),i);for(let o=0;o<r.length;o++)ch(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function b3(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):nr(`Invalid query segment '${n}' in query '${t}'`)}return e}const vE=function(t,e){const n=k3(t),r=n.namespace;n.domain==="firebase.com"&&Ss(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ss("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Mz();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new jP(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new lt(n.pathString)}},k3=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",u=443;if(typeof t=="string"){let h=t.indexOf("//");h>=0&&(a=t.substring(0,h-1),t=t.substring(h+2));let p=t.indexOf("/");p===-1&&(p=t.length);let v=t.indexOf("?");v===-1&&(v=t.length),e=t.substring(0,Math.min(p,v)),p<v&&(i=C3(t.substring(p,v)));const w=b3(t.substring(Math.min(t.length,v)));h=e.indexOf(":"),h>=0?(o=a==="https"||a==="wss",u=parseInt(e.substring(h+1),10)):h=e.length;const b=e.slice(0,h);if(b.toLowerCase()==="localhost")n="localhost";else if(b.split(".").length<=2)n=b;else{const k=e.indexOf(".");r=e.substring(0,k).toLowerCase(),n=e.substring(k+1),s=r}"ns"in w&&(s=w.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",x3=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=tk.charAt(n%64),n=Math.floor(n/64);ae(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=tk.charAt(e[i]);return ae(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ln(this.snapshot.exportVal())}}class $R{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Ar;return y3(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){vi("OnDisconnect.remove",this._path);const e=new Ar;return ek(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){vi("OnDisconnect.set",this._path),Cs("OnDisconnect.set",e,this._path,!1);const n=new Ar;return ek(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){vi("OnDisconnect.setWithPriority",this._path),Cs("OnDisconnect.setWithPriority",e,this._path,!1),XT("OnDisconnect.setWithPriority",n,!1);const r=new Ar;return v3(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){vi("OnDisconnect.update",this._path),kR("OnDisconnect.update",e,this._path,!1);const n=new Ar;return _3(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return qe(this._path)?null:kT(this._path)}get ref(){return new Si(this._repo,this._path)}get _queryIdentifier(){const e=V1(this._queryParams),n=TT(e);return n==="{}"?"default":n}get _queryObject(){return V1(this._queryParams)}isEqual(e){if(e=ye(e),!(e instanceof Br))return!1;const n=this._repo===e._repo,r=xT(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+_W(this._path)}}function kv(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ma(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ws){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==va)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==oo)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===Ct){if(e!=null&&!Af(e)||n!=null&&!Af(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ae(t.getIndex()instanceof DT||t.getIndex()===PT,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function xv(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Si extends Br{constructor(e,n){super(e,n,new fv,!1)}get parent(){const e=XP(this._path);return e===null?null:new Si(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Gl{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new lt(e),r=Ql(this.ref,e);return new Gl(this._node.getChild(n),r,Ct)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Gl(i,Ql(this.ref,r),Ct)))}hasChild(e){const n=new lt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function UR(t,e){return t=ye(t),t._checkNotDeleted("ref"),e!==void 0?Ql(t._root,e):t._root}function nk(t,e){t=ye(t),t._checkNotDeleted("refFromURL");const n=vE(e,t._repo.repoInfo_.nodeAdmin);xR("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Ss("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),UR(t,n.path.toString())}function Ql(t,e){return t=ye(t),je(t._path)===null?a3("child","path",e,!1):Df("child","path",e,!1),new Si(t._repo,Pt(t._path,e))}function A3(t,e){t=ye(t),vi("push",t._path),Cs("push",e,t._path,!0);const n=PR(t._repo),r=x3(n),i=Ql(t,r),s=Ql(t,r);let o;return e!=null?o=rS(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function D3(t){return vi("remove",t._path),rS(t,null)}function rS(t,e){t=ye(t),vi("set",t._path),Cs("set",e,t._path,!1);const n=new Ar;return ZT(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function P3(t,e){t=ye(t),vi("setPriority",t._path),XT("setPriority",e,!1);const n=new Ar;return ZT(t._repo,Pt(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function R3(t,e,n){if(vi("setWithPriority",t._path),Cs("setWithPriority",e,t._path,!1),XT("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new Ar;return ZT(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function O3(t,e){kR("update",e,t._path,!1);const n=new Ar;return g3(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function L3(t){t=ye(t);const e=new nS(()=>{}),n=new mp(e);return p3(t._repo,t,n).then(r=>new Gl(r,new Si(t._repo,t._path),t._queryParams.getIndex()))}class mp{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new FR("value",this,new Gl(e.snapshotNode,new Si(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new $R(this,e,n):null}matches(e){return e instanceof mp?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Nv{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new $R(this,e,n):null}createEvent(e,n){ae(e.childName!=null,"Child events should have a childName.");const r=Ql(new Si(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new FR(e.type,this,new Gl(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Nv?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function yp(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const u=n,h=(p,v)=>{yE(t._repo,t,a),u(p,v)};h.userCallback=n.userCallback,h.context=n.context,n=h}const o=new nS(n,s||void 0),a=e==="value"?new mp(o):new Nv(e,o);return w3(t._repo,t,a),()=>yE(t._repo,t,a)}function _E(t,e,n,r){return yp(t,"value",e,n,r)}function rk(t,e,n,r){return yp(t,"child_added",e,n,r)}function ik(t,e,n,r){return yp(t,"child_changed",e,n,r)}function sk(t,e,n,r){return yp(t,"child_moved",e,n,r)}function ok(t,e,n,r){return yp(t,"child_removed",e,n,r)}function ak(t,e,n){let r=null;const i=n?new nS(n):null;e==="value"?r=new mp(i):e&&(r=new Nv(e,i)),yE(t._repo,t,r)}class Gi{}class VR extends Gi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Cs("endAt",this._value,e._path,!0);const n=aE(e._queryParams,this._value,this._key);if(xv(n),Ma(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Br(e._repo,e._path,n,e._orderByCalled)}}function M3(t,e){return pp("endAt","key",e,!0),new VR(t,e)}class F3 extends Gi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Cs("endBefore",this._value,e._path,!1);const n=WW(e._queryParams,this._value,this._key);if(xv(n),Ma(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Br(e._repo,e._path,n,e._orderByCalled)}}function $3(t,e){return pp("endBefore","key",e,!0),new F3(t,e)}class BR extends Gi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Cs("startAt",this._value,e._path,!0);const n=oE(e._queryParams,this._value,this._key);if(xv(n),Ma(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Br(e._repo,e._path,n,e._orderByCalled)}}function U3(t=null,e){return pp("startAt","key",e,!0),new BR(t,e)}class V3 extends Gi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Cs("startAfter",this._value,e._path,!1);const n=zW(e._queryParams,this._value,this._key);if(xv(n),Ma(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Br(e._repo,e._path,n,e._orderByCalled)}}function B3(t,e){return pp("startAfter","key",e,!0),new V3(t,e)}class j3 extends Gi{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Br(e._repo,e._path,jW(e._queryParams,this._limit),e._orderByCalled)}}function q3(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new j3(t)}class z3 extends Gi{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Br(e._repo,e._path,qW(e._queryParams,this._limit),e._orderByCalled)}}function W3(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new z3(t)}class H3 extends Gi{constructor(e){super(),this._path=e}_apply(e){kv(e,"orderByChild");const n=new lt(this._path);if(qe(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new DT(n),i=pv(e._queryParams,r);return Ma(i),new Br(e._repo,e._path,i,!0)}}function K3(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Df("orderByChild","path",t,!1),new H3(t)}class G3 extends Gi{_apply(e){kv(e,"orderByKey");const n=pv(e._queryParams,ws);return Ma(n),new Br(e._repo,e._path,n,!0)}}function Q3(){return new G3}class Y3 extends Gi{_apply(e){kv(e,"orderByPriority");const n=pv(e._queryParams,Ct);return Ma(n),new Br(e._repo,e._path,n,!0)}}function X3(){return new Y3}class J3 extends Gi{_apply(e){kv(e,"orderByValue");const n=pv(e._queryParams,PT);return Ma(n),new Br(e._repo,e._path,n,!0)}}function Z3(){return new J3}class eK extends Gi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){if(Cs("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new VR(this._value,this._key)._apply(new BR(this._value,this._key)._apply(e))}}function tK(t,e){return pp("equalTo","key",e,!0),new eK(t,e)}function Mi(t,...e){let n=ye(t);for(const r of e)n=r._apply(n);return n}RH(Si);$H(Si);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nK="FIREBASE_DATABASE_EMULATOR_HOST",wE={};let rK=!1;function iK(t,e,n,r){t.repoInfo_=new jP(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function jR(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Ss("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),En("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=vE(s,i),a=o.repoInfo,u,h;typeof process<"u"&&process.env&&(h=process.env[nK]),h?(u=!0,s=`http://${h}?ns=${a.namespace}`,o=vE(s,i),a=o.repoInfo):u=!o.repoInfo.secure;const p=i&&u?new Tc(Tc.OWNER):new Kz(t.name,t.options,e);xR("Invalid Firebase Database URL",o),qe(o.path)||Ss("Database URL must point to the root of a Firebase Database (not including a child path).");const v=oK(a,t,p,new Hz(t.name,n));return new aK(v,t)}function sK(t,e){const n=wE[e];(!n||n[t.key]!==t)&&Ss(`Database ${e}(${t.repoInfo_}) has already been deleted.`),RR(t),delete n[t.key]}function oK(t,e,n,r){let i=wE[e.name];i||(i={},wE[e.name]=i);let s=i[t.toURLString()];return s&&Ss("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new h3(t,rK,n,r),i[t.toURLString()]=s,s}class aK{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(d3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Si(this._repo,st())),this._rootInternal}_delete(){return this._rootInternal!==null&&(sK(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ss("Cannot call "+e+" on a deleted database.")}}function qR(){Mc.IS_TRANSPORT_INITIALIZED&&nr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function lK(){qR(),Yo.forceDisallow()}function uK(){qR(),gi.forceDisallow(),Yo.forceAllow()}function cK(t,e,n,r={}){t=ye(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Ss("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ss('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Tc(Tc.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:lD(r.mockUserToken,t.app.options.projectId);s=new Tc(o)}iK(i,e,n,s)}function hK(t){t=ye(t),t._checkNotDeleted("goOffline"),RR(t._repo)}function dK(t){t=ye(t),t._checkNotDeleted("goOnline"),E3(t._repo)}function fK(t,e){AP(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pK(t){bP(Oa),io(new Zr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return jR(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Yr(T1,S1,t),Yr(T1,S1,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gK={".sv":"timestamp"};function mK(){return gK}function yK(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vK{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function _K(t,e,n){var r;if(t=ye(t),vi("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,s=new Ar,o=(u,h,p)=>{let v=null;u?s.reject(u):(v=new Gl(p,new Si(t._repo,t._path),Ct),s.resolve(new vK(h,v)))},a=_E(t,()=>{});return I3(t._repo,t._path,e,o,a,i),s.promise}Zs.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Zs.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};pK();const wK="@firebase/database-compat",EK="0.3.4";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IK=new sh("@firebase/database-compat"),zR=function(t){const e="FIREBASE WARNING: "+t;IK.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TK=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(Ur(t,e)+"must be a boolean.")},SK=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ur(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(e){this._delegate=e}cancel(e){De("OnDisconnect.cancel",0,1,arguments.length),vn("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){De("OnDisconnect.remove",0,1,arguments.length),vn("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){De("OnDisconnect.set",1,2,arguments.length),vn("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){De("OnDisconnect.setWithPriority",2,3,arguments.length),vn("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,n){if(De("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,zR("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}vn("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return De("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n){this._database=e,this._delegate=n}val(){return De("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return De("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return De("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return De("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return De("DataSnapshot.child",0,1,arguments.length),e=String(e),Df("DataSnapshot.child","path",e,!1),new ha(this._database,this._delegate.child(e))}hasChild(e){return De("DataSnapshot.hasChild",1,1,arguments.length),Df("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return De("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return De("DataSnapshot.forEach",1,1,arguments.length),vn("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new ha(this._database,n)))}hasChildren(){return De("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return De("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return De("DataSnapshot.ref",0,0,arguments.length),new Hr(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Mn{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var s;De("Query.on",2,4,arguments.length),vn("Query.on","callback",n,!1);const o=Mn.getCancelAndContextArgs_("Query.on",r,i),a=(h,p)=>{n.call(o.context,new ha(this.database,h),p)};a.userCallback=n,a.context=o.context;const u=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return _E(this._delegate,a,u),n;case"child_added":return rk(this._delegate,a,u),n;case"child_removed":return ok(this._delegate,a,u),n;case"child_changed":return ik(this._delegate,a,u),n;case"child_moved":return sk(this._delegate,a,u),n;default:throw new Error(Ur("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(De("Query.off",0,3,arguments.length),SK("Query.off",e,!0),vn("Query.off","callback",n,!0),Yb("Query.off","context",r,!0),n){const i=()=>{};i.userCallback=n,i.context=r,ak(this._delegate,e,i)}else ak(this._delegate,e)}get(){return L3(this._delegate).then(e=>new ha(this.database,e))}once(e,n,r,i){De("Query.once",1,4,arguments.length),vn("Query.once","callback",n,!0);const s=Mn.getCancelAndContextArgs_("Query.once",r,i),o=new Ar,a=(h,p)=>{const v=new ha(this.database,h);n&&n.call(s.context,v,p),o.resolve(v)};a.userCallback=n,a.context=s.context;const u=h=>{s.cancel&&s.cancel.call(s.context,h),o.reject(h)};switch(e){case"value":_E(this._delegate,a,u,{onlyOnce:!0});break;case"child_added":rk(this._delegate,a,u,{onlyOnce:!0});break;case"child_removed":ok(this._delegate,a,u,{onlyOnce:!0});break;case"child_changed":ik(this._delegate,a,u,{onlyOnce:!0});break;case"child_moved":sk(this._delegate,a,u,{onlyOnce:!0});break;default:throw new Error(Ur("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return De("Query.limitToFirst",1,1,arguments.length),new Mn(this.database,Mi(this._delegate,q3(e)))}limitToLast(e){return De("Query.limitToLast",1,1,arguments.length),new Mn(this.database,Mi(this._delegate,W3(e)))}orderByChild(e){return De("Query.orderByChild",1,1,arguments.length),new Mn(this.database,Mi(this._delegate,K3(e)))}orderByKey(){return De("Query.orderByKey",0,0,arguments.length),new Mn(this.database,Mi(this._delegate,Q3()))}orderByPriority(){return De("Query.orderByPriority",0,0,arguments.length),new Mn(this.database,Mi(this._delegate,X3()))}orderByValue(){return De("Query.orderByValue",0,0,arguments.length),new Mn(this.database,Mi(this._delegate,Z3()))}startAt(e=null,n){return De("Query.startAt",0,2,arguments.length),new Mn(this.database,Mi(this._delegate,U3(e,n)))}startAfter(e=null,n){return De("Query.startAfter",0,2,arguments.length),new Mn(this.database,Mi(this._delegate,B3(e,n)))}endAt(e=null,n){return De("Query.endAt",0,2,arguments.length),new Mn(this.database,Mi(this._delegate,M3(e,n)))}endBefore(e=null,n){return De("Query.endBefore",0,2,arguments.length),new Mn(this.database,Mi(this._delegate,$3(e,n)))}equalTo(e,n){return De("Query.equalTo",1,2,arguments.length),new Mn(this.database,Mi(this._delegate,tK(e,n)))}toString(){return De("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return De("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(De("Query.isEqual",1,1,arguments.length),!(e instanceof Mn)){const n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){const i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,vn(e,"cancel",i.cancel,!0),i.context=r,Yb(e,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(Ur(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new Hr(this.database,new Si(this._delegate._repo,this._delegate._path))}}class Hr extends Mn{constructor(e,n){super(e,new Br(n._repo,n._path,new fv,!1)),this.database=e,this._delegate=n}getKey(){return De("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return De("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new Hr(this.database,Ql(this._delegate,e))}getParent(){De("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Hr(this.database,e):null}getRoot(){return De("Reference.root",0,0,arguments.length),new Hr(this.database,this._delegate.root)}set(e,n){De("Reference.set",1,2,arguments.length),vn("Reference.set","onComplete",n,!0);const r=rS(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(De("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,zR("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}vi("Reference.update",this._delegate._path),vn("Reference.update","onComplete",n,!0);const r=O3(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){De("Reference.setWithPriority",2,3,arguments.length),vn("Reference.setWithPriority","onComplete",r,!0);const i=R3(this._delegate,e,n);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){De("Reference.remove",0,1,arguments.length),vn("Reference.remove","onComplete",e,!0);const n=D3(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){De("Reference.transaction",1,3,arguments.length),vn("Reference.transaction","transactionUpdate",e,!1),vn("Reference.transaction","onComplete",n,!0),TK("Reference.transaction","applyLocally",r,!0);const i=_K(this._delegate,e,{applyLocally:r}).then(s=>new bK(s.committed,new ha(this.database,s.snapshot)));return n&&i.then(s=>n(null,s.committed,s.snapshot),s=>n(s,!1,null)),i}setPriority(e,n){De("Reference.setPriority",1,2,arguments.length),vn("Reference.setPriority","onComplete",n,!0);const r=P3(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){De("Reference.push",0,2,arguments.length),vn("Reference.push","onComplete",n,!0);const r=A3(this._delegate,e),i=r.then(o=>new Hr(this.database,o));n&&i.then(()=>n(null),o=>n(o));const s=new Hr(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return vi("Reference.onDisconnect",this._delegate._path),new CK(new N3(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:lK,forceLongPolling:uK}}useEmulator(e,n,r={}){cK(this._delegate,e,n,r)}ref(e){if(De("database.ref",0,1,arguments.length),e instanceof Hr){const n=nk(this._delegate,e.toString());return new Hr(this,n)}else{const n=UR(this._delegate,e);return new Hr(this,n)}}refFromURL(e){De("database.refFromURL",1,1,arguments.length);const r=nk(this._delegate,e);return new Hr(this,r)}goOffline(){return De("database.goOffline",0,0,arguments.length),hK(this._delegate)}goOnline(){return De("database.goOnline",0,0,arguments.length),dK(this._delegate)}}Pf.ServerValue={TIMESTAMP:mK(),increment:t=>yK(t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kK({app:t,url:e,version:n,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){bP(n);const o=new pD("auth-internal",new gD("database-standalone"));return o.setComponent(new Zr("auth-internal",()=>r,"PRIVATE")),{instance:new Pf(jR(t,o,void 0,e,s),t),namespace:i}}var xK=Object.freeze({__proto__:null,initStandalone:kK});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NK=Pf.ServerValue;function AK(t){t.INTERNAL.registerComponent(new Zr("database-compat",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Pf(i,r)},"PUBLIC").setServiceProps({Reference:Hr,Query:Mn,Database:Pf,DataSnapshot:ha,enableLogging:fK,INTERNAL:xK,ServerValue:NK}).setMultipleInstances(!0)),t.registerVersion(wK,EK)}AK(de);var DK=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ie,iS=iS||{},Me=DK||self;function gy(){}function Av(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function vp(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function PK(t){return Object.prototype.hasOwnProperty.call(t,bw)&&t[bw]||(t[bw]=++RK)}var bw="closure_uid_"+(1e9*Math.random()>>>0),RK=0;function OK(t,e,n){return t.call.apply(t.bind,arguments)}function LK(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function rr(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?rr=OK:rr=LK,rr.apply(null,arguments)}function Ug(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Hn(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Fa(){this.s=this.s,this.o=this.o}var MK=0;Fa.prototype.s=!1;Fa.prototype.na=function(){!this.s&&(this.s=!0,this.M(),MK!=0)&&PK(this)};Fa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const WR=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function sS(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function lk(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Av(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function ir(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ir.prototype.h=function(){this.defaultPrevented=!0};var FK=function(){if(!Me.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Me.addEventListener("test",gy,e),Me.removeEventListener("test",gy,e)}catch{}return t}();function my(t){return/^[\s\xa0]*$/.test(t)}var uk=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function kw(t,e){return t<e?-1:t>e?1:0}function Dv(){var t=Me.navigator;return t&&(t=t.userAgent)?t:""}function ps(t){return Dv().indexOf(t)!=-1}function oS(t){return oS[" "](t),t}oS[" "]=gy;function $K(t){var e=BK;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var UK=ps("Opera"),Bc=ps("Trident")||ps("MSIE"),HR=ps("Edge"),EE=HR||Bc,KR=ps("Gecko")&&!(Dv().toLowerCase().indexOf("webkit")!=-1&&!ps("Edge"))&&!(ps("Trident")||ps("MSIE"))&&!ps("Edge"),VK=Dv().toLowerCase().indexOf("webkit")!=-1&&!ps("Edge");function GR(){var t=Me.document;return t?t.documentMode:void 0}var yy;e:{var xw="",Nw=function(){var t=Dv();if(KR)return/rv:([^\);]+)(\)|;)/.exec(t);if(HR)return/Edge\/([\d\.]+)/.exec(t);if(Bc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(VK)return/WebKit\/(\S+)/.exec(t);if(UK)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Nw&&(xw=Nw?Nw[1]:""),Bc){var Aw=GR();if(Aw!=null&&Aw>parseFloat(xw)){yy=String(Aw);break e}}yy=xw}var BK={};function jK(){return $K(function(){let t=0;const e=uk(String(yy)).split("."),n=uk("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=kw(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||kw(i[2].length==0,s[2].length==0)||kw(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var IE;if(Me.document&&Bc){var ck=GR();IE=ck||parseInt(yy,10)||void 0}else IE=void 0;var qK=IE;function Rf(t,e){if(ir.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(KR){e:{try{oS(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:zK[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Rf.X.h.call(this)}}Hn(Rf,ir);var zK={2:"touch",3:"pen",4:"mouse"};Rf.prototype.h=function(){Rf.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var _p="closure_listenable_"+(1e6*Math.random()|0),WK=0;function HK(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++WK,this.ba=this.ea=!1}function Pv(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function aS(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function QR(t){const e={};for(const n in t)e[n]=t[n];return e}const hk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function YR(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<hk.length;s++)n=hk[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Rv(t){this.src=t,this.g={},this.h=0}Rv.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=SE(t,e,r,i);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new HK(e,this.src,s,!!r,i),e.ea=n,t.push(e)),e};function TE(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=WR(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Pv(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function SE(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ba&&s.listener==e&&s.capture==!!n&&s.ha==r)return i}return-1}var lS="closure_lm_"+(1e6*Math.random()|0),Dw={};function XR(t,e,n,r,i){if(r&&r.once)return ZR(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)XR(t,e[s],n,r,i);return null}return n=hS(n),t&&t[_p]?t.N(e,n,vp(r)?!!r.capture:!!r,i):JR(t,e,n,!1,r,i)}function JR(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=vp(i)?!!i.capture:!!i,a=cS(t);if(a||(t[lS]=a=new Rv(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=KK(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)FK||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(tO(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function KK(){function t(n){return e.call(t.src,t.listener,n)}const e=GK;return t}function ZR(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ZR(t,e[s],n,r,i);return null}return n=hS(n),t&&t[_p]?t.O(e,n,vp(r)?!!r.capture:!!r,i):JR(t,e,n,!0,r,i)}function eO(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)eO(t,e[s],n,r,i);else r=vp(r)?!!r.capture:!!r,n=hS(n),t&&t[_p]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=SE(s,n,r,i),-1<n&&(Pv(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=cS(t))&&(e=t.g[e.toString()],t=-1,e&&(t=SE(e,n,r,i)),(n=-1<t?e[t]:null)&&uS(n))}function uS(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[_p])TE(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(tO(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cS(e))?(TE(n,t),n.h==0&&(n.src=null,e[lS]=null)):Pv(t)}}}function tO(t){return t in Dw?Dw[t]:Dw[t]="on"+t}function GK(t,e){if(t.ba)t=!0;else{e=new Rf(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&uS(t),t=n.call(r,e)}return t}function cS(t){return t=t[lS],t instanceof Rv?t:null}var Pw="__closure_events_fn_"+(1e9*Math.random()>>>0);function hS(t){return typeof t=="function"?t:(t[Pw]||(t[Pw]=function(e){return t.handleEvent(e)}),t[Pw])}function kn(){Fa.call(this),this.i=new Rv(this),this.P=this,this.I=null}Hn(kn,Fa);kn.prototype[_p]=!0;kn.prototype.removeEventListener=function(t,e,n,r){eO(this,t,e,n,r)};function jn(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new ir(e,t);else if(e instanceof ir)e.target=e.target||t;else{var i=e;e=new ir(r,t),YR(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Vg(o,r,!0,e)&&i}if(o=e.g=t,i=Vg(o,r,!0,e)&&i,i=Vg(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Vg(o,r,!1,e)&&i}kn.prototype.M=function(){if(kn.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Pv(n[r]);delete t.g[e],t.h--}}this.I=null};kn.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};kn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Vg(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,u=o.ha||o.src;o.ea&&TE(t.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var dS=Me.JSON.stringify;function QK(){var t=iO;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class YK{constructor(){this.h=this.g=null}add(e,n){const r=nO.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var nO=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new XK,t=>t.reset());class XK{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function JK(t){Me.setTimeout(()=>{throw t},0)}function rO(t,e){CE||ZK(),bE||(CE(),bE=!0),iO.add(t,e)}var CE;function ZK(){var t=Me.Promise.resolve(void 0);CE=function(){t.then(eG)}}var bE=!1,iO=new YK;function eG(){for(var t;t=QK();){try{t.h.call(t.g)}catch(n){JK(n)}var e=nO;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}bE=!1}function Ov(t,e){kn.call(this),this.h=t||1,this.g=e||Me,this.j=rr(this.lb,this),this.l=Date.now()}Hn(Ov,kn);Ie=Ov.prototype;Ie.ca=!1;Ie.R=null;Ie.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),jn(this,"tick"),this.ca&&(fS(this),this.start()))}};Ie.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function fS(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}Ie.M=function(){Ov.X.M.call(this),fS(this),delete this.g};function pS(t,e,n){if(typeof t=="function")n&&(t=rr(t,n));else if(t&&typeof t.handleEvent=="function")t=rr(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Me.setTimeout(t,e||0)}function sO(t){t.g=pS(()=>{t.g=null,t.i&&(t.i=!1,sO(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class tG extends Fa{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:sO(this)}M(){super.M(),this.g&&(Me.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Of(t){Fa.call(this),this.h=t,this.g={}}Hn(Of,Fa);var dk=[];function oO(t,e,n,r){Array.isArray(n)||(n&&(dk[0]=n.toString()),n=dk);for(var i=0;i<n.length;i++){var s=XR(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function aO(t){aS(t.g,function(e,n){this.g.hasOwnProperty(n)&&uS(e)},t),t.g={}}Of.prototype.M=function(){Of.X.M.call(this),aO(this)};Of.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Lv(){this.g=!0}Lv.prototype.Aa=function(){this.g=!1};function nG(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var h=a[u].split("=");if(1<h.length){var p=h[0];h=h[1];var v=p.split("_");o=2<=v.length&&v[1]=="type"?o+(p+"="+h+"&"):o+(p+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function rG(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function dc(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+sG(t,n)+(r?" "+r:"")})}function iG(t,e){t.info(function(){return"TIMEOUT: "+e})}Lv.prototype.info=function(){};function sG(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return dS(n)}catch{return e}}var pu={},fk=null;function Mv(){return fk=fk||new kn}pu.Pa="serverreachability";function lO(t){ir.call(this,pu.Pa,t)}Hn(lO,ir);function Lf(t){const e=Mv();jn(e,new lO(e))}pu.STAT_EVENT="statevent";function uO(t,e){ir.call(this,pu.STAT_EVENT,t),this.stat=e}Hn(uO,ir);function mr(t){const e=Mv();jn(e,new uO(e,t))}pu.Qa="timingevent";function cO(t,e){ir.call(this,pu.Qa,t),this.size=e}Hn(cO,ir);function wp(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Me.setTimeout(function(){t()},e)}var Fv={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},hO={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function gS(){}gS.prototype.h=null;function pk(t){return t.h||(t.h=t.i())}function dO(){}var Ep={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function mS(){ir.call(this,"d")}Hn(mS,ir);function yS(){ir.call(this,"c")}Hn(yS,ir);var kE;function $v(){}Hn($v,gS);$v.prototype.g=function(){return new XMLHttpRequest};$v.prototype.i=function(){return{}};kE=new $v;function Ip(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new Of(this),this.O=oG,t=EE?125:void 0,this.T=new Ov(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new fO}function fO(){this.i=null,this.g="",this.h=!1}var oG=45e3,xE={},vy={};Ie=Ip.prototype;Ie.setTimeout=function(t){this.O=t};function NE(t,e,n){t.K=1,t.v=Vv(ao(e)),t.s=n,t.P=!0,pO(t,null)}function pO(t,e){t.F=Date.now(),Tp(t),t.A=ao(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),IO(n.i,"t",r),t.C=0,n=t.l.H,t.h=new fO,t.g=qO(t.l,n?e:null,!t.s),0<t.N&&(t.L=new tG(rr(t.La,t,t.g),t.N)),oO(t.S,t.g,"readystatechange",t.ib),e=t.H?QR(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Lf(),nG(t.j,t.u,t.A,t.m,t.U,t.s)}Ie.ib=function(t){t=t.target;const e=this.L;e&&Qs(t)==3?e.l():this.La(t)};Ie.La=function(t){try{if(t==this.g)e:{const p=Qs(this.g);var e=this.g.Ea();const v=this.g.aa();if(!(3>p)&&(p!=3||EE||this.g&&(this.h.h||this.g.fa()||vk(this.g)))){this.I||p!=4||e==7||(e==8||0>=v?Lf(3):Lf(2)),Uv(this);var n=this.g.aa();this.Y=n;t:if(gO(this)){var r=vk(this.g);t="";var i=r.length,s=Qs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cl(this),qd(this);var o="";break t}this.h.i=new Me.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,rG(this.j,this.u,this.A,this.m,this.U,p,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!my(a)){var h=a;break t}}h=null}if(n=h)dc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,AE(this,n);else{this.i=!1,this.o=3,mr(12),Cl(this),qd(this);break e}}this.P?(mO(this,p,o),EE&&this.i&&p==3&&(oO(this.S,this.T,"tick",this.hb),this.T.start())):(dc(this.j,this.m,o,null),AE(this,o)),p==4&&Cl(this),this.i&&!this.I&&(p==4?UO(this.l,this):(this.i=!1,Tp(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,mr(12)):(this.o=0,mr(13)),Cl(this),qd(this)}}}catch{}finally{}};function gO(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function mO(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=aG(t,n),i==vy){e==4&&(t.o=4,mr(14),r=!1),dc(t.j,t.m,null,"[Incomplete Response]");break}else if(i==xE){t.o=4,mr(15),dc(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else dc(t.j,t.m,i,null),AE(t,i);gO(t)&&i!=vy&&i!=xE&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,mr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),SS(e),e.K=!0,mr(11))):(dc(t.j,t.m,n,"[Invalid Chunked Response]"),Cl(t),qd(t))}Ie.hb=function(){if(this.g){var t=Qs(this.g),e=this.g.fa();this.C<e.length&&(Uv(this),mO(this,t,e),this.i&&t!=4&&Tp(this))}};function aG(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?vy:(n=Number(e.substring(n,r)),isNaN(n)?xE:(r+=1,r+n>e.length?vy:(e=e.substr(r,n),t.C=r+n,e)))}Ie.cancel=function(){this.I=!0,Cl(this)};function Tp(t){t.V=Date.now()+t.O,yO(t,t.O)}function yO(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=wp(rr(t.gb,t),e)}function Uv(t){t.B&&(Me.clearTimeout(t.B),t.B=null)}Ie.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(iG(this.j,this.A),this.K!=2&&(Lf(),mr(17)),Cl(this),this.o=2,qd(this)):yO(this,this.V-t)};function qd(t){t.l.G==0||t.I||UO(t.l,t)}function Cl(t){Uv(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,fS(t.T),aO(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function AE(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||DE(n.h,t))){if(!t.J&&DE(n.h,t)&&n.G==3){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Ey(n),qv(n);else break e;TS(n),mr(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&n.A==0&&!n.v&&(n.v=wp(rr(n.cb,n),6e3));if(1>=CO(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else bl(n,11)}else if((t.J||n.g==t)&&Ey(n),!my(e))for(i=n.Fa.g.parse(e),e=0;e<i.length;e++){let h=i[e];if(n.T=h[0],h=h[1],n.G==2)if(h[0]=="c"){n.I=h[1],n.ka=h[2];const p=h[3];p!=null&&(n.ma=p,n.j.info("VER="+n.ma));const v=h[4];v!=null&&(n.Ca=v,n.j.info("SVER="+n.Ca));const w=h[5];w!=null&&typeof w=="number"&&0<w&&(r=1.5*w,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const b=t.g;if(b){const k=b.g?b.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(k){var s=r.h;s.g||k.indexOf("spdy")==-1&&k.indexOf("quic")==-1&&k.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(vS(s,s.h),s.h=null))}if(r.D){const R=b.g?b.g.getResponseHeader("X-HTTP-Session-Id"):null;R&&(r.za=R,Dt(r.F,r.D,R))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),r=n;var o=t;if(r.sa=jO(r,r.H?r.ka:null,r.V),o.J){bO(r.h,o);var a=o,u=r.J;u&&a.setTimeout(u),a.B&&(Uv(a),Tp(a)),r.g=o}else FO(r);0<n.i.length&&zv(n)}else h[0]!="stop"&&h[0]!="close"||bl(n,7);else n.G==3&&(h[0]=="stop"||h[0]=="close"?h[0]=="stop"?bl(n,7):IS(n):h[0]!="noop"&&n.l&&n.l.wa(h),n.A=0)}}Lf(4)}catch{}}function lG(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Av(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function uG(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Av(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function vO(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Av(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=uG(t),r=lG(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var _O=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cG(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ll(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ll){this.h=e!==void 0?e:t.h,_y(this,t.j),this.s=t.s,this.g=t.g,wy(this,t.m),this.l=t.l,e=t.i;var n=new Mf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),gk(this,n),this.o=t.o}else t&&(n=String(t).match(_O))?(this.h=!!e,_y(this,n[1]||"",!0),this.s=Td(n[2]||""),this.g=Td(n[3]||"",!0),wy(this,n[4]),this.l=Td(n[5]||"",!0),gk(this,n[6]||"",!0),this.o=Td(n[7]||"")):(this.h=!!e,this.i=new Mf(null,this.h))}Ll.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Sd(e,mk,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Sd(e,mk,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Sd(n,n.charAt(0)=="/"?fG:dG,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Sd(n,gG)),t.join("")};function ao(t){return new Ll(t)}function _y(t,e,n){t.j=n?Td(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function wy(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function gk(t,e,n){e instanceof Mf?(t.i=e,mG(t.i,t.h)):(n||(e=Sd(e,pG)),t.i=new Mf(e,t.h))}function Dt(t,e,n){t.i.set(e,n)}function Vv(t){return Dt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Td(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Sd(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,hG),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function hG(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var mk=/[#\/\?@]/g,dG=/[#\?:]/g,fG=/[#\?]/g,pG=/[#\?@]/g,gG=/#/g;function Mf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function $a(t){t.g||(t.g=new Map,t.h=0,t.i&&cG(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}Ie=Mf.prototype;Ie.add=function(t,e){$a(this),this.i=null,t=ph(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function wO(t,e){$a(t),e=ph(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function EO(t,e){return $a(t),e=ph(t,e),t.g.has(e)}Ie.forEach=function(t,e){$a(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};Ie.oa=function(){$a(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};Ie.W=function(t){$a(this);let e=[];if(typeof t=="string")EO(this,t)&&(e=e.concat(this.g.get(ph(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};Ie.set=function(t,e){return $a(this),this.i=null,t=ph(this,t),EO(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Ie.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function IO(t,e,n){wO(t,e),0<n.length&&(t.i=null,t.g.set(ph(t,e),sS(n)),t.h+=n.length)}Ie.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function ph(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function mG(t,e){e&&!t.j&&($a(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(wO(this,r),IO(this,i,n))},t)),t.j=e}var yG=class{constructor(t,e){this.h=t,this.g=e}};function TO(t){this.l=t||vG,Me.PerformanceNavigationTiming?(t=Me.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Me.g&&Me.g.Ga&&Me.g.Ga()&&Me.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vG=10;function SO(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function CO(t){return t.h?1:t.g?t.g.size:0}function DE(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function vS(t,e){t.g?t.g.add(e):t.h=e}function bO(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}TO.prototype.cancel=function(){if(this.i=kO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function kO(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return sS(t.i)}function _S(){}_S.prototype.stringify=function(t){return Me.JSON.stringify(t,void 0)};_S.prototype.parse=function(t){return Me.JSON.parse(t,void 0)};function _G(){this.g=new _S}function wG(t,e,n){const r=n||"";try{vO(t,function(i,s){let o=i;vp(i)&&(o=dS(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function EG(t,e){const n=new Lv;if(Me.Image){const r=new Image;r.onload=Ug(Bg,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ug(Bg,n,r,"TestLoadImage: error",!1,e),r.onabort=Ug(Bg,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ug(Bg,n,r,"TestLoadImage: timeout",!1,e),Me.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Bg(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Sp(t){this.l=t.ac||null,this.j=t.jb||!1}Hn(Sp,gS);Sp.prototype.g=function(){return new Bv(this.l,this.j)};Sp.prototype.i=function(t){return function(){return t}}({});function Bv(t,e){kn.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=wS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Hn(Bv,kn);var wS=0;Ie=Bv.prototype;Ie.open=function(t,e){if(this.readyState!=wS)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ff(this)};Ie.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Me).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};Ie.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cp(this)),this.readyState=wS};Ie.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ff(this)),this.g&&(this.readyState=3,Ff(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Me.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xO(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function xO(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}Ie.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Cp(this):Ff(this),this.readyState==3&&xO(this)}};Ie.Va=function(t){this.g&&(this.response=this.responseText=t,Cp(this))};Ie.Ua=function(t){this.g&&(this.response=t,Cp(this))};Ie.ga=function(){this.g&&Cp(this)};function Cp(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ff(t)}Ie.setRequestHeader=function(t,e){this.v.append(t,e)};Ie.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Ie.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ff(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Bv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var IG=Me.JSON.parse;function Wt(t){kn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=NO,this.K=this.L=!1}Hn(Wt,kn);var NO="",TG=/^https?$/i,SG=["POST","PUT"];Ie=Wt.prototype;Ie.Ka=function(t){this.L=t};Ie.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():kE.g(),this.C=this.u?pk(this.u):pk(kE),this.g.onreadystatechange=rr(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){yk(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Me.FormData&&t instanceof Me.FormData,!(0<=WR(SG,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{PO(this),0<this.B&&((this.K=CG(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rr(this.qa,this)):this.A=pS(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){yk(this,s)}};function CG(t){return Bc&&jK()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}Ie.qa=function(){typeof iS<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jn(this,"timeout"),this.abort(8))};function yk(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,AO(t),jv(t)}function AO(t){t.D||(t.D=!0,jn(t,"complete"),jn(t,"error"))}Ie.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,jn(this,"complete"),jn(this,"abort"),jv(this))};Ie.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jv(this,!0)),Wt.X.M.call(this)};Ie.Ha=function(){this.s||(this.F||this.v||this.l?DO(this):this.fb())};Ie.fb=function(){DO(this)};function DO(t){if(t.h&&typeof iS<"u"&&(!t.C[1]||Qs(t)!=4||t.aa()!=2)){if(t.v&&Qs(t)==4)pS(t.Ha,0,t);else if(jn(t,"readystatechange"),Qs(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.H).match(_O)[1]||null;if(!i&&Me.self&&Me.self.location){var s=Me.self.location.protocol;i=s.substr(0,s.length-1)}r=!TG.test(i?i.toLowerCase():"")}n=r}if(n)jn(t,"complete"),jn(t,"success");else{t.m=6;try{var o=2<Qs(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",AO(t)}}finally{jv(t)}}}}function jv(t,e){if(t.g){PO(t);const n=t.g,r=t.C[0]?gy:null;t.g=null,t.C=null,e||jn(t,"ready");try{n.onreadystatechange=r}catch{}}}function PO(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Me.clearTimeout(t.A),t.A=null)}function Qs(t){return t.g?t.g.readyState:0}Ie.aa=function(){try{return 2<Qs(this)?this.g.status:-1}catch{return-1}};Ie.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};Ie.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),IG(e)}};function vk(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case NO:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}Ie.Ea=function(){return this.m};Ie.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function RO(t){let e="";return aS(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function ES(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=RO(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Dt(t,e,n))}function cd(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function OO(t){this.Ca=0,this.i=[],this.j=new Lv,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=cd("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=cd("baseRetryDelayMs",5e3,t),this.bb=cd("retryDelaySeedMs",1e4,t),this.$a=cd("forwardChannelMaxRetries",2,t),this.ta=cd("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new TO(t&&t.concurrentRequestLimit),this.Fa=new _G,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}Ie=OO.prototype;Ie.ma=8;Ie.G=1;function IS(t){if(LO(t),t.G==3){var e=t.U++,n=ao(t.F);Dt(n,"SID",t.I),Dt(n,"RID",e),Dt(n,"TYPE","terminate"),bp(t,n),e=new Ip(t,t.j,e,void 0),e.K=2,e.v=Vv(ao(n)),n=!1,Me.navigator&&Me.navigator.sendBeacon&&(n=Me.navigator.sendBeacon(e.v.toString(),"")),!n&&Me.Image&&(new Image().src=e.v,n=!0),n||(e.g=qO(e.l,null),e.g.da(e.v)),e.F=Date.now(),Tp(e)}BO(t)}function qv(t){t.g&&(SS(t),t.g.cancel(),t.g=null)}function LO(t){qv(t),t.u&&(Me.clearTimeout(t.u),t.u=null),Ey(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&Me.clearTimeout(t.m),t.m=null)}function zv(t){SO(t.h)||t.m||(t.m=!0,rO(t.Ja,t),t.C=0)}function bG(t,e){return CO(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=wp(rr(t.Ja,t,e),VO(t,t.C)),t.C++,!0)}Ie.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new Ip(this,this.j,t,void 0);let s=this.s;if(this.S&&(s?(s=QR(s),YR(s,this.S)):s=this.S),this.o!==null||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=MO(this,i,e),n=ao(this.F),Dt(n,"RID",t),Dt(n,"CVER",22),this.D&&Dt(n,"X-HTTP-Session-Id",this.D),bp(this,n),s&&(this.N?e="headers="+encodeURIComponent(String(RO(s)))+"&"+e:this.o&&ES(n,this.o,s)),vS(this.h,i),this.Ya&&Dt(n,"TYPE","init"),this.O?(Dt(n,"$req",e),Dt(n,"SID","null"),i.Z=!0,NE(i,n,null)):NE(i,n,e),this.G=2}}else this.G==3&&(t?_k(this,t):this.i.length==0||SO(this.h)||_k(this))};function _k(t,e){var n;e?n=e.m:n=t.U++;const r=ao(t.F);Dt(r,"SID",t.I),Dt(r,"RID",n),Dt(r,"AID",t.T),bp(t,r),t.o&&t.s&&ES(r,t.o,t.s),n=new Ip(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=MO(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),vS(t.h,n),NE(n,r,e)}function bp(t,e){t.ia&&aS(t.ia,function(n,r){Dt(e,r,n)}),t.l&&vO({},function(n,r){Dt(e,r,n)})}function MO(t,e,n){n=Math.min(t.i.length,n);var r=t.l?rr(t.l.Ra,t.l,t):null;e:{var i=t.i;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let h=i[u].h;const p=i[u].g;if(h-=s,0>h)s=Math.max(0,i[u].h-100),a=!1;else try{wG(p,o,"req"+h+"_")}catch{r&&r(p)}}if(a){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function FO(t){t.g||t.u||(t.Z=1,rO(t.Ia,t),t.A=0)}function TS(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=wp(rr(t.Ia,t),VO(t,t.A)),t.A++,!0)}Ie.Ia=function(){if(this.u=null,$O(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=wp(rr(this.eb,this),t)}};Ie.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,mr(10),qv(this),$O(this))};function SS(t){t.B!=null&&(Me.clearTimeout(t.B),t.B=null)}function $O(t){t.g=new Ip(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=ao(t.sa);Dt(e,"RID","rpc"),Dt(e,"SID",t.I),Dt(e,"CI",t.L?"0":"1"),Dt(e,"AID",t.T),Dt(e,"TYPE","xmlhttp"),bp(t,e),t.o&&t.s&&ES(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Vv(ao(e)),n.s=null,n.P=!0,pO(n,t)}Ie.cb=function(){this.v!=null&&(this.v=null,qv(this),TS(this),mr(19))};function Ey(t){t.v!=null&&(Me.clearTimeout(t.v),t.v=null)}function UO(t,e){var n=null;if(t.g==e){Ey(t),SS(t),t.g=null;var r=2}else if(DE(t.h,e))n=e.D,bO(t.h,e),r=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=Mv(),jn(r,new cO(r,n)),zv(t)}else FO(t);else if(i=e.o,i==3||i==0&&0<t.pa||!(r==1&&bG(t,e)||r==2&&TS(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:bl(t,5);break;case 4:bl(t,10);break;case 3:bl(t,6);break;default:bl(t,2)}}}function VO(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function bl(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=rr(t.kb,t);n||(n=new Ll("//www.google.com/images/cleardot.gif"),Me.location&&Me.location.protocol=="http"||_y(n,"https"),Vv(n)),EG(n.toString(),r)}else mr(2);t.G=0,t.l&&t.l.va(e),BO(t),LO(t)}Ie.kb=function(t){t?(this.j.info("Successfully pinged google.com"),mr(2)):(this.j.info("Failed to ping google.com"),mr(1))};function BO(t){if(t.G=0,t.la=[],t.l){const e=kO(t.h);(e.length!=0||t.i.length!=0)&&(lk(t.la,e),lk(t.la,t.i),t.h.i.length=0,sS(t.i),t.i.length=0),t.l.ua()}}function jO(t,e,n){var r=n instanceof Ll?ao(n):new Ll(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),wy(r,r.m);else{var i=Me.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ll(null,void 0);r&&_y(s,r),e&&(s.g=e),i&&wy(s,i),n&&(s.l=n),r=s}return n=t.D,e=t.za,n&&e&&Dt(r,n,e),Dt(r,"VER",t.ma),bp(t,r),r}function qO(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new Wt(new Sp({jb:!0})):new Wt(t.ra),e.Ka(t.H),e}function zO(){}Ie=zO.prototype;Ie.xa=function(){};Ie.wa=function(){};Ie.va=function(){};Ie.ua=function(){};Ie.Ra=function(){};function Iy(){if(Bc&&!(10<=Number(qK)))throw Error("Environmental error: no available transport.")}Iy.prototype.g=function(t,e){return new ti(t,e)};function ti(t,e){kn.call(this),this.g=new OO(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!my(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!my(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new gh(this)}Hn(ti,kn);ti.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;mr(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=jO(t,null,t.V),zv(t)};ti.prototype.close=function(){IS(this.g)};ti.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=dS(t),t=n);e.i.push(new yG(e.ab++,t)),e.G==3&&zv(e)};ti.prototype.M=function(){this.g.l=null,delete this.j,IS(this.g),delete this.g,ti.X.M.call(this)};function WO(t){mS.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Hn(WO,mS);function HO(){yS.call(this),this.status=1}Hn(HO,yS);function gh(t){this.g=t}Hn(gh,zO);gh.prototype.xa=function(){jn(this.g,"a")};gh.prototype.wa=function(t){jn(this.g,new WO(t))};gh.prototype.va=function(t){jn(this.g,new HO)};gh.prototype.ua=function(){jn(this.g,"b")};Iy.prototype.createWebChannel=Iy.prototype.g;ti.prototype.send=ti.prototype.u;ti.prototype.open=ti.prototype.m;ti.prototype.close=ti.prototype.close;Fv.NO_ERROR=0;Fv.TIMEOUT=8;Fv.HTTP_ERROR=6;hO.COMPLETE="complete";dO.EventType=Ep;Ep.OPEN="a";Ep.CLOSE="b";Ep.ERROR="c";Ep.MESSAGE="d";kn.prototype.listen=kn.prototype.N;Wt.prototype.listenOnce=Wt.prototype.O;Wt.prototype.getLastError=Wt.prototype.Oa;Wt.prototype.getLastErrorCode=Wt.prototype.Ea;Wt.prototype.getStatus=Wt.prototype.aa;Wt.prototype.getResponseJson=Wt.prototype.Sa;Wt.prototype.getResponseText=Wt.prototype.fa;Wt.prototype.send=Wt.prototype.da;Wt.prototype.setWithCredentials=Wt.prototype.Ka;var kG=function(){return new Iy},xG=function(){return Mv()},Rw=Fv,NG=hO,AG=pu,wk={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},DG=Sp,jg=dO,PG=Wt;const Ek="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mh="9.18.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new sh("@firebase/firestore");function PE(){return Ta.logLevel}function RG(t){Ta.setLogLevel(t)}function te(t,...e){if(Ta.logLevel<=Ze.DEBUG){const n=e.map(CS);Ta.debug(`Firestore (${mh}): ${t}`,...n)}}function Xt(t,...e){if(Ta.logLevel<=Ze.ERROR){const n=e.map(CS);Ta.error(`Firestore (${mh}): ${t}`,...n)}}function jc(t,...e){if(Ta.logLevel<=Ze.WARN){const n=e.map(CS);Ta.warn(`Firestore (${mh}): ${t}`,...n)}}function CS(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t="Unexpected state"){const e=`FIRESTORE (${mh}) INTERNAL ASSERTION FAILED: `+t;throw Xt(e),new Error(e)}function Te(t,e){t||me()}function OG(t,e){t||me()}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends vr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wn.UNAUTHENTICATED))}shutdown(){}}class MG{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class FG{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Tn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new KO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new wn(e)}}class $G{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Te(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class UG{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i}getToken(){return Promise.resolve(new $G(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class VG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BG{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=s=>{s.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string"),this.A=n.token,new VG(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jG(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=jG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ue(t,e){return t<e?-1:t>e?1:0}function qc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function QO(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ot(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Ot(0,0))}static max(){return new Ce(new Ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n,r){n===void 0?n=0:n>e.length&&me(),r===void 0?r=e.length-n:r>e.length-n&&me(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $f.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $f?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class et extends $f{construct(e,n,r){return new et(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new et(n)}static emptyPath(){return new et([])}}const qG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends $f{construct(e,n,r){return new Jt(e,n,r)}static isValidIdentifier(e){return qG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Jt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ee(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ee(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ee(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ee(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jt(n)}static emptyPath(){return new Jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(et.fromString(e))}static fromName(e){return new ce(et.fromString(e).popFirst(5))}static empty(){return new ce(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function RE(t){return t.fields.find(e=>e.kind===2)}function pl(t){return t.fields.filter(e=>e.kind!==2)}YO.UNKNOWN_ID=-1;class zG{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ty{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ty(0,ni.min())}}function XO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(r===1e9?new Ot(n+1,0):new Ot(n,r));return new ni(i,ce.empty(),e)}function JO(t){return new ni(t.readTime,t.key,-1)}class ni{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ni(Ce.min(),ce.empty(),-1)}static max(){return new ni(Ce.max(),ce.empty(),-1)}}function bS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==ZO)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(i=>i?q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++a,a===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new Tn,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new zd(e,n.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=kS(r.target.error);this.P.reject(new zd(e,i))}}static open(e,n,r,i){try{return new Wv(n,e.transaction(i,r))}catch(s){throw new zd(n,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(te("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new HG(n)}}class Bi{constructor(e,n,r){this.name=e,this.version=n,this.S=r,Bi.D(Vt())===12.2&&Xt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return te("SimpleDb","Removing database:",e),gl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!gf())return!1;if(Bi.N())return!0;const e=Vt(),n=Bi.D(e),r=0<n&&n<10,i=Bi.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.$)==="YES"}static M(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(te("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new zd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new ee(H.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ee(H.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new zd(e,o))},i.onupgradeneeded=s=>{te("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.S.F(o,i.transaction,s.oldVersion,this.version).next(()=>{te("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=Wv.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(h=>(a.V(),h)).catch(h=>(a.abort(h),q.reject(h))).toPromise();return u.catch(()=>{}),await a.v,u}catch(a){const u=a,h=u.name!=="FirebaseError"&&o<3;if(te("SimpleDb","Transaction failed with error:",u.message,"Retrying:",h),this.close(),!h)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}class WG{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return gl(this.q.delete())}}class zd extends ee{constructor(e,n){super(H.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Va(t){return t.name==="IndexedDbTransactionError"}class HG{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(te("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(te("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),gl(r)}add(e){return te("SimpleDb","ADD",this.store.name,e,e),gl(this.store.add(e))}get(e){return gl(this.store.get(e)).next(n=>(n===void 0&&(n=null),te("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return te("SimpleDb","DELETE",this.store.name,e),gl(this.store.delete(e))}count(){return te("SimpleDb","COUNT",this.store.name),gl(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.H(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new q((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}J(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new q((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Y(e,n){te("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Z=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}X(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}tt(e){const n=this.cursor({});return new q((r,i)=>{n.onerror=s=>{const o=kS(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new q((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new WG(a),h=n(a.primaryKey,a.value,u);if(h instanceof q){const p=h.catch(v=>(u.done(),q.reject(v)));r.push(p)}u.isDone?i():u.G===null?a.continue():a.continue(u.G)}}).next(()=>q.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function gl(t){return new q((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=kS(r.target.error);n(i)}})}let Ik=!1;function kS(t){const e=Bi.D(Vt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ik||(Ik=!0,setTimeout(()=>{throw r},0)),r}}return t}class KG{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}nt(e){te("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{te("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(n){Va(n)?te("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Ua(n)}await this.nt(6e4)})}}class GG{constructor(e,n){this.localStore=e,this.persistence=n}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.it(n,e))}it(e,n){const r=new Set;let i=n,s=!0;return q.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return te("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}rt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(i,s)).next(a=>(te("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ot(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=JO(s);bS(o,r)>0&&(r=o)}),new ni(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}Rr.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QG{constructor(e,n,r,i,s,o,a,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=u}}class Sa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Sa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Sa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(t){return t==null}function Uf(t){return t===0&&1/t==-1/0}function nL(t){return typeof t=="number"&&Number.isInteger(t)&&!Uf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YG extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XG(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw i instanceof DOMException?new YG("Invalid base64 string: "+i):i}}(e);return new cn(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const JG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ca(t){if(Te(!!t),typeof t=="string"){let e=0;const n=JG.exec(t);if(Te(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zt(t.seconds),nanos:zt(t.nanos)}}function zt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yl(t){return typeof t=="string"?cn.fromBase64String(t):cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function rL(t){const e=t.mapValue.fields.__previous_value__;return xS(e)?rL(e):e}function Vf(t){const e=Ca(t.mapValue.fields.__local_write_time__.timestampValue);return new Ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ym={nullValue:"NULL_VALUE"};function Xl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xS(t)?4:iL(t)?9007199254740991:10:me()}function bs(t,e){if(t===e)return!0;const n=Xl(t);if(n!==Xl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vf(t).isEqual(Vf(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Ca(r.timestampValue),o=Ca(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Yl(r.bytesValue).isEqual(Yl(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return zt(r.geoPointValue.latitude)===zt(i.geoPointValue.latitude)&&zt(r.geoPointValue.longitude)===zt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return zt(r.integerValue)===zt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=zt(r.doubleValue),o=zt(i.doubleValue);return s===o?Uf(s)===Uf(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return qc(t.arrayValue.values||[],e.arrayValue.values||[],bs);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(Tk(s)!==Tk(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!bs(s[a],o[a])))return!1;return!0}(t,e);default:return me()}}function Bf(t,e){return(t.values||[]).find(n=>bs(n,e))!==void 0}function ba(t,e){if(t===e)return 0;const n=Xl(t),r=Xl(e);if(n!==r)return Ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=zt(i.integerValue||i.doubleValue),a=zt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Sk(t.timestampValue,e.timestampValue);case 4:return Sk(Vf(t),Vf(e));case 5:return Ue(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Yl(i),a=Yl(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const h=Ue(o[u],a[u]);if(h!==0)return h}return Ue(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Ue(zt(i.latitude),zt(s.latitude));return o!==0?o:Ue(zt(i.longitude),zt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const h=ba(o[u],a[u]);if(h)return h}return Ue(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Jo.mapValue&&s===Jo.mapValue)return 0;if(i===Jo.mapValue)return 1;if(s===Jo.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},h=Object.keys(u);a.sort(),h.sort();for(let p=0;p<a.length&&p<h.length;++p){const v=Ue(a[p],h[p]);if(v!==0)return v;const w=ba(o[a[p]],u[h[p]]);if(w!==0)return w}return Ue(a.length,h.length)}(t.mapValue,e.mapValue);default:throw me()}}function Sk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ue(t,e);const n=Ca(t),r=Ca(e),i=Ue(n.seconds,r.seconds);return i!==0?i:Ue(n.nanos,r.nanos)}function zc(t){return OE(t)}function OE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Ca(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Yl(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ce.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=OE(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${OE(r.fields[a])}`;return s+"}"}(t.mapValue):me();var e,n}function Jl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function LE(t){return!!t&&"integerValue"in t}function jf(t){return!!t&&"arrayValue"in t}function Ck(t){return!!t&&"nullValue"in t}function bk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vm(t){return!!t&&"mapValue"in t}function Wd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return gu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Wd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function iL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function ZG(t){return"nullValue"in t?ym:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Jl(Sa.empty(),ce.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:me()}function e4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Jl(Sa.empty(),ce.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Jo:me()}function kk(t,e){const n=ba(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function xk(t,e){const n=ba(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){this.position=e,this.inclusive=n}}function Nk(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ce.comparator(ce.fromName(o.referenceValue),n.key):r=ba(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ak(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{}class Ge extends sL{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new t4(e,n,r):n==="array-contains"?new i4(e,r):n==="in"?new hL(e,r):n==="not-in"?new s4(e,r):n==="array-contains-any"?new o4(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new n4(e,r):new r4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ba(n,this.value)):n!==null&&Xl(this.value)===Xl(n)&&this.matchesComparison(ba(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ft extends sL{constructor(e,n){super(),this.filters=e,this.op=n,this.ft=null}static create(e,n){return new ft(e,n)}matches(e){return Wc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ft!==null||(this.ft=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(n=>n.isInequality());return e!==null?e.field:null}dt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Wc(t){return t.op==="and"}function ME(t){return t.op==="or"}function NS(t){return oL(t)&&Wc(t)}function oL(t){for(const e of t.filters)if(e instanceof ft)return!1;return!0}function FE(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+zc(t.value);if(NS(t))return t.filters.map(e=>FE(e)).join(",");{const e=t.filters.map(n=>FE(n)).join(",");return`${t.op}(${e})`}}function aL(t,e){return t instanceof Ge?function(n,r){return r instanceof Ge&&n.op===r.op&&n.field.isEqual(r.field)&&bs(n.value,r.value)}(t,e):t instanceof ft?function(n,r){return r instanceof ft&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,o)=>i&&aL(s,r.filters[o]),!0):!1}(t,e):void me()}function lL(t,e){const n=t.filters.concat(e);return ft.create(n,t.op)}function uL(t){return t instanceof Ge?function(e){return`${e.field.canonicalString()} ${e.op} ${zc(e.value)}`}(t):t instanceof ft?function(e){return e.op.toString()+" {"+e.getFilters().map(uL).join(" ,")+"}"}(t):"Filter"}class t4 extends Ge{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class n4 extends Ge{constructor(e,n){super(e,"in",n),this.keys=cL("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class r4 extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=cL("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function cL(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class i4 extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jf(n)&&Bf(n.arrayValue,this.value)}}class hL extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bf(this.value.arrayValue,n)}}class s4 extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Bf(this.value.arrayValue,n)}}class o4 extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n="asc"){this.field=e,this.dir=n}}function a4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n){this.comparator=e,this.root=n||$n.EMPTY}insert(e,n){return new Ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new Ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qg(this.root,e,this.comparator,!1)}getReverseIterator(){return new qg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qg(this.root,e,this.comparator,!0)}}class qg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $n{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:$n.RED,this.left=i!=null?i:$n.EMPTY,this.right=s!=null?s:$n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new $n(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return $n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw me();const e=this.left.check();if(e!==this.right.check())throw me();return e+(this.isRed()?0:1)}}$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1;$n.EMPTY=new class{constructor(){this.size=0}get key(){throw me()}get value(){throw me()}get color(){throw me()}get left(){throw me()}get right(){throw me()}copy(t,e,n,r,i){return this}insert(t,e,n){return new $n(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.comparator=e,this.data=new Ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dk(this.data.getIterator())}getIteratorFrom(e){return new Dk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yt(this.comparator);return n.data=e,n}}class Dk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hu(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new Or([])}unionWith(e){let n=new yt(Jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Or(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wd(n)}setAll(e){let n=Jt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Wd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());vm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];vm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){gu(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Un(Wd(this.value))}}function dL(t){const e=[];return gu(t.fields,(n,r)=>{const i=new Jt([n]);if(vm(r)){const s=dL(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new kt(e,0,Ce.min(),Ce.min(),Ce.min(),Un.empty(),0)}static newFoundDocument(e,n,r,i){return new kt(e,1,n,Ce.min(),r,i,0)}static newNoDocument(e,n){return new kt(e,2,n,Ce.min(),Ce.min(),Un.empty(),0)}static newUnknownDocument(e,n){return new kt(e,3,n,Ce.min(),Ce.min(),Un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this._t=null}}function $E(t,e=null,n=[],r=[],i=null,s=null,o=null){return new l4(t,e,n,r,i,s,o)}function Zl(t){const e=fe(t);if(e._t===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>FE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),kp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zc(r)).join(",")),e._t=n}return e._t}function xp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!a4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!aL(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ak(t.startAt,e.startAt)&&Ak(t.endAt,e.endAt)}function Sy(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Cy(t,e){return t.filters.filter(n=>n instanceof Ge&&n.field.isEqual(e))}function Pk(t,e,n){let r=ym,i=!0;for(const s of Cy(t,e)){let o=ym,a=!0;switch(s.op){case"<":case"<=":o=ZG(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=ym}kk({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];kk({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function Rk(t,e,n){let r=Jo,i=!0;for(const s of Cy(t,e)){let o=Jo,a=!0;switch(s.op){case">=":case">":o=e4(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Jo}xk({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];xk({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.wt=null,this.gt=null,this.startAt,this.endAt}}function fL(t,e,n,r,i,s,o,a){return new fo(t,e,n,r,i,s,o,a)}function yh(t){return new fo(t)}function Ok(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function AS(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Hv(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function DS(t){return t.collectionGroup!==null}function Ml(t){const e=fe(t);if(e.wt===null){e.wt=[];const n=Hv(e),r=AS(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new Sc(n)),e.wt.push(new Sc(Jt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Sc(Jt.keyField(),s))}}}return e.wt}function Vr(t){const e=fe(t);if(!e.gt)if(e.limitType==="F")e.gt=$E(e.path,e.collectionGroup,Ml(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Ml(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new Sc(s.field,o))}const r=e.endAt?new ka(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ka(e.startAt.position,e.startAt.inclusive):null;e.gt=$E(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.gt}function UE(t,e){e.getFirstInequalityField(),Hv(t);const n=t.filters.concat([e]);return new fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function by(t,e,n){return new fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Np(t,e){return xp(Vr(t),Vr(e))&&t.limitType===e.limitType}function pL(t){return`${Zl(Vr(t))}|lt:${t.limitType}`}function VE(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>uL(r)).join(", ")}]`),kp(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zc(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zc(r)).join(",")),`Target(${n})`}(Vr(t))}; limitType=${t.limitType})`}function Ap(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):ce.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Ml(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=Nk(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Ml(n),r)||n.endAt&&!function(i,s,o){const a=Nk(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Ml(n),r))}(t,e)}function gL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mL(t){return(e,n)=>{let r=!1;for(const i of Ml(t)){const s=u4(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function u4(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return a!==null&&u!==null?ba(a,u):me()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return me()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(t,e){if(t.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uf(e)?"-0":e}}function vL(t){return{integerValue:""+t}}function _L(t,e){return nL(e)?vL(e):yL(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this._=void 0}}function c4(t,e,n){return t instanceof Hc?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof eu?EL(t,e):t instanceof tu?IL(t,e):function(r,i){const s=wL(r,i),o=Lk(s)+Lk(r.It);return LE(s)&&LE(r.It)?vL(o):yL(r.Tt,o)}(t,e)}function h4(t,e,n){return t instanceof eu?EL(t,e):t instanceof tu?IL(t,e):n}function wL(t,e){return t instanceof Kc?LE(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Hc extends Kv{}class eu extends Kv{constructor(e){super(),this.elements=e}}function EL(t,e){const n=TL(e);for(const r of t.elements)n.some(i=>bs(i,r))||n.push(r);return{arrayValue:{values:n}}}class tu extends Kv{constructor(e){super(),this.elements=e}}function IL(t,e){let n=TL(e);for(const r of t.elements)n=n.filter(i=>!bs(i,r));return{arrayValue:{values:n}}}class Kc extends Kv{constructor(e,n){super(),this.Tt=e,this.It=n}}function Lk(t){return zt(t.integerValue||t.doubleValue)}function TL(t){return jf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n){this.field=e,this.transform=n}}function d4(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof eu&&r instanceof eu||n instanceof tu&&r instanceof tu?qc(n.elements,r.elements,bs):n instanceof Kc&&r instanceof Kc?bs(n.It,r.It):n instanceof Hc&&r instanceof Hc}(t.transform,e.transform)}class f4{constructor(e,n){this.version=e,this.transformResults=n}}class Rt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Rt}static exists(e){return new Rt(void 0,e)}static updateTime(e){return new Rt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _m(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gv{}function SL(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _h(t.key,Rt.none()):new vh(t.key,t.data,Rt.none());{const n=t.data,r=Un.empty();let i=new yt(Jt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new po(t.key,r,new Or(i.toArray()),Rt.none())}}function p4(t,e,n){t instanceof vh?function(r,i,s){const o=r.value.clone(),a=Fk(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof po?function(r,i,s){if(!_m(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=Fk(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(CL(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Hd(t,e,n,r){return t instanceof vh?function(i,s,o,a){if(!_m(i.precondition,s))return o;const u=i.value.clone(),h=$k(i.fieldTransforms,a,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof po?function(i,s,o,a){if(!_m(i.precondition,s))return o;const u=$k(i.fieldTransforms,a,s),h=s.data;return h.setAll(CL(i)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,s,o){return _m(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function g4(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=wL(r.transform,i||null);s!=null&&(n===null&&(n=Un.empty()),n.set(r.field,s))}return n||null}function Mk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&qc(n,r,(i,s)=>d4(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vh extends Gv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class po extends Gv{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function CL(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Fk(t,e,n){const r=new Map;Te(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,h4(o,a,n[i]))}return r}function $k(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,c4(s,o,e))}return r}class _h extends Gv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PS extends Gv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn,Je;function bL(t){switch(t){default:return me();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}function kL(t){if(t===void 0)return Xt("GRPC error has no .code"),H.UNKNOWN;switch(t){case tn.OK:return H.OK;case tn.CANCELLED:return H.CANCELLED;case tn.UNKNOWN:return H.UNKNOWN;case tn.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case tn.INTERNAL:return H.INTERNAL;case tn.UNAVAILABLE:return H.UNAVAILABLE;case tn.UNAUTHENTICATED:return H.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case tn.NOT_FOUND:return H.NOT_FOUND;case tn.ALREADY_EXISTS:return H.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return H.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case tn.ABORTED:return H.ABORTED;case tn.OUT_OF_RANGE:return H.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return H.UNIMPLEMENTED;case tn.DATA_LOSS:return H.DATA_LOSS;default:return me()}}(Je=tn||(tn={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gu(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return tL(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=new Ht(ce.comparator);function Lr(){return y4}const xL=new Ht(ce.comparator);function Cd(...t){let e=xL;for(const n of t)e=e.insert(n.key,n);return e}function NL(t){let e=xL;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ms(){return Kd()}function AL(){return Kd()}function Kd(){return new Ba(t=>t.toString(),(t,e)=>t.isEqual(e))}const v4=new Ht(ce.comparator),_4=new yt(ce.comparator);function Ve(...t){let e=_4;for(const n of t)e=e.add(n);return e}const w4=new yt(Ue);function Qv(){return w4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Rp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Pp(Ce.min(),i,Qv(),Lr(),Ve())}}class Rp{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Rp(r,n,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n,r,i){this.Et=e,this.removedTargetIds=n,this.key=r,this.At=i}}class DL{constructor(e,n){this.targetId=e,this.Rt=n}}class PL{constructor(e,n,r=cn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Uk{constructor(){this.Pt=0,this.vt=Bk(),this.bt=cn.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return this.Pt!==0}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=Ve(),n=Ve(),r=Ve();return this.vt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:me()}}),new Rp(this.bt,this.Vt,e,n,r)}kt(){this.St=!1,this.vt=Bk()}$t(e,n){this.St=!0,this.vt=this.vt.insert(e,n)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class E4{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=Lr(),this.Kt=Vk(),this.Gt=new yt(Ue)}Qt(e){for(const n of e.Et)e.At&&e.At.isFoundDocument()?this.jt(n,e.At):this.zt(n,e.key,e.At);for(const n of e.removedTargetIds)this.zt(n,e.key,e.At)}Wt(e){this.forEachTarget(e,n=>{const r=this.Ht(n);switch(e.state){case 0:this.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||this.removeTarget(n);break;case 3:this.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(n)&&(this.Yt(n),r.xt(e.resumeToken));break;default:me()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qt.forEach((r,i)=>{this.Jt(i)&&n(i)})}Zt(e){const n=e.targetId,r=e.Rt.count,i=this.Xt(n);if(i){const s=i.target;if(Sy(s))if(r===0){const o=new ce(s.path);this.zt(n,o,kt.newNoDocument(o,Ce.min()))}else Te(r===1);else this.te(n)!==r&&(this.Yt(n),this.Gt=this.Gt.add(n))}}ee(e){const n=new Map;this.qt.forEach((s,o)=>{const a=this.Xt(o);if(a){if(s.current&&Sy(a.target)){const u=new ce(a.target.path);this.Ut.get(u)!==null||this.ne(o,u)||this.zt(o,u,kt.newNoDocument(u,e))}s.Ct&&(n.set(o,s.Nt()),s.kt())}});let r=Ve();this.Kt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const h=this.Xt(u);return!h||h.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))}),this.Ut.forEach((s,o)=>o.setReadTime(e));const i=new Pp(e,n,this.Gt,this.Ut,r);return this.Ut=Lr(),this.Kt=Vk(),this.Gt=new yt(Ue),i}jt(e,n){if(!this.Jt(e))return;const r=this.ne(e,n.key)?2:0;this.Ht(e).$t(n.key,r),this.Ut=this.Ut.insert(n.key,n),this.Kt=this.Kt.insert(n.key,this.se(n.key).add(e))}zt(e,n,r){if(!this.Jt(e))return;const i=this.Ht(e);this.ne(e,n)?i.$t(n,1):i.Mt(n),this.Kt=this.Kt.insert(n,this.se(n).delete(e)),r&&(this.Ut=this.Ut.insert(n,r))}removeTarget(e){this.qt.delete(e)}te(e){const n=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let n=this.qt.get(e);return n||(n=new Uk,this.qt.set(e,n)),n}se(e){let n=this.Kt.get(e);return n||(n=new yt(Ue),this.Kt=this.Kt.insert(e,n)),n}Jt(e){const n=this.Xt(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.qt.get(e);return n&&n.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new Uk),this.Lt.getRemoteKeysForTarget(e).forEach(n=>{this.zt(e,n,null)})}ne(e,n){return this.Lt.getRemoteKeysForTarget(e).has(n)}}function Vk(){return new Ht(ce.comparator)}function Bk(){return new Ht(ce.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),T4=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),S4=(()=>({and:"AND",or:"OR"}))();class C4{constructor(e,n){this.databaseId=e,this.yt=n}}function Gc(t,e){return t.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RL(t,e){return t.yt?e.toBase64():e.toUint8Array()}function b4(t,e){return Gc(t,e.toTimestamp())}function Zt(t){return Te(!!t),Ce.fromTimestamp(function(e){const n=Ca(e);return new Ot(n.seconds,n.nanos)}(t))}function RS(t,e){return function(n){return new et(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function OL(t){const e=et.fromString(t);return Te(qL(e)),e}function qf(t,e){return RS(t.databaseId,e.path)}function Es(t,e){const n=OL(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(ML(n))}function BE(t,e){return RS(t.databaseId,e)}function LL(t){const e=OL(t);return e.length===4?et.emptyPath():ML(e)}function zf(t){return new et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ML(t){return Te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function jk(t,e,n){return{name:qf(t,e),fields:n.value.mapValue.fields}}function FL(t,e,n){const r=Es(t,e.name),i=Zt(e.updateTime),s=e.createTime?Zt(e.createTime):Ce.min(),o=new Un({mapValue:{fields:e.fields}}),a=kt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function k4(t,e){return"found"in e?function(n,r){Te(!!r.found),r.found.name,r.found.updateTime;const i=Es(n,r.found.name),s=Zt(r.found.updateTime),o=r.found.createTime?Zt(r.found.createTime):Ce.min(),a=new Un({mapValue:{fields:r.found.fields}});return kt.newFoundDocument(i,s,o,a)}(t,e):"missing"in e?function(n,r){Te(!!r.missing),Te(!!r.readTime);const i=Es(n,r.missing),s=Zt(r.readTime);return kt.newNoDocument(i,s)}(t,e):me()}function x4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:me()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.yt?(Te(h===void 0||typeof h=="string"),cn.fromBase64String(h||"")):(Te(h===void 0||h instanceof Uint8Array),cn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?H.UNKNOWN:kL(u.code);return new ee(h,u.message||"")}(o);n=new PL(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Es(t,r.document.name),s=Zt(r.document.updateTime),o=r.document.createTime?Zt(r.document.createTime):Ce.min(),a=new Un({mapValue:{fields:r.document.fields}}),u=kt.newFoundDocument(i,s,o,a),h=r.targetIds||[],p=r.removedTargetIds||[];n=new wm(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Es(t,r.document),s=r.readTime?Zt(r.readTime):Ce.min(),o=kt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new wm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Es(t,r.document),s=r.removedTargetIds||[];n=new wm([],s,i,null)}else{if(!("filter"in e))return me();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,s=new m4(i),o=r.targetId;n=new DL(o,s)}}return n}function Wf(t,e){let n;if(e instanceof vh)n={update:jk(t,e.key,e.value)};else if(e instanceof _h)n={delete:qf(t,e.key)};else if(e instanceof po)n={update:jk(t,e.key,e.data),updateMask:O4(e.fieldMask)};else{if(!(e instanceof PS))return me();n={verify:qf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Hc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof eu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof tu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Kc)return{fieldPath:s.field.canonicalString(),increment:o.It};throw me()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:b4(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:me()}(t,e.precondition)),n}function jE(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Rt.updateTime(Zt(i.updateTime)):i.exists!==void 0?Rt.exists(i.exists):Rt.none()}(e.currentDocument):Rt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;if("setToServerValue"in o)Te(o.setToServerValue==="REQUEST_TIME"),a=new Hc;else if("appendMissingElements"in o){const h=o.appendMissingElements.values||[];a=new eu(h)}else if("removeAllFromArray"in o){const h=o.removeAllFromArray.values||[];a=new tu(h)}else"increment"in o?a=new Kc(s,o.increment):me();const u=Jt.fromServerFormat(o.fieldPath);return new Dp(u,a)}(t,i)):[];if(e.update){e.update.name;const i=Es(t,e.update.name),s=new Un({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const u=a.fieldPaths||[];return new Or(u.map(h=>Jt.fromServerFormat(h)))}(e.updateMask);return new po(i,s,o,n,r)}return new vh(i,s,n,r)}if(e.delete){const i=Es(t,e.delete);return new _h(i,n)}if(e.verify){const i=Es(t,e.verify);return new PS(i,n)}return me()}function N4(t,e){return t&&t.length>0?(Te(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?Zt(r.updateTime):Zt(i);return s.isEqual(Ce.min())&&(s=Zt(i)),new f4(s,r.transformResults||[])}(n,e))):[]}function $L(t,e){return{documents:[BE(t,e.path)]}}function UL(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=BE(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=BE(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(u.length!==0)return jL(ft.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Qu(p.field),direction:D4(p.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(u,h){return u.yt||kp(h)?h:{value:h}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n}function VL(t){let e=LL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Te(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(p){const v=BL(p);return v instanceof ft&&NS(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(p=>function(v){return new Sc(Yu(v.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p)));let a=null;n.limit&&(a=function(p){let v;return v=typeof p=="object"?p.value:p,kp(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(p){const v=!!p.before,w=p.values||[];return new ka(w,v)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const v=!p.before,w=p.values||[];return new ka(w,v)}(n.endAt)),fL(e,i,o,s,a,"F",u,h)}function A4(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return me()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function BL(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Yu(e.unaryFilter.field);return Ge.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Yu(e.unaryFilter.field);return Ge.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Yu(e.unaryFilter.field);return Ge.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Yu(e.unaryFilter.field);return Ge.create(s,"!=",{nullValue:"NULL_VALUE"});default:return me()}}(t):t.fieldFilter!==void 0?function(e){return Ge.create(Yu(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return me()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return ft.create(e.compositeFilter.filters.map(n=>BL(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return me()}}(e.compositeFilter.op))}(t):me()}function D4(t){return I4[t]}function P4(t){return T4[t]}function R4(t){return S4[t]}function Qu(t){return{fieldPath:t.canonicalString()}}function Yu(t){return Jt.fromServerFormat(t.fieldPath)}function jL(t){return t instanceof Ge?function(e){if(e.op==="=="){if(bk(e.value))return{unaryFilter:{field:Qu(e.field),op:"IS_NAN"}};if(Ck(e.value))return{unaryFilter:{field:Qu(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(bk(e.value))return{unaryFilter:{field:Qu(e.field),op:"IS_NOT_NAN"}};if(Ck(e.value))return{unaryFilter:{field:Qu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qu(e.field),op:P4(e.op),value:e.value}}}(t):t instanceof ft?function(e){const n=e.getFilters().map(r=>jL(r));return n.length===1?n[0]:{compositeFilter:{op:R4(e.op),filters:n}}}(t):me()}function O4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qL(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qk(e)),e=L4(t.get(n),e);return qk(e)}function L4(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function qk(t){return t+""}function ys(t){const e=t.length;if(Te(e>=2),e===2)return Te(t.charAt(0)===""&&t.charAt(1)===""),et.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&me(),t.charAt(o+1)){case"":const a=t.substring(s,o);let u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:me()}s=o+2}return new et(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t,e){return[t,_r(e)]}function zL(t,e,n){return[t,_r(e),n]}const M4={},F4=["prefixPath","collectionGroup","readTime","documentId"],$4=["prefixPath","collectionGroup","documentId"],U4=["collectionGroup","readTime","prefixPath","documentId"],V4=["canonicalId","targetId"],B4=["targetId","path"],j4=["path","targetId"],q4=["collectionId","parent"],z4=["indexId","uid"],W4=["uid","sequenceNumber"],H4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],K4=["indexId","uid","orderedDocumentKey"],G4=["userId","collectionPath","documentId"],Q4=["userId","collectionPath","largestBatchId"],Y4=["userId","collectionGroup","largestBatchId"],WL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],X4=[...WL,"documentOverlays"],HL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KL=HL,J4=[...KL,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE extends eL{constructor(e,n){super(),this.re=e,this.currentSequenceNumber=n}}function Nn(t,e){const n=fe(t);return Bi.M(n.re,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&p4(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Hd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=AL();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=SL(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ve())}isEqual(e){return this.batchId===e.batchId&&qc(this.mutations,e.mutations,(n,r)=>Mk(n,r))&&qc(this.baseMutations,e.baseMutations,(n,r)=>Mk(n,r))}}class LS{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Te(e.mutations.length===r.length);let i=v4;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new LS(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n,r,i,s=Ce.min(),o=Ce.min(),a=cn.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new da(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.oe=e}}function Z4(t,e){let n;if(e.document)n=FL(t.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ce.fromSegments(e.noDocument.path),i=ru(e.noDocument.readTime);n=kt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return me();{const r=ce.fromSegments(e.unknownDocument.path),i=ru(e.unknownDocument.version);n=kt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new Ot(r[0],r[1]);return Ce.fromTimestamp(i)}(e.readTime)),n}function Wk(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ky(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,s){return{name:qf(i,s.key),fields:s.data.value.mapValue.fields,updateTime:Gc(i,s.version.toTimestamp()),createTime:Gc(i,s.createTime.toTimestamp())}}(t.oe,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:nu(e.version)};else{if(!e.isUnknownDocument())return me();r.unknownDocument={path:n.path.toArray(),version:nu(e.version)}}return r}function ky(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function nu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ru(t){const e=new Ot(t.seconds,t.nanoseconds);return Ce.fromTimestamp(e)}function ml(t,e){const n=(e.baseMutations||[]).map(s=>jE(t.oe,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>jE(t.oe,s)),i=Ot.fromMillis(e.localWriteTimeMs);return new OS(e.batchId,i,n,r)}function bd(t){const e=ru(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ru(t.lastLimboFreeSnapshotVersion):Ce.min();let r;var i;return t.query.documents!==void 0?(Te((i=t.query).documents.length===1),r=Vr(yh(LL(i.documents[0])))):r=function(s){return Vr(VL(s))}(t.query),new da(r,t.targetId,0,t.lastListenSequenceNumber,e,n,cn.fromBase64String(t.resumeToken))}function QL(t,e){const n=nu(e.snapshotVersion),r=nu(e.lastLimboFreeSnapshotVersion);let i;i=Sy(e.target)?$L(t.oe,e.target):UL(t.oe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Zl(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function FS(t){const e=VL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?by(e,e.limit,"L"):e}function Ow(t,e){return new MS(e.largestBatchId,jE(t.oe,e.overlayMutation))}function Hk(t,e){const n=e.path.lastSegment();return[t,_r(e.path.popLast()),n]}function Kk(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:nu(r.readTime),documentKey:_r(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eQ{getBundleMetadata(e,n){return Gk(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ru(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return Gk(e).put({bundleId:(r=n).id,createTime:nu(Zt(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return Qk(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:FS(i.bundledQuery),readTime:ru(i.readTime)};var i})}saveNamedQuery(e,n){return Qk(e).put(function(r){return{name:r.name,readTime:nu(Zt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function Gk(t){return Nn(t,"bundles")}function Qk(t){return Nn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n){this.Tt=e,this.userId=n}static ue(e,n){const r=n.uid||"";return new Yv(e,r)}getOverlay(e,n){return hd(e).get(Hk(this.userId,n)).next(r=>r?Ow(this.Tt,r):null)}getOverlays(e,n){const r=ms();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new MS(n,o);i.push(this.ce(e,a))}),q.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(_r(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(hd(e).Y("collectionPathOverlayIndex",a))}),q.waitFor(s)}getOverlaysForCollection(e,n,r){const i=ms(),s=_r(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return hd(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const h=Ow(this.Tt,u);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=ms();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return hd(e).X({index:"collectionGroupOverlayIndex",range:a},(u,h,p)=>{const v=Ow(this.Tt,h);s.size()<i||v.largestBatchId===o?(s.set(v.getKey(),v),o=v.largestBatchId):p.done()}).next(()=>s)}ce(e,n){return hd(e).put(function(r,i,s){const[o,a,u]=Hk(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Wf(r.oe,s.mutation)}}(this.Tt,this.userId,n))}}function hd(t){return Nn(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(){}ae(e,n){this.he(e,n),n.le()}he(e,n){if("nullValue"in e)this.fe(n,5);else if("booleanValue"in e)this.fe(n,10),n.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(n,15),n.de(zt(e.integerValue));else if("doubleValue"in e){const r=zt(e.doubleValue);isNaN(r)?this.fe(n,13):(this.fe(n,15),Uf(r)?n.de(0):n.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(n,20),typeof r=="string"?n._e(r):(n._e(`${r.seconds||""}`),n.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,n),this.me(n);else if("bytesValue"in e)this.fe(n,30),n.ge(Yl(e.bytesValue)),this.me(n);else if("referenceValue"in e)this.ye(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(n,45),n.de(r.latitude||0),n.de(r.longitude||0)}else"mapValue"in e?iL(e)?this.fe(n,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,n),this.me(n)):"arrayValue"in e?(this.Ie(e.arrayValue,n),this.me(n)):me()}we(e,n){this.fe(n,25),this.Te(e,n)}Te(e,n){n._e(e)}pe(e,n){const r=e.fields||{};this.fe(n,55);for(const i of Object.keys(r))this.we(i,n),this.he(r[i],n)}Ie(e,n){const r=e.values||[];this.fe(n,50);for(const i of r)this.he(i,n)}ye(e,n){this.fe(n,37),ce.fromName(e).path.forEach(r=>{this.fe(n,60),this.Te(r,n)})}fe(e,n){e.de(n)}me(e){e.de(2)}}yl.Ee=new yl;function tQ(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function Yk(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=tQ(255&n[i]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}class nQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Re(r.value),r=n.next();this.Pe()}ve(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.be(r.value),r=n.next();this.Ve()}Se(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=n.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.Pe()}De(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=n.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Ve()}Ce(e){const n=this.xe(e),r=Yk(n);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}ke(e){const n=this.xe(e),r=Yk(n);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Re(e){const n=255&e;n===0?(this.Me(0),this.Me(255)):n===255?(this.Me(255),this.Me(0)):this.Me(n)}be(e){const n=255&e;n===0?(this.Fe(0),this.Fe(255)):n===255?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class rQ{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class iQ{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class dd{constructor(){this.Le=new nQ,this.qe=new rQ(this.Le),this.Ue=new iQ(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return e===0?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ge(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new vl(this.indexId,this.documentKey,this.arrayValue,r)}}function $o(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Xk(t.arrayValue,e.arrayValue),n!==0?n:(n=Xk(t.directionalValue,e.directionalValue),n!==0?n:ce.comparator(t.documentKey,e.documentKey)))}function Xk(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sQ{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const n of e.filters){const r=n;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){Te(e.collectionGroup===this.collectionId);const n=RE(e);if(n!==void 0&&!this.He(n))return!1;const r=pl(e);let i=0,s=0;for(;i<r.length&&this.He(r[i]);++i);if(i===r.length)return!0;if(this.ze!==void 0){const o=r[i];if(!this.Je(this.ze,o)||!this.Ye(this.Qe[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Qe.length||!this.Ye(this.Qe[s++],o))return!1}return!0}He(e){for(const n of this.je)if(this.Je(n,e))return!0;return!1}Je(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}Ye(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(t){var e,n;if(Te(t instanceof Ge||t instanceof ft),t instanceof Ge){if(t instanceof hL){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Ge.create(t.field,"==",s)))||[];return ft.create(i,"or")}return t}const r=t.filters.map(i=>YL(i));return ft.create(r,t.op)}function oQ(t){if(t.getFilters().length===0)return[];const e=HE(YL(t));return Te(XL(e)),zE(e)||WE(e)?[e]:e.getFilters()}function zE(t){return t instanceof Ge}function WE(t){return t instanceof ft&&NS(t)}function XL(t){return zE(t)||WE(t)||function(e){if(e instanceof ft&&ME(e)){for(const n of e.getFilters())if(!zE(n)&&!WE(n))return!1;return!0}return!1}(t)}function HE(t){if(Te(t instanceof Ge||t instanceof ft),t instanceof Ge)return t;if(t.filters.length===1)return HE(t.filters[0]);const e=t.filters.map(r=>HE(r));let n=ft.create(e,t.op);return n=xy(n),XL(n)?n:(Te(n instanceof ft),Te(Wc(n)),Te(n.filters.length>1),n.filters.reduce((r,i)=>$S(r,i)))}function $S(t,e){let n;return Te(t instanceof Ge||t instanceof ft),Te(e instanceof Ge||e instanceof ft),n=t instanceof Ge?e instanceof Ge?function(r,i){return ft.create([r,i],"and")}(t,e):Jk(t,e):e instanceof Ge?Jk(e,t):function(r,i){if(Te(r.filters.length>0&&i.filters.length>0),Wc(r)&&Wc(i))return lL(r,i.getFilters());const s=ME(r)?r:i,o=ME(r)?i:r,a=s.filters.map(u=>$S(u,o));return ft.create(a,"or")}(t,e),xy(n)}function Jk(t,e){if(Wc(e))return lL(e,t.getFilters());{const n=e.filters.map(r=>$S(t,r));return ft.create(n,"or")}}function xy(t){if(Te(t instanceof Ge||t instanceof ft),t instanceof Ge)return t;const e=t.getFilters();if(e.length===1)return xy(e[0]);if(oL(t))return t;const n=e.map(i=>xy(i)),r=[];return n.forEach(i=>{i instanceof Ge?r.push(i):i instanceof ft&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ft.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aQ{constructor(){this.Ze=new US}addToCollectionParentIndex(e,n){return this.Ze.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Ze.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(ni.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class US{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new yt(et.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg=new Uint8Array(0);class lQ{constructor(e,n){this.user=e,this.databaseId=n,this.Xe=new US,this.tn=new Ba(r=>Zl(r),(r,i)=>xp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Xe.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.Xe.add(n)});const s={collectionId:r,parent:_r(i)};return Zk(e).put(s)}return q.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[QO(n),""],!1,!0);return Zk(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ys(o.parent))}return r})}addFieldIndex(e,n){const r=Wg(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=pd(e);return s.next(a=>{o.put(Kk(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Wg(e),i=pd(e),s=fd(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=fd(e);let i=!0;const s=new Map;return q.forEach(this.en(n),o=>this.nn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ve();const a=[];return q.forEach(s,(u,h)=>{var p;te("IndexedDbIndexManager",`Using index ${p=u,`id=${p.indexId}|cg=${p.collectionGroup}|f=${p.fields.map(M=>`${M.fieldPath}:${M.kind}`).join(",")}`} to execute ${Zl(n)}`);const v=function(M,Q){const re=RE(Q);if(re===void 0)return null;for(const m of Cy(M,re.fieldPath))switch(m.op){case"array-contains-any":return m.value.arrayValue.values||[];case"array-contains":return[m.value]}return null}(h,u),w=function(M,Q){const re=new Map;for(const m of pl(Q))for(const ue of Cy(M,m.fieldPath))switch(ue.op){case"==":case"in":re.set(m.fieldPath.canonicalString(),ue.value);break;case"not-in":case"!=":return re.set(m.fieldPath.canonicalString(),ue.value),Array.from(re.values())}return null}(h,u),b=function(M,Q){const re=[];let m=!0;for(const ue of pl(Q)){const he=ue.kind===0?Pk(M,ue.fieldPath,M.startAt):Rk(M,ue.fieldPath,M.startAt);re.push(he.value),m&&(m=he.inclusive)}return new ka(re,m)}(h,u),k=function(M,Q){const re=[];let m=!0;for(const ue of pl(Q)){const he=ue.kind===0?Rk(M,ue.fieldPath,M.endAt):Pk(M,ue.fieldPath,M.endAt);re.push(he.value),m&&(m=he.inclusive)}return new ka(re,m)}(h,u),R=this.sn(u,h,b),J=this.sn(u,h,k),N=this.rn(u,h,w),D=this.on(u.indexId,v,R,b.inclusive,J,k.inclusive,N);return q.forEach(D,M=>r.J(M,n.limit).next(Q=>{Q.forEach(re=>{const m=ce.fromSegments(re.documentKey);o.has(m)||(o=o.add(m),a.push(m))})}))}).next(()=>a)}return q.resolve(null)})}en(e){let n=this.tn.get(e);return n||(e.filters.length===0?n=[e]:n=oQ(ft.create(e.filters,"and")).map(r=>$E(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,n),n)}on(e,n,r,i,s,o,a){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),h=u/(n!=null?n.length:1),p=[];for(let v=0;v<u;++v){const w=n?this.un(n[v/h]):zg,b=this.cn(e,w,r[v%h],i),k=this.an(e,w,s[v%h],o),R=a.map(J=>this.cn(e,w,J,!0));p.push(...this.createRange(b,k,R))}return p}cn(e,n,r,i){const s=new vl(e,ce.empty(),n,r);return i?s:s.Ge()}an(e,n,r,i){const s=new vl(e,ce.empty(),n,r);return i?s.Ge():s}nn(e,n){const r=new sQ(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.We(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.en(n);return q.forEach(i,s=>this.nn(e,s).next(o=>{o?r!==0&&o.fields.length<function(a){let u=new yt(Jt.comparator),h=!1;for(const p of a.filters)for(const v of p.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?h=!0:u=u.add(v.field));for(const p of a.orderBy)p.field.isKeyField()||(u=u.add(p.field));return u.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}hn(e,n){const r=new dd;for(const i of pl(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ke(i.kind);yl.Ee.ae(s,o)}return r.Be()}un(e){const n=new dd;return yl.Ee.ae(e,n.Ke(0)),n.Be()}ln(e,n){const r=new dd;return yl.Ee.ae(Jl(this.databaseId,n),r.Ke(function(i){const s=pl(i);return s.length===0?0:s[s.length-1].kind}(e))),r.Be()}rn(e,n,r){if(r===null)return[];let i=[];i.push(new dd);let s=0;for(const o of pl(e)){const a=r[s++];for(const u of i)if(this.fn(n,o.fieldPath)&&jf(a))i=this.dn(i,o,a);else{const h=u.Ke(o.kind);yl.Ee.ae(a,h)}}return this._n(i)}sn(e,n,r){return this.rn(e,n,r.position)}_n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Be();return n}dn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new dd;u.seed(a.Be()),yl.Ee.ae(o,u.Ke(n.kind)),s.push(u)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof Ge&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Wg(e),i=pd(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return q.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(h,p){const v=p?new Ty(p.sequenceNumber,new ni(ru(p.readTime),new ce(ys(p.documentKey)),p.largestBatchId)):Ty.empty(),w=h.fields.map(([b,k])=>new zG(Jt.fromServerFormat(b),k));return new YO(h.indexId,h.collectionGroup,w,v)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Ue(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Wg(e),s=pd(e);return this.wn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>q.forEach(a,u=>s.put(Kk(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return q.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?q.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),q.forEach(a,u=>this.mn(e,i,u).next(h=>{const p=this.gn(s,u);return h.isEqual(p)?q.resolve():this.yn(e,s,u,h,p)}))))})}pn(e,n,r,i){return fd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.ln(r,n.key),documentKey:n.key.path.toArray()})}In(e,n,r,i){return fd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.ln(r,n.key),n.key.path.toArray()])}mn(e,n,r){const i=fd(e);let s=new yt($o);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,n)])},(o,a)=>{s=s.add(new vl(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}gn(e,n){let r=new yt($o);const i=this.hn(n,e);if(i==null)return r;const s=RE(n);if(s!=null){const o=e.data.field(s.fieldPath);if(jf(o))for(const a of o.arrayValue.values||[])r=r.add(new vl(n.indexId,e.key,this.un(a),i))}else r=r.add(new vl(n.indexId,e.key,zg,i));return r}yn(e,n,r,i,s){te("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,u,h,p,v){const w=a.getIterator(),b=u.getIterator();let k=Hu(w),R=Hu(b);for(;k||R;){let J=!1,N=!1;if(k&&R){const D=h(k,R);D<0?N=!0:D>0&&(J=!0)}else k!=null?N=!0:J=!0;J?(p(R),R=Hu(b)):N?(v(k),k=Hu(w)):(k=Hu(w),R=Hu(b))}}(i,s,$o,a=>{o.push(this.pn(e,n,r,a))},a=>{o.push(this.In(e,n,r,a))}),q.waitFor(o)}wn(e){let n=1;return pd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>$o(o,a)).filter((o,a,u)=>!a||$o(o,u[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=$o(o,e),u=$o(o,n);if(a===0)i[0]=e.Ge();else if(a>0&&u<0)i.push(o),i.push(o.Ge());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Tn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,zg,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,zg,[]];s.push(IDBKeyRange.bound(a,u))}return s}Tn(e,n){return $o(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(ex)}getMinOffset(e,n){return q.mapArray(this.en(n),r=>this.nn(e,r).next(i=>i||me())).next(ex)}}function Zk(t){return Nn(t,"collectionParents")}function fd(t){return Nn(t,"indexEntries")}function Wg(t){return Nn(t,"indexConfiguration")}function pd(t){return Nn(t,"indexState")}function ex(t){Te(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;bS(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ni(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new xr(e,xr.DEFAULT_COLLECTION_PERCENTILE,xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.X({range:o},(p,v,w)=>(a++,w.delete()));s.push(u.next(()=>{Te(a===1)}));const h=[];for(const p of n.mutations){const v=zL(e,p.key.path,n.batchId);s.push(i.delete(v)),h.push(p.key)}return q.waitFor(s).next(()=>h)}function Ny(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw me();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xr.DEFAULT_COLLECTION_PERCENTILE=10,xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xr.DEFAULT=new xr(41943040,xr.DEFAULT_COLLECTION_PERCENTILE,xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xr.DISABLED=new xr(-1,0,0);class Xv{constructor(e,n,r,i){this.userId=e,this.Tt=n,this.indexManager=r,this.referenceDelegate=i,this.En={}}static ue(e,n,r,i){Te(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Xv(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uo(e).X({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Xu(e),o=Uo(e);return o.add({}).next(a=>{Te(typeof a=="number");const u=new OS(a,n,r,i),h=function(w,b,k){const R=k.baseMutations.map(N=>Wf(w.oe,N)),J=k.mutations.map(N=>Wf(w.oe,N));return{userId:b,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:R,mutations:J}}(this.Tt,this.userId,u),p=[];let v=new yt((w,b)=>Ue(w.canonicalString(),b.canonicalString()));for(const w of i){const b=zL(this.userId,w.key.path,a);v=v.add(w.key.path.popLast()),p.push(o.put(h)),p.push(s.put(b,M4))}return v.forEach(w=>{p.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.En[a]=u.keys()}),q.waitFor(p).next(()=>u)})}lookupMutationBatch(e,n){return Uo(e).get(n).next(r=>r?(Te(r.userId===this.userId),ml(this.Tt,r)):null)}An(e,n){return this.En[n]?q.resolve(this.En[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.En[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Uo(e).X({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Te(a.batchId>=r),s=ml(this.Tt,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Uo(e).X({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uo(e).W("userMutationsIndex",n).next(r=>r.map(i=>ml(this.Tt,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Em(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Xu(e).X({range:i},(o,a,u)=>{const[h,p,v]=o,w=ys(p);if(h===this.userId&&n.path.isEqual(w))return Uo(e).get(v).next(b=>{if(!b)throw me();Te(b.userId===this.userId),s.push(ml(this.Tt,b))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new yt(Ue);const i=[];return n.forEach(s=>{const o=Em(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Xu(e).X({range:a},(h,p,v)=>{const[w,b,k]=h,R=ys(b);w===this.userId&&s.path.isEqual(R)?r=r.add(k):v.done()});i.push(u)}),q.waitFor(i).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Em(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new yt(Ue);return Xu(e).X({range:o},(u,h,p)=>{const[v,w,b]=u,k=ys(w);v===this.userId&&r.isPrefixOf(k)?k.length===i&&(a=a.add(b)):p.done()}).next(()=>this.Rn(e,a))}Rn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Uo(e).get(s).next(o=>{if(o===null)throw me();Te(o.userId===this.userId),r.push(ml(this.Tt,o))}))}),q.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return JL(e.re,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Pn(n.batchId)}),q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return q.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Xu(e).X({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=ys(s[1]);i.push(u)}else a.done()}).next(()=>{Te(i.length===0)})})}containsKey(e,n){return ZL(e,this.userId,n)}vn(e){return eM(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ZL(t,e,n){const r=Em(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Xu(t).X({range:s,Z:!0},(a,u,h)=>{const[p,v,w]=a;p===e&&v===i&&(o=!0),h.done()}).next(()=>o)}function Uo(t){return Nn(t,"mutations")}function Xu(t){return Nn(t,"documentMutations")}function eM(t){return Nn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new iu(0)}static Sn(){return new iu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uQ{constructor(e,n){this.referenceDelegate=e,this.Tt=n}allocateTargetId(e){return this.Dn(e).next(n=>{const r=new iu(n.highestTargetId);return n.highestTargetId=r.next(),this.Cn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(n=>Ce.fromTimestamp(new Ot(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Dn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Cn(e,i)))}addTargetData(e,n){return this.xn(e,n).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(n,r),this.Cn(e,r))))}updateTargetData(e,n){return this.xn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ku(e).delete(n.targetId)).next(()=>this.Dn(e)).next(r=>(Te(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Ku(e).X((o,a)=>{const u=bd(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>q.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ku(e).X((r,i)=>{const s=bd(i);n(s)})}Dn(e){return nx(e).get("targetGlobalKey").next(n=>(Te(n!==null),n))}Cn(e,n){return nx(e).put("targetGlobalKey",n)}xn(e,n){return Ku(e).put(QL(this.Tt,n))}Nn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Zl(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ku(e).X({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const h=bd(a);xp(n,h.target)&&(s=h,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Wo(e);return n.forEach(o=>{const a=_r(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),q.waitFor(i)}removeMatchingKeys(e,n,r){const i=Wo(e);return q.forEach(n,s=>{const o=_r(s.path);return q.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Wo(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Wo(e);let s=Ve();return i.X({range:r,Z:!0},(o,a,u)=>{const h=ys(o[1]),p=new ce(h);s=s.add(p)}).next(()=>s)}containsKey(e,n){const r=_r(n.path),i=IDBKeyRange.bound([r],[QO(r)],!1,!0);let s=0;return Wo(e).X({index:"documentTargetsIndex",Z:!0,range:i},([o,a],u,h)=>{o!==0&&(s++,h.done())}).next(()=>s>0)}ie(e,n){return Ku(e).get(n).next(r=>r?bd(r):null)}}function Ku(t){return Nn(t,"targets")}function nx(t){return Nn(t,"targetGlobal")}function Wo(t){return Nn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx([t,e],[n,r]){const i=Ue(t,n);return i===0?Ue(e,r):i}class cQ{constructor(e){this.kn=e,this.buffer=new yt(rx),this.$n=0}Mn(){return++this.$n}On(e){const n=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();rx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class hQ{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Fn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return this.Fn!==null}Bn(e){te("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Fn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Va(n)?te("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ua(n)}await this.Bn(3e5)})}}class dQ{constructor(e,n){this.Ln=e,this.params=n}calculateTargetCount(e,n){return this.Ln.qn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Rr.at);const r=new cQ(n);return this.Ln.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.Ln.Un(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Ln.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Ln.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(tx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tx):this.Kn(e,n))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,n){let r,i,s,o,a,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,o=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,a=Date.now(),this.removeTargets(e,r,n))).next(v=>(s=v,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(h=Date.now(),PE()<=Ze.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${v} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:v})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fQ{constructor(e,n){this.db=e,this.garbageCollector=function(r,i){return new dQ(r,i)}(this,n)}qn(e){const n=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Gn(e){let n=0;return this.Un(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Un(e,n){return this.Qn(e,(r,i)=>n(i))}addReference(e,n,r){return Hg(e,r)}removeReference(e,n,r){return Hg(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Hg(e,n)}jn(e,n){return function(r,i){let s=!1;return eM(r).tt(o=>ZL(r,o,i).next(a=>(a&&(s=!0),q.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Qn(e,(o,a)=>{if(a<=n){const u=this.jn(e,o).next(h=>{if(!h)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ce.min()),Wo(e).delete([0,_r(o.path)])))});i.push(u)}}).next(()=>q.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Hg(e,n)}Qn(e,n){const r=Wo(e);let i,s=Rr.at;return r.X({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:h})=>{o===0?(s!==Rr.at&&n(new ce(ys(i)),s),s=h,i=u):s=Rr.at}).next(()=>{s!==Rr.at&&n(new ce(ys(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hg(t,e){return Wo(t).put(function(n,r){return{targetId:0,path:_r(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(){this.changes=new Ba(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return al(e).put(r)}removeEntry(e,n,r){return al(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],ky(s),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.zn(e,r)))}getEntry(e,n){let r=kt.newInvalidDocument(n);return al(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(gd(n))},(i,s)=>{r=this.Wn(n,s)}).next(()=>r)}Hn(e,n){let r={size:0,document:kt.newInvalidDocument(n)};return al(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(gd(n))},(i,s)=>{r={document:this.Wn(n,s),size:Ny(s)}}).next(()=>r)}getEntries(e,n){let r=Lr();return this.Jn(e,n,(i,s)=>{const o=this.Wn(i,s);r=r.insert(i,o)}).next(()=>r)}Yn(e,n){let r=Lr(),i=new Ht(ce.comparator);return this.Jn(e,n,(s,o)=>{const a=this.Wn(s,o);r=r.insert(s,a),i=i.insert(s,Ny(o))}).next(()=>({documents:r,Zn:i}))}Jn(e,n,r){if(n.isEmpty())return q.resolve();let i=new yt(ox);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(gd(i.first()),gd(i.last())),o=i.getIterator();let a=o.getNext();return al(e).X({index:"documentKeyIndex",range:s},(u,h,p)=>{const v=ce.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;a&&ox(a,v)<0;)r(a,null),a=o.getNext();a&&a.isEqual(v)&&(r(a,h),a=o.hasNext()?o.getNext():null),a?p.j(gd(a)):p.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),ky(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return al(e).W(IDBKeyRange.bound(o,a,!0)).next(u=>{let h=Lr();for(const p of u){const v=this.Wn(ce.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);v.isFoundDocument()&&(Ap(n,v)||i.has(v.key))&&(h=h.insert(v.key,v))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=Lr();const o=sx(n,r),a=sx(n,ni.max());return al(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,h,p)=>{const v=this.Wn(ce.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(v.key,v),s.size===i&&p.done()}).next(()=>s)}newChangeBuffer(e){return new gQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ix(e).get("remoteDocumentGlobalKey").next(n=>(Te(!!n),n))}zn(e,n){return ix(e).put("remoteDocumentGlobalKey",n)}Wn(e,n){if(n){const r=Z4(this.Tt,n);if(!(r.isNoDocument()&&r.version.isEqual(Ce.min())))return r}return kt.newInvalidDocument(e)}}function nM(t){return new pQ(t)}class gQ extends tM{constructor(e,n){super(),this.Xn=e,this.trackRemovals=n,this.ts=new Ba(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new yt((s,o)=>Ue(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ts.get(s);if(n.push(this.Xn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=Wk(this.Xn.Tt,o);i=i.add(s.path.popLast());const h=Ny(u);r+=h-a.size,n.push(this.Xn.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=Wk(this.Xn.Tt,o.convertToNoDocument(Ce.min()));n.push(this.Xn.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.Xn.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Xn.updateMetadata(e,r)),q.waitFor(n)}getFromCache(e,n){return this.Xn.Hn(e,n).next(r=>(this.ts.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Xn.Yn(e,n).next(({documents:r,Zn:i})=>(i.forEach((s,o)=>{this.ts.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function ix(t){return Nn(t,"remoteDocumentGlobal")}function al(t){return Nn(t,"remoteDocumentsV14")}function gd(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sx(t,e){const n=e.documentKey.path.toArray();return[t,ky(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ox(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Ue(n[s],r[s]),i)return i;return i=Ue(n.length,r.length),i||(i=Ue(n[n.length-2],r[r.length-2]),i||Ue(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mQ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Hd(r.mutation,i,Or.empty(),Ot.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ve()){const i=ms();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Cd();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ve()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Lr();const o=Kd(),a=Kd();return n.forEach((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof po)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Hd(p.mutation,h,p.mutation.getFieldMask(),Ot.now())):o.set(h.key,Or.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var v;return a.set(h,new mQ(p,(v=o.get(h))!==null&&v!==void 0?v:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Kd();let i=new Ht((o,a)=>o-a),s=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||Or.empty();p=a.applyToLocalView(h,p),r.set(u,p);const v=(i.get(a.batchId)||Ve()).add(u);i=i.insert(a.batchId,v)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),h=u.key,p=u.value,v=AL();p.forEach(w=>{if(!s.has(w)){const b=SL(n.get(w),r.get(w));b!==null&&v.set(w,b),s=s.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,v))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return ce.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):DS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):q.resolve(ms());let a=-1,u=s;return o.next(h=>q.forEach(h,(p,v)=>(a<v.largestBatchId&&(a=v.largestBatchId),s.get(p)?q.resolve():this.remoteDocumentCache.getEntry(e,p).next(w=>{u=u.insert(p,w)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,Ve())).next(p=>({batchId:a,changes:NL(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let i=Cd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Cd();return this.indexManager.getCollectionParents(e,i).next(o=>q.forEach(o,a=>{const u=function(h,p){return new fo(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r).next(h=>{h.forEach((p,v)=>{s=s.insert(p,v)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,u)=>{const h=u.getKey();s.get(h)===null&&(s=s.insert(h,kt.newInvalidDocument(h)))});let o=Cd();return s.forEach((a,u)=>{const h=i.get(a);h!==void 0&&Hd(h.mutation,u,Or.empty(),Ot.now()),Ap(n,u)&&(o=o.insert(a,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yQ{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,n){return q.resolve(this.es.get(n))}saveBundleMetadata(e,n){var r;return this.es.set(n.id,{id:(r=n).id,version:r.version,createTime:Zt(r.createTime)}),q.resolve()}getNamedQuery(e,n){return q.resolve(this.ns.get(n))}saveNamedQuery(e,n){return this.ns.set(n.name,function(r){return{name:r.name,query:FS(r.bundledQuery),readTime:Zt(r.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vQ{constructor(){this.overlays=new Ht(ce.comparator),this.ss=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ms();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ce(e,n,s)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ss.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ss.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const i=ms(),s=n.length+1,o=new ce(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ht((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=ms(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const a=ms(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>a.set(h,p)),!(a.size()>=i)););return q.resolve(a)}ce(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.ss.get(i.largestBatchId).delete(r.key);this.ss.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new MS(n,r));let s=this.ss.get(n);s===void 0&&(s=Ve(),this.ss.set(n,s)),this.ss.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.rs=new yt(mn.os),this.us=new yt(mn.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,n){const r=new mn(e,n);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ls(new mn(e,n))}fs(e,n){e.forEach(r=>this.removeReference(r,n))}ds(e){const n=new ce(new et([])),r=new mn(n,e),i=new mn(n,e+1),s=[];return this.us.forEachInRange([r,i],o=>{this.ls(o),s.push(o.key)}),s}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const n=new ce(new et([])),r=new mn(n,e),i=new mn(n,e+1);let s=Ve();return this.us.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new mn(e,0),r=this.rs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mn{constructor(e,n){this.key=e,this.gs=n}static os(e,n){return ce.comparator(e.key,n.key)||Ue(e.gs,n.gs)}static cs(e,n){return Ue(e.gs,n.gs)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Q{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new yt(mn.os)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new OS(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.ps=this.ps.add(new mn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Is(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Ts(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.ys-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mn(n,0),i=new mn(n,Number.POSITIVE_INFINITY),s=[];return this.ps.forEachInRange([r,i],o=>{const a=this.Is(o.gs);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new yt(Ue);return n.forEach(i=>{const s=new mn(i,0),o=new mn(i,Number.POSITIVE_INFINITY);this.ps.forEachInRange([s,o],a=>{r=r.add(a.gs)})}),q.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ce.isDocumentKey(s)||(s=s.child(""));const o=new mn(new ce(s),0);let a=new yt(Ue);return this.ps.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(a=a.add(u.gs)),!0)},o),q.resolve(this.Es(a))}Es(e){const n=[];return e.forEach(r=>{const i=this.Is(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Te(this.As(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.ps;return q.forEach(n.mutations,i=>{const s=new mn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ps=r})}Pn(e){}containsKey(e,n){const r=new mn(n,0),i=this.ps.firstAfterOrEqual(r);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}As(e,n){return this.Ts(e)}Ts(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Is(e){const n=this.Ts(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wQ{constructor(e){this.Rs=e,this.docs=new Ht(ce.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Rs(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():kt.newInvalidDocument(n))}getEntries(e,n){let r=Lr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():kt.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Lr();const o=n.path,a=new ce(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||bS(JO(p),r)<=0||(i.has(p.key)||Ap(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){me()}Ps(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new EQ(this)}getSize(e){return q.resolve(this.size)}}class EQ extends tM{constructor(e){super(),this.Xn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Xn.addEntry(e,i)):this.Xn.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Xn.getEntry(e,n)}getAllFromCache(e,n){return this.Xn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IQ{constructor(e){this.persistence=e,this.vs=new Ba(n=>Zl(n),xp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.bs=0,this.Vs=new VS,this.targetCount=0,this.Ss=iu.Vn()}forEachTarget(e,n){return this.vs.forEach((r,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),q.resolve()}xn(e){this.vs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ss=new iu(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.xn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.xn(n),q.resolve()}removeTargetData(e,n){return this.vs.delete(n.target),this.Vs.ds(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.vs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.vs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.vs.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Vs.hs(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Vs.fs(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Vs.ds(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Vs.ws(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Vs.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,n){this.Ds={},this.overlays={},this.Cs=new Rr(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new IQ(this),this.indexManager=new aQ,this.remoteDocumentCache=function(r){return new wQ(r)}(r=>this.referenceDelegate.ks(r)),this.Tt=new GL(n),this.$s=new yQ(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vQ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Ds[e.toKey()];return r||(r=new _Q(n,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const i=new TQ(this.Cs.next());return this.referenceDelegate.Ms(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Fs(e,n){return q.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,n)))}}class TQ extends eL{constructor(e){super(),this.currentSequenceNumber=e}}class Jv{constructor(e){this.persistence=e,this.Bs=new VS,this.Ls=null}static qs(e){return new Jv(e)}get Us(){if(this.Ls)return this.Ls;throw me()}addReference(e,n,r){return this.Bs.addReference(r,n),this.Us.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Bs.removeReference(r,n),this.Us.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Us.add(n.toString()),q.resolve()}removeTarget(e,n){this.Bs.ds(n.targetId).forEach(i=>this.Us.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Us.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ms(){this.Ls=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Us,r=>{const i=ce.fromPath(r);return this.Ks(e,i).next(s=>{s||n.removeEntry(i,Ce.min())})}).next(()=>(this.Ls=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ks(e,n).next(r=>{r?this.Us.delete(n.toString()):this.Us.add(n.toString())})}ks(e){return 0}Ks(e,n){return q.or([()=>q.resolve(this.Bs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Fs(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SQ{constructor(e){this.Tt=e}F(e,n,r,i){const s=new Wv("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zk,{unique:!0}),a.createObjectStore("documentMutations")}(e),ax(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=q.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),ax(e)),o=o.next(()=>function(a){const u=a.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ce.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(a,u){return u.store("mutations").W().next(h=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zk,{unique:!0});const p=u.store("mutations"),v=h.map(w=>p.put(w));return q.waitFor(v)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Gs(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(s)))),r<7&&i>=7&&(o=o.next(()=>this.js(s))),r<8&&i>=8&&(o=o.next(()=>this.zs(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Ws(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(a){const u=a.createObjectStore("documentOverlays",{keyPath:G4});u.createIndex("collectionPathOverlayIndex",Q4,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Y4,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const u=a.createObjectStore("remoteDocumentsV14",{keyPath:F4});u.createIndex("documentKeyIndex",$4),u.createIndex("collectionGroupIndex",U4)}(e)).next(()=>this.Hs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.Js(e,s))),r<15&&i>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:z4}).createIndex("sequenceNumberIndex",W4,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:H4}).createIndex("documentKeyIndex",K4,{unique:!1})}(e))),o}Qs(e){let n=0;return e.store("remoteDocuments").X((r,i)=>{n+=Ny(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>q.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>q.forEach(a,u=>{Te(u.userId===s.userId);const h=ml(this.Tt,u);return JL(e,s.userId,h).next(()=>{})}))}))}js(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((o,a)=>{const u=new et(o),h=function(p){return[0,_r(p)]}(u);s.push(n.get(h).next(p=>p?q.resolve():(v=>n.put({targetId:0,path:_r(v),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>q.waitFor(s))})}zs(e,n){e.createObjectStore("collectionParents",{keyPath:q4});const r=n.store("collectionParents"),i=new US,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:_r(u)})}};return n.store("remoteDocuments").X({Z:!0},(o,a)=>{const u=new et(o);return s(u.popLast())}).next(()=>n.store("documentMutations").X({Z:!0},([o,a,u],h)=>{const p=ys(a);return s(p.popLast())}))}Ws(e){const n=e.store("targets");return n.X((r,i)=>{const s=bd(i),o=QL(this.Tt,s);return n.put(o)})}Hs(e,n){const r=n.store("remoteDocuments"),i=[];return r.X((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(h=o,h.document?new ce(et.fromString(h.document.name).popFirst(5)):h.noDocument?ce.fromSegments(h.noDocument.path):h.unknownDocument?ce.fromSegments(h.unknownDocument.path):me()).path.toArray();var h;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const p={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(p))}).next(()=>q.waitFor(i))}Js(e,n){const r=n.store("mutations"),i=nM(this.Tt),s=new iM(Jv.qs,this.Tt.oe);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var h;let p=(h=a.get(u.userId))!==null&&h!==void 0?h:Ve();ml(this.Tt,u).keys().forEach(v=>p=p.add(v)),a.set(u.userId,p)}),q.forEach(a,(u,h)=>{const p=new wn(h),v=Yv.ue(this.Tt,p),w=s.getIndexManager(p),b=Xv.ue(p,this.Tt,w,s.referenceDelegate);return new rM(i,b,v,w).recalculateAndSaveOverlaysForDocumentKeys(new qE(n,Rr.at),u).next()})})}}function ax(t){t.createObjectStore("targetDocuments",{keyPath:B4}).createIndex("documentTargetsIndex",j4,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",V4,{unique:!0}),t.createObjectStore("targetGlobal")}const Lw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class BS{constructor(e,n,r,i,s,o,a,u,h,p,v=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ys=s,this.window=o,this.document=a,this.Zs=h,this.Xs=p,this.ti=v,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=w=>Promise.resolve(),!BS.C())throw new ee(H.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fQ(this,i),this.oi=n+"main",this.Tt=new GL(u),this.ui=new Bi(this.oi,this.ti,new SQ(this.Tt)),this.Ns=new uQ(this.referenceDelegate,this.Tt),this.remoteDocumentCache=nM(this.Tt),this.$s=new eQ,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,p===!1&&Xt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ee(H.FAILED_PRECONDITION,Lw);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Rr(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){return this.ri=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget(async()=>{this.started&&await this.ai()}))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Kg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(n=>{n||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(n=>this.isPrimary&&!n?this.mi(e).next(()=>!1):!!n&&this.gi(e).next(()=>!0))).catch(e=>{if(Va(e))return te("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return te("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return md(e).get("owner").next(n=>q.resolve(this.yi(n)))}pi(e){return Kg(e).delete(this.clientId)}async Ii(){if(this.isPrimary&&!this.Ti(this.ii,18e5)){this.ii=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Nn(n,"clientMetadata");return r.W().next(i=>{const s=this.Ei(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return q.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.ci)for(const n of e)this.ci.removeItem(this.Ai(n.clientId))}}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?q.resolve(!0):md(e).get("owner").next(n=>{if(n!==null&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)){if(this.yi(n)&&this.networkEnabled)return!0;if(!this.yi(n)){if(!n.allowTabSynchronization)throw new ee(H.FAILED_PRECONDITION,Lw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Kg(e).W().next(r=>this.Ei(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&te("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.xs=!1,this.Pi(),this.si&&(this.si.cancel(),this.si=null),this.vi(),this.bi(),await this.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new qE(e,Rr.at);return this.mi(n).next(()=>this.pi(n))}),this.ui.close(),this.Vi()}Ei(e,n){return e.filter(r=>this.Ti(r.updateTimeMs,n)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>Kg(e).W().next(n=>this.Ei(n,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,n){return Xv.ue(e,this.Tt,n,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lQ(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return Yv.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,n,r){te("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(o=this.ti)===15?J4:o===14?KL:o===13?HL:o===12?X4:o===11?WL:void me();var o;let a;return this.ui.runTransaction(e,i,s,u=>(a=new qE(u,this.Cs?this.Cs.next():Rr.at),n==="readwrite-primary"?this._i(a).next(h=>!!h||this.wi(a)).next(h=>{if(!h)throw Xt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new ee(H.FAILED_PRECONDITION,ZO);return r(a)}).next(h=>this.gi(a).next(()=>h)):this.Di(a).next(()=>r(a)))).then(u=>(a.raiseOnCommittedEvent(),u))}Di(e){return md(e).get("owner").next(n=>{if(n!==null&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)&&!this.yi(n)&&!(this.Xs||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ee(H.FAILED_PRECONDITION,Lw)})}gi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return md(e).put("owner",n)}static C(){return Bi.C()}mi(e){const n=md(e);return n.get("owner").next(r=>this.yi(r)?(te("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):q.resolve())}Ti(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Xt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}hi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground=this.document.visibilityState==="visible")}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ei=()=>{this.Pi();const n=/(?:Version|Mobile)\/1[456]/;g2()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var n;try{const r=((n=this.ci)===null||n===void 0?void 0:n.getItem(this.Ai(e)))!==null;return te("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Xt("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function md(t){return Nn(t,"owner")}function Kg(t){return Nn(t,"clientMetadata")}function jS(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ci=r,this.xi=i}static Ni(e,n){let r=Ve(),i=Ve();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new qS(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.ki=!1}initialize(e,n){this.$i=e,this.indexManager=n,this.ki=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Mi(e,n).next(s=>s||this.Oi(e,n,i,r)).next(s=>s||this.Fi(e,n))}Mi(e,n){if(Ok(n))return q.resolve(null);let r=Vr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=by(n,null,"F"),r=Vr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ve(...s);return this.$i.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Bi(n,a);return this.Li(n,h,o,u.readTime)?this.Mi(e,by(n,null,"F")):this.qi(e,h,n,u)}))})))}Oi(e,n,r,i){return Ok(n)||i.isEqual(Ce.min())?this.Fi(e,n):this.$i.getDocuments(e,r).next(s=>{const o=this.Bi(n,s);return this.Li(n,o,r,i)?this.Fi(e,n):(PE()<=Ze.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),VE(n)),this.qi(e,o,n,XO(i,-1)))})}Bi(e,n){let r=new yt(mL(e));return n.forEach((i,s)=>{Ap(e,s)&&(r=r.add(s))}),r}Li(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Fi(e,n){return PE()<=Ze.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",VE(n)),this.$i.getDocumentsMatchingQuery(e,n,ni.min())}qi(e,n,r,i){return this.$i.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CQ{constructor(e,n,r,i){this.persistence=e,this.Ui=n,this.Tt=i,this.Ki=new Ht(Ue),this.Gi=new Ba(s=>Zl(s),xp),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rM(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ki))}}function oM(t,e,n,r){return new CQ(t,e,n,r)}async function aM(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.zi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Ve();for(const h of i){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of s){a.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Wi:h,removedBatchIds:o,addedBatchIds:a}))})})}function bQ(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ji.newChangeBuffer({trackRemovals:!0});return function(o,a,u,h){const p=u.batch,v=p.keys();let w=q.resolve();return v.forEach(b=>{w=w.next(()=>h.getEntry(a,b)).next(k=>{const R=u.docVersions.get(b);Te(R!==null),k.version.compareTo(R)<0&&(p.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),h.addEntry(k)))})}),w.next(()=>o.mutationQueue.removeMutationBatch(a,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Ve();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function lM(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ns.getLastRemoteSnapshotVersion(n))}function kQ(t,e){const n=fe(t),r=e.snapshotVersion;let i=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ji.newChangeBuffer({trackRemovals:!0});i=n.Ki;const a=[];e.targetChanges.forEach((p,v)=>{const w=i.get(v);if(!w)return;a.push(n.Ns.removeMatchingKeys(s,p.removedDocuments,v).next(()=>n.Ns.addMatchingKeys(s,p.addedDocuments,v)));let b=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(v)?b=b.withResumeToken(cn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),i=i.insert(v,b),function(k,R,J){return k.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0}(w,b,p)&&a.push(n.Ns.updateTargetData(s,b))});let u=Lr(),h=Ve();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),a.push(uM(s,o,e.documentUpdates).next(p=>{u=p.Hi,h=p.Ji})),!r.isEqual(Ce.min())){const p=n.Ns.getLastRemoteSnapshotVersion(s).next(v=>n.Ns.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(p)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ki=i,s))}function uM(t,e,n){let r=Ve(),i=Ve();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Lr();return n.forEach((a,u)=>{const h=s.get(a);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Ce.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",u.version)}),{Hi:o,Ji:i}})}function xQ(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qc(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ns.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):n.Ns.allocateTargetId(r).next(o=>(i=new da(e,o,0,r.currentSequenceNumber),n.Ns.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ki.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(r.targetId,r),n.Gi.set(e,r.targetId)),r})}async function Yc(t,e,n){const r=fe(t),i=r.Ki.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Va(o))throw o;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(i.target)}function Ay(t,e,n){const r=fe(t);let i=Ce.min(),s=Ve();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,h){const p=fe(a),v=p.Gi.get(h);return v!==void 0?q.resolve(p.Ki.get(v)):p.Ns.getTargetData(u,h)}(r,o,Vr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Ui.getDocumentsMatchingQuery(o,e,n?i:Ce.min(),n?s:Ve())).next(a=>(dM(r,gL(e),a),{documents:a,Yi:s})))}function cM(t,e){const n=fe(t),r=fe(n.Ns),i=n.Ki.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ie(s,e).next(o=>o?o.target:null))}function hM(t,e){const n=fe(t),r=n.Qi.get(e)||Ce.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ji.getAllFromCollectionGroup(i,e,XO(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(dM(n,e,i),i))}function dM(t,e,n){let r=t.Qi.get(e)||Ce.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Qi.set(e,r)}async function NQ(t,e,n,r){const i=fe(t);let s=Ve(),o=Lr();for(const h of n){const p=e.Zi(h.metadata.name);h.document&&(s=s.add(p));const v=e.Xi(h);v.setReadTime(e.tr(h.metadata.readTime)),o=o.insert(p,v)}const a=i.ji.newChangeBuffer({trackRemovals:!0}),u=await Qc(i,function(h){return Vr(yh(et.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",h=>uM(h,a,o).next(p=>(a.apply(h),p)).next(p=>i.Ns.removeMatchingKeysForTargetId(h,u.targetId).next(()=>i.Ns.addMatchingKeys(h,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,p.Hi,p.Ji)).next(()=>p.Hi)))}async function AQ(t,e,n=Ve()){const r=await Qc(t,Vr(FS(e.bundledQuery))),i=fe(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Zt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$s.saveNamedQuery(s,e);const a=r.withResumeToken(cn.EMPTY_BYTE_STRING,o);return i.Ki=i.Ki.insert(a.targetId,a),i.Ns.updateTargetData(s,a).next(()=>i.Ns.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ns.addMatchingKeys(s,n,r.targetId)).next(()=>i.$s.saveNamedQuery(s,e))})}function lx(t,e){return`firestore_clients_${t}_${e}`}function ux(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Mw(t,e){return`firestore_targets_${t}_${e}`}class Dy{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static er(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new ee(i.error.code,i.error.message))),o?new Dy(e,n,i.state,s):(Xt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gd{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static er(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ee(r.error.code,r.error.message))),s?new Gd(e,r.state,i):(Xt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Py{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static er(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Qv();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=nL(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Py(e,s):(Xt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class zS{constructor(e,n){this.clientId=e,this.onlineState=n}static er(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new zS(n.clientId,n.onlineState):(Xt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class KE{constructor(){this.activeTargetIds=Qv()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fw{constructor(e,n,r,i,s){this.window=e,this.Ys=n,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new Ht(Ue),this.started=!1,this.hr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.lr=lx(this.persistenceKey,this.rr),this.dr=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.ar=this.ar.insert(this.rr,new KE),this._r=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.gr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.yr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Si();for(const r of e){if(r===this.rr)continue;const i=this.getItem(lx(this.persistenceKey,r));if(i){const s=Py.er(r,i);s&&(this.ar=this.ar.insert(s.clientId,s))}}this.pr();const n=this.storage.getItem(this.gr);if(n){const r=this.Ir(n);r&&this.Tr(r)}for(const r of this.hr)this.cr(r);this.hr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let n=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,n,r){this.Ar(e,n,r),this.Rr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Mw(this.persistenceKey,e));if(r){const i=Gd.er(e,r);i&&(n=i.state)}}return this.Pr.sr(e),this.pr(),n}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Mw(this.persistenceKey,e))}updateQueryState(e,n,r){this.vr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Rr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return te("SharedClientState","READ",e,n),n}setItem(e,n){te("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){te("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){const n=e;if(n.storageArea===this.storage){if(te("SharedClientState","EVENT",n.key,n.newValue),n.key===this.lr)return void Xt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this._r.test(n.key)){if(n.newValue==null){const r=this.Sr(n.key);return this.Dr(r,null)}{const r=this.Cr(n.key,n.newValue);if(r)return this.Dr(r.clientId,r)}}else if(this.wr.test(n.key)){if(n.newValue!==null){const r=this.Nr(n.key,n.newValue);if(r)return this.kr(r)}}else if(this.mr.test(n.key)){if(n.newValue!==null){const r=this.$r(n.key,n.newValue);if(r)return this.Mr(r)}}else if(n.key===this.gr){if(n.newValue!==null){const r=this.Ir(n.newValue);if(r)return this.Tr(r)}}else if(n.key===this.dr){const r=function(i){let s=Rr.at;if(i!=null)try{const o=JSON.parse(i);Te(typeof o=="number"),s=o}catch(o){Xt("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);r!==Rr.at&&this.sequenceNumberHandler(r)}else if(n.key===this.yr){const r=this.Or(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Fr(i)))}}}else this.hr.push(n)})}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,n,r){const i=new Dy(this.currentUser,e,n,r),s=ux(this.persistenceKey,this.currentUser,e);this.setItem(s,i.nr())}Rr(e){const n=ux(this.persistenceKey,this.currentUser,e);this.removeItem(n)}br(e){const n={clientId:this.rr,onlineState:e};this.storage.setItem(this.gr,JSON.stringify(n))}vr(e,n,r){const i=Mw(this.persistenceKey,e),s=new Gd(e,n,r);this.setItem(i,s.nr())}Vr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.yr,n)}Sr(e){const n=this._r.exec(e);return n?n[1]:null}Cr(e,n){const r=this.Sr(e);return Py.er(r,n)}Nr(e,n){const r=this.wr.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Dy.er(new wn(s),i,n)}$r(e,n){const r=this.mr.exec(e),i=Number(r[1]);return Gd.er(i,n)}Ir(e){return zS.er(e)}Or(e){return JSON.parse(e)}async kr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Br(e.batchId,e.state,e.error);te("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,n){const r=n?this.ar.insert(e,n):this.ar.remove(e),i=this.Er(this.ar),s=this.Er(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.qr(o,a).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let n=Qv();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class fM{constructor(){this.Ur=new KE,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,n,r){this.Kr[e]=n}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new KE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DQ{Gr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gg=null;function $w(){return Gg===null?Gg=268435456+Math.round(2147483648*Math.random()):Gg++,"0x"+Gg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RQ{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er="WebChannelConnection";class OQ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.co=n+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,n,r,i,s){const o=$w(),a=this.fo(e,n);te("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const u={};return this._o(u,i,s),this.wo(e,a,u,r).then(h=>(te("RestConnection",`Received RPC '${e}' ${o}: `,h),h),h=>{throw jc("RestConnection",`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}mo(e,n,r,i,s,o){return this.lo(e,n,r,i,s)}_o(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+mh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}fo(e,n){const r=PQ[e];return`${this.co}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,n,r,i){const s=$w();return new Promise((o,a)=>{const u=new PG;u.setWithCredentials(!0),u.listenOnce(NG.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Rw.NO_ERROR:const p=u.getResponseJson();te(er,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case Rw.TIMEOUT:te(er,`RPC '${e}' ${s} timed out`),a(new ee(H.DEADLINE_EXCEEDED,"Request time out"));break;case Rw.HTTP_ERROR:const v=u.getStatus();if(te(er,`RPC '${e}' ${s} failed with status:`,v,"response text:",u.getResponseText()),v>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);const b=w==null?void 0:w.error;if(b&&b.status&&b.message){const k=function(R){const J=R.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(J)>=0?J:H.UNKNOWN}(b.status);a(new ee(k,b.message))}else a(new ee(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ee(H.UNAVAILABLE,"Connection failed."));break;default:me()}}finally{te(er,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);te(er,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}yo(e,n,r){const i=$w(),s=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=kG(),a=xG(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new DG({})),this._o(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");te(er,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=o.createWebChannel(h,u);let v=!1,w=!1;const b=new RQ({Yr:R=>{w?te(er,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(v||(te(er,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),te(er,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Zr:()=>p.close()}),k=(R,J,N)=>{R.listen(J,D=>{try{N(D)}catch(M){setTimeout(()=>{throw M},0)}})};return k(p,jg.EventType.OPEN,()=>{w||te(er,`RPC '${e}' stream ${i} transport opened.`)}),k(p,jg.EventType.CLOSE,()=>{w||(w=!0,te(er,`RPC '${e}' stream ${i} transport closed`),b.oo())}),k(p,jg.EventType.ERROR,R=>{w||(w=!0,jc(er,`RPC '${e}' stream ${i} transport errored:`,R),b.oo(new ee(H.UNAVAILABLE,"The operation could not be completed")))}),k(p,jg.EventType.MESSAGE,R=>{var J;if(!w){const N=R.data[0];Te(!!N);const D=N,M=D.error||((J=D[0])===null||J===void 0?void 0:J.error);if(M){te(er,`RPC '${e}' stream ${i} received error:`,M);const Q=M.status;let re=function(ue){const he=tn[ue];if(he!==void 0)return kL(he)}(Q),m=M.message;re===void 0&&(re=H.INTERNAL,m="Unknown error status: "+Q+" with message "+M.message),w=!0,b.oo(new ee(re,m)),p.close()}else te(er,`RPC '${e}' stream ${i} received:`,N),b.uo(N)}}),k(a,AG.STAT_EVENT,R=>{R.stat===wk.PROXY?te(er,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===wk.NOPROXY&&te(er,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.ro()},0),b}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(){return typeof window<"u"?window:null}function Im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t){return new C4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ys=e,this.timerId=n,this.po=r,this.Io=i,this.To=s,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const n=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,n-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){this.Ao!==null&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){this.Ao!==null&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n,r,i,s,o,a,u){this.Ys=e,this.So=r,this.Do=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new WS(e,n)}$o(){return this.state===1||this.state===5||this.Mo()}Mo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.$o()&&await this.close(0)}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&this.xo===null&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}async Lo(){if(this.Mo())return this.close(0)}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}async close(e,n){this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,e!==4?this.ko.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Xt(n.toString()),Xt("Using maximum backoff delay to prevent overloading the backend."),this.ko.Po()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Go(),this.stream.close(),this.stream=null),this.state=e,await this.listener.no(n)}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Co===n&&this.jo(r,i)},r=>{e(()=>{const i=new ee(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(i)})})}jo(e,n){const r=this.Qo(this.Co);this.stream=this.Wo(e,n),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(i=>{r(()=>this.zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){this.state=5,this.ko.vo(async()=>{this.state=0,this.start()})}zo(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return n=>{this.Ys.enqueueAndForget(()=>this.Co===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LQ extends gM{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.Tt=s}Wo(e,n){return this.connection.yo("Listen",e,n)}onMessage(e){this.ko.reset();const n=x4(this.Tt,e),r=function(i){if(!("targetChange"in i))return Ce.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Ce.min():s.readTime?Zt(s.readTime):Ce.min()}(e);return this.listener.Ho(n,r)}Jo(e){const n={};n.database=zf(this.Tt),n.addTarget=function(i,s){let o;const a=s.target;return o=Sy(a)?{documents:$L(i,a)}:{query:UL(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=RL(i,s.resumeToken):s.snapshotVersion.compareTo(Ce.min())>0&&(o.readTime=Gc(i,s.snapshotVersion.toTimestamp())),o}(this.Tt,e);const r=A4(this.Tt,e);r&&(n.labels=r),this.qo(n)}Yo(e){const n={};n.database=zf(this.Tt),n.removeTarget=e,this.qo(n)}}class MQ extends gM{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.Tt=s,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,n){return this.connection.yo("Write",e,n)}onMessage(e){if(Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const n=N4(e.writeResults,e.commitTime),r=Zt(e.commitTime);return this.listener.eu(r,n)}return Te(!e.writeResults||e.writeResults.length===0),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=zf(this.Tt),this.qo(e)}tu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Wf(this.Tt,r))};this.qo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FQ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new ee(H.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,n,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.lo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ee(H.UNKNOWN,i.toString())})}mo(e,n,r,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.mo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee(H.UNKNOWN,s.toString())})}terminate(){this.iu=!0}}class $Q{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){this.ou===0&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){this.state==="Online"?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,e==="Online"&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Xt(n),this.cu=!1):te("OnlineStateTracker",n)}du(){this.uu!==null&&(this.uu.cancel(),this.uu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UQ{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=s,this.yu.Gr(o=>{r.enqueueAndForget(async()=>{ja(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(a){const u=fe(a);u.mu.add(4),await wh(u),u.pu.set("Unknown"),u.mu.delete(4),await Lp(u)}(this))})}),this.pu=new $Q(r,i)}}async function Lp(t){if(ja(t))for(const e of t.gu)await e(!0)}async function wh(t){for(const e of t.gu)await e(!1)}function Zv(t,e){const n=fe(t);n.wu.has(e.targetId)||(n.wu.set(e.targetId,e),GS(n)?KS(n):Ih(n).Mo()&&HS(n,e))}function Hf(t,e){const n=fe(t),r=Ih(n);n.wu.delete(e),r.Mo()&&mM(n,e),n.wu.size===0&&(r.Mo()?r.Bo():ja(n)&&n.pu.set("Unknown"))}function HS(t,e){t.Iu.Ot(e.targetId),Ih(t).Jo(e)}function mM(t,e){t.Iu.Ot(e),Ih(t).Yo(e)}function KS(t){t.Iu=new E4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>t.wu.get(e)||null}),Ih(t).start(),t.pu.au()}function GS(t){return ja(t)&&!Ih(t).$o()&&t.wu.size>0}function ja(t){return fe(t).mu.size===0}function yM(t){t.Iu=void 0}async function VQ(t){t.wu.forEach((e,n)=>{HS(t,e)})}async function BQ(t,e){yM(t),GS(t)?(t.pu.fu(e),KS(t)):t.pu.set("Unknown")}async function jQ(t,e,n){if(t.pu.set("Online"),e instanceof PL&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.wu.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.wu.delete(o),r.Iu.removeTarget(o))}(t,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ry(t,r)}else if(e instanceof wm?t.Iu.Qt(e):e instanceof DL?t.Iu.Zt(e):t.Iu.Wt(e),!n.isEqual(Ce.min()))try{const r=await lM(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.Iu.ee(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const h=i.wu.get(u);h&&i.wu.set(u,h.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const u=i.wu.get(a);if(!u)return;i.wu.set(a,u.withResumeToken(cn.EMPTY_BYTE_STRING,u.snapshotVersion)),mM(i,a);const h=new da(u.target,a,1,u.sequenceNumber);HS(i,h)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){te("RemoteStore","Failed to raise snapshot:",r),await Ry(t,r)}}async function Ry(t,e,n){if(!Va(e))throw e;t.mu.add(1),await wh(t),t.pu.set("Offline"),n||(n=()=>lM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),t.mu.delete(1),await Lp(t)})}function vM(t,e){return e().catch(n=>Ry(t,n,e))}async function Eh(t){const e=fe(t),n=xa(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;qQ(e);)try{const i=await xQ(e.localStore,r);if(i===null){e._u.length===0&&n.Bo();break}r=i.batchId,zQ(e,i)}catch(i){await Ry(e,i)}_M(e)&&wM(e)}function qQ(t){return ja(t)&&t._u.length<10}function zQ(t,e){t._u.push(e);const n=xa(t);n.Mo()&&n.Xo&&n.tu(e.mutations)}function _M(t){return ja(t)&&!xa(t).$o()&&t._u.length>0}function wM(t){xa(t).start()}async function WQ(t){xa(t).su()}async function HQ(t){const e=xa(t);for(const n of t._u)e.tu(n.mutations)}async function KQ(t,e,n){const r=t._u.shift(),i=LS.from(r,e,n);await vM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Eh(t)}async function GQ(t,e){e&&xa(t).Xo&&await async function(n,r){if(i=r.code,bL(i)&&i!==H.ABORTED){const s=n._u.shift();xa(n).Fo(),await vM(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Eh(n)}var i}(t,e),_M(t)&&wM(t)}async function hx(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=ja(n);n.mu.add(3),await wh(n),r&&n.pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.mu.delete(3),await Lp(n)}async function GE(t,e){const n=fe(t);e?(n.mu.delete(2),await Lp(n)):e||(n.mu.add(2),await wh(n),n.pu.set("Unknown"))}function Ih(t){return t.Tu||(t.Tu=function(e,n,r){const i=fe(e);return i.ru(),new LQ(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:VQ.bind(null,t),no:BQ.bind(null,t),Ho:jQ.bind(null,t)}),t.gu.push(async e=>{e?(t.Tu.Fo(),GS(t)?KS(t):t.pu.set("Unknown")):(await t.Tu.stop(),yM(t))})),t.Tu}function xa(t){return t.Eu||(t.Eu=function(e,n,r){const i=fe(e);return i.ru(),new MQ(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:WQ.bind(null,t),no:GQ.bind(null,t),nu:HQ.bind(null,t),eu:KQ.bind(null,t)}),t.gu.push(async e=>{e?(t.Eu.Fo(),await Eh(t)):(await t.Eu.stop(),t._u.length>0&&(te("RemoteStore",`Stopping write stream with ${t._u.length} pending writes`),t._u=[]))})),t.Eu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Tn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new QS(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Th(t,e){if(Xt("AsyncQueue",`${e}: ${t}`),Va(t))return new ee(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=Cd(),this.sortedSet=new Ht(this.comparator)}static emptySet(e){return new Cc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Cc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Cc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.Au=new Ht(ce.comparator)}track(e){const n=e.doc.key,r=this.Au.get(n);r?e.type!==0&&r.type===3?this.Au=this.Au.insert(n,e):e.type===3&&r.type!==1?this.Au=this.Au.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Au=this.Au.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Au=this.Au.remove(n):e.type===1&&r.type===2?this.Au=this.Au.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):me():this.Au=this.Au.insert(n,e)}Ru(){const e=[];return this.Au.inorderTraversal((n,r)=>{e.push(r)}),e}}class Xc{constructor(e,n,r,i,s,o,a,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Xc(e,n,Cc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Np(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QQ{constructor(){this.Pu=void 0,this.listeners=[]}}class YQ{constructor(){this.queries=new Ba(e=>pL(e),Np),this.onlineState="Unknown",this.vu=new Set}}async function YS(t,e){const n=fe(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new QQ),i)try{s.Pu=await n.onListen(r)}catch(o){const a=Th(o,`Initialization of query '${VE(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.bu(n.onlineState),s.Pu&&e.Vu(s.Pu)&&JS(n)}async function XS(t,e){const n=fe(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function XQ(t,e){const n=fe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.Vu(i)&&(r=!0);o.Pu=i}}r&&JS(n)}function JQ(t,e,n){const r=fe(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function JS(t){t.vu.forEach(e=>{e.next()})}class ZS{constructor(e,n,r){this.query=e,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Xc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Du?this.xu(e)&&(this.Su.next(e),n=!0):this.Nu(e,this.onlineState)&&(this.ku(e),n=!0),this.Cu=e,n}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),n=!0),n}Nu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.$u||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}xu(e){if(e.docChanges.length>0)return!0;const n=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ku(e){e=Xc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQ{constructor(e,n){this.Mu=e,this.byteLength=n}Ou(){return"metadata"in this.Mu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.Tt=e}Zi(e){return Es(this.Tt,e)}Xi(e){return e.metadata.exists?FL(this.Tt,e.document,!1):kt.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Zt(e)}}class e6{constructor(e,n,r){this.Fu=e,this.localStore=n,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=EM(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++n;const r=et.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Lu(e){const n=new Map,r=new fx(this.Tt);for(const i of e)if(i.metadata.queries){const s=r.Zi(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Ve()).add(s);n.set(o,a)}}return n}async complete(){const e=await NQ(this.localStore,new fx(this.Tt),this.documents,this.Fu.id),n=this.Lu(this.documents);for(const r of this.queries)await AQ(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,qu:this.collectionGroups,Uu:e}}}function EM(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.key=e}}class TM{constructor(e){this.key=e}}class SM{constructor(e,n){this.query=e,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Ve(),this.mutatedKeys=Ve(),this.ju=mL(e),this.zu=new Cc(this.ju)}get Wu(){return this.Ku}Hu(e,n){const r=n?n.Ju:new dx,i=n?n.zu:this.zu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,v)=>{const w=i.get(p),b=Ap(this.query,v)?v:null,k=!!w&&this.mutatedKeys.has(w.key),R=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let J=!1;w&&b?w.data.isEqual(b.data)?k!==R&&(r.track({type:3,doc:b}),J=!0):this.Yu(w,b)||(r.track({type:2,doc:b}),J=!0,(u&&this.ju(b,u)>0||h&&this.ju(b,h)<0)&&(a=!0)):!w&&b?(r.track({type:0,doc:b}),J=!0):w&&!b&&(r.track({type:1,doc:w}),J=!0,(u||h)&&(a=!0)),J&&(b?(o=o.add(b),s=R?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{zu:o,Ju:r,Li:a,mutatedKeys:s}}Yu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const s=e.Ju.Ru();s.sort((h,p)=>function(v,w){const b=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me()}};return b(v)-b(w)}(h.type,p.type)||this.ju(h.doc,p.doc)),this.Zu(r);const o=n?this.Xu():[],a=this.Qu.size===0&&this.current?1:0,u=a!==this.Gu;return this.Gu=a,s.length!==0||u?{snapshot:new Xc(this.query,e.zu,i,s,e.mutatedKeys,a===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:o}:{tc:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new dx,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(n=>this.Ku=this.Ku.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ku=this.Ku.delete(n)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=Ve(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const n=[];return e.forEach(r=>{this.Qu.has(r)||n.push(new TM(r))}),this.Qu.forEach(r=>{e.has(r)||n.push(new IM(r))}),n}nc(e){this.Ku=e.Yi,this.Qu=Ve();const n=this.Hu(e.documents);return this.applyChanges(n,!0)}sc(){return Xc.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,this.Gu===0,this.hasCachedResults)}}class t6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class n6{constructor(e){this.key=e,this.ic=!1}}class r6{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.rc={},this.oc=new Ba(a=>pL(a),Np),this.uc=new Map,this.cc=new Set,this.ac=new Ht(ce.comparator),this.hc=new Map,this.lc=new VS,this.fc={},this.dc=new Map,this._c=iu.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return this.wc===!0}}async function i6(t,e){const n=iC(t);let r,i;const s=n.oc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.sc();else{const o=await Qc(n.localStore,Vr(e));n.isPrimaryClient&&Zv(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await eC(n,e,r,a==="current",o.resumeToken)}return i}async function eC(t,e,n,r,i){t.mc=(v,w,b)=>async function(k,R,J,N){let D=R.view.Hu(J);D.Li&&(D=await Ay(k.localStore,R.query,!1).then(({documents:re})=>R.view.Hu(re,D)));const M=N&&N.targetChanges.get(R.targetId),Q=R.view.applyChanges(D,k.isPrimaryClient,M);return QE(k,R.targetId,Q.tc),Q.snapshot}(t,v,w,b);const s=await Ay(t.localStore,e,!0),o=new SM(e,s.Yi),a=o.Hu(s.documents),u=Rp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(a,t.isPrimaryClient,u);QE(t,n,h.tc);const p=new t6(e,n,o);return t.oc.set(e,p),t.uc.has(n)?t.uc.get(n).push(e):t.uc.set(n,[e]),h.snapshot}async function s6(t,e){const n=fe(t),r=n.oc.get(e),i=n.uc.get(r.targetId);if(i.length>1)return n.uc.set(r.targetId,i.filter(s=>!Np(s,e))),void n.oc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Yc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Hf(n.remoteStore,r.targetId),Jc(n,r.targetId)}).catch(Ua)):(Jc(n,r.targetId),await Yc(n.localStore,r.targetId,!0))}async function o6(t,e,n){const r=sC(t);try{const i=await function(s,o){const a=fe(s),u=Ot.now(),h=o.reduce((w,b)=>w.add(b.key),Ve());let p,v;return a.persistence.runTransaction("Locally write mutations","readwrite",w=>{let b=Lr(),k=Ve();return a.ji.getEntries(w,h).next(R=>{b=R,b.forEach((J,N)=>{N.isValidDocument()||(k=k.add(J))})}).next(()=>a.localDocuments.getOverlayedDocuments(w,b)).next(R=>{p=R;const J=[];for(const N of o){const D=g4(N,p.get(N.key).overlayedDocument);D!=null&&J.push(new po(N.key,D,dL(D.value.mapValue),Rt.exists(!0)))}return a.mutationQueue.addMutationBatch(w,u,J,o)}).next(R=>{v=R;const J=R.applyToLocalDocumentSet(p,k);return a.documentOverlayCache.saveOverlays(w,R.batchId,J)})}).then(()=>({batchId:v.batchId,changes:NL(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.fc[s.currentUser.toKey()];u||(u=new Ht(Ue)),u=u.insert(o,a),s.fc[s.currentUser.toKey()]=u}(r,i.batchId,n),await go(r,i.changes),await Eh(r.remoteStore)}catch(i){const s=Th(i,"Failed to persist write");n.reject(s)}}async function CM(t,e){const n=fe(t);try{const r=await kQ(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.hc.get(s);o&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ic=!0:i.modifiedDocuments.size>0?Te(o.ic):i.removedDocuments.size>0&&(Te(o.ic),o.ic=!1))}),await go(n,r,e)}catch(r){await Ua(r)}}function px(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.oc.forEach((s,o)=>{const a=o.view.bu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=fe(s);a.onlineState=o;let u=!1;a.queries.forEach((h,p)=>{for(const v of p.listeners)v.bu(o)&&(u=!0)}),u&&JS(a)}(r.eventManager,e),i.length&&r.rc.Ho(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function a6(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.hc.get(e),s=i&&i.key;if(s){let o=new Ht(ce.comparator);o=o.insert(s,kt.newNoDocument(s,Ce.min()));const a=Ve().add(s),u=new Pp(Ce.min(),new Map,new yt(Ue),o,a);await CM(r,u),r.ac=r.ac.remove(s),r.hc.delete(e),rC(r)}else await Yc(r.localStore,e,!1).then(()=>Jc(r,e,n)).catch(Ua)}async function l6(t,e){const n=fe(t),r=e.batch.batchId;try{const i=await bQ(n.localStore,e);nC(n,r,null),tC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await go(n,i)}catch(i){await Ua(i)}}async function u6(t,e,n){const r=fe(t);try{const i=await function(s,o){const a=fe(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return a.mutationQueue.lookupMutationBatch(u,o).next(p=>(Te(p!==null),h=p.keys(),a.mutationQueue.removeMutationBatch(u,p))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,h,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>a.localDocuments.getDocuments(u,h))})}(r.localStore,e);nC(r,e,n),tC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await go(r,i)}catch(i){await Ua(i)}}async function c6(t,e){const n=fe(t);ja(n.remoteStore)||te("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const o=fe(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const i=n.dc.get(r)||[];i.push(e),n.dc.set(r,i)}catch(r){const i=Th(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function tC(t,e){(t.dc.get(e)||[]).forEach(n=>{n.resolve()}),t.dc.delete(e)}function nC(t,e,n){const r=fe(t);let i=r.fc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.fc[r.currentUser.toKey()]=i}}function Jc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.uc.get(e))t.oc.delete(r),n&&t.rc.gc(r,n);t.uc.delete(e),t.isPrimaryClient&&t.lc.ds(e).forEach(r=>{t.lc.containsKey(r)||bM(t,r)})}function bM(t,e){t.cc.delete(e.path.canonicalString());const n=t.ac.get(e);n!==null&&(Hf(t.remoteStore,n),t.ac=t.ac.remove(e),t.hc.delete(n),rC(t))}function QE(t,e,n){for(const r of n)r instanceof IM?(t.lc.addReference(r.key,e),h6(t,r)):r instanceof TM?(te("SyncEngine","Document no longer in limbo: "+r.key),t.lc.removeReference(r.key,e),t.lc.containsKey(r.key)||bM(t,r.key)):me()}function h6(t,e){const n=e.key,r=n.path.canonicalString();t.ac.get(n)||t.cc.has(r)||(te("SyncEngine","New document in limbo: "+n),t.cc.add(r),rC(t))}function rC(t){for(;t.cc.size>0&&t.ac.size<t.maxConcurrentLimboResolutions;){const e=t.cc.values().next().value;t.cc.delete(e);const n=new ce(et.fromString(e)),r=t._c.next();t.hc.set(r,new n6(n)),t.ac=t.ac.insert(n,r),Zv(t.remoteStore,new da(Vr(yh(n.path)),r,2,Rr.at))}}async function go(t,e,n){const r=fe(t),i=[],s=[],o=[];r.oc.isEmpty()||(r.oc.forEach((a,u)=>{o.push(r.mc(u,e,n).then(h=>{if((h||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,h!=null&&h.fromCache?"not-current":"current"),h){i.push(h);const p=qS.Ni(u.targetId,h);s.push(p)}}))}),await Promise.all(o),r.rc.Ho(i),await async function(a,u){const h=fe(a);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>q.forEach(u,v=>q.forEach(v.Ci,w=>h.persistence.referenceDelegate.addReference(p,v.targetId,w)).next(()=>q.forEach(v.xi,w=>h.persistence.referenceDelegate.removeReference(p,v.targetId,w)))))}catch(p){if(!Va(p))throw p;te("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const v=p.targetId;if(!p.fromCache){const w=h.Ki.get(v),b=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(b);h.Ki=h.Ki.insert(v,k)}}}(r.localStore,s))}async function d6(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=await aM(n.localStore,e);n.currentUser=e,function(i,s){i.dc.forEach(o=>{o.forEach(a=>{a.reject(new ee(H.CANCELLED,s))})}),i.dc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await go(n,r.Wi)}}function f6(t,e){const n=fe(t),r=n.hc.get(e);if(r&&r.ic)return Ve().add(r.key);{let i=Ve();const s=n.uc.get(e);if(!s)return i;for(const o of s){const a=n.oc.get(o);i=i.unionWith(a.view.Wu)}return i}}async function p6(t,e){const n=fe(t),r=await Ay(n.localStore,e.query,!0),i=e.view.nc(r);return n.isPrimaryClient&&QE(n,e.targetId,i.tc),i}async function g6(t,e){const n=fe(t);return hM(n.localStore,e).then(r=>go(n,r))}async function m6(t,e,n,r){const i=fe(t),s=await function(o,a){const u=fe(o),h=fe(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.An(p,a).next(v=>v?u.localDocuments.getDocuments(p,v):q.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Eh(i.remoteStore):n==="acknowledged"||n==="rejected"?(nC(i,e,r||null),tC(i,e),function(o,a){fe(fe(o).mutationQueue).Pn(a)}(i.localStore,e)):me(),await go(i,s)):te("SyncEngine","Cannot apply mutation batch with id: "+e)}async function y6(t,e){const n=fe(t);if(iC(n),sC(n),e===!0&&n.wc!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await gx(n,r.toArray());n.wc=!0,await GE(n.remoteStore,!0);for(const s of i)Zv(n.remoteStore,s)}else if(e===!1&&n.wc!==!1){const r=[];let i=Promise.resolve();n.uc.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Jc(n,o),Yc(n.localStore,o,!0))),Hf(n.remoteStore,o)}),await i,await gx(n,r),function(s){const o=fe(s);o.hc.forEach((a,u)=>{Hf(o.remoteStore,u)}),o.lc._s(),o.hc=new Map,o.ac=new Ht(ce.comparator)}(n),n.wc=!1,await GE(n.remoteStore,!1)}}async function gx(t,e,n){const r=fe(t),i=[],s=[];for(const o of e){let a;const u=r.uc.get(o);if(u&&u.length!==0){a=await Qc(r.localStore,Vr(u[0]));for(const h of u){const p=r.oc.get(h),v=await p6(r,p);v.snapshot&&s.push(v.snapshot)}}else{const h=await cM(r.localStore,o);a=await Qc(r.localStore,h),await eC(r,kM(h),o,!1,a.resumeToken)}i.push(a)}return r.rc.Ho(s),i}function kM(t){return fL(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function v6(t){const e=fe(t);return fe(fe(e.localStore).persistence).Si()}async function _6(t,e,n,r){const i=fe(t);if(i.wc)return void te("SyncEngine","Ignoring unexpected query state notification.");const s=i.uc.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await hM(i.localStore,gL(s[0])),a=Pp.createSynthesizedRemoteEventForCurrentChange(e,n==="current",cn.EMPTY_BYTE_STRING);await go(i,o,a);break}case"rejected":await Yc(i.localStore,e,!0),Jc(i,e,r);break;default:me()}}async function w6(t,e,n){const r=iC(t);if(r.wc){for(const i of e){if(r.uc.has(i)){te("SyncEngine","Adding an already active target "+i);continue}const s=await cM(r.localStore,i),o=await Qc(r.localStore,s);await eC(r,kM(s),o.targetId,!1,o.resumeToken),Zv(r.remoteStore,o)}for(const i of n)r.uc.has(i)&&await Yc(r.localStore,i,!1).then(()=>{Hf(r.remoteStore,i),Jc(r,i)}).catch(Ua)}}function iC(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=CM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a6.bind(null,e),e.rc.Ho=XQ.bind(null,e.eventManager),e.rc.gc=JQ.bind(null,e.eventManager),e}function sC(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u6.bind(null,e),e}function E6(t,e,n){const r=fe(t);(async function(i,s,o){try{const a=await s.getMetadata();if(await function(v,w){const b=fe(v),k=Zt(w.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",R=>b.$s.getBundleMetadata(R,w.id)).then(R=>!!R&&R.createTime.compareTo(k)>=0)}(i.localStore,a))return await s.close(),o._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(EM(a));const u=new e6(a,i.localStore,s.Tt);let h=await s.yc();for(;h;){const v=await u.Bu(h);v&&o._updateProgress(v),h=await s.yc()}const p=await u.complete();return await go(i,p.Uu,void 0),await function(v,w){const b=fe(v);return b.persistence.runTransaction("Save bundle","readwrite",k=>b.$s.saveBundleMetadata(k,w))}(i.localStore,a),o._completeWith(p.progress),Promise.resolve(p.qu)}catch(a){return jc("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class xM{constructor(){this.synchronizeTabs=!1}async initialize(e){this.Tt=Op(e.databaseInfo.databaseId),this.sharedClientState=this.Ic(e),this.persistence=this.Tc(e),await this.persistence.start(),this.localStore=this.Ec(e),this.gcScheduler=this.Ac(e,this.localStore),this.indexBackfillerScheduler=this.Rc(e,this.localStore)}Ac(e,n){return null}Rc(e,n){return null}Ec(e){return oM(this.persistence,new sM,e.initialUser,this.Tt)}Tc(e){return new iM(Jv.qs,this.Tt)}Ic(e){return new fM}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class NM extends xM{constructor(e,n,r){super(),this.Pc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Pc.initialize(this,e),await sC(this.Pc.syncEngine),await Eh(this.Pc.remoteStore),await this.persistence.di(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ec(e){return oM(this.persistence,new sM,e.initialUser,this.Tt)}Ac(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new hQ(r,e.asyncQueue,n)}Rc(e,n){const r=new GG(n,this.persistence);return new KG(e.asyncQueue,r)}Tc(e){const n=jS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?xr.withCacheSize(this.cacheSizeBytes):xr.DEFAULT;return new BS(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,pM(),Im(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new fM}}class I6 extends NM{constructor(e,n){super(e,n,!1),this.Pc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Pc.syncEngine;this.sharedClientState instanceof Fw&&(this.sharedClientState.syncEngine={Br:m6.bind(null,n),Lr:_6.bind(null,n),qr:w6.bind(null,n),Si:v6.bind(null,n),Fr:g6.bind(null,n)},await this.sharedClientState.start()),await this.persistence.di(async r=>{await y6(this.Pc.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Ic(e){const n=pM();if(!Fw.C(n))throw new ee(H.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class oC{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>px(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=d6.bind(null,this.syncEngine),await GE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new YQ}createDatastore(e){const n=Op(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new OQ(i));var i;return function(s,o,a,u){return new FQ(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>px(this.syncEngine,a,0),o=cx.C()?new cx:new DQ,new UQ(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,u,h){const p=new r6(r,i,s,o,a,u);return h&&(p.wc=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=fe(e);te("RemoteStore","RemoteStore shutting down."),n.mu.add(5),await wh(n),n.yu.shutdown(),n.pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Xt("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,n){this.Vc=e,this.Tt=n,this.metadata=new Tn,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}async getMetadata(){return this.metadata.promise}async yc(){return await this.getMetadata(),this.Dc()}async Dc(){const e=await this.Cc();if(e===null)return null;const n=this.Sc.decode(e),r=Number(n);isNaN(r)&&this.xc(`length string (${n}) is not valid number`);const i=await this.Nc(r);return new ZQ(JSON.parse(i),e.length+r)}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Cc(){for(;this.kc()<0&&!await this.$c(););if(this.buffer.length===0)return null;const e=this.kc();e<0&&this.xc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Nc(e){for(;this.buffer.length<e;)await this.$c()&&this.xc("Reached the end of bundle when more is expected.");const n=this.Sc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}async $c(){const e=await this.Vc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ee(H.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const s=fe(r),o=zf(s.Tt)+"/documents",a={documents:i.map(v=>qf(s.Tt,v))},u=await s.mo("BatchGetDocuments",o,a,i.length),h=new Map;u.forEach(v=>{const w=k4(s.Tt,v);h.set(w.key.toString(),w)});const p=[];return i.forEach(v=>{const w=h.get(v.toString());Te(!!w),p.push(w)}),p}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new _h(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=ce.fromPath(r);this.mutations.push(new PS(i,this.precondition(i)))}),await async function(n,r){const i=fe(n),s=zf(i.Tt)+"/documents",o={writes:r.map(a=>Wf(i.Tt,a))};await i.lo("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw me();n=Ce.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ee(H.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ce.min())?Rt.exists(!1):Rt.updateTime(n):Rt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ce.min()))throw new ee(H.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rt.updateTime(n)}return Rt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Mc=r.maxAttempts,this.ko=new WS(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){this.ko.vo(async()=>{const e=new S6(this.datastore),n=this.Fc(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Bc(i)}))}).catch(r=>{this.Bc(r)})})}Fc(e){try{const n=this.updateFunction(e);return!kp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!bL(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=wn.UNAUTHENTICATED,this.clientId=GO.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{te("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(te("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ee(H.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Th(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function AM(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await aM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function DM(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aC(t);te("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>hx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>hx(e.remoteStore,s)),t.onlineComponents=e}async function aC(t){return t.offlineComponents||(te("FirestoreClient","Using default OfflineComponentProvider"),await AM(t,new xM)),t.offlineComponents}async function t_(t){return t.onlineComponents||(te("FirestoreClient","Using default OnlineComponentProvider"),await DM(t,new oC)),t.onlineComponents}function PM(t){return aC(t).then(e=>e.persistence)}function lC(t){return aC(t).then(e=>e.localStore)}function RM(t){return t_(t).then(e=>e.remoteStore)}function uC(t){return t_(t).then(e=>e.syncEngine)}function k6(t){return t_(t).then(e=>e.datastore)}async function Zc(t){const e=await t_(t),n=e.eventManager;return n.onListen=i6.bind(null,e.syncEngine),n.onUnlisten=s6.bind(null,e.syncEngine),n}function x6(t){return t.asyncQueue.enqueue(async()=>{const e=await PM(t),n=await RM(t);return e.setNetworkEnabled(!0),function(r){const i=fe(r);return i.mu.delete(0),Lp(i)}(n)})}function N6(t){return t.asyncQueue.enqueue(async()=>{const e=await PM(t),n=await RM(t);return e.setNetworkEnabled(!1),async function(r){const i=fe(r);i.mu.add(0),await wh(i),i.pu.set("Offline")}(n)})}function A6(t,e){const n=new Tn;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await function(a,u){const h=fe(a);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,u))}(r,i);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new ee(H.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Th(o,`Failed to get document '${i} from cache`);s.reject(a)}}(await lC(t),e,n)),n.promise}function OM(t,e,n={}){const r=new Tn;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,u){const h=new e_({next:v=>{s.enqueueAndForget(()=>XS(i,p));const w=v.docs.has(o);!w&&v.fromCache?u.reject(new ee(H.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&a&&a.source==="server"?u.reject(new ee(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(v)},error:v=>u.reject(v)}),p=new ZS(yh(o.path),h,{includeMetadataChanges:!0,$u:!0});return YS(i,p)}(await Zc(t),t.asyncQueue,e,n,r)),r.promise}function D6(t,e){const n=new Tn;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await Ay(r,i,!0),a=new SM(i,o.Yi),u=a.Hu(o.documents),h=a.applyChanges(u,!1);s.resolve(h.snapshot)}catch(o){const a=Th(o,`Failed to execute query '${i} against cache`);s.reject(a)}}(await lC(t),e,n)),n.promise}function LM(t,e,n={}){const r=new Tn;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,u){const h=new e_({next:v=>{s.enqueueAndForget(()=>XS(i,p)),v.fromCache&&a.source==="server"?u.reject(new ee(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(v)},error:v=>u.reject(v)}),p=new ZS(o,h,{includeMetadataChanges:!0,$u:!0});return YS(i,p)}(await Zc(t),t.asyncQueue,e,n,r)),r.promise}function P6(t,e){const n=new e_(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){fe(r).vu.add(i),i.next()}(await Zc(t),n)),()=>{n.bc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){fe(r).vu.delete(i)}(await Zc(t),n))}}function R6(t,e,n,r){const i=function(s,o){let a;return a=typeof s=="string"?new TextEncoder().encode(s):s,function(u,h){return new T6(u,h)}(function(u,h){if(u instanceof Uint8Array)return mx(u,h);if(u instanceof ArrayBuffer)return mx(new Uint8Array(u),h);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Op(e));t.asyncQueue.enqueueAndForget(async()=>{E6(await uC(t),i,r)})}function O6(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=fe(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.$s.getNamedQuery(s,r))}(await lC(t),e))}const yx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t,e,n){if(!n)throw new ee(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MM(t,e,n,r){if(e===!0&&r===!0)throw new ee(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function vx(t){if(!ce.isDocumentKey(t))throw new ee(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _x(t){if(ce.isDocumentKey(t))throw new ee(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function n_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me()}function nt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=n_(t);throw new ee(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function FM(t,e){if(e<=0)throw new ee(H.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,MM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ee(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ee(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wx(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new LG;switch(n.type){case"gapi":const r=n.client;return new UG(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ee(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=yx.get(e);n&&(te("ComponentProvider","Removing Datastore"),yx.delete(e),n.terminate())}(this),Promise.resolve()}}function L6(t,e,n,r={}){var i;const s=(t=nt(t,Mp))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&jc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=wn.MOCK_USER;else{o=lD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new ee(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new wn(u)}t._authCredentials=new MG(new KO(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class Wn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wn(this.firestore,e,this._query)}}class Is extends Wn{constructor(e,n,r){super(e,n,yh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new ce(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function $M(t,e,...n){if(t=ye(t),cC("collection","path",e),t instanceof Mp){const r=et.fromString(e,...n);return _x(r),new Is(t,null,r)}{if(!(t instanceof Nt||t instanceof Is))throw new ee(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(et.fromString(e,...n));return _x(r),new Is(t.firestore,null,r)}}function M6(t,e){if(t=nt(t,Mp),cC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ee(H.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Wn(t,null,function(n){return new fo(et.emptyPath(),n)}(e))}function Oy(t,e,...n){if(t=ye(t),arguments.length===1&&(e=GO.R()),cC("doc","path",e),t instanceof Mp){const r=et.fromString(e,...n);return vx(r),new Nt(t,null,new ce(r))}{if(!(t instanceof Nt||t instanceof Is))throw new ee(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(et.fromString(e,...n));return vx(r),new Nt(t.firestore,t instanceof Is?t.converter:null,new ce(r))}}function UM(t,e){return t=ye(t),e=ye(e),(t instanceof Nt||t instanceof Is)&&(e instanceof Nt||e instanceof Is)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function VM(t,e){return t=ye(t),e=ye(e),t instanceof Wn&&e instanceof Wn&&t.firestore===e.firestore&&Np(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new WS(this,"async_queue_retry"),this.Hc=()=>{const n=Im();n&&te("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ko.Vo()};const e=Im();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const n=Im();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const n=new Tn;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}async Zc(){if(this.Uc.length!==0){try{await this.Uc[0](),this.Uc.shift(),this.ko.reset()}catch(e){if(!Va(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Uc.length>0&&this.ko.vo(()=>this.Zc())}}Yc(e){const n=this.qc.then(()=>(this.jc=!0,e().catch(r=>{this.Qc=r,this.jc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw Xt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.jc=!1,r))));return this.qc=n,n}enqueueAfterDelay(e,n,r){this.Jc(),this.Wc.indexOf(e)>-1&&(n=0);const i=QS.createAndSchedule(this,e,n,r,s=>this.Xc(s));return this.Gc.push(i),i}Jc(){this.Qc&&me()}verifyOperationInProgress(){}async ta(){let e;do e=this.qc,await e;while(e!==this.qc)}ea(e){for(const n of this.Gc)if(n.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Gc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const n=this.Gc.indexOf(e);this.Gc.splice(n,1)}}function YE(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class $6{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=-1;class Kt extends Mp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new F6,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||BM(this),this._firestoreClient.terminate()}}function An(t){return t._firestoreClient||BM(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function BM(t){var e;const n=t._freezeSettings(),r=function(i,s,o,a){return new QG(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new b6(t._authCredentials,t._appCheckCredentials,t._queue,r)}function V6(t,e){qM(t=nt(t,Kt));const n=An(t),r=t._freezeSettings(),i=new oC;return jM(n,i,new NM(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function B6(t){qM(t=nt(t,Kt));const e=An(t),n=t._freezeSettings(),r=new oC;return jM(e,r,new I6(r,n.cacheSizeBytes))}function jM(t,e,n){const r=new Tn;return t.asyncQueue.enqueue(async()=>{try{await AM(t,n),await DM(t,e),r.resolve()}catch(i){const s=i;if(!function(o){return o.name==="FirebaseError"?o.code===H.FAILED_PRECONDITION||o.code===H.UNIMPLEMENTED:typeof DOMException<"u"&&o instanceof DOMException?o.code===22||o.code===20||o.code===11:!0}(s))throw s;jc("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}}).then(()=>r.promise)}function j6(t){if(t._initialized&&!t._terminated)throw new ee(H.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Bi.C())return Promise.resolve();const r=n+"main";await Bi.delete(r)}(jS(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function q6(t){return function(e){const n=new Tn;return e.asyncQueue.enqueueAndForget(async()=>c6(await uC(e),n)),n.promise}(An(t=nt(t,Kt)))}function z6(t){return x6(An(t=nt(t,Kt)))}function W6(t){return N6(An(t=nt(t,Kt)))}function H6(t,e){const n=An(t=nt(t,Kt)),r=new $6;return R6(n,t._databaseId,e,r),r}function K6(t,e){return O6(An(t=nt(t,Kt)),e).then(n=>n?new Wn(t,null,n.query):null)}function qM(t){if(t._initialized||t._terminated)throw new ee(H.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ks(cn.fromBase64String(e))}catch(n){throw new ee(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ks(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=/^__.*__$/;class Q6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new po(e,this.data,this.fieldMask,n,this.fieldTransforms):new vh(e,this.data,n,this.fieldTransforms)}}class zM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new po(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function WM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me()}}class i_{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=i,s===void 0&&this.ia(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new i_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.aa(e),i}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.ia(),i}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return Ly(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(e.length===0)throw this.fa("Document fields must not be empty");if(WM(this.ra)&&G6.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class Y6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.Tt=r||Op(e)}wa(e,n,r,i=!1){return new i_({ra:e,methodName:n,_a:r,path:Jt.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function yu(t){const e=t._freezeSettings(),n=Op(t._databaseId);return new Y6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function s_(t,e,n,r,i,s={}){const o=t.wa(s.merge||s.mergeFields?2:0,e,n,i);pC("Data must be an object, but it was:",o,r);const a=GM(r,o);let u,h;if(s.merge)u=new Or(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const v of s.mergeFields){const w=XE(e,v,n);if(!o.contains(w))throw new ee(H.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);YM(p,w)||p.push(w)}u=new Or(p),h=o.fieldTransforms.filter(v=>u.covers(v.field))}else u=null,h=o.fieldTransforms;return new Q6(new Un(a),u,h)}class Fp extends mu{_toFieldTransform(e){if(e.ra!==2)throw e.ra===1?e.fa(`${this._methodName}() can only appear at the top level of your update data`):e.fa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fp}}function HM(t,e,n){return new i_({ra:3,_a:e.settings._a,methodName:t._methodName,ca:n},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class hC extends mu{_toFieldTransform(e){return new Dp(e.path,new Hc)}isEqual(e){return e instanceof hC}}class X6 extends mu{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=HM(this,e,!0),r=this.ma.map(s=>vu(s,n)),i=new eu(r);return new Dp(e.path,i)}isEqual(e){return this===e}}class J6 extends mu{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=HM(this,e,!0),r=this.ma.map(s=>vu(s,n)),i=new tu(r);return new Dp(e.path,i)}isEqual(e){return this===e}}class Z6 extends mu{constructor(e,n){super(e),this.ga=n}_toFieldTransform(e){const n=new Kc(e.Tt,_L(e.Tt,this.ga));return new Dp(e.path,n)}isEqual(e){return this===e}}function dC(t,e,n,r){const i=t.wa(1,e,n);pC("Data must be an object, but it was:",i,r);const s=[],o=Un.empty();gu(r,(u,h)=>{const p=gC(e,u,n);h=ye(h);const v=i.ha(p);if(h instanceof Fp)s.push(p);else{const w=vu(h,v);w!=null&&(s.push(p),o.set(p,w))}});const a=new Or(s);return new zM(o,a,i.fieldTransforms)}function fC(t,e,n,r,i,s){const o=t.wa(1,e,n),a=[XE(e,r,n)],u=[i];if(s.length%2!=0)throw new ee(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<s.length;w+=2)a.push(XE(e,s[w])),u.push(s[w+1]);const h=[],p=Un.empty();for(let w=a.length-1;w>=0;--w)if(!YM(h,a[w])){const b=a[w];let k=u[w];k=ye(k);const R=o.ha(b);if(k instanceof Fp)h.push(b);else{const J=vu(k,R);J!=null&&(h.push(b),p.set(b,J))}}const v=new Or(h);return new zM(p,v,o.fieldTransforms)}function KM(t,e,n,r=!1){return vu(n,t.wa(r?4:3,e))}function vu(t,e){if(QM(t=ye(t)))return pC("Unsupported field value:",e,t),GM(t,e);if(t instanceof mu)return function(n,r){if(!WM(r.ra))throw r.fa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ca&&e.ra!==4)throw e.fa("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=vu(o,r.la(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=ye(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return _L(r.Tt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Ot.fromDate(n);return{timestampValue:Gc(r.Tt,i)}}if(n instanceof Ot){const i=new Ot(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Gc(r.Tt,i)}}if(n instanceof r_)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ks)return{bytesValue:RL(r.Tt,n._byteString)};if(n instanceof Nt){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.fa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:RS(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.fa(`Unsupported field value: ${n_(n)}`)}(t,e)}function GM(t,e){const n={};return tL(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gu(t,(r,i)=>{const s=vu(i,e.ua(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function QM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ot||t instanceof r_||t instanceof ks||t instanceof Nt||t instanceof mu)}function pC(t,e,n){if(!QM(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=n_(n);throw r==="an object"?e.fa(t+" a custom object"):e.fa(t+" "+r)}}function XE(t,e,n){if((e=ye(e))instanceof Na)return e._internalPath;if(typeof e=="string")return gC(t,e);throw Ly("Field path arguments must be of type string or ",t,!1,void 0,n)}const e5=new RegExp("[~\\*/\\[\\]]");function gC(t,e,n){if(e.search(e5)>=0)throw Ly(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Na(...e.split("."))._internalPath}catch{throw Ly(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ly(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ee(H.INVALID_ARGUMENT,a+t+u)}function YM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(o_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class t5 extends Kf{data(){return super.data()}}function o_(t,e){return typeof e=="string"?gC(t,e):e instanceof Na?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mC{}class $p extends mC{}function Vo(t,e,...n){let r=[];e instanceof mC&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof yC).length,o=i.filter(a=>a instanceof a_).length;if(s>1||s>0&&o>0)throw new ee(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class a_ extends $p{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new a_(e,n,r)}_apply(e){const n=this._parse(e);return ZM(e._query,n),new Wn(e.firestore,e.converter,UE(e._query,n))}_parse(e){const n=yu(e.firestore);return function(i,s,o,a,u,h,p){let v;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ee(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Ix(p,h);const w=[];for(const b of p)w.push(Ex(a,i,b));v={arrayValue:{values:w}}}else v=Ex(a,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Ix(p,h),v=KM(o,s,p,h==="in"||h==="not-in");return Ge.create(u,h,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function n5(t,e,n){const r=e,i=o_("where",t);return a_._create(i,r,n)}class yC extends mC{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new yC(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ft.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)ZM(s,a),s=UE(s,a)}(e._query,n),new Wn(e.firestore,e.converter,UE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vC extends $p{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new vC(e,n)}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new ee(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ee(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Sc(i,s);return function(a,u){if(AS(a)===null){const h=Hv(a);h!==null&&eF(a,h,u.field)}}(r,o),o}(e._query,this._field,this._direction);return new Wn(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new fo(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function r5(t,e="asc"){const n=e,r=o_("orderBy",t);return vC._create(r,n)}class l_ extends $p{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new l_(e,n,r)}_apply(e){return new Wn(e.firestore,e.converter,by(e._query,this._limit,this._limitType))}}function i5(t){return FM("limit",t),l_._create("limit",t,"F")}function s5(t){return FM("limitToLast",t),l_._create("limitToLast",t,"L")}class u_ extends $p{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new u_(e,n,r)}_apply(e){const n=JM(e,this.type,this._docOrFields,this._inclusive);return new Wn(e.firestore,e.converter,function(r,i){return new fo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function o5(...t){return u_._create("startAt",t,!0)}function a5(...t){return u_._create("startAfter",t,!1)}class c_ extends $p{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new c_(e,n,r)}_apply(e){const n=JM(e,this.type,this._docOrFields,this._inclusive);return new Wn(e.firestore,e.converter,function(r,i){return new fo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function l5(...t){return c_._create("endBefore",t,!1)}function u5(...t){return c_._create("endAt",t,!0)}function JM(t,e,n,r){if(n[0]=ye(n[0]),n[0]instanceof Kf)return function(i,s,o,a,u){if(!a)throw new ee(H.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const h=[];for(const p of Ml(i))if(p.field.isKeyField())h.push(Jl(s,a.key));else{const v=a.data.field(p.field);if(xS(v))throw new ee(H.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const w=p.field.canonicalString();throw new ee(H.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}h.push(v)}return new ka(h,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=yu(t.firestore);return function(s,o,a,u,h,p){const v=s.explicitOrderBy;if(h.length>v.length)throw new ee(H.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let b=0;b<h.length;b++){const k=h[b];if(v[b].field.isKeyField()){if(typeof k!="string")throw new ee(H.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof k}`);if(!DS(s)&&k.indexOf("/")!==-1)throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${k}' contains a slash.`);const R=s.path.child(et.fromString(k));if(!ce.isDocumentKey(R))throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);const J=new ce(R);w.push(Jl(o,J))}else{const R=KM(a,u,k);w.push(R)}}return new ka(w,p)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Ex(t,e,n){if(typeof(n=ye(n))=="string"){if(n==="")throw new ee(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DS(e)&&n.indexOf("/")!==-1)throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(et.fromString(n));if(!ce.isDocumentKey(r))throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jl(t,new ce(r))}if(n instanceof Nt)return Jl(t,n._key);throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${n_(n)}.`)}function Ix(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZM(t,e){if(e.isInequality()){const r=Hv(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new ee(H.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=AS(t);s!==null&&eF(t,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function eF(t,e,n){if(!n.isEqual(e))throw new ee(H.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class _C{convertValue(e,n="none"){switch(Xl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw me()}}convertObject(e,n){const r={};return gu(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new r_(zt(e.latitude),zt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=rL(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vf(e));default:return null}}convertTimestamp(e){const n=Ca(e);return new Ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=et.fromString(e);Te(qL(r));const i=new Sa(r.get(1),r.get(3)),s=new ce(r.popFirst(5));return i.isEqual(n)||Xt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class c5 extends _C{constructor(e){super(),this.firestore=e}convertBytes(e){return new ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lo extends Kf{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(o_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Qd extends lo{data(e={}){return super.data(e)}}class Aa{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new kl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qd(this._firestore,this._userDataWriter,r.key,r,new kl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const a=new Qd(r._firestore,r._userDataWriter,o.doc.key,o.doc,new kl(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new Qd(r._firestore,r._userDataWriter,o.doc.key,o.doc,new kl(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),h=s.indexOf(o.doc.key)),{type:h5(o.type),doc:a,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function h5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me()}}function tF(t,e){return t instanceof lo&&e instanceof lo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Aa&&e instanceof Aa&&t._firestore===e._firestore&&VM(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(t){t=nt(t,Nt);const e=nt(t.firestore,Kt);return OM(An(e),t._key).then(n=>wC(e,t,n))}class _u extends _C{constructor(e){super(),this.firestore=e}convertBytes(e){return new ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function f5(t){t=nt(t,Nt);const e=nt(t.firestore,Kt),n=An(e),r=new _u(e);return A6(n,t._key).then(i=>new lo(e,r,t._key,i,new kl(i!==null&&i.hasLocalMutations,!0),t.converter))}function p5(t){t=nt(t,Nt);const e=nt(t.firestore,Kt);return OM(An(e),t._key,{source:"server"}).then(n=>wC(e,t,n))}function g5(t){t=nt(t,Wn);const e=nt(t.firestore,Kt),n=An(e),r=new _u(e);return XM(t._query),LM(n,t._query).then(i=>new Aa(e,r,t,i))}function m5(t){t=nt(t,Wn);const e=nt(t.firestore,Kt),n=An(e),r=new _u(e);return D6(n,t._query).then(i=>new Aa(e,r,t,i))}function y5(t){t=nt(t,Wn);const e=nt(t.firestore,Kt),n=An(e),r=new _u(e);return LM(n,t._query,{source:"server"}).then(i=>new Aa(e,r,t,i))}function Tx(t,e,n){t=nt(t,Nt);const r=nt(t.firestore,Kt),i=h_(t.converter,e,n);return Up(r,[s_(yu(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Rt.none())])}function Sx(t,e,n,...r){t=nt(t,Nt);const i=nt(t.firestore,Kt),s=yu(i);let o;return o=typeof(e=ye(e))=="string"||e instanceof Na?fC(s,"updateDoc",t._key,e,n,r):dC(s,"updateDoc",t._key,e),Up(i,[o.toMutation(t._key,Rt.exists(!0))])}function v5(t){return Up(nt(t.firestore,Kt),[new _h(t._key,Rt.none())])}function _5(t,e){const n=nt(t.firestore,Kt),r=Oy(t),i=h_(t.converter,e);return Up(n,[s_(yu(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Rt.exists(!1))]).then(()=>r)}function nF(t,...e){var n,r,i;t=ye(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||YE(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(YE(e[o])){const v=e[o];e[o]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[o+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[o+2]=(i=v.complete)===null||i===void 0?void 0:i.bind(v)}let u,h,p;if(t instanceof Nt)h=nt(t.firestore,Kt),p=yh(t._key.path),u={next:v=>{e[o]&&e[o](wC(h,t,v))},error:e[o+1],complete:e[o+2]};else{const v=nt(t,Wn);h=nt(v.firestore,Kt),p=v._query;const w=new _u(h);u={next:b=>{e[o]&&e[o](new Aa(h,w,v,b))},error:e[o+1],complete:e[o+2]},XM(t._query)}return function(v,w,b,k){const R=new e_(k),J=new ZS(w,R,b);return v.asyncQueue.enqueueAndForget(async()=>YS(await Zc(v),J)),()=>{R.bc(),v.asyncQueue.enqueueAndForget(async()=>XS(await Zc(v),J))}}(An(h),p,a,u)}function w5(t,e){return P6(An(t=nt(t,Kt)),YE(e)?e:{next:e})}function Up(t,e){return function(n,r){const i=new Tn;return n.asyncQueue.enqueueAndForget(async()=>o6(await uC(n),r,i)),i.promise}(An(t),e)}function wC(t,e,n){const r=n.docs.get(e._key),i=new _u(t);return new lo(t,i,e._key,r,new kl(n.hasPendingWrites,n.fromCache),e.converter)}const E5={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=yu(e)}set(e,n,r){this._verifyNotCommitted();const i=Ho(e,this._firestore),s=h_(i.converter,n,r),o=s_(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Rt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ho(e,this._firestore);let o;return o=typeof(n=ye(n))=="string"||n instanceof Na?fC(this._dataReader,"WriteBatch.update",s._key,n,r,i):dC(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Rt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ho(e,this._firestore);return this._mutations=this._mutations.concat(new _h(n._key,Rt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ee(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ho(t,e){if((t=ye(t)).firestore!==e)throw new ee(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5 extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=yu(e)}get(e){const n=Ho(e,this._firestore),r=new c5(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return me();const s=i[0];if(s.isFoundDocument())return new Kf(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Kf(this._firestore,r,n._key,null,n.converter);throw me()})}set(e,n,r){const i=Ho(e,this._firestore),s=h_(i.converter,n,r),o=s_(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=Ho(e,this._firestore);let o;return o=typeof(n=ye(n))=="string"||n instanceof Na?fC(this._dataReader,"Transaction.update",s._key,n,r,i):dC(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Ho(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ho(e,this._firestore),r=new _u(this._firestore);return super.get(e).then(i=>new lo(this._firestore,r,n._key,i._document,new kl(!1,!1),n.converter))}}function S5(t,e,n){t=nt(t,Kt);const r=Object.assign(Object.assign({},E5),n);return function(i){if(i.maxAttempts<1)throw new ee(H.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,o){const a=new Tn;return i.asyncQueue.enqueueAndForget(async()=>{const u=await k6(i);new C6(i.asyncQueue,u,o,s,a).run()}),a.promise}(An(t),i=>e(new T5(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(){return new Fp("deleteField")}function b5(){return new hC("serverTimestamp")}function k5(...t){return new X6("arrayUnion",t)}function x5(...t){return new J6("arrayRemove",t)}function N5(t){return new Z6("increment",t)}(function(t,e=!0){(function(n){mh=n})(Oa),io(new Zr("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Kt(new FG(n.getProvider("auth-internal")),new BG(n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new ee(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sa(a.options.projectId,u)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Yr(Ek,"3.9.0",t),Yr(Ek,"3.9.0","esm2017")})();const A5="@firebase/firestore-compat",D5="0.3.5";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ee("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(){if(typeof Uint8Array>"u")throw new ee("unimplemented","Uint8Arrays are not available in this environment.")}function bx(){if(!XG())throw new ee("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Gf{constructor(e){this._delegate=e}static fromBase64String(e){return bx(),new Gf(ks.fromBase64String(e))}static fromUint8Array(e){return Cx(),new Gf(ks.fromUint8Array(e))}toBase64(){return bx(),this._delegate.toBase64()}toUint8Array(){return Cx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(t){return P5(t,["next","error","complete"])}function P5(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{enableIndexedDbPersistence(e,n){return V6(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return B6(e._delegate)}clearIndexedDbPersistence(e){return j6(e._delegate)}}class rF{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Sa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&jc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){L6(this._delegate,e,n,r)}enableNetwork(){return z6(this._delegate)}disableNetwork(){return W6(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,MM("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return q6(this._delegate)}onSnapshotsInSync(e){return w5(this._delegate,e)}get app(){if(!this._appCompat)throw new ee("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new eh(this,$M(this._delegate,e))}catch(n){throw pr(n,"collection()","Firestore.collection()")}}doc(e){try{return new _i(this,Oy(this._delegate,e))}catch(n){throw pr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fr(this,M6(this._delegate,e))}catch(n){throw pr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return S5(this._delegate,n=>e(new iF(this,n)))}batch(){return An(this._delegate),new sF(new I5(this._delegate,e=>Up(this._delegate,e)))}loadBundle(e){return H6(this._delegate,e)}namedQuery(e){return K6(this._delegate,e).then(n=>n?new fr(this,n):null)}}class d_ extends _C{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gf(new ks(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return _i.forKey(n,this.firestore,null)}}function O5(t){RG(t)}class iF{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new d_(e)}get(e){const n=xl(e);return this._delegate.get(n).then(r=>new Qf(this._firestore,new lo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=xl(e);return r?(EC("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=xl(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=xl(e);return this._delegate.delete(n),this}}class sF{constructor(e){this._delegate=e}set(e,n,r){const i=xl(e);return r?(EC("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=xl(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=xl(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class su{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Qd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Yf(this._firestore,r),n!=null?n:{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=su.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new su(e,new d_(e),n),i.set(n,s)),s}}su.INSTANCES=new WeakMap;class _i{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new d_(e)}static forPath(e,n,r){if(e.length%2!==0)throw new ee("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _i(n,new Nt(n._delegate,r,new ce(e)))}static forKey(e,n,r){return new _i(n,new Nt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new eh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new eh(this.firestore,$M(this._delegate,e))}catch(n){throw pr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ye(e),e instanceof Nt?UM(this._delegate,e):!1}set(e,n){n=EC("DocumentReference.set",n);try{return n?Tx(this._delegate,e,n):Tx(this._delegate,e)}catch(r){throw pr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Sx(this._delegate,e):Sx(this._delegate,e,n,...r)}catch(i){throw pr(i,"updateDoc()","DocumentReference.update()")}}delete(){return v5(this._delegate)}onSnapshot(...e){const n=oF(e),r=aF(e,i=>new Qf(this.firestore,new lo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return nF(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=f5(this._delegate):(e==null?void 0:e.source)==="server"?n=p5(this._delegate):n=d5(this._delegate),n.then(r=>new Qf(this.firestore,new lo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new _i(this.firestore,e?this._delegate.withConverter(su.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function pr(t,e,n){return t.message=t.message.replace(e,n),t}function oF(t){for(const e of t)if(typeof e=="object"&&!JE(e))return e;return{}}function aF(t,e){var n,r;let i;return JE(t[0])?i=t[0]:JE(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Qf{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new _i(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return tF(this._delegate,e._delegate)}}class Yf extends Qf{data(e){const n=this._delegate.data(e);return OG(n!==void 0),n}}class fr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new d_(e)}where(e,n,r){try{return new fr(this.firestore,Vo(this._delegate,n5(e,n,r)))}catch(i){throw pr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new fr(this.firestore,Vo(this._delegate,r5(e,n)))}catch(r){throw pr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fr(this.firestore,Vo(this._delegate,i5(e)))}catch(n){throw pr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new fr(this.firestore,Vo(this._delegate,s5(e)))}catch(n){throw pr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fr(this.firestore,Vo(this._delegate,o5(...e)))}catch(n){throw pr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fr(this.firestore,Vo(this._delegate,a5(...e)))}catch(n){throw pr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fr(this.firestore,Vo(this._delegate,l5(...e)))}catch(n){throw pr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fr(this.firestore,Vo(this._delegate,u5(...e)))}catch(n){throw pr(n,"endAt()","Query.endAt()")}}isEqual(e){return VM(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=m5(this._delegate):(e==null?void 0:e.source)==="server"?n=y5(this._delegate):n=g5(this._delegate),n.then(r=>new ZE(this.firestore,new Aa(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=oF(e),r=aF(e,i=>new ZE(this.firestore,new Aa(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return nF(this._delegate,n,r)}withConverter(e){return new fr(this.firestore,e?this._delegate.withConverter(su.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class L5{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Yf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ZE{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new fr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Yf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new L5(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Yf(this._firestore,r))})}isEqual(e){return tF(this._delegate,e._delegate)}}class eh extends fr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _i(this.firestore,e):null}doc(e){try{return e===void 0?new _i(this.firestore,Oy(this._delegate)):new _i(this.firestore,Oy(this._delegate,e))}catch(n){throw pr(n,"doc()","CollectionReference.doc()")}}add(e){return _5(this._delegate,e).then(n=>new _i(this.firestore,n))}isEqual(e){return UM(this._delegate,e._delegate)}withConverter(e){return new eh(this.firestore,e?this._delegate.withConverter(su.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function xl(t){return nt(t,Nt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(...e){this._delegate=new Na(...e)}static documentId(){return new IC(Jt.keyField().canonicalString())}isEqual(e){return e=ye(e),e instanceof Na?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this._delegate=e}static serverTimestamp(){const e=b5();return e._methodName="FieldValue.serverTimestamp",new _l(e)}static delete(){const e=C5();return e._methodName="FieldValue.delete",new _l(e)}static arrayUnion(...e){const n=k5(...e);return n._methodName="FieldValue.arrayUnion",new _l(n)}static arrayRemove(...e){const n=x5(...e);return n._methodName="FieldValue.arrayRemove",new _l(n)}static increment(e){const n=N5(e);return n._methodName="FieldValue.increment",new _l(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5={Firestore:rF,GeoPoint:r_,Timestamp:Ot,Blob:Gf,Transaction:iF,WriteBatch:sF,DocumentReference:_i,DocumentSnapshot:Qf,Query:fr,QueryDocumentSnapshot:Yf,QuerySnapshot:ZE,CollectionReference:eh,FieldPath:IC,FieldValue:_l,setLogLevel:O5,CACHE_SIZE_UNLIMITED:U6};function F5(t,e){t.INTERNAL.registerComponent(new Zr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},M5)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(t){F5(t,(e,n)=>new rF(e,n,new R5)),t.registerVersion(A5,D5)}$5(de);var lF={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(!!s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=n.apply(null,s);a&&r.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var u in s)e.call(s,u)&&s[u]&&r.push(u)}}}return r.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(lF);const TC=lF.exports;var f_={exports:{}},p_={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U5=le.exports,V5=Symbol.for("react.element"),B5=Symbol.for("react.fragment"),j5=Object.prototype.hasOwnProperty,q5=U5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,z5={key:!0,ref:!0,__self:!0,__source:!0};function uF(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)j5.call(e,r)&&!z5.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:V5,type:t,key:s,ref:o,props:i,_owner:q5.current}}p_.Fragment=B5;p_.jsx=uF;p_.jsxs=uF;(function(t){t.exports=p_})(f_);const W5=f_.exports.Fragment,$=f_.exports.jsx,Re=f_.exports.jsxs,H5=["xxl","xl","lg","md","sm","xs"],K5="xs",SC=le.exports.createContext({prefixes:{},breakpoints:H5,minBreakpoint:K5});function cF(t,e){const{prefixes:n}=le.exports.useContext(SC);return t||n[e]||e}function hF(){const{breakpoints:t}=le.exports.useContext(SC);return t}function dF(){const{minBreakpoint:t}=le.exports.useContext(SC);return t}var g_={exports:{}},G5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Q5=G5,Y5=Q5;function fF(){}function pF(){}pF.resetWarningCache=fF;var X5=function(){function t(r,i,s,o,a,u){if(u!==Y5){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:pF,resetWarningCache:fF};return n.PropTypes=n,n};g_.exports=X5();function J5({as:t,bsPrefix:e,className:n,...r}){e=cF(e,"col");const i=hF(),s=dF(),o=[],a=[];return i.forEach(u=>{const h=r[u];delete r[u];let p,v,w;typeof h=="object"&&h!=null?{span:p,offset:v,order:w}=h:p=h;const b=u!==s?`-${u}`:"";p&&o.push(p===!0?`${e}${b}`:`${e}${b}-${p}`),w!=null&&a.push(`order${b}-${w}`),v!=null&&a.push(`offset${b}-${v}`)}),[{...r,className:TC(n,...o,...a)},{as:t,bsPrefix:e,spans:o}]}const gF=le.exports.forwardRef((t,e)=>{const[{className:n,...r},{as:i="div",bsPrefix:s,spans:o}]=J5(t);return $(i,{...r,ref:e,className:TC(n,!o.length&&s)})});gF.displayName="Col";const kx=gF,mF=le.exports.forwardRef(({bsPrefix:t,className:e,as:n="div",...r},i)=>{const s=cF(t,"row"),o=hF(),a=dF(),u=`${s}-cols`,h=[];return o.forEach(p=>{const v=r[p];delete r[p];let w;v!=null&&typeof v=="object"?{cols:w}=v:w=v;const b=p!==a?`-${p}`:"";w!=null&&h.push(`${u}${b}-${w}`)}),$(n,{ref:i,...r,className:TC(e,s,...h)})});mF.displayName="Row";const xx=mF;/**
 * @remix-run/router v1.0.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xf(){return Xf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xf.apply(this,arguments)}var Zo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Zo||(Zo={}));const Nx="popstate";function Z5(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return eI("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Jf(i)}return n8(e,n,null,t)}function e8(){return Math.random().toString(36).substr(2,8)}function Ax(t){return{usr:t.state,key:t.key}}function eI(t,e,n,r){return n===void 0&&(n=null),Xf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Sh(e):e,{state:n,key:e&&e.key||r||e8()})}function Jf(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Sh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function t8(t){let e=typeof window<"u"&&typeof window.location<"u"&&window.location.origin!=="null"?window.location.origin:"unknown://unknown",n=typeof t=="string"?t:Jf(t);return new URL(n,e)}function n8(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Zo.Pop,u=null;function h(){a=Zo.Pop,u&&u({action:a,location:w.location})}function p(b,k){a=Zo.Push;let R=eI(w.location,b,k);n&&n(R,b);let J=Ax(R),N=w.createHref(R);try{o.pushState(J,"",N)}catch{i.location.assign(N)}s&&u&&u({action:a,location:w.location})}function v(b,k){a=Zo.Replace;let R=eI(w.location,b,k);n&&n(R,b);let J=Ax(R),N=w.createHref(R);o.replaceState(J,"",N),s&&u&&u({action:a,location:w.location})}let w={get action(){return a},get location(){return t(i,o)},listen(b){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Nx,h),u=b,()=>{i.removeEventListener(Nx,h),u=null}},createHref(b){return e(i,b)},encodeLocation(b){let k=t8(Jf(b));return Xf({},b,{pathname:k.pathname,search:k.search,hash:k.hash})},push:p,replace:v,go(b){return o.go(b)}};return w}var Dx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Dx||(Dx={}));function r8(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Sh(e):e,i=vF(r.pathname||"/",n);if(i==null)return null;let s=yF(t);i8(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=f8(s[a],m8(i));return o}function yF(t,e,n,r){return e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r=""),t.forEach((i,s)=>{let o={relativePath:i.path||"",caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};o.relativePath.startsWith("/")&&(Sn(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(r.length));let a=fa([r,o.relativePath]),u=n.concat(o);i.children&&i.children.length>0&&(Sn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+a+'".')),yF(i.children,e,u,a)),!(i.path==null&&!i.index)&&e.push({path:a,score:h8(a,i.index),routesMeta:u})}),e}function i8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:d8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const s8=/^:\w+$/,o8=3,a8=2,l8=1,u8=10,c8=-2,Px=t=>t==="*";function h8(t,e){let n=t.split("/"),r=n.length;return n.some(Px)&&(r+=c8),e&&(r+=a8),n.filter(i=>!Px(i)).reduce((i,s)=>i+(s8.test(s)?o8:s===""?l8:u8),r)}function d8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function f8(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,h=i==="/"?e:e.slice(i.length)||"/",p=p8({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},h);if(!p)return null;Object.assign(r,p.params);let v=a.route;s.push({params:r,pathname:fa([i,p.pathname]),pathnameBase:w8(fa([i,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(i=fa([i,p.pathnameBase]))}return s}function p8(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=g8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((h,p,v)=>{if(p==="*"){let w=a[v]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}return h[p]=y8(a[v]||"",p),h},{}),pathname:s,pathnameBase:o,pattern:t}}function g8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),CC(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(o,a)=>(r.push(a),"([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function m8(t){try{return decodeURI(t)}catch(e){return CC(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function y8(t,e){try{return decodeURIComponent(t)}catch(n){return CC(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function vF(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Sn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function CC(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function v8(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Sh(t):t;return{pathname:n?n.startsWith("/")?n:_8(n,e):e,search:E8(r),hash:I8(i)}}function _8(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Uw(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _F(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function wF(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Sh(t):(i=Xf({},t),Sn(!i.pathname||!i.pathname.includes("?"),Uw("?","pathname","search",i)),Sn(!i.pathname||!i.pathname.includes("#"),Uw("#","pathname","hash",i)),Sn(!i.search||!i.search.includes("#"),Uw("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let v=e.length-1;if(o.startsWith("..")){let w=o.split("/");for(;w[0]==="..";)w.shift(),v-=1;i.pathname=w.join("/")}a=v>=0?e[v]:"/"}let u=v8(i,a),h=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}const fa=t=>t.join("/").replace(/\/\/+/g,"/"),w8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),E8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,I8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class T8{constructor(e,n,r){this.status=e,this.statusText=n||"",this.data=r}}function S8(t){return t instanceof T8}const C8=new Set(["POST","PUT","PATCH","DELETE"]);[...C8];/**
 * React Router v6.4.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tI(){return tI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tI.apply(this,arguments)}function b8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const k8=typeof Object.is=="function"?Object.is:b8,{useState:x8,useEffect:N8,useLayoutEffect:A8,useDebugValue:D8}=Xw;function P8(t,e,n){const r=e(),[{inst:i},s]=x8({inst:{value:r,getSnapshot:e}});return A8(()=>{i.value=r,i.getSnapshot=e,Vw(i)&&s({inst:i})},[t,r,e]),N8(()=>(Vw(i)&&s({inst:i}),t(()=>{Vw(i)&&s({inst:i})})),[t]),D8(r),r}function Vw(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!k8(n,r)}catch{return!0}}function R8(t,e,n){return e()}const O8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",L8=!O8,M8=L8?R8:P8;"useSyncExternalStore"in Xw&&(t=>t.useSyncExternalStore)(Xw);const F8=le.exports.createContext(null),$8=le.exports.createContext(null),EF=le.exports.createContext(null),bC=le.exports.createContext(null),m_=le.exports.createContext(null),Vp=le.exports.createContext({outlet:null,matches:[]}),IF=le.exports.createContext(null);function U8(t,e){let{relative:n}=e===void 0?{}:e;Bp()||Sn(!1);let{basename:r,navigator:i}=le.exports.useContext(bC),{hash:s,pathname:o,search:a}=TF(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:fa([r,o])),i.createHref({pathname:u,search:a,hash:s})}function Bp(){return le.exports.useContext(m_)!=null}function y_(){return Bp()||Sn(!1),le.exports.useContext(m_).location}function V8(){Bp()||Sn(!1);let{basename:t,navigator:e}=le.exports.useContext(bC),{matches:n}=le.exports.useContext(Vp),{pathname:r}=y_(),i=JSON.stringify(_F(n).map(a=>a.pathnameBase)),s=le.exports.useRef(!1);return le.exports.useEffect(()=>{s.current=!0}),le.exports.useCallback(function(a,u){if(u===void 0&&(u={}),!s.current)return;if(typeof a=="number"){e.go(a);return}let h=wF(a,JSON.parse(i),r,u.relative==="path");t!=="/"&&(h.pathname=h.pathname==="/"?t:fa([t,h.pathname])),(u.replace?e.replace:e.push)(h,u.state,u)},[t,e,i,r])}function TF(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=le.exports.useContext(Vp),{pathname:i}=y_(),s=JSON.stringify(_F(r).map(o=>o.pathnameBase));return le.exports.useMemo(()=>wF(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function B8(t,e){Bp()||Sn(!1);let n=le.exports.useContext(EF),{matches:r}=le.exports.useContext(Vp),i=r[r.length-1],s=i?i.params:{};i&&i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let a=y_(),u;if(e){var h;let k=typeof e=="string"?Sh(e):e;o==="/"||((h=k.pathname)==null?void 0:h.startsWith(o))||Sn(!1),u=k}else u=a;let p=u.pathname||"/",v=o==="/"?p:p.slice(o.length)||"/",w=r8(t,{pathname:v}),b=W8(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},s,k.params),pathname:fa([o,k.pathname]),pathnameBase:k.pathnameBase==="/"?o:fa([o,k.pathnameBase])})),r,n||void 0);return e&&b?$(m_.Provider,{value:{location:tI({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Zo.Pop},children:b}):b}function j8(){let t=K8(),e=S8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r};return Re(W5,{children:[$("h2",{children:"Unhandled Thrown Error!"}),$("h3",{style:{fontStyle:"italic"},children:e}),n?$("pre",{style:i,children:n}):null,$("p",{children:"\u{1F4BF} Hey developer \u{1F44B}"}),Re("p",{children:["You can provide a way better UX than this when your app throws errors by providing your own\xA0",$("code",{style:s,children:"errorElement"})," props on\xA0",$("code",{style:s,children:"<Route>"})]})]})}class q8 extends le.exports.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location?{error:e.error,location:e.location}:{error:e.error||n.error,location:n.location}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?$(IF.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function z8(t){let{routeContext:e,match:n,children:r}=t,i=le.exports.useContext(F8);return i&&n.route.errorElement&&(i._deepestRenderedBoundaryId=n.route.id),$(Vp.Provider,{value:e,children:r})}function W8(t,e,n){if(e===void 0&&(e=[]),t==null)if(n!=null&&n.errors)t=n.matches;else return null;let r=t,i=n==null?void 0:n.errors;if(i!=null){let s=r.findIndex(o=>o.route.id&&(i==null?void 0:i[o.route.id]));s>=0||Sn(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,o,a)=>{let u=o.route.id?i==null?void 0:i[o.route.id]:null,h=n?o.route.errorElement||$(j8,{}):null,p=()=>$(z8,{match:o,routeContext:{outlet:s,matches:e.concat(r.slice(0,a+1))},children:u?h:o.route.element!==void 0?o.route.element:s});return n&&(o.route.errorElement||a===0)?$(q8,{location:n.location,component:h,error:u,children:p()}):p()},null)}var Rx;(function(t){t.UseRevalidator="useRevalidator"})(Rx||(Rx={}));var nI;(function(t){t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"})(nI||(nI={}));function H8(t){let e=le.exports.useContext(EF);return e||Sn(!1),e}function K8(){var t;let e=le.exports.useContext(IF),n=H8(nI.UseRouteError),r=le.exports.useContext(Vp),i=r.matches[r.matches.length-1];return e||(r||Sn(!1),i.route.id||Sn(!1),(t=n.errors)==null?void 0:t[i.route.id])}function Ju(t){Sn(!1)}function G8(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Zo.Pop,navigator:s,static:o=!1}=t;Bp()&&Sn(!1);let a=e.replace(/^\/*/,"/"),u=le.exports.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=Sh(r));let{pathname:h="/",search:p="",hash:v="",state:w=null,key:b="default"}=r,k=le.exports.useMemo(()=>{let R=vF(h,a);return R==null?null:{pathname:R,search:p,hash:v,state:w,key:b}},[a,h,p,v,w,b]);return k==null?null:$(bC.Provider,{value:u,children:$(m_.Provider,{children:n,value:{location:k,navigationType:i}})})}function Q8(t){let{children:e,location:n}=t,r=le.exports.useContext($8),i=r&&!e?r.router.routes:rI(e);return B8(i,n)}var Ox;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(Ox||(Ox={}));new Promise(()=>{});function rI(t,e){e===void 0&&(e=[]);let n=[];return le.exports.Children.forEach(t,(r,i)=>{if(!le.exports.isValidElement(r))return;if(r.type===le.exports.Fragment){n.push.apply(n,rI(r.props.children,e));return}r.type!==Ju&&Sn(!1),!r.props.index||!r.props.children||Sn(!1);let s=[...e,i],o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(o.children=rI(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.4.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Y8(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function X8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function J8(t,e){return t.button===0&&(!e||e==="_self")&&!X8(t)}const Z8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function eY(t){let{basename:e,children:n,window:r}=t,i=le.exports.useRef();i.current==null&&(i.current=Z5({window:r,v5Compat:!0}));let s=i.current,[o,a]=le.exports.useState({action:s.action,location:s.location});return le.exports.useLayoutEffect(()=>s.listen(a),[s]),$(G8,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:s})}const kC=le.exports.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:h,preventScrollReset:p}=e,v=Y8(e,Z8),w=U8(h,{relative:i}),b=tY(h,{replace:o,state:a,target:u,preventScrollReset:p,relative:i});function k(R){r&&r(R),R.defaultPrevented||b(R)}return $("a",{...v,href:w,onClick:s?r:k,ref:n,target:u})});var Lx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(Lx||(Lx={}));var Mx;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Mx||(Mx={}));function tY(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=V8(),u=y_(),h=TF(t,{relative:o});return le.exports.useCallback(p=>{if(J8(p,n)){p.preventDefault();let v=r!==void 0?r:Jf(u)===Jf(h);a(t,{replace:v,state:i,preventScrollReset:s,relative:o})}},[u,a,h,r,i,n,t,s,o])}class nY extends le.exports.Component{constructor(n){super(n);it(this,"emailLogin",()=>{de.auth().signInWithEmailAndPassword(this.state.password,this.state.email).then(n=>{var r=n.user;de.auth().currentUser.uid,n.additionalUserInfo.isNewUser,alert("Sign in successful"),this.setState({...this.state,profileLink:`/profile/${r.uid}`});let i=document.getElementById("signInNav");setTimeout(()=>{i.click()},1e3)}).catch(n=>{n.code;var r=n.message;alert(r)})});this.state={email:"",password:""}}render(){return Re(xx,{children:[$(kx,{lg:12,xs:12,children:Re(xx,{children:[$("p",{id:"pe",children:"Email "}),$("input",{className:"LoginInput",id:"Email",type:"password",value:this.state.email,onChange:n=>{this.setState({email:n.target.value})}})]})}),Re(kx,{lg:12,xs:12,children:[$("p",{id:"pp",children:"Password"}),$("input",{className:"LoginInput",id:"Password",value:this.state.password,onChange:n=>{this.setState({password:n.target.value})}})]}),$("button",{id:"Login",onClick:()=>{this.emailLogin()},children:"Login"}),$("nav",{style:{display:"none"},children:$(kC,{id:"signInNav",to:this.state.profileLink,children:"Signin"})})]})}}class rY extends le.exports.Component{constructor(e){super(e),this.state={}}render(){return $("div",{children:Re("div",{id:"blue",children:[$("p",{id:"Storybook",children:"Storybook"}),$(nY,{})]})})}}class iY extends le.exports.Component{constructor(n){super(n);it(this,"Login",()=>{var n=new de.auth.GoogleAuthProvider;return de.auth().signInWithPopup(n).then(r=>{var i=r.user,s=de.auth().currentUser.uid,o=r.additionalUserInfo.isNewUser;if(o&&de.database().ref("users/"+s).set({ID:s,Name:i.displayName,Photo:i.photoURL,Online:!0}),this.setState({LoginInfo:i,F:!0}),i){this.setState({...this.state,profileLink:`/profile/${i.uid}`});let a=document.getElementById("profile");setTimeout(()=>{a.click()},1e3)}}).catch(function(r){var i=r.message;alert(`error : ${i}`)})});this.state={LoginInfo:[],F:!1,profileLink:void 0}}render(){return Re("div",{children:[$("img",{onClick:()=>{this.Login()},id:"GoogleLogin",src:"https://i.stack.imgur.com/XzoRm.png"}),$("nav",{id:"profileLink",style:{display:"none"},children:$(kC,{id:"profile",to:this.state.profileLink,children:"Profile"})})]})}}class sY extends le.exports.Component{constructor(n){super(n);it(this,"LoginFinish",n=>{this.props.Navigate(n)});it(this,"Login",()=>{de.auth().createUserWithEmailAndPassword(this.state.email,this.state.password).then(n=>{var r=n.user,i=de.auth().currentUser.uid,s=n.additionalUserInfo.isNewUser;if(s){de.database().ref("users/"+i).set({ID:i,Name:r.displayName,Photo:r.photoURL,Online:!0}),alert("Sign up successful"),this.setState({...this.state,profileLink:`/profile/${r.uid}`});let o=document.getElementById("signupNav");setTimeout(()=>{o.click()},1e3)}else alert("user has already signed up")}).catch(n=>{n.code;var r=n.message;alert(r)})});this.state={SmsAuth:!1,profileLink:void 0,email:"",password:""}}render(){return Re("div",{children:[$("img",{id:"mainpic",src:"http://sfwallpaper.com/images/background-wallpaper-images-2.jpg"}),Re("div",{id:"SCon",children:[$("h1",{id:"Create",children:"Create an account"}),$("h3",{id:"free",children:"its free and always will be free"}),$("input",{placeholder:"Email",className:"SignInput",id:"Si1",onChange:n=>{this.setState({...this.state,email:n.target.value})}}),$("input",{placeholder:"Password",className:"SignInput",type:"password",id:"Si2",onChange:n=>{this.setState({...this.state,password:n.target.value})}}),$("input",{placeholder:"Mobile number",className:"SignInput",id:"Si3"}),$("button",{onClick:()=>{this.Login()},id:"signup",children:"Sign Up"}),$("p",{id:"or",children:"OR"}),$(iY,{OnComplete:this.LoginFinish}),$("nav",{style:{display:"none"},children:$(kC,{id:"signupNav",to:this.state.profileLink,children:"Signup"})})]})]})}}class oY extends le.exports.Component{constructor(n){super(n);it(this,"SmsAuth",()=>{var n=new de.auth.RecaptchaVerifier("recaptcha-container"),r="+923405588495";de.auth().signInWithPhoneNumber(r,n).then(function(i){console.log("success"),window.confirmationResult=i,console.log(JSON.stringify(i))}).catch(function(i){console.log("Error")})});this.state={}}render(){return Re("div",{children:[$("div",{onClick:()=>{this.props.OFF()},id:"smsoverlayer"}),Re("div",{id:"smscard",children:[$("button",{onClick:()=>{this.SmsAuth()},id:"smsbtn",children:"Send Sms"}),Re("ion-content",{padding:!0,children:[$("div",{id:"recaptcha-container"}),Re("ion-item",{children:[$("ion-label",{stacked:!0,children:"Phone Number"}),$("ion-input",{type:"number"})]})]})]})]})}}var aY="firebase",lY="9.18.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yr(aY,lY,"app");const uY={apiKey:"AIzaSyBhKtn4TK7LY4cG6zOZ8RPWBx12IDrxAhc",authDomain:"my-first-project-ce24e.firebaseapp.com",databaseURL:"https://my-first-project-ce24e.firebaseio.com",projectId:"my-first-project-ce24e",storageBucket:"my-first-project-ce24e.appspot.com",messagingSenderId:"627497957398",appId:"1:627497957398:web:8049cba44bd6c2ee49dd37"};class SF extends le.exports.Component{constructor(n){super(n);it(this,"componentDidMount",()=>{de.apps.length||de.initializeApp(uY)});it(this,"Navigate",n=>{alert(`router:${JSON.stringify(this.context)}`)});it(this,"SmsAuth",()=>{this.setState({SmsAuth:!this.state.SmsAuth})});this.state={SmsAuth:!1}}render(){return Re("div",{children:[$("div",{}),Re("div",{children:[$(rY,{}),$(sY,{Navigate:this.Navigate,SmsAuth:this.SmsAuth}),this.state.SmsAuth&&$(oY,{OFF:this.SmsAuth})]})]})}}SF.contextTypes={router:g_.exports.object};class cY extends le.exports.Component{constructor(e){super(e),this.state={CoverPic:"https://buddhisteconomics.net/wp-content/uploads/2017/10/hdwp693968124.jpg",ProfilePic:"https://www.popsci.com/sites/popsci.com/files/styles/1000_1x_/public/images/2018/06/edinburgh_meadows_2008_middle_meadow_walk_by_catharine_ward_thompson.jpg?itok=ysmDaSjD&fc=50,50"};var n=this.props.Key;de.database().ref("users/"+n).once("value").then(r=>{var i=r.val(),s=i.ProfilePhoto||!1,o=i.CoverPhoto||!1;s&&this.setState({ProfilePic:o}),o&&this.setState({CoverPic:o})})}render(){if(this.state.ProfilePic&&this.state.CoverPic)return Re("div",{children:[$("button",{className:"ProfileButtons",id:"Pbtn1",children:"Friend"}),$("button",{className:"ProfileButtons",id:"Pbtn2",children:"Follow"}),$("button",{className:"ProfileButtons",id:"Pbtn3",children:"Message"}),$("div",{id:"coverdiv",children:$("img",{id:"cover",src:this.state.CoverPic})}),$("img",{id:"Profilepic",className:"rounded-circle",src:this.state.ProfilePic})]})}}class hY extends le.exports.Component{constructor(e){super(e),this.state={}}render(){return $("div",{children:Re("div",{id:"menucontainer",children:[$("div",{className:"PMI",id:"pmi1",children:"Timeline "}),$("div",{className:"PMI",id:"pmi2",onClick:()=>{this.props.Hello()},children:"About "}),$("div",{className:"PMI",id:"pmi3",children:"Friends "}),$("div",{className:"PMI",id:"pmi4",children:"More "})]})})}}class dY extends le.exports.Component{componentDidMount(){var e=document.getElementById("uploader"),n=document.getElementById("fileButton"),r=document.getElementById("image");n.addEventListener("change",function(i){Qg=i.target.files[0];var s=de.storage().ref("Photos/"+Qg.name),o=s.put(Qg);o.on("state_changed",function(u){var h=u.bytesTransferred/u.totalBytes*100;e.value=h},function(u){alert("error"+u)},function(){alert("done");var u=de.storage().ref("Photos/"+Qg.name);u.getDownloadURL().then(function(h){Yg=h,r.src=h}).catch(function(h){})})})}constructor(e){super(e),this.state={Download:!1};var n=setInterval(()=>{Yg!==""&&(alert("$ Hello :: "+Yg),clearInterval(n),this.props.Loaded(Yg))},1e3)}render(){return $("div",{children:Re("div",{style:{position:"absolute",top:"90%",left:0,width:"100%",height:"50%"},children:[$("img",{id:"image",style:{position:"absolute",top:"-180%",left:"0%",width:"100%",height:"160%"}}),$("progress",{value:"",max:"100",id:"uploader",children:"0%"}),$("input",{type:"file",id:"fileButton",onClick:()=>{this.props.Per("oka")}})]})})}}var Qg,Yg="";class fY extends le.exports.Component{constructor(e){super(e),this.state={}}render(){return Re("div",{children:[$("div",{id:"Upper",children:$("p",{onClick:()=>{this.props.Close()},children:"close"})})," ",$("input",{id:"mind2",placeholder:"What's on your mind",onChange:e=>{this.props.Text(e.target.value)}})]})}}class pY extends le.exports.Component{constructor(n){super(n);it(this,"Change",n=>{this.setState({Uploading:!0})});it(this,"Uploaded",n=>{alert("trans: "+n),this.props.PhotoURL(n)});this.state={Uploading:!1}}render(){return $("div",{children:Re("div",{id:"downpost",children:[this.state.Uploading&&$("h1",{id:"uploading",children:" Uploading..."}),$(dY,{Per:this.Change,Loaded:this.Uploaded})]})})}}class gY extends le.exports.Component{constructor(n){super(n);it(this,"Push",()=>{alert(this.props.ImageURL),alert(this.props.iText),de.database().ref("users/"+this.props.Key+"/Timeline").push({Text:this.props.iText,Image:this.props.ImageURL}),alert("Posted Successfully Refresh to see changes")});this.state={}}render(){return $("div",{children:$("div",{id:"final",children:$("button",{id:"postbtn",onClick:n=>{this.Push()},children:"Post"})})})}}class mY extends le.exports.Component{constructor(n){super(n);it(this,"GetPhotoURL",n=>{this.setState({ImageUrl:n})});it(this,"InputText",n=>{this.setState({Text:n})});this.state={Go:!1,ImageUrl:"",Text:""}}render(){return $("div",{children:Re("div",{id:"propost2",children:[$(fY,{Close:this.props.Close,Text:this.InputText}),$(pY,{PhotoURL:this.GetPhotoURL}),$(gY,{ImageURL:this.state.ImageUrl,iText:this.state.Text,Key:this.props.Key})]})})}}class CF extends le.exports.Component{constructor(n){super(n);it(this,"Up",()=>{this.props.Off()});this.state={Post:!0}}render(){return $("div",{children:$("div",{id:"Overlayer",children:this.state.Post&&$(mY,{Key:this.props.Key,Close:this.Up})})})}}class bF extends le.exports.Component{constructor(e){super(e)}render(){return $("div",{children:Re("div",{id:"propost",children:[Re("div",{id:"Upper",children:[$("div",{id:"cmp",children:" "})," "]}),$("input",{onClick:()=>{this.props.Overlayer()},id:"mind",placeholder:"What's on your mind"})]})})}}class yY extends le.exports.Component{constructor(n){super(n);it(this,"NoOverlayer",()=>{this.setState({Overlayer:!1})});it(this,"AdvPost",()=>{this.setState({Overlayer:!0})});this.state={Overlayer:!1}}render(){return Re("div",{children:[$(bF,{Overlayer:this.AdvPost}),this.state.Overlayer&&$(CF,{Key:this.props.Key,Off:this.NoOverlayer})]})}}class vY extends le.exports.Component{constructor(e){super(e),this.state={}}render(){return $("div",{children:$("h1",{children:"About"})})}}class _Y extends le.exports.Component{constructor(e){super(e),this.state={}}render(){return $("div",{})}}class v_ extends le.exports.Component{constructor(n){super(n);it(this,"Route",n=>{this.context.router.history.push("/Search/"+n)});this.state={}}render(){return $("div",{children:Re("div",{id:"slide",children:[$("p",{id:"story",children:"Storybook"}),$("input",{onChange:n=>{Fx=n.target.value},onKeyPress:n=>{n.key==="Enter"&&this.Route(Fx)},id:"searchbar"}),$("button",{id:"searchbtn",children:"search"}),$("p",{id:"me",onClick:()=>{this.Route(this.props.Key)},children:" UserName "})]})})}}var Fx;v_.contextTypes={router:g_.exports.object};class kF extends le.exports.Component{constructor(n){super(n);it(this,"Like",n=>{var r=de.auth().currentUser.uid;de.database().ref("users/"+this.props.Key+"/Timeline/"+n+"/Likes").push({By:r})});it(this,"Share",n=>{de.auth().currentUser.uid,de.database().ref("users/"+this.props.Key+"/Timeline/").push({Text:n.Text,Image:n.Image})});this.state={Complete:!1};var r=0;de.database().ref("users/"+this.props.Key+"/Timeline").once("value").then(i=>{qw=i.val()||!0;var s=Object.keys(qw);i.forEach(o=>{var a=o.val();a.key=s[r],Bw.push(a),r+=1}),Bw.reverse(),de.database().ref("users/"+this.props.Key).once("value",o=>{jw.push(o.val()),this.setState({Complete:!0})})})}componentDidMount(){}render(){return this.state.Complete?qw===!0?$("h1",{className:"void",children:"There are no posts to show"}):$("div",{children:$("div",{className:"flex-container",children:Bw.map(n=>($x++,Re("div",{className:"Post",children:[$("img",{className:"rounded-circle",style:{position:"absolute",left:"2%",width:"3%",height:"26px"},src:jw[0].Photo}),$("h3",{className:"nm",children:jw[0].Name}),$("input",{className:"PostText",onChange:()=>{console.log("ok")},value:n.Text}),$("img",{className:"PostImage",src:n.Image}),Re("div",{className:"Reaction",children:[$("h3",{onClick:()=>{this.Like(n.key)},id:"like",children:" Like  "}),$("h3",{id:"Comment",children:" Comments "}),$("h3",{onClick:()=>{this.Share(n)},id:"share",children:" Share "})]})]},$x)))})}):$("p",{})}}var Bw=[],jw=[],qw=!1,$x=0;class wY extends le.exports.Component{constructor(n){super(n);it(this,"CreateGroup",n=>{var r=de.auth().currentUser.uid;de.database().ref("users/"+r+"/MyGroups").push({Name:n})});this.state={Card:!0,GroupName:""}}render(){return $("div",{children:this.state.Card&&Re("div",{children:[$("div",{id:"Overlay1",onClick:()=>{this.setState({Card:!1})}}),Re("div",{id:"Card",children:[$("h5",{}),$("h4",{id:"CreateGroup",children:" Create  Group"}),$("input",{id:"GroupName",placeholder:"Group Name",onChange:n=>{this.setState({GroupName:n.target.value})}}),$("button",{id:"CreateGroupBtn",onClick:()=>{alert(this.state.GroupName),this.CreateGroup(this.state.GroupName)},children:" Create "})]})]})})}}class __ extends le.exports.Component{constructor(n){super(n);it(this,"Route",()=>{alert("Routing"),this.context.router.history.push("/Groups/Groupid")});this.state={Active:!1,Route:!1,GroupNames:[]};var r=de.auth().currentUser.uid;de.database().ref("users/"+r+"/MyGroups").once("value",i=>{i.forEach(s=>{var o=s.val();Ux.push(o.Name)}),this.setState({GroupNames:Ux})})}render(){return Re("div",{children:[Re("div",{id:"feedside",children:[$("br",{}),$("br",{}),$("p",{className:"Feedtext",id:"Shortcuts",children:"Shortcuts"}),this.state.GroupNames.map(n=>Re("h3",{className:"Feedtext",id:"Sname",onClick:()=>{this.Route()},children:[" ",n," "]})),$("br",{}),$("br",{}),$("p",{className:"Feedtext",id:"Create",children:"Create"}),$("h6",{className:"Feedtext",id:"CreateGroup",onClick:()=>{this.setState({Active:!this.state.Active})},children:" Group"})]}),this.state.Active&&$(wY,{})]})}}var Ux=[];__.contextTypes={router:g_.exports.object};class EY extends le.exports.Component{constructor(n){var r;super(n);it(this,"Change",()=>{alert("Switch"),this.setState({Timeline:!1,About:!0,Profile:!1})});this.state={Timeline:!0,Profile:!0,About:!1,Connected:!1},Gu=(r=de.auth().currentUser)==null?void 0:r.uid,alert(`route/user id : ${Gu}`)}componentDidMount(){console.log("mounted"),setTimeout(()=>{this.setState({Connected:!0})},1e3)}render(){return this.state.Connected?Re("div",{children:[$(__,{}),$(v_,{Key:Gu}),$(cY,{Key:Gu}),$(hY,{Hello:this.Change}),this.state.Timeline&&$(kF,{Key:Gu}),this.state.Profile&&$(yY,{Key:Gu}),this.state.About&&$(vY,{}),this.state.About&&$(_Y,{})]}):$("p",{})}}var Gu;class IY extends le.exports.Component{constructor(e){super(e),this.state={}}render(){return Re("div",{children:[$(v_,{}),$(__,{})]})}}class TY extends le.exports.Component{constructor(n){super(n);it(this,"NoOverlayer",()=>{this.setState({Overlayer:!1})});it(this,"AdvPost",()=>{this.setState({Overlayer:!0})});this.state={Overlayer:!1}}render(){return Re("div",{children:[$(v_,{}),$(__,{}),$("img",{id:"GroupCover",src:"https://cdn2.outdoorphotographer.com/2018/05/a7RIIYNPSpringApr2015_DSC5460ElCapitanThreeBrothersReflection_OP.jpg"}),$("div",{id:"undercover"}),$(bF,{Overlayer:this.AdvPost}),this.state.Overlayer&&$(CF,{Key:this.props.Key,Off:this.NoOverlayer}),$(kF,{})]})}}class SY extends le.exports.Component{constructor(e){super(e),this.state={Online:[]}}render(){if(this.props.data)return $("div",{children:Re("div",{className:"Header",children:[$("img",{className:"rounded-circle",id:"image",src:this.props.data.Photo}),Re("h3",{id:"name",children:[" ",this.props.data.Name," "]}),$("img",{onClick:()=>{this.props.hideme()},id:"cross",src:"https://img.icons8.com/metro/1600/delete-sign.png"})]})})}}var xF={exports:{}};/*!
 * jQuery JavaScript Library v3.6.4
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-03-08T15:28Z
 */(function(t){(function(e,n){t.exports=e.document?n(e,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return n(r)}})(typeof window<"u"?window:Gx,function(e,n){var r=[],i=Object.getPrototypeOf,s=r.slice,o=r.flat?function(l){return r.flat.call(l)}:function(l){return r.concat.apply([],l)},a=r.push,u=r.indexOf,h={},p=h.toString,v=h.hasOwnProperty,w=v.toString,b=w.call(Object),k={},R=function(d){return typeof d=="function"&&typeof d.nodeType!="number"&&typeof d.item!="function"},J=function(d){return d!=null&&d===d.window},N=e.document,D={type:!0,src:!0,nonce:!0,noModule:!0};function M(l,d,f){f=f||N;var y,E,I=f.createElement("script");if(I.text=l,d)for(y in D)E=d[y]||d.getAttribute&&d.getAttribute(y),E&&I.setAttribute(y,E);f.head.appendChild(I).parentNode.removeChild(I)}function Q(l){return l==null?l+"":typeof l=="object"||typeof l=="function"?h[p.call(l)]||"object":typeof l}var re="3.6.4",m=function(l,d){return new m.fn.init(l,d)};m.fn=m.prototype={jquery:re,constructor:m,length:0,toArray:function(){return s.call(this)},get:function(l){return l==null?s.call(this):l<0?this[l+this.length]:this[l]},pushStack:function(l){var d=m.merge(this.constructor(),l);return d.prevObject=this,d},each:function(l){return m.each(this,l)},map:function(l){return this.pushStack(m.map(this,function(d,f){return l.call(d,f,d)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(m.grep(this,function(l,d){return(d+1)%2}))},odd:function(){return this.pushStack(m.grep(this,function(l,d){return d%2}))},eq:function(l){var d=this.length,f=+l+(l<0?d:0);return this.pushStack(f>=0&&f<d?[this[f]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:r.sort,splice:r.splice},m.extend=m.fn.extend=function(){var l,d,f,y,E,I,S=arguments[0]||{},O=1,A=arguments.length,V=!1;for(typeof S=="boolean"&&(V=S,S=arguments[O]||{},O++),typeof S!="object"&&!R(S)&&(S={}),O===A&&(S=this,O--);O<A;O++)if((l=arguments[O])!=null)for(d in l)y=l[d],!(d==="__proto__"||S===y)&&(V&&y&&(m.isPlainObject(y)||(E=Array.isArray(y)))?(f=S[d],E&&!Array.isArray(f)?I=[]:!E&&!m.isPlainObject(f)?I={}:I=f,E=!1,S[d]=m.extend(V,I,y)):y!==void 0&&(S[d]=y));return S},m.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(l){throw new Error(l)},noop:function(){},isPlainObject:function(l){var d,f;return!l||p.call(l)!=="[object Object]"?!1:(d=i(l),d?(f=v.call(d,"constructor")&&d.constructor,typeof f=="function"&&w.call(f)===b):!0)},isEmptyObject:function(l){var d;for(d in l)return!1;return!0},globalEval:function(l,d,f){M(l,{nonce:d&&d.nonce},f)},each:function(l,d){var f,y=0;if(ue(l))for(f=l.length;y<f&&d.call(l[y],y,l[y])!==!1;y++);else for(y in l)if(d.call(l[y],y,l[y])===!1)break;return l},makeArray:function(l,d){var f=d||[];return l!=null&&(ue(Object(l))?m.merge(f,typeof l=="string"?[l]:l):a.call(f,l)),f},inArray:function(l,d,f){return d==null?-1:u.call(d,l,f)},merge:function(l,d){for(var f=+d.length,y=0,E=l.length;y<f;y++)l[E++]=d[y];return l.length=E,l},grep:function(l,d,f){for(var y,E=[],I=0,S=l.length,O=!f;I<S;I++)y=!d(l[I],I),y!==O&&E.push(l[I]);return E},map:function(l,d,f){var y,E,I=0,S=[];if(ue(l))for(y=l.length;I<y;I++)E=d(l[I],I,f),E!=null&&S.push(E);else for(I in l)E=d(l[I],I,f),E!=null&&S.push(E);return o(S)},guid:1,support:k}),typeof Symbol=="function"&&(m.fn[Symbol.iterator]=r[Symbol.iterator]),m.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(l,d){h["[object "+d+"]"]=d.toLowerCase()});function ue(l){var d=!!l&&"length"in l&&l.length,f=Q(l);return R(l)||J(l)?!1:f==="array"||d===0||typeof d=="number"&&d>0&&d-1 in l}var he=function(l){var d,f,y,E,I,S,O,A,V,z,Z,j,K,we,Le,Ee,Bt,Lt,Xn,at="sizzle"+1*new Date,Pe=l.document,Rn=0,Ke=0,Et=Vs(),Do=Vs(),nl=Vs(),On=Vs(),Fs=function(C,P){return C===P&&(Z=!0),0},$s={}.hasOwnProperty,jt=[],Ai=jt.pop,lr=jt.push,Di=jt.push,qh=jt.slice,ns=function(C,P){for(var F=0,G=C.length;F<G;F++)if(C[F]===P)return F;return-1},Lu="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",rt="[\\x20\\t\\r\\n\\f]",Us="(?:\\\\[\\da-fA-F]{1,6}"+rt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",li="\\["+rt+"*("+Us+")(?:"+rt+"*([*^$|!~]?=)"+rt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Us+"))|)"+rt+"*\\]",zh=":("+Us+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+li+")*)|.*)\\)|)",b_=new RegExp(rt+"+","g"),Mu=new RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),k_=new RegExp("^"+rt+"*,"+rt+"*"),Wh=new RegExp("^"+rt+"*([>+~]|"+rt+")"+rt+"*"),x_=new RegExp(rt+"|>"),N_=new RegExp(zh),A_=new RegExp("^"+Us+"$"),Fu={ID:new RegExp("^#("+Us+")"),CLASS:new RegExp("^\\.("+Us+")"),TAG:new RegExp("^("+Us+"|[*])"),ATTR:new RegExp("^"+li),PSEUDO:new RegExp("^"+zh),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),bool:new RegExp("^(?:"+Lu+")$","i"),needsContext:new RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},D_=/HTML$/i,Hh=/^(?:input|select|textarea|button)$/i,$u=/^h\d$/i,Po=/^[^{]+\{\s*\[native \w/,cg=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ro=/[+~]/,ui=new RegExp("\\\\[\\da-fA-F]{1,6}"+rt+"?|\\\\([^\\r\\n\\f])","g"),Pi=function(C,P){var F="0x"+C.slice(1)-65536;return P||(F<0?String.fromCharCode(F+65536):String.fromCharCode(F>>10|55296,F&1023|56320))},hg=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,dg=function(C,P){return P?C==="\0"?"\uFFFD":C.slice(0,-1)+"\\"+C.charCodeAt(C.length-1).toString(16)+" ":"\\"+C},rs=function(){j()},P_=il(function(C){return C.disabled===!0&&C.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Di.apply(jt=qh.call(Pe.childNodes),Pe.childNodes),jt[Pe.childNodes.length].nodeType}catch{Di={apply:jt.length?function(P,F){lr.apply(P,qh.call(F))}:function(P,F){for(var G=P.length,_=0;P[G++]=F[_++];);P.length=G-1}}}function ct(C,P,F,G){var _,c,g,T,x,L,U,B=P&&P.ownerDocument,Y=P?P.nodeType:9;if(F=F||[],typeof C!="string"||!C||Y!==1&&Y!==9&&Y!==11)return F;if(!G&&(j(P),P=P||K,Le)){if(Y!==11&&(x=cg.exec(C)))if(_=x[1]){if(Y===9)if(g=P.getElementById(_)){if(g.id===_)return F.push(g),F}else return F;else if(B&&(g=B.getElementById(_))&&Xn(P,g)&&g.id===_)return F.push(g),F}else{if(x[2])return Di.apply(F,P.getElementsByTagName(C)),F;if((_=x[3])&&f.getElementsByClassName&&P.getElementsByClassName)return Di.apply(F,P.getElementsByClassName(_)),F}if(f.qsa&&!On[C+" "]&&(!Ee||!Ee.test(C))&&(Y!==1||P.nodeName.toLowerCase()!=="object")){if(U=C,B=P,Y===1&&(x_.test(C)||Wh.test(C))){for(B=Ro.test(C)&&Kh(P.parentNode)||P,(B!==P||!f.scope)&&((T=P.getAttribute("id"))?T=T.replace(hg,dg):P.setAttribute("id",T=at)),L=S(C),c=L.length;c--;)L[c]=(T?"#"+T:":scope")+" "+Bs(L[c]);U=L.join(",")}try{return Di.apply(F,B.querySelectorAll(U)),F}catch{On(C,!0)}finally{T===at&&P.removeAttribute("id")}}}return A(C.replace(Mu,"$1"),P,F,G)}function Vs(){var C=[];function P(F,G){return C.push(F+" ")>y.cacheLength&&delete P[C.shift()],P[F+" "]=G}return P}function br(C){return C[at]=!0,C}function fn(C){var P=K.createElement("fieldset");try{return!!C(P)}catch{return!1}finally{P.parentNode&&P.parentNode.removeChild(P),P=null}}function Uu(C,P){for(var F=C.split("|"),G=F.length;G--;)y.attrHandle[F[G]]=P}function fg(C,P){var F=P&&C,G=F&&C.nodeType===1&&P.nodeType===1&&C.sourceIndex-P.sourceIndex;if(G)return G;if(F){for(;F=F.nextSibling;)if(F===P)return-1}return C?1:-1}function R_(C){return function(P){var F=P.nodeName.toLowerCase();return F==="input"&&P.type===C}}function rl(C){return function(P){var F=P.nodeName.toLowerCase();return(F==="input"||F==="button")&&P.type===C}}function pg(C){return function(P){return"form"in P?P.parentNode&&P.disabled===!1?"label"in P?"label"in P.parentNode?P.parentNode.disabled===C:P.disabled===C:P.isDisabled===C||P.isDisabled!==!C&&P_(P)===C:P.disabled===C:"label"in P?P.disabled===C:!1}}function is(C){return br(function(P){return P=+P,br(function(F,G){for(var _,c=C([],F.length,P),g=c.length;g--;)F[_=c[g]]&&(F[_]=!(G[_]=F[_]))})})}function Kh(C){return C&&typeof C.getElementsByTagName<"u"&&C}f=ct.support={},I=ct.isXML=function(C){var P=C&&C.namespaceURI,F=C&&(C.ownerDocument||C).documentElement;return!D_.test(P||F&&F.nodeName||"HTML")},j=ct.setDocument=function(C){var P,F,G=C?C.ownerDocument||C:Pe;return G==K||G.nodeType!==9||!G.documentElement||(K=G,we=K.documentElement,Le=!I(K),Pe!=K&&(F=K.defaultView)&&F.top!==F&&(F.addEventListener?F.addEventListener("unload",rs,!1):F.attachEvent&&F.attachEvent("onunload",rs)),f.scope=fn(function(_){return we.appendChild(_).appendChild(K.createElement("div")),typeof _.querySelectorAll<"u"&&!_.querySelectorAll(":scope fieldset div").length}),f.cssHas=fn(function(){try{return K.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),f.attributes=fn(function(_){return _.className="i",!_.getAttribute("className")}),f.getElementsByTagName=fn(function(_){return _.appendChild(K.createComment("")),!_.getElementsByTagName("*").length}),f.getElementsByClassName=Po.test(K.getElementsByClassName),f.getById=fn(function(_){return we.appendChild(_).id=at,!K.getElementsByName||!K.getElementsByName(at).length}),f.getById?(y.filter.ID=function(_){var c=_.replace(ui,Pi);return function(g){return g.getAttribute("id")===c}},y.find.ID=function(_,c){if(typeof c.getElementById<"u"&&Le){var g=c.getElementById(_);return g?[g]:[]}}):(y.filter.ID=function(_){var c=_.replace(ui,Pi);return function(g){var T=typeof g.getAttributeNode<"u"&&g.getAttributeNode("id");return T&&T.value===c}},y.find.ID=function(_,c){if(typeof c.getElementById<"u"&&Le){var g,T,x,L=c.getElementById(_);if(L){if(g=L.getAttributeNode("id"),g&&g.value===_)return[L];for(x=c.getElementsByName(_),T=0;L=x[T++];)if(g=L.getAttributeNode("id"),g&&g.value===_)return[L]}return[]}}),y.find.TAG=f.getElementsByTagName?function(_,c){if(typeof c.getElementsByTagName<"u")return c.getElementsByTagName(_);if(f.qsa)return c.querySelectorAll(_)}:function(_,c){var g,T=[],x=0,L=c.getElementsByTagName(_);if(_==="*"){for(;g=L[x++];)g.nodeType===1&&T.push(g);return T}return L},y.find.CLASS=f.getElementsByClassName&&function(_,c){if(typeof c.getElementsByClassName<"u"&&Le)return c.getElementsByClassName(_)},Bt=[],Ee=[],(f.qsa=Po.test(K.querySelectorAll))&&(fn(function(_){var c;we.appendChild(_).innerHTML="<a id='"+at+"'></a><select id='"+at+"-\r\\' msallowcapture=''><option selected=''></option></select>",_.querySelectorAll("[msallowcapture^='']").length&&Ee.push("[*^$]="+rt+`*(?:''|"")`),_.querySelectorAll("[selected]").length||Ee.push("\\["+rt+"*(?:value|"+Lu+")"),_.querySelectorAll("[id~="+at+"-]").length||Ee.push("~="),c=K.createElement("input"),c.setAttribute("name",""),_.appendChild(c),_.querySelectorAll("[name='']").length||Ee.push("\\["+rt+"*name"+rt+"*="+rt+`*(?:''|"")`),_.querySelectorAll(":checked").length||Ee.push(":checked"),_.querySelectorAll("a#"+at+"+*").length||Ee.push(".#.+[+~]"),_.querySelectorAll("\\\f"),Ee.push("[\\r\\n\\f]")}),fn(function(_){_.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var c=K.createElement("input");c.setAttribute("type","hidden"),_.appendChild(c).setAttribute("name","D"),_.querySelectorAll("[name=d]").length&&Ee.push("name"+rt+"*[*^$|!~]?="),_.querySelectorAll(":enabled").length!==2&&Ee.push(":enabled",":disabled"),we.appendChild(_).disabled=!0,_.querySelectorAll(":disabled").length!==2&&Ee.push(":enabled",":disabled"),_.querySelectorAll("*,:x"),Ee.push(",.*:")})),(f.matchesSelector=Po.test(Lt=we.matches||we.webkitMatchesSelector||we.mozMatchesSelector||we.oMatchesSelector||we.msMatchesSelector))&&fn(function(_){f.disconnectedMatch=Lt.call(_,"*"),Lt.call(_,"[s!='']:x"),Bt.push("!=",zh)}),f.cssHas||Ee.push(":has"),Ee=Ee.length&&new RegExp(Ee.join("|")),Bt=Bt.length&&new RegExp(Bt.join("|")),P=Po.test(we.compareDocumentPosition),Xn=P||Po.test(we.contains)?function(_,c){var g=_.nodeType===9&&_.documentElement||_,T=c&&c.parentNode;return _===T||!!(T&&T.nodeType===1&&(g.contains?g.contains(T):_.compareDocumentPosition&&_.compareDocumentPosition(T)&16))}:function(_,c){if(c){for(;c=c.parentNode;)if(c===_)return!0}return!1},Fs=P?function(_,c){if(_===c)return Z=!0,0;var g=!_.compareDocumentPosition-!c.compareDocumentPosition;return g||(g=(_.ownerDocument||_)==(c.ownerDocument||c)?_.compareDocumentPosition(c):1,g&1||!f.sortDetached&&c.compareDocumentPosition(_)===g?_==K||_.ownerDocument==Pe&&Xn(Pe,_)?-1:c==K||c.ownerDocument==Pe&&Xn(Pe,c)?1:z?ns(z,_)-ns(z,c):0:g&4?-1:1)}:function(_,c){if(_===c)return Z=!0,0;var g,T=0,x=_.parentNode,L=c.parentNode,U=[_],B=[c];if(!x||!L)return _==K?-1:c==K?1:x?-1:L?1:z?ns(z,_)-ns(z,c):0;if(x===L)return fg(_,c);for(g=_;g=g.parentNode;)U.unshift(g);for(g=c;g=g.parentNode;)B.unshift(g);for(;U[T]===B[T];)T++;return T?fg(U[T],B[T]):U[T]==Pe?-1:B[T]==Pe?1:0}),K},ct.matches=function(C,P){return ct(C,null,null,P)},ct.matchesSelector=function(C,P){if(j(C),f.matchesSelector&&Le&&!On[P+" "]&&(!Bt||!Bt.test(P))&&(!Ee||!Ee.test(P)))try{var F=Lt.call(C,P);if(F||f.disconnectedMatch||C.document&&C.document.nodeType!==11)return F}catch{On(P,!0)}return ct(P,K,null,[C]).length>0},ct.contains=function(C,P){return(C.ownerDocument||C)!=K&&j(C),Xn(C,P)},ct.attr=function(C,P){(C.ownerDocument||C)!=K&&j(C);var F=y.attrHandle[P.toLowerCase()],G=F&&$s.call(y.attrHandle,P.toLowerCase())?F(C,P,!Le):void 0;return G!==void 0?G:f.attributes||!Le?C.getAttribute(P):(G=C.getAttributeNode(P))&&G.specified?G.value:null},ct.escape=function(C){return(C+"").replace(hg,dg)},ct.error=function(C){throw new Error("Syntax error, unrecognized expression: "+C)},ct.uniqueSort=function(C){var P,F=[],G=0,_=0;if(Z=!f.detectDuplicates,z=!f.sortStable&&C.slice(0),C.sort(Fs),Z){for(;P=C[_++];)P===C[_]&&(G=F.push(_));for(;G--;)C.splice(F[G],1)}return z=null,C},E=ct.getText=function(C){var P,F="",G=0,_=C.nodeType;if(_){if(_===1||_===9||_===11){if(typeof C.textContent=="string")return C.textContent;for(C=C.firstChild;C;C=C.nextSibling)F+=E(C)}else if(_===3||_===4)return C.nodeValue}else for(;P=C[G++];)F+=E(P);return F},y=ct.selectors={cacheLength:50,createPseudo:br,match:Fu,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(C){return C[1]=C[1].replace(ui,Pi),C[3]=(C[3]||C[4]||C[5]||"").replace(ui,Pi),C[2]==="~="&&(C[3]=" "+C[3]+" "),C.slice(0,4)},CHILD:function(C){return C[1]=C[1].toLowerCase(),C[1].slice(0,3)==="nth"?(C[3]||ct.error(C[0]),C[4]=+(C[4]?C[5]+(C[6]||1):2*(C[3]==="even"||C[3]==="odd")),C[5]=+(C[7]+C[8]||C[3]==="odd")):C[3]&&ct.error(C[0]),C},PSEUDO:function(C){var P,F=!C[6]&&C[2];return Fu.CHILD.test(C[0])?null:(C[3]?C[2]=C[4]||C[5]||"":F&&N_.test(F)&&(P=S(F,!0))&&(P=F.indexOf(")",F.length-P)-F.length)&&(C[0]=C[0].slice(0,P),C[2]=F.slice(0,P)),C.slice(0,3))}},filter:{TAG:function(C){var P=C.replace(ui,Pi).toLowerCase();return C==="*"?function(){return!0}:function(F){return F.nodeName&&F.nodeName.toLowerCase()===P}},CLASS:function(C){var P=Et[C+" "];return P||(P=new RegExp("(^|"+rt+")"+C+"("+rt+"|$)"))&&Et(C,function(F){return P.test(typeof F.className=="string"&&F.className||typeof F.getAttribute<"u"&&F.getAttribute("class")||"")})},ATTR:function(C,P,F){return function(G){var _=ct.attr(G,C);return _==null?P==="!=":P?(_+="",P==="="?_===F:P==="!="?_!==F:P==="^="?F&&_.indexOf(F)===0:P==="*="?F&&_.indexOf(F)>-1:P==="$="?F&&_.slice(-F.length)===F:P==="~="?(" "+_.replace(b_," ")+" ").indexOf(F)>-1:P==="|="?_===F||_.slice(0,F.length+1)===F+"-":!1):!0}},CHILD:function(C,P,F,G,_){var c=C.slice(0,3)!=="nth",g=C.slice(-4)!=="last",T=P==="of-type";return G===1&&_===0?function(x){return!!x.parentNode}:function(x,L,U){var B,Y,ne,X,ie,Se,_e=c!==g?"nextSibling":"previousSibling",pe=x.parentNode,ke=T&&x.nodeName.toLowerCase(),Ne=!U&&!T,$e=!1;if(pe){if(c){for(;_e;){for(X=x;X=X[_e];)if(T?X.nodeName.toLowerCase()===ke:X.nodeType===1)return!1;Se=_e=C==="only"&&!Se&&"nextSibling"}return!0}if(Se=[g?pe.firstChild:pe.lastChild],g&&Ne){for(X=pe,ne=X[at]||(X[at]={}),Y=ne[X.uniqueID]||(ne[X.uniqueID]={}),B=Y[C]||[],ie=B[0]===Rn&&B[1],$e=ie&&B[2],X=ie&&pe.childNodes[ie];X=++ie&&X&&X[_e]||($e=ie=0)||Se.pop();)if(X.nodeType===1&&++$e&&X===x){Y[C]=[Rn,ie,$e];break}}else if(Ne&&(X=x,ne=X[at]||(X[at]={}),Y=ne[X.uniqueID]||(ne[X.uniqueID]={}),B=Y[C]||[],ie=B[0]===Rn&&B[1],$e=ie),$e===!1)for(;(X=++ie&&X&&X[_e]||($e=ie=0)||Se.pop())&&!((T?X.nodeName.toLowerCase()===ke:X.nodeType===1)&&++$e&&(Ne&&(ne=X[at]||(X[at]={}),Y=ne[X.uniqueID]||(ne[X.uniqueID]={}),Y[C]=[Rn,$e]),X===x)););return $e-=_,$e===G||$e%G===0&&$e/G>=0}}},PSEUDO:function(C,P){var F,G=y.pseudos[C]||y.setFilters[C.toLowerCase()]||ct.error("unsupported pseudo: "+C);return G[at]?G(P):G.length>1?(F=[C,C,"",P],y.setFilters.hasOwnProperty(C.toLowerCase())?br(function(_,c){for(var g,T=G(_,P),x=T.length;x--;)g=ns(_,T[x]),_[g]=!(c[g]=T[x])}):function(_){return G(_,0,F)}):G}},pseudos:{not:br(function(C){var P=[],F=[],G=O(C.replace(Mu,"$1"));return G[at]?br(function(_,c,g,T){for(var x,L=G(_,null,T,[]),U=_.length;U--;)(x=L[U])&&(_[U]=!(c[U]=x))}):function(_,c,g){return P[0]=_,G(P,null,g,F),P[0]=null,!F.pop()}}),has:br(function(C){return function(P){return ct(C,P).length>0}}),contains:br(function(C){return C=C.replace(ui,Pi),function(P){return(P.textContent||E(P)).indexOf(C)>-1}}),lang:br(function(C){return A_.test(C||"")||ct.error("unsupported lang: "+C),C=C.replace(ui,Pi).toLowerCase(),function(P){var F;do if(F=Le?P.lang:P.getAttribute("xml:lang")||P.getAttribute("lang"))return F=F.toLowerCase(),F===C||F.indexOf(C+"-")===0;while((P=P.parentNode)&&P.nodeType===1);return!1}}),target:function(C){var P=l.location&&l.location.hash;return P&&P.slice(1)===C.id},root:function(C){return C===we},focus:function(C){return C===K.activeElement&&(!K.hasFocus||K.hasFocus())&&!!(C.type||C.href||~C.tabIndex)},enabled:pg(!1),disabled:pg(!0),checked:function(C){var P=C.nodeName.toLowerCase();return P==="input"&&!!C.checked||P==="option"&&!!C.selected},selected:function(C){return C.parentNode&&C.parentNode.selectedIndex,C.selected===!0},empty:function(C){for(C=C.firstChild;C;C=C.nextSibling)if(C.nodeType<6)return!1;return!0},parent:function(C){return!y.pseudos.empty(C)},header:function(C){return $u.test(C.nodeName)},input:function(C){return Hh.test(C.nodeName)},button:function(C){var P=C.nodeName.toLowerCase();return P==="input"&&C.type==="button"||P==="button"},text:function(C){var P;return C.nodeName.toLowerCase()==="input"&&C.type==="text"&&((P=C.getAttribute("type"))==null||P.toLowerCase()==="text")},first:is(function(){return[0]}),last:is(function(C,P){return[P-1]}),eq:is(function(C,P,F){return[F<0?F+P:F]}),even:is(function(C,P){for(var F=0;F<P;F+=2)C.push(F);return C}),odd:is(function(C,P){for(var F=1;F<P;F+=2)C.push(F);return C}),lt:is(function(C,P,F){for(var G=F<0?F+P:F>P?P:F;--G>=0;)C.push(G);return C}),gt:is(function(C,P,F){for(var G=F<0?F+P:F;++G<P;)C.push(G);return C})}},y.pseudos.nth=y.pseudos.eq;for(d in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[d]=R_(d);for(d in{submit:!0,reset:!0})y.pseudos[d]=rl(d);function Gh(){}Gh.prototype=y.filters=y.pseudos,y.setFilters=new Gh,S=ct.tokenize=function(C,P){var F,G,_,c,g,T,x,L=Do[C+" "];if(L)return P?0:L.slice(0);for(g=C,T=[],x=y.preFilter;g;){(!F||(G=k_.exec(g)))&&(G&&(g=g.slice(G[0].length)||g),T.push(_=[])),F=!1,(G=Wh.exec(g))&&(F=G.shift(),_.push({value:F,type:G[0].replace(Mu," ")}),g=g.slice(F.length));for(c in y.filter)(G=Fu[c].exec(g))&&(!x[c]||(G=x[c](G)))&&(F=G.shift(),_.push({value:F,type:c,matches:G}),g=g.slice(F.length));if(!F)break}return P?g.length:g?ct.error(C):Do(C,T).slice(0)};function Bs(C){for(var P=0,F=C.length,G="";P<F;P++)G+=C[P].value;return G}function il(C,P,F){var G=P.dir,_=P.next,c=_||G,g=F&&c==="parentNode",T=Ke++;return P.first?function(x,L,U){for(;x=x[G];)if(x.nodeType===1||g)return C(x,L,U);return!1}:function(x,L,U){var B,Y,ne,X=[Rn,T];if(U){for(;x=x[G];)if((x.nodeType===1||g)&&C(x,L,U))return!0}else for(;x=x[G];)if(x.nodeType===1||g)if(ne=x[at]||(x[at]={}),Y=ne[x.uniqueID]||(ne[x.uniqueID]={}),_&&_===x.nodeName.toLowerCase())x=x[G]||x;else{if((B=Y[c])&&B[0]===Rn&&B[1]===T)return X[2]=B[2];if(Y[c]=X,X[2]=C(x,L,U))return!0}return!1}}function sl(C){return C.length>1?function(P,F,G){for(var _=C.length;_--;)if(!C[_](P,F,G))return!1;return!0}:C[0]}function gg(C,P,F){for(var G=0,_=P.length;G<_;G++)ct(C,P[G],F);return F}function Oo(C,P,F,G,_){for(var c,g=[],T=0,x=C.length,L=P!=null;T<x;T++)(c=C[T])&&(!F||F(c,G,_))&&(g.push(c),L&&P.push(T));return g}function Ri(C,P,F,G,_,c){return G&&!G[at]&&(G=Ri(G)),_&&!_[at]&&(_=Ri(_,c)),br(function(g,T,x,L){var U,B,Y,ne=[],X=[],ie=T.length,Se=g||gg(P||"*",x.nodeType?[x]:x,[]),_e=C&&(g||!P)?Oo(Se,ne,C,x,L):Se,pe=F?_||(g?C:ie||G)?[]:T:_e;if(F&&F(_e,pe,x,L),G)for(U=Oo(pe,X),G(U,[],x,L),B=U.length;B--;)(Y=U[B])&&(pe[X[B]]=!(_e[X[B]]=Y));if(g){if(_||C){if(_){for(U=[],B=pe.length;B--;)(Y=pe[B])&&U.push(_e[B]=Y);_(null,pe=[],U,L)}for(B=pe.length;B--;)(Y=pe[B])&&(U=_?ns(g,Y):ne[B])>-1&&(g[U]=!(T[U]=Y))}}else pe=Oo(pe===T?pe.splice(ie,pe.length):pe),_?_(null,T,pe,L):Di.apply(T,pe)})}function Vu(C){for(var P,F,G,_=C.length,c=y.relative[C[0].type],g=c||y.relative[" "],T=c?1:0,x=il(function(B){return B===P},g,!0),L=il(function(B){return ns(P,B)>-1},g,!0),U=[function(B,Y,ne){var X=!c&&(ne||Y!==V)||((P=Y).nodeType?x(B,Y,ne):L(B,Y,ne));return P=null,X}];T<_;T++)if(F=y.relative[C[T].type])U=[il(sl(U),F)];else{if(F=y.filter[C[T].type].apply(null,C[T].matches),F[at]){for(G=++T;G<_&&!y.relative[C[G].type];G++);return Ri(T>1&&sl(U),T>1&&Bs(C.slice(0,T-1).concat({value:C[T-2].type===" "?"*":""})).replace(Mu,"$1"),F,T<G&&Vu(C.slice(T,G)),G<_&&Vu(C=C.slice(G)),G<_&&Bs(C))}U.push(F)}return sl(U)}function Bu(C,P){var F=P.length>0,G=C.length>0,_=function(c,g,T,x,L){var U,B,Y,ne=0,X="0",ie=c&&[],Se=[],_e=V,pe=c||G&&y.find.TAG("*",L),ke=Rn+=_e==null?1:Math.random()||.1,Ne=pe.length;for(L&&(V=g==K||g||L);X!==Ne&&(U=pe[X])!=null;X++){if(G&&U){for(B=0,!g&&U.ownerDocument!=K&&(j(U),T=!Le);Y=C[B++];)if(Y(U,g||K,T)){x.push(U);break}L&&(Rn=ke)}F&&((U=!Y&&U)&&ne--,c&&ie.push(U))}if(ne+=X,F&&X!==ne){for(B=0;Y=P[B++];)Y(ie,Se,g,T);if(c){if(ne>0)for(;X--;)ie[X]||Se[X]||(Se[X]=Ai.call(x));Se=Oo(Se)}Di.apply(x,Se),L&&!c&&Se.length>0&&ne+P.length>1&&ct.uniqueSort(x)}return L&&(Rn=ke,V=_e),ie};return F?br(_):_}return O=ct.compile=function(C,P){var F,G=[],_=[],c=nl[C+" "];if(!c){for(P||(P=S(C)),F=P.length;F--;)c=Vu(P[F]),c[at]?G.push(c):_.push(c);c=nl(C,Bu(_,G)),c.selector=C}return c},A=ct.select=function(C,P,F,G){var _,c,g,T,x,L=typeof C=="function"&&C,U=!G&&S(C=L.selector||C);if(F=F||[],U.length===1){if(c=U[0]=U[0].slice(0),c.length>2&&(g=c[0]).type==="ID"&&P.nodeType===9&&Le&&y.relative[c[1].type]){if(P=(y.find.ID(g.matches[0].replace(ui,Pi),P)||[])[0],P)L&&(P=P.parentNode);else return F;C=C.slice(c.shift().value.length)}for(_=Fu.needsContext.test(C)?0:c.length;_--&&(g=c[_],!y.relative[T=g.type]);)if((x=y.find[T])&&(G=x(g.matches[0].replace(ui,Pi),Ro.test(c[0].type)&&Kh(P.parentNode)||P))){if(c.splice(_,1),C=G.length&&Bs(c),!C)return Di.apply(F,G),F;break}}return(L||O(C,U))(G,P,!Le,F,!P||Ro.test(C)&&Kh(P.parentNode)||P),F},f.sortStable=at.split("").sort(Fs).join("")===at,f.detectDuplicates=!!Z,j(),f.sortDetached=fn(function(C){return C.compareDocumentPosition(K.createElement("fieldset"))&1}),fn(function(C){return C.innerHTML="<a href='#'></a>",C.firstChild.getAttribute("href")==="#"})||Uu("type|href|height|width",function(C,P,F){if(!F)return C.getAttribute(P,P.toLowerCase()==="type"?1:2)}),(!f.attributes||!fn(function(C){return C.innerHTML="<input/>",C.firstChild.setAttribute("value",""),C.firstChild.getAttribute("value")===""}))&&Uu("value",function(C,P,F){if(!F&&C.nodeName.toLowerCase()==="input")return C.defaultValue}),fn(function(C){return C.getAttribute("disabled")==null})||Uu(Lu,function(C,P,F){var G;if(!F)return C[P]===!0?P.toLowerCase():(G=C.getAttributeNode(P))&&G.specified?G.value:null}),ct}(e);m.find=he,m.expr=he.selectors,m.expr[":"]=m.expr.pseudos,m.uniqueSort=m.unique=he.uniqueSort,m.text=he.getText,m.isXMLDoc=he.isXML,m.contains=he.contains,m.escapeSelector=he.escape;var Ye=function(l,d,f){for(var y=[],E=f!==void 0;(l=l[d])&&l.nodeType!==9;)if(l.nodeType===1){if(E&&m(l).is(f))break;y.push(l)}return y},Fe=function(l,d){for(var f=[];l;l=l.nextSibling)l.nodeType===1&&l!==d&&f.push(l);return f},Kn=m.expr.match.needsContext;function Gt(l,d){return l.nodeName&&l.nodeName.toLowerCase()===d.toLowerCase()}var Ci=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function xs(l,d,f){return R(d)?m.grep(l,function(y,E){return!!d.call(y,E,y)!==f}):d.nodeType?m.grep(l,function(y){return y===d!==f}):typeof d!="string"?m.grep(l,function(y){return u.call(d,y)>-1!==f}):m.filter(d,l,f)}m.filter=function(l,d,f){var y=d[0];return f&&(l=":not("+l+")"),d.length===1&&y.nodeType===1?m.find.matchesSelector(y,l)?[y]:[]:m.find.matches(l,m.grep(d,function(E){return E.nodeType===1}))},m.fn.extend({find:function(l){var d,f,y=this.length,E=this;if(typeof l!="string")return this.pushStack(m(l).filter(function(){for(d=0;d<y;d++)if(m.contains(E[d],this))return!0}));for(f=this.pushStack([]),d=0;d<y;d++)m.find(l,E[d],f);return y>1?m.uniqueSort(f):f},filter:function(l){return this.pushStack(xs(this,l||[],!1))},not:function(l){return this.pushStack(xs(this,l||[],!0))},is:function(l){return!!xs(this,typeof l=="string"&&Kn.test(l)?m(l):l||[],!1).length}});var qa,mo=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ns=m.fn.init=function(l,d,f){var y,E;if(!l)return this;if(f=f||qa,typeof l=="string")if(l[0]==="<"&&l[l.length-1]===">"&&l.length>=3?y=[null,l,null]:y=mo.exec(l),y&&(y[1]||!d))if(y[1]){if(d=d instanceof m?d[0]:d,m.merge(this,m.parseHTML(y[1],d&&d.nodeType?d.ownerDocument||d:N,!0)),Ci.test(y[1])&&m.isPlainObject(d))for(y in d)R(this[y])?this[y](d[y]):this.attr(y,d[y]);return this}else return E=N.getElementById(y[2]),E&&(this[0]=E,this.length=1),this;else return!d||d.jquery?(d||f).find(l):this.constructor(d).find(l);else{if(l.nodeType)return this[0]=l,this.length=1,this;if(R(l))return f.ready!==void 0?f.ready(l):l(m)}return m.makeArray(l,this)};Ns.prototype=m.fn,qa=m(N);var ge=/^(?:parents|prev(?:Until|All))/,Oe={children:!0,contents:!0,next:!0,prev:!0};m.fn.extend({has:function(l){var d=m(l,this),f=d.length;return this.filter(function(){for(var y=0;y<f;y++)if(m.contains(this,d[y]))return!0})},closest:function(l,d){var f,y=0,E=this.length,I=[],S=typeof l!="string"&&m(l);if(!Kn.test(l)){for(;y<E;y++)for(f=this[y];f&&f!==d;f=f.parentNode)if(f.nodeType<11&&(S?S.index(f)>-1:f.nodeType===1&&m.find.matchesSelector(f,l))){I.push(f);break}}return this.pushStack(I.length>1?m.uniqueSort(I):I)},index:function(l){return l?typeof l=="string"?u.call(m(l),this[0]):u.call(this,l.jquery?l[0]:l):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(l,d){return this.pushStack(m.uniqueSort(m.merge(this.get(),m(l,d))))},addBack:function(l){return this.add(l==null?this.prevObject:this.prevObject.filter(l))}});function W(l,d){for(;(l=l[d])&&l.nodeType!==1;);return l}m.each({parent:function(l){var d=l.parentNode;return d&&d.nodeType!==11?d:null},parents:function(l){return Ye(l,"parentNode")},parentsUntil:function(l,d,f){return Ye(l,"parentNode",f)},next:function(l){return W(l,"nextSibling")},prev:function(l){return W(l,"previousSibling")},nextAll:function(l){return Ye(l,"nextSibling")},prevAll:function(l){return Ye(l,"previousSibling")},nextUntil:function(l,d,f){return Ye(l,"nextSibling",f)},prevUntil:function(l,d,f){return Ye(l,"previousSibling",f)},siblings:function(l){return Fe((l.parentNode||{}).firstChild,l)},children:function(l){return Fe(l.firstChild)},contents:function(l){return l.contentDocument!=null&&i(l.contentDocument)?l.contentDocument:(Gt(l,"template")&&(l=l.content||l),m.merge([],l.childNodes))}},function(l,d){m.fn[l]=function(f,y){var E=m.map(this,d,f);return l.slice(-5)!=="Until"&&(y=f),y&&typeof y=="string"&&(E=m.filter(y,E)),this.length>1&&(Oe[l]||m.uniqueSort(E),ge.test(l)&&E.reverse()),this.pushStack(E)}});var He=/[^\x20\t\r\n\f]+/g;function ut(l){var d={};return m.each(l.match(He)||[],function(f,y){d[y]=!0}),d}m.Callbacks=function(l){l=typeof l=="string"?ut(l):m.extend({},l);var d,f,y,E,I=[],S=[],O=-1,A=function(){for(E=E||l.once,y=d=!0;S.length;O=-1)for(f=S.shift();++O<I.length;)I[O].apply(f[0],f[1])===!1&&l.stopOnFalse&&(O=I.length,f=!1);l.memory||(f=!1),d=!1,E&&(f?I=[]:I="")},V={add:function(){return I&&(f&&!d&&(O=I.length-1,S.push(f)),function z(Z){m.each(Z,function(j,K){R(K)?(!l.unique||!V.has(K))&&I.push(K):K&&K.length&&Q(K)!=="string"&&z(K)})}(arguments),f&&!d&&A()),this},remove:function(){return m.each(arguments,function(z,Z){for(var j;(j=m.inArray(Z,I,j))>-1;)I.splice(j,1),j<=O&&O--}),this},has:function(z){return z?m.inArray(z,I)>-1:I.length>0},empty:function(){return I&&(I=[]),this},disable:function(){return E=S=[],I=f="",this},disabled:function(){return!I},lock:function(){return E=S=[],!f&&!d&&(I=f=""),this},locked:function(){return!!E},fireWith:function(z,Z){return E||(Z=Z||[],Z=[z,Z.slice?Z.slice():Z],S.push(Z),d||A()),this},fire:function(){return V.fireWith(this,arguments),this},fired:function(){return!!y}};return V};function or(l){return l}function ar(l){throw l}function Qi(l,d,f,y){var E;try{l&&R(E=l.promise)?E.call(l).done(d).fail(f):l&&R(E=l.then)?E.call(l,d,f):d.apply(void 0,[l].slice(y))}catch(I){f.apply(void 0,[I])}}m.extend({Deferred:function(l){var d=[["notify","progress",m.Callbacks("memory"),m.Callbacks("memory"),2],["resolve","done",m.Callbacks("once memory"),m.Callbacks("once memory"),0,"resolved"],["reject","fail",m.Callbacks("once memory"),m.Callbacks("once memory"),1,"rejected"]],f="pending",y={state:function(){return f},always:function(){return E.done(arguments).fail(arguments),this},catch:function(I){return y.then(null,I)},pipe:function(){var I=arguments;return m.Deferred(function(S){m.each(d,function(O,A){var V=R(I[A[4]])&&I[A[4]];E[A[1]](function(){var z=V&&V.apply(this,arguments);z&&R(z.promise)?z.promise().progress(S.notify).done(S.resolve).fail(S.reject):S[A[0]+"With"](this,V?[z]:arguments)})}),I=null}).promise()},then:function(I,S,O){var A=0;function V(z,Z,j,K){return function(){var we=this,Le=arguments,Ee=function(){var Lt,Xn;if(!(z<A)){if(Lt=j.apply(we,Le),Lt===Z.promise())throw new TypeError("Thenable self-resolution");Xn=Lt&&(typeof Lt=="object"||typeof Lt=="function")&&Lt.then,R(Xn)?K?Xn.call(Lt,V(A,Z,or,K),V(A,Z,ar,K)):(A++,Xn.call(Lt,V(A,Z,or,K),V(A,Z,ar,K),V(A,Z,or,Z.notifyWith))):(j!==or&&(we=void 0,Le=[Lt]),(K||Z.resolveWith)(we,Le))}},Bt=K?Ee:function(){try{Ee()}catch(Lt){m.Deferred.exceptionHook&&m.Deferred.exceptionHook(Lt,Bt.stackTrace),z+1>=A&&(j!==ar&&(we=void 0,Le=[Lt]),Z.rejectWith(we,Le))}};z?Bt():(m.Deferred.getStackHook&&(Bt.stackTrace=m.Deferred.getStackHook()),e.setTimeout(Bt))}}return m.Deferred(function(z){d[0][3].add(V(0,z,R(O)?O:or,z.notifyWith)),d[1][3].add(V(0,z,R(I)?I:or)),d[2][3].add(V(0,z,R(S)?S:ar))}).promise()},promise:function(I){return I!=null?m.extend(I,y):y}},E={};return m.each(d,function(I,S){var O=S[2],A=S[5];y[S[1]]=O.add,A&&O.add(function(){f=A},d[3-I][2].disable,d[3-I][3].disable,d[0][2].lock,d[0][3].lock),O.add(S[3].fire),E[S[0]]=function(){return E[S[0]+"With"](this===E?void 0:this,arguments),this},E[S[0]+"With"]=O.fireWith}),y.promise(E),l&&l.call(E,E),E},when:function(l){var d=arguments.length,f=d,y=Array(f),E=s.call(arguments),I=m.Deferred(),S=function(O){return function(A){y[O]=this,E[O]=arguments.length>1?s.call(arguments):A,--d||I.resolveWith(y,E)}};if(d<=1&&(Qi(l,I.done(S(f)).resolve,I.reject,!d),I.state()==="pending"||R(E[f]&&E[f].then)))return I.then();for(;f--;)Qi(E[f],S(f),I.reject);return I.promise()}});var rn=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;m.Deferred.exceptionHook=function(l,d){e.console&&e.console.warn&&l&&rn.test(l.name)&&e.console.warn("jQuery.Deferred exception: "+l.message,l.stack,d)},m.readyException=function(l){e.setTimeout(function(){throw l})};var Ir=m.Deferred();m.fn.ready=function(l){return Ir.then(l).catch(function(d){m.readyException(d)}),this},m.extend({isReady:!1,readyWait:1,ready:function(l){(l===!0?--m.readyWait:m.isReady)||(m.isReady=!0,!(l!==!0&&--m.readyWait>0)&&Ir.resolveWith(N,[m]))}}),m.ready.then=Ir.then;function Gn(){N.removeEventListener("DOMContentLoaded",Gn),e.removeEventListener("load",Gn),m.ready()}N.readyState==="complete"||N.readyState!=="loading"&&!N.documentElement.doScroll?e.setTimeout(m.ready):(N.addEventListener("DOMContentLoaded",Gn),e.addEventListener("load",Gn));var Tr=function(l,d,f,y,E,I,S){var O=0,A=l.length,V=f==null;if(Q(f)==="object"){E=!0;for(O in f)Tr(l,d,O,f[O],!0,I,S)}else if(y!==void 0&&(E=!0,R(y)||(S=!0),V&&(S?(d.call(l,y),d=null):(V=d,d=function(z,Z,j){return V.call(m(z),j)})),d))for(;O<A;O++)d(l[O],f,S?y:y.call(l[O],O,d(l[O],f)));return E?l:V?d.call(l):A?d(l[0],f):I},za=/^-ms-/,jp=/-([a-z])/g;function Wa(l,d){return d.toUpperCase()}function xe(l){return l.replace(za,"ms-").replace(jp,Wa)}var Ha=function(l){return l.nodeType===1||l.nodeType===9||!+l.nodeType};function Ka(){this.expando=m.expando+Ka.uid++}Ka.uid=1,Ka.prototype={cache:function(l){var d=l[this.expando];return d||(d={},Ha(l)&&(l.nodeType?l[this.expando]=d:Object.defineProperty(l,this.expando,{value:d,configurable:!0}))),d},set:function(l,d,f){var y,E=this.cache(l);if(typeof d=="string")E[xe(d)]=f;else for(y in d)E[xe(y)]=d[y];return E},get:function(l,d){return d===void 0?this.cache(l):l[this.expando]&&l[this.expando][xe(d)]},access:function(l,d,f){return d===void 0||d&&typeof d=="string"&&f===void 0?this.get(l,d):(this.set(l,d,f),f!==void 0?f:d)},remove:function(l,d){var f,y=l[this.expando];if(y!==void 0){if(d!==void 0)for(Array.isArray(d)?d=d.map(xe):(d=xe(d),d=d in y?[d]:d.match(He)||[]),f=d.length;f--;)delete y[d[f]];(d===void 0||m.isEmptyObject(y))&&(l.nodeType?l[this.expando]=void 0:delete l[this.expando])}},hasData:function(l){var d=l[this.expando];return d!==void 0&&!m.isEmptyObject(d)}};var be=new Ka,en=new Ka,yo=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,vo=/[A-Z]/g;function wu(l){return l==="true"?!0:l==="false"?!1:l==="null"?null:l===+l+""?+l:yo.test(l)?JSON.parse(l):l}function Eu(l,d,f){var y;if(f===void 0&&l.nodeType===1)if(y="data-"+d.replace(vo,"-$&").toLowerCase(),f=l.getAttribute(y),typeof f=="string"){try{f=wu(f)}catch{}en.set(l,d,f)}else f=void 0;return f}m.extend({hasData:function(l){return en.hasData(l)||be.hasData(l)},data:function(l,d,f){return en.access(l,d,f)},removeData:function(l,d){en.remove(l,d)},_data:function(l,d,f){return be.access(l,d,f)},_removeData:function(l,d){be.remove(l,d)}}),m.fn.extend({data:function(l,d){var f,y,E,I=this[0],S=I&&I.attributes;if(l===void 0){if(this.length&&(E=en.get(I),I.nodeType===1&&!be.get(I,"hasDataAttrs"))){for(f=S.length;f--;)S[f]&&(y=S[f].name,y.indexOf("data-")===0&&(y=xe(y.slice(5)),Eu(I,y,E[y])));be.set(I,"hasDataAttrs",!0)}return E}return typeof l=="object"?this.each(function(){en.set(this,l)}):Tr(this,function(O){var A;if(I&&O===void 0)return A=en.get(I,l),A!==void 0||(A=Eu(I,l),A!==void 0)?A:void 0;this.each(function(){en.set(this,l,O)})},null,d,arguments.length>1,null,!0)},removeData:function(l){return this.each(function(){en.remove(this,l)})}}),m.extend({queue:function(l,d,f){var y;if(l)return d=(d||"fx")+"queue",y=be.get(l,d),f&&(!y||Array.isArray(f)?y=be.access(l,d,m.makeArray(f)):y.push(f)),y||[]},dequeue:function(l,d){d=d||"fx";var f=m.queue(l,d),y=f.length,E=f.shift(),I=m._queueHooks(l,d),S=function(){m.dequeue(l,d)};E==="inprogress"&&(E=f.shift(),y--),E&&(d==="fx"&&f.unshift("inprogress"),delete I.stop,E.call(l,S,I)),!y&&I&&I.empty.fire()},_queueHooks:function(l,d){var f=d+"queueHooks";return be.get(l,f)||be.access(l,f,{empty:m.Callbacks("once memory").add(function(){be.remove(l,[d+"queue",f])})})}}),m.fn.extend({queue:function(l,d){var f=2;return typeof l!="string"&&(d=l,l="fx",f--),arguments.length<f?m.queue(this[0],l):d===void 0?this:this.each(function(){var y=m.queue(this,l,d);m._queueHooks(this,l),l==="fx"&&y[0]!=="inprogress"&&m.dequeue(this,l)})},dequeue:function(l){return this.each(function(){m.dequeue(this,l)})},clearQueue:function(l){return this.queue(l||"fx",[])},promise:function(l,d){var f,y=1,E=m.Deferred(),I=this,S=this.length,O=function(){--y||E.resolveWith(I,[I])};for(typeof l!="string"&&(d=l,l=void 0),l=l||"fx";S--;)f=be.get(I[S],l+"queueHooks"),f&&f.empty&&(y++,f.empty.add(O));return O(),E.promise(d)}});var Ch=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Yi=new RegExp("^(?:([+-])=|)("+Ch+")([a-z%]*)$","i"),bi=["Top","Right","Bottom","Left"],As=N.documentElement,_o=function(l){return m.contains(l.ownerDocument,l)},wo={composed:!0};As.getRootNode&&(_o=function(l){return m.contains(l.ownerDocument,l)||l.getRootNode(wo)===l.ownerDocument});var Eo=function(l,d){return l=d||l,l.style.display==="none"||l.style.display===""&&_o(l)&&m.css(l,"display")==="none"};function Ga(l,d,f,y){var E,I,S=20,O=y?function(){return y.cur()}:function(){return m.css(l,d,"")},A=O(),V=f&&f[3]||(m.cssNumber[d]?"":"px"),z=l.nodeType&&(m.cssNumber[d]||V!=="px"&&+A)&&Yi.exec(m.css(l,d));if(z&&z[3]!==V){for(A=A/2,V=V||z[3],z=+A||1;S--;)m.style(l,d,z+V),(1-I)*(1-(I=O()/A||.5))<=0&&(S=0),z=z/I;z=z*2,m.style(l,d,z+V),f=f||[]}return f&&(z=+z||+A||0,E=f[1]?z+(f[1]+1)*f[2]:+f[2],y&&(y.unit=V,y.start=z,y.end=E)),E}var Qa={};function bh(l){var d,f=l.ownerDocument,y=l.nodeName,E=Qa[y];return E||(d=f.body.appendChild(f.createElement(y)),E=m.css(d,"display"),d.parentNode.removeChild(d),E==="none"&&(E="block"),Qa[y]=E,E)}function Io(l,d){for(var f,y,E=[],I=0,S=l.length;I<S;I++)y=l[I],y.style&&(f=y.style.display,d?(f==="none"&&(E[I]=be.get(y,"display")||null,E[I]||(y.style.display="")),y.style.display===""&&Eo(y)&&(E[I]=bh(y))):f!=="none"&&(E[I]="none",be.set(y,"display",f)));for(I=0;I<S;I++)E[I]!=null&&(l[I].style.display=E[I]);return l}m.fn.extend({show:function(){return Io(this,!0)},hide:function(){return Io(this)},toggle:function(l){return typeof l=="boolean"?l?this.show():this.hide():this.each(function(){Eo(this)?m(this).show():m(this).hide()})}});var Ya=/^(?:checkbox|radio)$/i,Ds=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,dn=/^$|^module$|\/(?:java|ecma)script/i;(function(){var l=N.createDocumentFragment(),d=l.appendChild(N.createElement("div")),f=N.createElement("input");f.setAttribute("type","radio"),f.setAttribute("checked","checked"),f.setAttribute("name","t"),d.appendChild(f),k.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,d.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!d.cloneNode(!0).lastChild.defaultValue,d.innerHTML="<option></option>",k.option=!!d.lastChild})();var wt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wt.tbody=wt.tfoot=wt.colgroup=wt.caption=wt.thead,wt.th=wt.td,k.option||(wt.optgroup=wt.option=[1,"<select multiple='multiple'>","</select>"]);function gt(l,d){var f;return typeof l.getElementsByTagName<"u"?f=l.getElementsByTagName(d||"*"):typeof l.querySelectorAll<"u"?f=l.querySelectorAll(d||"*"):f=[],d===void 0||d&&Gt(l,d)?m.merge([l],f):f}function sn(l,d){for(var f=0,y=l.length;f<y;f++)be.set(l[f],"globalEval",!d||be.get(d[f],"globalEval"))}var Iu=/<|&#?\w+;/;function Ps(l,d,f,y,E){for(var I,S,O,A,V,z,Z=d.createDocumentFragment(),j=[],K=0,we=l.length;K<we;K++)if(I=l[K],I||I===0)if(Q(I)==="object")m.merge(j,I.nodeType?[I]:I);else if(!Iu.test(I))j.push(d.createTextNode(I));else{for(S=S||Z.appendChild(d.createElement("div")),O=(Ds.exec(I)||["",""])[1].toLowerCase(),A=wt[O]||wt._default,S.innerHTML=A[1]+m.htmlPrefilter(I)+A[2],z=A[0];z--;)S=S.lastChild;m.merge(j,S.childNodes),S=Z.firstChild,S.textContent=""}for(Z.textContent="",K=0;I=j[K++];){if(y&&m.inArray(I,y)>-1){E&&E.push(I);continue}if(V=_o(I),S=gt(Z.appendChild(I),"script"),V&&sn(S),f)for(z=0;I=S[z++];)dn.test(I.type||"")&&f.push(I)}return Z}var Xi=/^([^.]*)(?:\.(.+)|)/;function jr(){return!0}function Rs(){return!1}function kh(l,d){return l===To()==(d==="focus")}function To(){try{return N.activeElement}catch{}}function Tu(l,d,f,y,E,I){var S,O;if(typeof d=="object"){typeof f!="string"&&(y=y||f,f=void 0);for(O in d)Tu(l,O,f,y,d[O],I);return l}if(y==null&&E==null?(E=f,y=f=void 0):E==null&&(typeof f=="string"?(E=y,y=void 0):(E=y,y=f,f=void 0)),E===!1)E=Rs;else if(!E)return l;return I===1&&(S=E,E=function(A){return m().off(A),S.apply(this,arguments)},E.guid=S.guid||(S.guid=m.guid++)),l.each(function(){m.event.add(this,d,E,y,f)})}m.event={global:{},add:function(l,d,f,y,E){var I,S,O,A,V,z,Z,j,K,we,Le,Ee=be.get(l);if(!!Ha(l))for(f.handler&&(I=f,f=I.handler,E=I.selector),E&&m.find.matchesSelector(As,E),f.guid||(f.guid=m.guid++),(A=Ee.events)||(A=Ee.events=Object.create(null)),(S=Ee.handle)||(S=Ee.handle=function(Bt){return typeof m<"u"&&m.event.triggered!==Bt.type?m.event.dispatch.apply(l,arguments):void 0}),d=(d||"").match(He)||[""],V=d.length;V--;)O=Xi.exec(d[V])||[],K=Le=O[1],we=(O[2]||"").split(".").sort(),K&&(Z=m.event.special[K]||{},K=(E?Z.delegateType:Z.bindType)||K,Z=m.event.special[K]||{},z=m.extend({type:K,origType:Le,data:y,handler:f,guid:f.guid,selector:E,needsContext:E&&m.expr.match.needsContext.test(E),namespace:we.join(".")},I),(j=A[K])||(j=A[K]=[],j.delegateCount=0,(!Z.setup||Z.setup.call(l,y,we,S)===!1)&&l.addEventListener&&l.addEventListener(K,S)),Z.add&&(Z.add.call(l,z),z.handler.guid||(z.handler.guid=f.guid)),E?j.splice(j.delegateCount++,0,z):j.push(z),m.event.global[K]=!0)},remove:function(l,d,f,y,E){var I,S,O,A,V,z,Z,j,K,we,Le,Ee=be.hasData(l)&&be.get(l);if(!(!Ee||!(A=Ee.events))){for(d=(d||"").match(He)||[""],V=d.length;V--;){if(O=Xi.exec(d[V])||[],K=Le=O[1],we=(O[2]||"").split(".").sort(),!K){for(K in A)m.event.remove(l,K+d[V],f,y,!0);continue}for(Z=m.event.special[K]||{},K=(y?Z.delegateType:Z.bindType)||K,j=A[K]||[],O=O[2]&&new RegExp("(^|\\.)"+we.join("\\.(?:.*\\.|)")+"(\\.|$)"),S=I=j.length;I--;)z=j[I],(E||Le===z.origType)&&(!f||f.guid===z.guid)&&(!O||O.test(z.namespace))&&(!y||y===z.selector||y==="**"&&z.selector)&&(j.splice(I,1),z.selector&&j.delegateCount--,Z.remove&&Z.remove.call(l,z));S&&!j.length&&((!Z.teardown||Z.teardown.call(l,we,Ee.handle)===!1)&&m.removeEvent(l,K,Ee.handle),delete A[K])}m.isEmptyObject(A)&&be.remove(l,"handle events")}},dispatch:function(l){var d,f,y,E,I,S,O=new Array(arguments.length),A=m.event.fix(l),V=(be.get(this,"events")||Object.create(null))[A.type]||[],z=m.event.special[A.type]||{};for(O[0]=A,d=1;d<arguments.length;d++)O[d]=arguments[d];if(A.delegateTarget=this,!(z.preDispatch&&z.preDispatch.call(this,A)===!1)){for(S=m.event.handlers.call(this,A,V),d=0;(E=S[d++])&&!A.isPropagationStopped();)for(A.currentTarget=E.elem,f=0;(I=E.handlers[f++])&&!A.isImmediatePropagationStopped();)(!A.rnamespace||I.namespace===!1||A.rnamespace.test(I.namespace))&&(A.handleObj=I,A.data=I.data,y=((m.event.special[I.origType]||{}).handle||I.handler).apply(E.elem,O),y!==void 0&&(A.result=y)===!1&&(A.preventDefault(),A.stopPropagation()));return z.postDispatch&&z.postDispatch.call(this,A),A.result}},handlers:function(l,d){var f,y,E,I,S,O=[],A=d.delegateCount,V=l.target;if(A&&V.nodeType&&!(l.type==="click"&&l.button>=1)){for(;V!==this;V=V.parentNode||this)if(V.nodeType===1&&!(l.type==="click"&&V.disabled===!0)){for(I=[],S={},f=0;f<A;f++)y=d[f],E=y.selector+" ",S[E]===void 0&&(S[E]=y.needsContext?m(E,this).index(V)>-1:m.find(E,this,null,[V]).length),S[E]&&I.push(y);I.length&&O.push({elem:V,handlers:I})}}return V=this,A<d.length&&O.push({elem:V,handlers:d.slice(A)}),O},addProp:function(l,d){Object.defineProperty(m.Event.prototype,l,{enumerable:!0,configurable:!0,get:R(d)?function(){if(this.originalEvent)return d(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[l]},set:function(f){Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:f})}})},fix:function(l){return l[m.expando]?l:new m.Event(l)},special:{load:{noBubble:!0},click:{setup:function(l){var d=this||l;return Ya.test(d.type)&&d.click&&Gt(d,"input")&&So(d,"click",jr),!1},trigger:function(l){var d=this||l;return Ya.test(d.type)&&d.click&&Gt(d,"input")&&So(d,"click"),!0},_default:function(l){var d=l.target;return Ya.test(d.type)&&d.click&&Gt(d,"input")&&be.get(d,"click")||Gt(d,"a")}},beforeunload:{postDispatch:function(l){l.result!==void 0&&l.originalEvent&&(l.originalEvent.returnValue=l.result)}}}};function So(l,d,f){if(!f){be.get(l,d)===void 0&&m.event.add(l,d,jr);return}be.set(l,d,!1),m.event.add(l,d,{namespace:!1,handler:function(y){var E,I,S=be.get(this,d);if(y.isTrigger&1&&this[d]){if(S.length)(m.event.special[d]||{}).delegateType&&y.stopPropagation();else if(S=s.call(arguments),be.set(this,d,S),E=f(this,d),this[d](),I=be.get(this,d),S!==I||E?be.set(this,d,!1):I={},S!==I)return y.stopImmediatePropagation(),y.preventDefault(),I&&I.value}else S.length&&(be.set(this,d,{value:m.event.trigger(m.extend(S[0],m.Event.prototype),S.slice(1),this)}),y.stopImmediatePropagation())}})}m.removeEvent=function(l,d,f){l.removeEventListener&&l.removeEventListener(d,f)},m.Event=function(l,d){if(!(this instanceof m.Event))return new m.Event(l,d);l&&l.type?(this.originalEvent=l,this.type=l.type,this.isDefaultPrevented=l.defaultPrevented||l.defaultPrevented===void 0&&l.returnValue===!1?jr:Rs,this.target=l.target&&l.target.nodeType===3?l.target.parentNode:l.target,this.currentTarget=l.currentTarget,this.relatedTarget=l.relatedTarget):this.type=l,d&&m.extend(this,d),this.timeStamp=l&&l.timeStamp||Date.now(),this[m.expando]=!0},m.Event.prototype={constructor:m.Event,isDefaultPrevented:Rs,isPropagationStopped:Rs,isImmediatePropagationStopped:Rs,isSimulated:!1,preventDefault:function(){var l=this.originalEvent;this.isDefaultPrevented=jr,l&&!this.isSimulated&&l.preventDefault()},stopPropagation:function(){var l=this.originalEvent;this.isPropagationStopped=jr,l&&!this.isSimulated&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.originalEvent;this.isImmediatePropagationStopped=jr,l&&!this.isSimulated&&l.stopImmediatePropagation(),this.stopPropagation()}},m.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},m.event.addProp),m.each({focus:"focusin",blur:"focusout"},function(l,d){m.event.special[l]={setup:function(){return So(this,l,kh),!1},trigger:function(){return So(this,l),!0},_default:function(f){return be.get(f.target,l)},delegateType:d}}),m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(l,d){m.event.special[l]={delegateType:d,bindType:d,handle:function(f){var y,E=this,I=f.relatedTarget,S=f.handleObj;return(!I||I!==E&&!m.contains(E,I))&&(f.type=S.origType,y=S.handler.apply(this,arguments),f.type=d),y}}}),m.fn.extend({on:function(l,d,f,y){return Tu(this,l,d,f,y)},one:function(l,d,f,y){return Tu(this,l,d,f,y,1)},off:function(l,d,f){var y,E;if(l&&l.preventDefault&&l.handleObj)return y=l.handleObj,m(l.delegateTarget).off(y.namespace?y.origType+"."+y.namespace:y.origType,y.selector,y.handler),this;if(typeof l=="object"){for(E in l)this.off(E,d,l[E]);return this}return(d===!1||typeof d=="function")&&(f=d,d=void 0),f===!1&&(f=Rs),this.each(function(){m.event.remove(this,l,f,d)})}});var xh=/<script|<style|<link/i,qp=/checked\s*(?:[^=]|=\s*.checked.)/i,zp=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Nh(l,d){return Gt(l,"table")&&Gt(d.nodeType!==11?d:d.firstChild,"tr")&&m(l).children("tbody")[0]||l}function Wp(l){return l.type=(l.getAttribute("type")!==null)+"/"+l.type,l}function Hp(l){return(l.type||"").slice(0,5)==="true/"?l.type=l.type.slice(5):l.removeAttribute("type"),l}function Ah(l,d){var f,y,E,I,S,O,A;if(d.nodeType===1){if(be.hasData(l)&&(I=be.get(l),A=I.events,A)){be.remove(d,"handle events");for(E in A)for(f=0,y=A[E].length;f<y;f++)m.event.add(d,E,A[E][f])}en.hasData(l)&&(S=en.access(l),O=m.extend({},S),en.set(d,O))}}function Kp(l,d){var f=d.nodeName.toLowerCase();f==="input"&&Ya.test(l.type)?d.checked=l.checked:(f==="input"||f==="textarea")&&(d.defaultValue=l.defaultValue)}function Os(l,d,f,y){d=o(d);var E,I,S,O,A,V,z=0,Z=l.length,j=Z-1,K=d[0],we=R(K);if(we||Z>1&&typeof K=="string"&&!k.checkClone&&qp.test(K))return l.each(function(Le){var Ee=l.eq(Le);we&&(d[0]=K.call(this,Le,Ee.html())),Os(Ee,d,f,y)});if(Z&&(E=Ps(d,l[0].ownerDocument,!1,l,y),I=E.firstChild,E.childNodes.length===1&&(E=I),I||y)){for(S=m.map(gt(E,"script"),Wp),O=S.length;z<Z;z++)A=E,z!==j&&(A=m.clone(A,!0,!0),O&&m.merge(S,gt(A,"script"))),f.call(l[z],A,z);if(O)for(V=S[S.length-1].ownerDocument,m.map(S,Hp),z=0;z<O;z++)A=S[z],dn.test(A.type||"")&&!be.access(A,"globalEval")&&m.contains(V,A)&&(A.src&&(A.type||"").toLowerCase()!=="module"?m._evalUrl&&!A.noModule&&m._evalUrl(A.src,{nonce:A.nonce||A.getAttribute("nonce")},V):M(A.textContent.replace(zp,""),A,V))}return l}function Dh(l,d,f){for(var y,E=d?m.filter(d,l):l,I=0;(y=E[I])!=null;I++)!f&&y.nodeType===1&&m.cleanData(gt(y)),y.parentNode&&(f&&_o(y)&&sn(gt(y,"script")),y.parentNode.removeChild(y));return l}m.extend({htmlPrefilter:function(l){return l},clone:function(l,d,f){var y,E,I,S,O=l.cloneNode(!0),A=_o(l);if(!k.noCloneChecked&&(l.nodeType===1||l.nodeType===11)&&!m.isXMLDoc(l))for(S=gt(O),I=gt(l),y=0,E=I.length;y<E;y++)Kp(I[y],S[y]);if(d)if(f)for(I=I||gt(l),S=S||gt(O),y=0,E=I.length;y<E;y++)Ah(I[y],S[y]);else Ah(l,O);return S=gt(O,"script"),S.length>0&&sn(S,!A&&gt(l,"script")),O},cleanData:function(l){for(var d,f,y,E=m.event.special,I=0;(f=l[I])!==void 0;I++)if(Ha(f)){if(d=f[be.expando]){if(d.events)for(y in d.events)E[y]?m.event.remove(f,y):m.removeEvent(f,y,d.handle);f[be.expando]=void 0}f[en.expando]&&(f[en.expando]=void 0)}}}),m.fn.extend({detach:function(l){return Dh(this,l,!0)},remove:function(l){return Dh(this,l)},text:function(l){return Tr(this,function(d){return d===void 0?m.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=d)})},null,l,arguments.length)},append:function(){return Os(this,arguments,function(l){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var d=Nh(this,l);d.appendChild(l)}})},prepend:function(){return Os(this,arguments,function(l){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var d=Nh(this,l);d.insertBefore(l,d.firstChild)}})},before:function(){return Os(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this)})},after:function(){return Os(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling)})},empty:function(){for(var l,d=0;(l=this[d])!=null;d++)l.nodeType===1&&(m.cleanData(gt(l,!1)),l.textContent="");return this},clone:function(l,d){return l=l==null?!1:l,d=d==null?l:d,this.map(function(){return m.clone(this,l,d)})},html:function(l){return Tr(this,function(d){var f=this[0]||{},y=0,E=this.length;if(d===void 0&&f.nodeType===1)return f.innerHTML;if(typeof d=="string"&&!xh.test(d)&&!wt[(Ds.exec(d)||["",""])[1].toLowerCase()]){d=m.htmlPrefilter(d);try{for(;y<E;y++)f=this[y]||{},f.nodeType===1&&(m.cleanData(gt(f,!1)),f.innerHTML=d);f=0}catch{}}f&&this.empty().append(d)},null,l,arguments.length)},replaceWith:function(){var l=[];return Os(this,arguments,function(d){var f=this.parentNode;m.inArray(this,l)<0&&(m.cleanData(gt(this)),f&&f.replaceChild(d,this))},l)}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,d){m.fn[l]=function(f){for(var y,E=[],I=m(f),S=I.length-1,O=0;O<=S;O++)y=O===S?this:this.clone(!0),m(I[O])[d](y),a.apply(E,y.get());return this.pushStack(E)}});var Su=new RegExp("^("+Ch+")(?!px)[a-z%]+$","i"),Sr=/^--/,Dn=function(l){var d=l.ownerDocument.defaultView;return(!d||!d.opener)&&(d=e),d.getComputedStyle(l)},Ji=function(l,d,f){var y,E,I={};for(E in d)I[E]=l.style[E],l.style[E]=d[E];y=f.call(l);for(E in d)l.style[E]=I[E];return y},Cr=new RegExp(bi.join("|"),"i"),Cu="[\\x20\\t\\r\\n\\f]",Ph=new RegExp("^"+Cu+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Cu+"+$","g");(function(){function l(){if(!!V){A.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",V.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",As.appendChild(A).appendChild(V);var z=e.getComputedStyle(V);f=z.top!=="1%",O=d(z.marginLeft)===12,V.style.right="60%",I=d(z.right)===36,y=d(z.width)===36,V.style.position="absolute",E=d(V.offsetWidth/3)===12,As.removeChild(A),V=null}}function d(z){return Math.round(parseFloat(z))}var f,y,E,I,S,O,A=N.createElement("div"),V=N.createElement("div");!V.style||(V.style.backgroundClip="content-box",V.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle=V.style.backgroundClip==="content-box",m.extend(k,{boxSizingReliable:function(){return l(),y},pixelBoxStyles:function(){return l(),I},pixelPosition:function(){return l(),f},reliableMarginLeft:function(){return l(),O},scrollboxSize:function(){return l(),E},reliableTrDimensions:function(){var z,Z,j,K;return S==null&&(z=N.createElement("table"),Z=N.createElement("tr"),j=N.createElement("div"),z.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Z.style.cssText="border:1px solid",Z.style.height="1px",j.style.height="9px",j.style.display="block",As.appendChild(z).appendChild(Z).appendChild(j),K=e.getComputedStyle(Z),S=parseInt(K.height,10)+parseInt(K.borderTopWidth,10)+parseInt(K.borderBottomWidth,10)===Z.offsetHeight,As.removeChild(z)),S}}))})();function Qn(l,d,f){var y,E,I,S,O=Sr.test(d),A=l.style;return f=f||Dn(l),f&&(S=f.getPropertyValue(d)||f[d],O&&S&&(S=S.replace(Ph,"$1")||void 0),S===""&&!_o(l)&&(S=m.style(l,d)),!k.pixelBoxStyles()&&Su.test(S)&&Cr.test(d)&&(y=A.width,E=A.minWidth,I=A.maxWidth,A.minWidth=A.maxWidth=A.width=S,S=f.width,A.width=y,A.minWidth=E,A.maxWidth=I)),S!==void 0?S+"":S}function Zi(l,d){return{get:function(){if(l()){delete this.get;return}return(this.get=d).apply(this,arguments)}}}var Xa=["Webkit","Moz","ms"],Ls=N.createElement("div").style,bu={};function Gp(l){for(var d=l[0].toUpperCase()+l.slice(1),f=Xa.length;f--;)if(l=Xa[f]+d,l in Ls)return l}function es(l){var d=m.cssProps[l]||bu[l];return d||(l in Ls?l:bu[l]=Gp(l)||l)}var Rh=/^(none|table(?!-c[ea]).+)/,Qp={position:"absolute",visibility:"hidden",display:"block"},si={letterSpacing:"0",fontWeight:"400"};function Yp(l,d,f){var y=Yi.exec(d);return y?Math.max(0,y[2]-(f||0))+(y[3]||"px"):d}function oi(l,d,f,y,E,I){var S=d==="width"?1:0,O=0,A=0;if(f===(y?"border":"content"))return 0;for(;S<4;S+=2)f==="margin"&&(A+=m.css(l,f+bi[S],!0,E)),y?(f==="content"&&(A-=m.css(l,"padding"+bi[S],!0,E)),f!=="margin"&&(A-=m.css(l,"border"+bi[S]+"Width",!0,E))):(A+=m.css(l,"padding"+bi[S],!0,E),f!=="padding"?A+=m.css(l,"border"+bi[S]+"Width",!0,E):O+=m.css(l,"border"+bi[S]+"Width",!0,E));return!y&&I>=0&&(A+=Math.max(0,Math.ceil(l["offset"+d[0].toUpperCase()+d.slice(1)]-I-A-O-.5))||0),A}function Ja(l,d,f){var y=Dn(l),E=!k.boxSizingReliable()||f,I=E&&m.css(l,"boxSizing",!1,y)==="border-box",S=I,O=Qn(l,d,y),A="offset"+d[0].toUpperCase()+d.slice(1);if(Su.test(O)){if(!f)return O;O="auto"}return(!k.boxSizingReliable()&&I||!k.reliableTrDimensions()&&Gt(l,"tr")||O==="auto"||!parseFloat(O)&&m.css(l,"display",!1,y)==="inline")&&l.getClientRects().length&&(I=m.css(l,"boxSizing",!1,y)==="border-box",S=A in l,S&&(O=l[A])),O=parseFloat(O)||0,O+oi(l,d,f||(I?"border":"content"),S,y,O)+"px"}m.extend({cssHooks:{opacity:{get:function(l,d){if(d){var f=Qn(l,"opacity");return f===""?"1":f}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(l,d,f,y){if(!(!l||l.nodeType===3||l.nodeType===8||!l.style)){var E,I,S,O=xe(d),A=Sr.test(d),V=l.style;if(A||(d=es(O)),S=m.cssHooks[d]||m.cssHooks[O],f!==void 0){if(I=typeof f,I==="string"&&(E=Yi.exec(f))&&E[1]&&(f=Ga(l,d,E),I="number"),f==null||f!==f)return;I==="number"&&!A&&(f+=E&&E[3]||(m.cssNumber[O]?"":"px")),!k.clearCloneStyle&&f===""&&d.indexOf("background")===0&&(V[d]="inherit"),(!S||!("set"in S)||(f=S.set(l,f,y))!==void 0)&&(A?V.setProperty(d,f):V[d]=f)}else return S&&"get"in S&&(E=S.get(l,!1,y))!==void 0?E:V[d]}},css:function(l,d,f,y){var E,I,S,O=xe(d),A=Sr.test(d);return A||(d=es(O)),S=m.cssHooks[d]||m.cssHooks[O],S&&"get"in S&&(E=S.get(l,!0,f)),E===void 0&&(E=Qn(l,d,y)),E==="normal"&&d in si&&(E=si[d]),f===""||f?(I=parseFloat(E),f===!0||isFinite(I)?I||0:E):E}}),m.each(["height","width"],function(l,d){m.cssHooks[d]={get:function(f,y,E){if(y)return Rh.test(m.css(f,"display"))&&(!f.getClientRects().length||!f.getBoundingClientRect().width)?Ji(f,Qp,function(){return Ja(f,d,E)}):Ja(f,d,E)},set:function(f,y,E){var I,S=Dn(f),O=!k.scrollboxSize()&&S.position==="absolute",A=O||E,V=A&&m.css(f,"boxSizing",!1,S)==="border-box",z=E?oi(f,d,E,V,S):0;return V&&O&&(z-=Math.ceil(f["offset"+d[0].toUpperCase()+d.slice(1)]-parseFloat(S[d])-oi(f,d,"border",!1,S)-.5)),z&&(I=Yi.exec(y))&&(I[3]||"px")!=="px"&&(f.style[d]=y,y=m.css(f,d)),Yp(f,y,z)}}}),m.cssHooks.marginLeft=Zi(k.reliableMarginLeft,function(l,d){if(d)return(parseFloat(Qn(l,"marginLeft"))||l.getBoundingClientRect().left-Ji(l,{marginLeft:0},function(){return l.getBoundingClientRect().left}))+"px"}),m.each({margin:"",padding:"",border:"Width"},function(l,d){m.cssHooks[l+d]={expand:function(f){for(var y=0,E={},I=typeof f=="string"?f.split(" "):[f];y<4;y++)E[l+bi[y]+d]=I[y]||I[y-2]||I[0];return E}},l!=="margin"&&(m.cssHooks[l+d].set=Yp)}),m.fn.extend({css:function(l,d){return Tr(this,function(f,y,E){var I,S,O={},A=0;if(Array.isArray(y)){for(I=Dn(f),S=y.length;A<S;A++)O[y[A]]=m.css(f,y[A],!1,I);return O}return E!==void 0?m.style(f,y,E):m.css(f,y)},l,d,arguments.length>1)}});function Pn(l,d,f,y,E){return new Pn.prototype.init(l,d,f,y,E)}m.Tween=Pn,Pn.prototype={constructor:Pn,init:function(l,d,f,y,E,I){this.elem=l,this.prop=f,this.easing=E||m.easing._default,this.options=d,this.start=this.now=this.cur(),this.end=y,this.unit=I||(m.cssNumber[f]?"":"px")},cur:function(){var l=Pn.propHooks[this.prop];return l&&l.get?l.get(this):Pn.propHooks._default.get(this)},run:function(l){var d,f=Pn.propHooks[this.prop];return this.options.duration?this.pos=d=m.easing[this.easing](l,this.options.duration*l,0,1,this.options.duration):this.pos=d=l,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),f&&f.set?f.set(this):Pn.propHooks._default.set(this),this}},Pn.prototype.init.prototype=Pn.prototype,Pn.propHooks={_default:{get:function(l){var d;return l.elem.nodeType!==1||l.elem[l.prop]!=null&&l.elem.style[l.prop]==null?l.elem[l.prop]:(d=m.css(l.elem,l.prop,""),!d||d==="auto"?0:d)},set:function(l){m.fx.step[l.prop]?m.fx.step[l.prop](l):l.elem.nodeType===1&&(m.cssHooks[l.prop]||l.elem.style[es(l.prop)]!=null)?m.style(l.elem,l.prop,l.now+l.unit):l.elem[l.prop]=l.now}}},Pn.propHooks.scrollTop=Pn.propHooks.scrollLeft={set:function(l){l.elem.nodeType&&l.elem.parentNode&&(l.elem[l.prop]=l.now)}},m.easing={linear:function(l){return l},swing:function(l){return .5-Math.cos(l*Math.PI)/2},_default:"swing"},m.fx=Pn.prototype.init,m.fx.step={};var ai,Co,Za=/^(?:toggle|show|hide)$/,Xp=/queueHooks$/;function ku(){Co&&(N.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(ku):e.setTimeout(ku,m.fx.interval),m.fx.tick())}function Oh(){return e.setTimeout(function(){ai=void 0}),ai=Date.now()}function ki(l,d){var f,y=0,E={height:l};for(d=d?1:0;y<4;y+=2-d)f=bi[y],E["margin"+f]=E["padding"+f]=l;return d&&(E.opacity=E.width=l),E}function Jp(l,d,f){for(var y,E=(Yn.tweeners[d]||[]).concat(Yn.tweeners["*"]),I=0,S=E.length;I<S;I++)if(y=E[I].call(f,d,l))return y}function Zp(l,d,f){var y,E,I,S,O,A,V,z,Z="width"in d||"height"in d,j=this,K={},we=l.style,Le=l.nodeType&&Eo(l),Ee=be.get(l,"fxshow");f.queue||(S=m._queueHooks(l,"fx"),S.unqueued==null&&(S.unqueued=0,O=S.empty.fire,S.empty.fire=function(){S.unqueued||O()}),S.unqueued++,j.always(function(){j.always(function(){S.unqueued--,m.queue(l,"fx").length||S.empty.fire()})}));for(y in d)if(E=d[y],Za.test(E)){if(delete d[y],I=I||E==="toggle",E===(Le?"hide":"show"))if(E==="show"&&Ee&&Ee[y]!==void 0)Le=!0;else continue;K[y]=Ee&&Ee[y]||m.style(l,y)}if(A=!m.isEmptyObject(d),!(!A&&m.isEmptyObject(K))){Z&&l.nodeType===1&&(f.overflow=[we.overflow,we.overflowX,we.overflowY],V=Ee&&Ee.display,V==null&&(V=be.get(l,"display")),z=m.css(l,"display"),z==="none"&&(V?z=V:(Io([l],!0),V=l.style.display||V,z=m.css(l,"display"),Io([l]))),(z==="inline"||z==="inline-block"&&V!=null)&&m.css(l,"float")==="none"&&(A||(j.done(function(){we.display=V}),V==null&&(z=we.display,V=z==="none"?"":z)),we.display="inline-block")),f.overflow&&(we.overflow="hidden",j.always(function(){we.overflow=f.overflow[0],we.overflowX=f.overflow[1],we.overflowY=f.overflow[2]})),A=!1;for(y in K)A||(Ee?"hidden"in Ee&&(Le=Ee.hidden):Ee=be.access(l,"fxshow",{display:V}),I&&(Ee.hidden=!Le),Le&&Io([l],!0),j.done(function(){Le||Io([l]),be.remove(l,"fxshow");for(y in K)m.style(l,y,K[y])})),A=Jp(Le?Ee[y]:0,y,j),y in Ee||(Ee[y]=A.start,Le&&(A.end=A.start,A.start=0))}}function Lh(l,d){var f,y,E,I,S;for(f in l)if(y=xe(f),E=d[y],I=l[f],Array.isArray(I)&&(E=I[1],I=l[f]=I[0]),f!==y&&(l[y]=I,delete l[f]),S=m.cssHooks[y],S&&"expand"in S){I=S.expand(I),delete l[y];for(f in I)f in l||(l[f]=I[f],d[f]=E)}else d[y]=E}function Yn(l,d,f){var y,E,I=0,S=Yn.prefilters.length,O=m.Deferred().always(function(){delete A.elem}),A=function(){if(E)return!1;for(var Z=ai||Oh(),j=Math.max(0,V.startTime+V.duration-Z),K=j/V.duration||0,we=1-K,Le=0,Ee=V.tweens.length;Le<Ee;Le++)V.tweens[Le].run(we);return O.notifyWith(l,[V,we,j]),we<1&&Ee?j:(Ee||O.notifyWith(l,[V,1,0]),O.resolveWith(l,[V]),!1)},V=O.promise({elem:l,props:m.extend({},d),opts:m.extend(!0,{specialEasing:{},easing:m.easing._default},f),originalProperties:d,originalOptions:f,startTime:ai||Oh(),duration:f.duration,tweens:[],createTween:function(Z,j){var K=m.Tween(l,V.opts,Z,j,V.opts.specialEasing[Z]||V.opts.easing);return V.tweens.push(K),K},stop:function(Z){var j=0,K=Z?V.tweens.length:0;if(E)return this;for(E=!0;j<K;j++)V.tweens[j].run(1);return Z?(O.notifyWith(l,[V,1,0]),O.resolveWith(l,[V,Z])):O.rejectWith(l,[V,Z]),this}}),z=V.props;for(Lh(z,V.opts.specialEasing);I<S;I++)if(y=Yn.prefilters[I].call(V,l,z,V.opts),y)return R(y.stop)&&(m._queueHooks(V.elem,V.opts.queue).stop=y.stop.bind(y)),y;return m.map(z,Jp,V),R(V.opts.start)&&V.opts.start.call(l,V),V.progress(V.opts.progress).done(V.opts.done,V.opts.complete).fail(V.opts.fail).always(V.opts.always),m.fx.timer(m.extend(A,{elem:l,anim:V,queue:V.opts.queue})),V}m.Animation=m.extend(Yn,{tweeners:{"*":[function(l,d){var f=this.createTween(l,d);return Ga(f.elem,l,Yi.exec(d),f),f}]},tweener:function(l,d){R(l)?(d=l,l=["*"]):l=l.match(He);for(var f,y=0,E=l.length;y<E;y++)f=l[y],Yn.tweeners[f]=Yn.tweeners[f]||[],Yn.tweeners[f].unshift(d)},prefilters:[Zp],prefilter:function(l,d){d?Yn.prefilters.unshift(l):Yn.prefilters.push(l)}}),m.speed=function(l,d,f){var y=l&&typeof l=="object"?m.extend({},l):{complete:f||!f&&d||R(l)&&l,duration:l,easing:f&&d||d&&!R(d)&&d};return m.fx.off?y.duration=0:typeof y.duration!="number"&&(y.duration in m.fx.speeds?y.duration=m.fx.speeds[y.duration]:y.duration=m.fx.speeds._default),(y.queue==null||y.queue===!0)&&(y.queue="fx"),y.old=y.complete,y.complete=function(){R(y.old)&&y.old.call(this),y.queue&&m.dequeue(this,y.queue)},y},m.fn.extend({fadeTo:function(l,d,f,y){return this.filter(Eo).css("opacity",0).show().end().animate({opacity:d},l,f,y)},animate:function(l,d,f,y){var E=m.isEmptyObject(l),I=m.speed(d,f,y),S=function(){var O=Yn(this,m.extend({},l),I);(E||be.get(this,"finish"))&&O.stop(!0)};return S.finish=S,E||I.queue===!1?this.each(S):this.queue(I.queue,S)},stop:function(l,d,f){var y=function(E){var I=E.stop;delete E.stop,I(f)};return typeof l!="string"&&(f=d,d=l,l=void 0),d&&this.queue(l||"fx",[]),this.each(function(){var E=!0,I=l!=null&&l+"queueHooks",S=m.timers,O=be.get(this);if(I)O[I]&&O[I].stop&&y(O[I]);else for(I in O)O[I]&&O[I].stop&&Xp.test(I)&&y(O[I]);for(I=S.length;I--;)S[I].elem===this&&(l==null||S[I].queue===l)&&(S[I].anim.stop(f),E=!1,S.splice(I,1));(E||!f)&&m.dequeue(this,l)})},finish:function(l){return l!==!1&&(l=l||"fx"),this.each(function(){var d,f=be.get(this),y=f[l+"queue"],E=f[l+"queueHooks"],I=m.timers,S=y?y.length:0;for(f.finish=!0,m.queue(this,l,[]),E&&E.stop&&E.stop.call(this,!0),d=I.length;d--;)I[d].elem===this&&I[d].queue===l&&(I[d].anim.stop(!0),I.splice(d,1));for(d=0;d<S;d++)y[d]&&y[d].finish&&y[d].finish.call(this);delete f.finish})}}),m.each(["toggle","show","hide"],function(l,d){var f=m.fn[d];m.fn[d]=function(y,E,I){return y==null||typeof y=="boolean"?f.apply(this,arguments):this.animate(ki(d,!0),y,E,I)}}),m.each({slideDown:ki("show"),slideUp:ki("hide"),slideToggle:ki("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(l,d){m.fn[l]=function(f,y,E){return this.animate(d,f,y,E)}}),m.timers=[],m.fx.tick=function(){var l,d=0,f=m.timers;for(ai=Date.now();d<f.length;d++)l=f[d],!l()&&f[d]===l&&f.splice(d--,1);f.length||m.fx.stop(),ai=void 0},m.fx.timer=function(l){m.timers.push(l),m.fx.start()},m.fx.interval=13,m.fx.start=function(){Co||(Co=!0,ku())},m.fx.stop=function(){Co=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(l,d){return l=m.fx&&m.fx.speeds[l]||l,d=d||"fx",this.queue(d,function(f,y){var E=e.setTimeout(f,l);y.stop=function(){e.clearTimeout(E)}})},function(){var l=N.createElement("input"),d=N.createElement("select"),f=d.appendChild(N.createElement("option"));l.type="checkbox",k.checkOn=l.value!=="",k.optSelected=f.selected,l=N.createElement("input"),l.value="t",l.type="radio",k.radioValue=l.value==="t"}();var xu,el=m.expr.attrHandle;m.fn.extend({attr:function(l,d){return Tr(this,m.attr,l,d,arguments.length>1)},removeAttr:function(l){return this.each(function(){m.removeAttr(this,l)})}}),m.extend({attr:function(l,d,f){var y,E,I=l.nodeType;if(!(I===3||I===8||I===2)){if(typeof l.getAttribute>"u")return m.prop(l,d,f);if((I!==1||!m.isXMLDoc(l))&&(E=m.attrHooks[d.toLowerCase()]||(m.expr.match.bool.test(d)?xu:void 0)),f!==void 0){if(f===null){m.removeAttr(l,d);return}return E&&"set"in E&&(y=E.set(l,f,d))!==void 0?y:(l.setAttribute(d,f+""),f)}return E&&"get"in E&&(y=E.get(l,d))!==null?y:(y=m.find.attr(l,d),y==null?void 0:y)}},attrHooks:{type:{set:function(l,d){if(!k.radioValue&&d==="radio"&&Gt(l,"input")){var f=l.value;return l.setAttribute("type",d),f&&(l.value=f),d}}}},removeAttr:function(l,d){var f,y=0,E=d&&d.match(He);if(E&&l.nodeType===1)for(;f=E[y++];)l.removeAttribute(f)}}),xu={set:function(l,d,f){return d===!1?m.removeAttr(l,f):l.setAttribute(f,f),f}},m.each(m.expr.match.bool.source.match(/\w+/g),function(l,d){var f=el[d]||m.find.attr;el[d]=function(y,E,I){var S,O,A=E.toLowerCase();return I||(O=el[A],el[A]=S,S=f(y,E,I)!=null?A:null,el[A]=O),S}});var Nu=/^(?:input|select|textarea|button)$/i,w_=/^(?:a|area)$/i;m.fn.extend({prop:function(l,d){return Tr(this,m.prop,l,d,arguments.length>1)},removeProp:function(l){return this.each(function(){delete this[m.propFix[l]||l]})}}),m.extend({prop:function(l,d,f){var y,E,I=l.nodeType;if(!(I===3||I===8||I===2))return(I!==1||!m.isXMLDoc(l))&&(d=m.propFix[d]||d,E=m.propHooks[d]),f!==void 0?E&&"set"in E&&(y=E.set(l,f,d))!==void 0?y:l[d]=f:E&&"get"in E&&(y=E.get(l,d))!==null?y:l[d]},propHooks:{tabIndex:{get:function(l){var d=m.find.attr(l,"tabindex");return d?parseInt(d,10):Nu.test(l.nodeName)||w_.test(l.nodeName)&&l.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),k.optSelected||(m.propHooks.selected={get:function(l){var d=l.parentNode;return d&&d.parentNode&&d.parentNode.selectedIndex,null},set:function(l){var d=l.parentNode;d&&(d.selectedIndex,d.parentNode&&d.parentNode.selectedIndex)}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this});function ts(l){var d=l.match(He)||[];return d.join(" ")}function xi(l){return l.getAttribute&&l.getAttribute("class")||""}function tl(l){return Array.isArray(l)?l:typeof l=="string"?l.match(He)||[]:[]}m.fn.extend({addClass:function(l){var d,f,y,E,I,S;return R(l)?this.each(function(O){m(this).addClass(l.call(this,O,xi(this)))}):(d=tl(l),d.length?this.each(function(){if(y=xi(this),f=this.nodeType===1&&" "+ts(y)+" ",f){for(I=0;I<d.length;I++)E=d[I],f.indexOf(" "+E+" ")<0&&(f+=E+" ");S=ts(f),y!==S&&this.setAttribute("class",S)}}):this)},removeClass:function(l){var d,f,y,E,I,S;return R(l)?this.each(function(O){m(this).removeClass(l.call(this,O,xi(this)))}):arguments.length?(d=tl(l),d.length?this.each(function(){if(y=xi(this),f=this.nodeType===1&&" "+ts(y)+" ",f){for(I=0;I<d.length;I++)for(E=d[I];f.indexOf(" "+E+" ")>-1;)f=f.replace(" "+E+" "," ");S=ts(f),y!==S&&this.setAttribute("class",S)}}):this):this.attr("class","")},toggleClass:function(l,d){var f,y,E,I,S=typeof l,O=S==="string"||Array.isArray(l);return R(l)?this.each(function(A){m(this).toggleClass(l.call(this,A,xi(this),d),d)}):typeof d=="boolean"&&O?d?this.addClass(l):this.removeClass(l):(f=tl(l),this.each(function(){if(O)for(I=m(this),E=0;E<f.length;E++)y=f[E],I.hasClass(y)?I.removeClass(y):I.addClass(y);else(l===void 0||S==="boolean")&&(y=xi(this),y&&be.set(this,"__className__",y),this.setAttribute&&this.setAttribute("class",y||l===!1?"":be.get(this,"__className__")||""))}))},hasClass:function(l){var d,f,y=0;for(d=" "+l+" ";f=this[y++];)if(f.nodeType===1&&(" "+ts(xi(f))+" ").indexOf(d)>-1)return!0;return!1}});var Mh=/\r/g;m.fn.extend({val:function(l){var d,f,y,E=this[0];return arguments.length?(y=R(l),this.each(function(I){var S;this.nodeType===1&&(y?S=l.call(this,I,m(this).val()):S=l,S==null?S="":typeof S=="number"?S+="":Array.isArray(S)&&(S=m.map(S,function(O){return O==null?"":O+""})),d=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],(!d||!("set"in d)||d.set(this,S,"value")===void 0)&&(this.value=S))})):E?(d=m.valHooks[E.type]||m.valHooks[E.nodeName.toLowerCase()],d&&"get"in d&&(f=d.get(E,"value"))!==void 0?f:(f=E.value,typeof f=="string"?f.replace(Mh,""):f==null?"":f)):void 0}}),m.extend({valHooks:{option:{get:function(l){var d=m.find.attr(l,"value");return d!=null?d:ts(m.text(l))}},select:{get:function(l){var d,f,y,E=l.options,I=l.selectedIndex,S=l.type==="select-one",O=S?null:[],A=S?I+1:E.length;for(I<0?y=A:y=S?I:0;y<A;y++)if(f=E[y],(f.selected||y===I)&&!f.disabled&&(!f.parentNode.disabled||!Gt(f.parentNode,"optgroup"))){if(d=m(f).val(),S)return d;O.push(d)}return O},set:function(l,d){for(var f,y,E=l.options,I=m.makeArray(d),S=E.length;S--;)y=E[S],(y.selected=m.inArray(m.valHooks.option.get(y),I)>-1)&&(f=!0);return f||(l.selectedIndex=-1),I}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(l,d){if(Array.isArray(d))return l.checked=m.inArray(m(l).val(),d)>-1}},k.checkOn||(m.valHooks[this].get=function(l){return l.getAttribute("value")===null?"on":l.value})}),k.focusin="onfocusin"in e;var Fh=/^(?:focusinfocus|focusoutblur)$/,bo=function(l){l.stopPropagation()};m.extend(m.event,{trigger:function(l,d,f,y){var E,I,S,O,A,V,z,Z,j=[f||N],K=v.call(l,"type")?l.type:l,we=v.call(l,"namespace")?l.namespace.split("."):[];if(I=Z=S=f=f||N,!(f.nodeType===3||f.nodeType===8)&&!Fh.test(K+m.event.triggered)&&(K.indexOf(".")>-1&&(we=K.split("."),K=we.shift(),we.sort()),A=K.indexOf(":")<0&&"on"+K,l=l[m.expando]?l:new m.Event(K,typeof l=="object"&&l),l.isTrigger=y?2:3,l.namespace=we.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+we.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=f),d=d==null?[l]:m.makeArray(d,[l]),z=m.event.special[K]||{},!(!y&&z.trigger&&z.trigger.apply(f,d)===!1))){if(!y&&!z.noBubble&&!J(f)){for(O=z.delegateType||K,Fh.test(O+K)||(I=I.parentNode);I;I=I.parentNode)j.push(I),S=I;S===(f.ownerDocument||N)&&j.push(S.defaultView||S.parentWindow||e)}for(E=0;(I=j[E++])&&!l.isPropagationStopped();)Z=I,l.type=E>1?O:z.bindType||K,V=(be.get(I,"events")||Object.create(null))[l.type]&&be.get(I,"handle"),V&&V.apply(I,d),V=A&&I[A],V&&V.apply&&Ha(I)&&(l.result=V.apply(I,d),l.result===!1&&l.preventDefault());return l.type=K,!y&&!l.isDefaultPrevented()&&(!z._default||z._default.apply(j.pop(),d)===!1)&&Ha(f)&&A&&R(f[K])&&!J(f)&&(S=f[A],S&&(f[A]=null),m.event.triggered=K,l.isPropagationStopped()&&Z.addEventListener(K,bo),f[K](),l.isPropagationStopped()&&Z.removeEventListener(K,bo),m.event.triggered=void 0,S&&(f[A]=S)),l.result}},simulate:function(l,d,f){var y=m.extend(new m.Event,f,{type:l,isSimulated:!0});m.event.trigger(y,null,d)}}),m.fn.extend({trigger:function(l,d){return this.each(function(){m.event.trigger(l,d,this)})},triggerHandler:function(l,d){var f=this[0];if(f)return m.event.trigger(l,d,f,!0)}}),k.focusin||m.each({focus:"focusin",blur:"focusout"},function(l,d){var f=function(y){m.event.simulate(d,y.target,m.event.fix(y))};m.event.special[d]={setup:function(){var y=this.ownerDocument||this.document||this,E=be.access(y,d);E||y.addEventListener(l,f,!0),be.access(y,d,(E||0)+1)},teardown:function(){var y=this.ownerDocument||this.document||this,E=be.access(y,d)-1;E?be.access(y,d,E):(y.removeEventListener(l,f,!0),be.remove(y,d))}}});var Ms=e.location,$h={guid:Date.now()},Au=/\?/;m.parseXML=function(l){var d,f;if(!l||typeof l!="string")return null;try{d=new e.DOMParser().parseFromString(l,"text/xml")}catch{}return f=d&&d.getElementsByTagName("parsererror")[0],(!d||f)&&m.error("Invalid XML: "+(f?m.map(f.childNodes,function(y){return y.textContent}).join(`
`):l)),d};var ko=/\[\]$/,eg=/\r?\n/g,tg=/^(?:submit|button|image|reset|file)$/i,ng=/^(?:input|select|textarea|keygen)/i;function Du(l,d,f,y){var E;if(Array.isArray(d))m.each(d,function(I,S){f||ko.test(l)?y(l,S):Du(l+"["+(typeof S=="object"&&S!=null?I:"")+"]",S,f,y)});else if(!f&&Q(d)==="object")for(E in d)Du(l+"["+E+"]",d[E],f,y);else y(l,d)}m.param=function(l,d){var f,y=[],E=function(I,S){var O=R(S)?S():S;y[y.length]=encodeURIComponent(I)+"="+encodeURIComponent(O==null?"":O)};if(l==null)return"";if(Array.isArray(l)||l.jquery&&!m.isPlainObject(l))m.each(l,function(){E(this.name,this.value)});else for(f in l)Du(f,l[f],d,E);return y.join("&")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var l=m.prop(this,"elements");return l?m.makeArray(l):this}).filter(function(){var l=this.type;return this.name&&!m(this).is(":disabled")&&ng.test(this.nodeName)&&!tg.test(l)&&(this.checked||!Ya.test(l))}).map(function(l,d){var f=m(this).val();return f==null?null:Array.isArray(f)?m.map(f,function(y){return{name:d.name,value:y.replace(eg,`\r
`)}}):{name:d.name,value:f.replace(eg,`\r
`)}}).get()}});var rg=/%20/g,ig=/#.*$/,Uh=/([?&])_=[^&]*/,sg=/^(.*?):[ \t]*([^\r\n]*)$/mg,E_=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,I_=/^(?:GET|HEAD)$/,og=/^\/\//,Vh={},xo={},ag="*/".concat("*"),Bh=N.createElement("a");Bh.href=Ms.href;function Pu(l){return function(d,f){typeof d!="string"&&(f=d,d="*");var y,E=0,I=d.toLowerCase().match(He)||[];if(R(f))for(;y=I[E++];)y[0]==="+"?(y=y.slice(1)||"*",(l[y]=l[y]||[]).unshift(f)):(l[y]=l[y]||[]).push(f)}}function jh(l,d,f,y){var E={},I=l===xo;function S(O){var A;return E[O]=!0,m.each(l[O]||[],function(V,z){var Z=z(d,f,y);if(typeof Z=="string"&&!I&&!E[Z])return d.dataTypes.unshift(Z),S(Z),!1;if(I)return!(A=Z)}),A}return S(d.dataTypes[0])||!E["*"]&&S("*")}function Ru(l,d){var f,y,E=m.ajaxSettings.flatOptions||{};for(f in d)d[f]!==void 0&&((E[f]?l:y||(y={}))[f]=d[f]);return y&&m.extend(!0,l,y),l}function T_(l,d,f){for(var y,E,I,S,O=l.contents,A=l.dataTypes;A[0]==="*";)A.shift(),y===void 0&&(y=l.mimeType||d.getResponseHeader("Content-Type"));if(y){for(E in O)if(O[E]&&O[E].test(y)){A.unshift(E);break}}if(A[0]in f)I=A[0];else{for(E in f){if(!A[0]||l.converters[E+" "+A[0]]){I=E;break}S||(S=E)}I=I||S}if(I)return I!==A[0]&&A.unshift(I),f[I]}function lg(l,d,f,y){var E,I,S,O,A,V={},z=l.dataTypes.slice();if(z[1])for(S in l.converters)V[S.toLowerCase()]=l.converters[S];for(I=z.shift();I;)if(l.responseFields[I]&&(f[l.responseFields[I]]=d),!A&&y&&l.dataFilter&&(d=l.dataFilter(d,l.dataType)),A=I,I=z.shift(),I){if(I==="*")I=A;else if(A!=="*"&&A!==I){if(S=V[A+" "+I]||V["* "+I],!S){for(E in V)if(O=E.split(" "),O[1]===I&&(S=V[A+" "+O[0]]||V["* "+O[0]],S)){S===!0?S=V[E]:V[E]!==!0&&(I=O[0],z.unshift(O[1]));break}}if(S!==!0)if(S&&l.throws)d=S(d);else try{d=S(d)}catch(Z){return{state:"parsererror",error:S?Z:"No conversion from "+A+" to "+I}}}}return{state:"success",data:d}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ms.href,type:"GET",isLocal:E_.test(Ms.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ag,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(l,d){return d?Ru(Ru(l,m.ajaxSettings),d):Ru(m.ajaxSettings,l)},ajaxPrefilter:Pu(Vh),ajaxTransport:Pu(xo),ajax:function(l,d){typeof l=="object"&&(d=l,l=void 0),d=d||{};var f,y,E,I,S,O,A,V,z,Z,j=m.ajaxSetup({},d),K=j.context||j,we=j.context&&(K.nodeType||K.jquery)?m(K):m.event,Le=m.Deferred(),Ee=m.Callbacks("once memory"),Bt=j.statusCode||{},Lt={},Xn={},at="canceled",Pe={readyState:0,getResponseHeader:function(Ke){var Et;if(A){if(!I)for(I={};Et=sg.exec(E);)I[Et[1].toLowerCase()+" "]=(I[Et[1].toLowerCase()+" "]||[]).concat(Et[2]);Et=I[Ke.toLowerCase()+" "]}return Et==null?null:Et.join(", ")},getAllResponseHeaders:function(){return A?E:null},setRequestHeader:function(Ke,Et){return A==null&&(Ke=Xn[Ke.toLowerCase()]=Xn[Ke.toLowerCase()]||Ke,Lt[Ke]=Et),this},overrideMimeType:function(Ke){return A==null&&(j.mimeType=Ke),this},statusCode:function(Ke){var Et;if(Ke)if(A)Pe.always(Ke[Pe.status]);else for(Et in Ke)Bt[Et]=[Bt[Et],Ke[Et]];return this},abort:function(Ke){var Et=Ke||at;return f&&f.abort(Et),Rn(0,Et),this}};if(Le.promise(Pe),j.url=((l||j.url||Ms.href)+"").replace(og,Ms.protocol+"//"),j.type=d.method||d.type||j.method||j.type,j.dataTypes=(j.dataType||"*").toLowerCase().match(He)||[""],j.crossDomain==null){O=N.createElement("a");try{O.href=j.url,O.href=O.href,j.crossDomain=Bh.protocol+"//"+Bh.host!=O.protocol+"//"+O.host}catch{j.crossDomain=!0}}if(j.data&&j.processData&&typeof j.data!="string"&&(j.data=m.param(j.data,j.traditional)),jh(Vh,j,d,Pe),A)return Pe;V=m.event&&j.global,V&&m.active++===0&&m.event.trigger("ajaxStart"),j.type=j.type.toUpperCase(),j.hasContent=!I_.test(j.type),y=j.url.replace(ig,""),j.hasContent?j.data&&j.processData&&(j.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(j.data=j.data.replace(rg,"+")):(Z=j.url.slice(y.length),j.data&&(j.processData||typeof j.data=="string")&&(y+=(Au.test(y)?"&":"?")+j.data,delete j.data),j.cache===!1&&(y=y.replace(Uh,"$1"),Z=(Au.test(y)?"&":"?")+"_="+$h.guid+++Z),j.url=y+Z),j.ifModified&&(m.lastModified[y]&&Pe.setRequestHeader("If-Modified-Since",m.lastModified[y]),m.etag[y]&&Pe.setRequestHeader("If-None-Match",m.etag[y])),(j.data&&j.hasContent&&j.contentType!==!1||d.contentType)&&Pe.setRequestHeader("Content-Type",j.contentType),Pe.setRequestHeader("Accept",j.dataTypes[0]&&j.accepts[j.dataTypes[0]]?j.accepts[j.dataTypes[0]]+(j.dataTypes[0]!=="*"?", "+ag+"; q=0.01":""):j.accepts["*"]);for(z in j.headers)Pe.setRequestHeader(z,j.headers[z]);if(j.beforeSend&&(j.beforeSend.call(K,Pe,j)===!1||A))return Pe.abort();if(at="abort",Ee.add(j.complete),Pe.done(j.success),Pe.fail(j.error),f=jh(xo,j,d,Pe),!f)Rn(-1,"No Transport");else{if(Pe.readyState=1,V&&we.trigger("ajaxSend",[Pe,j]),A)return Pe;j.async&&j.timeout>0&&(S=e.setTimeout(function(){Pe.abort("timeout")},j.timeout));try{A=!1,f.send(Lt,Rn)}catch(Ke){if(A)throw Ke;Rn(-1,Ke)}}function Rn(Ke,Et,Do,nl){var On,Fs,$s,jt,Ai,lr=Et;A||(A=!0,S&&e.clearTimeout(S),f=void 0,E=nl||"",Pe.readyState=Ke>0?4:0,On=Ke>=200&&Ke<300||Ke===304,Do&&(jt=T_(j,Pe,Do)),!On&&m.inArray("script",j.dataTypes)>-1&&m.inArray("json",j.dataTypes)<0&&(j.converters["text script"]=function(){}),jt=lg(j,jt,Pe,On),On?(j.ifModified&&(Ai=Pe.getResponseHeader("Last-Modified"),Ai&&(m.lastModified[y]=Ai),Ai=Pe.getResponseHeader("etag"),Ai&&(m.etag[y]=Ai)),Ke===204||j.type==="HEAD"?lr="nocontent":Ke===304?lr="notmodified":(lr=jt.state,Fs=jt.data,$s=jt.error,On=!$s)):($s=lr,(Ke||!lr)&&(lr="error",Ke<0&&(Ke=0))),Pe.status=Ke,Pe.statusText=(Et||lr)+"",On?Le.resolveWith(K,[Fs,lr,Pe]):Le.rejectWith(K,[Pe,lr,$s]),Pe.statusCode(Bt),Bt=void 0,V&&we.trigger(On?"ajaxSuccess":"ajaxError",[Pe,j,On?Fs:$s]),Ee.fireWith(K,[Pe,lr]),V&&(we.trigger("ajaxComplete",[Pe,j]),--m.active||m.event.trigger("ajaxStop")))}return Pe},getJSON:function(l,d,f){return m.get(l,d,f,"json")},getScript:function(l,d){return m.get(l,void 0,d,"script")}}),m.each(["get","post"],function(l,d){m[d]=function(f,y,E,I){return R(y)&&(I=I||E,E=y,y=void 0),m.ajax(m.extend({url:f,type:d,dataType:I,data:y,success:E},m.isPlainObject(f)&&f))}}),m.ajaxPrefilter(function(l){var d;for(d in l.headers)d.toLowerCase()==="content-type"&&(l.contentType=l.headers[d]||"")}),m._evalUrl=function(l,d,f){return m.ajax({url:l,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(y){m.globalEval(y,d,f)}})},m.fn.extend({wrapAll:function(l){var d;return this[0]&&(R(l)&&(l=l.call(this[0])),d=m(l,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var f=this;f.firstElementChild;)f=f.firstElementChild;return f}).append(this)),this},wrapInner:function(l){return R(l)?this.each(function(d){m(this).wrapInner(l.call(this,d))}):this.each(function(){var d=m(this),f=d.contents();f.length?f.wrapAll(l):d.append(l)})},wrap:function(l){var d=R(l);return this.each(function(f){m(this).wrapAll(d?l.call(this,f):l)})},unwrap:function(l){return this.parent(l).not("body").each(function(){m(this).replaceWith(this.childNodes)}),this}}),m.expr.pseudos.hidden=function(l){return!m.expr.pseudos.visible(l)},m.expr.pseudos.visible=function(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)},m.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var ug={0:200,1223:204},No=m.ajaxSettings.xhr();k.cors=!!No&&"withCredentials"in No,k.ajax=No=!!No,m.ajaxTransport(function(l){var d,f;if(k.cors||No&&!l.crossDomain)return{send:function(y,E){var I,S=l.xhr();if(S.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(I in l.xhrFields)S[I]=l.xhrFields[I];l.mimeType&&S.overrideMimeType&&S.overrideMimeType(l.mimeType),!l.crossDomain&&!y["X-Requested-With"]&&(y["X-Requested-With"]="XMLHttpRequest");for(I in y)S.setRequestHeader(I,y[I]);d=function(O){return function(){d&&(d=f=S.onload=S.onerror=S.onabort=S.ontimeout=S.onreadystatechange=null,O==="abort"?S.abort():O==="error"?typeof S.status!="number"?E(0,"error"):E(S.status,S.statusText):E(ug[S.status]||S.status,S.statusText,(S.responseType||"text")!=="text"||typeof S.responseText!="string"?{binary:S.response}:{text:S.responseText},S.getAllResponseHeaders()))}},S.onload=d(),f=S.onerror=S.ontimeout=d("error"),S.onabort!==void 0?S.onabort=f:S.onreadystatechange=function(){S.readyState===4&&e.setTimeout(function(){d&&f()})},d=d("abort");try{S.send(l.hasContent&&l.data||null)}catch(O){if(d)throw O}},abort:function(){d&&d()}}}),m.ajaxPrefilter(function(l){l.crossDomain&&(l.contents.script=!1)}),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(l){return m.globalEval(l),l}}}),m.ajaxPrefilter("script",function(l){l.cache===void 0&&(l.cache=!1),l.crossDomain&&(l.type="GET")}),m.ajaxTransport("script",function(l){if(l.crossDomain||l.scriptAttrs){var d,f;return{send:function(y,E){d=m("<script>").attr(l.scriptAttrs||{}).prop({charset:l.scriptCharset,src:l.url}).on("load error",f=function(I){d.remove(),f=null,I&&E(I.type==="error"?404:200,I.type)}),N.head.appendChild(d[0])},abort:function(){f&&f()}}}});var Ao=[],Ni=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var l=Ao.pop()||m.expando+"_"+$h.guid++;return this[l]=!0,l}}),m.ajaxPrefilter("json jsonp",function(l,d,f){var y,E,I,S=l.jsonp!==!1&&(Ni.test(l.url)?"url":typeof l.data=="string"&&(l.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ni.test(l.data)&&"data");if(S||l.dataTypes[0]==="jsonp")return y=l.jsonpCallback=R(l.jsonpCallback)?l.jsonpCallback():l.jsonpCallback,S?l[S]=l[S].replace(Ni,"$1"+y):l.jsonp!==!1&&(l.url+=(Au.test(l.url)?"&":"?")+l.jsonp+"="+y),l.converters["script json"]=function(){return I||m.error(y+" was not called"),I[0]},l.dataTypes[0]="json",E=e[y],e[y]=function(){I=arguments},f.always(function(){E===void 0?m(e).removeProp(y):e[y]=E,l[y]&&(l.jsonpCallback=d.jsonpCallback,Ao.push(y)),I&&R(E)&&E(I[0]),I=E=void 0}),"script"}),k.createHTMLDocument=function(){var l=N.implementation.createHTMLDocument("").body;return l.innerHTML="<form></form><form></form>",l.childNodes.length===2}(),m.parseHTML=function(l,d,f){if(typeof l!="string")return[];typeof d=="boolean"&&(f=d,d=!1);var y,E,I;return d||(k.createHTMLDocument?(d=N.implementation.createHTMLDocument(""),y=d.createElement("base"),y.href=N.location.href,d.head.appendChild(y)):d=N),E=Ci.exec(l),I=!f&&[],E?[d.createElement(E[1])]:(E=Ps([l],d,I),I&&I.length&&m(I).remove(),m.merge([],E.childNodes))},m.fn.load=function(l,d,f){var y,E,I,S=this,O=l.indexOf(" ");return O>-1&&(y=ts(l.slice(O)),l=l.slice(0,O)),R(d)?(f=d,d=void 0):d&&typeof d=="object"&&(E="POST"),S.length>0&&m.ajax({url:l,type:E||"GET",dataType:"html",data:d}).done(function(A){I=arguments,S.html(y?m("<div>").append(m.parseHTML(A)).find(y):A)}).always(f&&function(A,V){S.each(function(){f.apply(this,I||[A.responseText,V,A])})}),this},m.expr.pseudos.animated=function(l){return m.grep(m.timers,function(d){return l===d.elem}).length},m.offset={setOffset:function(l,d,f){var y,E,I,S,O,A,V,z=m.css(l,"position"),Z=m(l),j={};z==="static"&&(l.style.position="relative"),O=Z.offset(),I=m.css(l,"top"),A=m.css(l,"left"),V=(z==="absolute"||z==="fixed")&&(I+A).indexOf("auto")>-1,V?(y=Z.position(),S=y.top,E=y.left):(S=parseFloat(I)||0,E=parseFloat(A)||0),R(d)&&(d=d.call(l,f,m.extend({},O))),d.top!=null&&(j.top=d.top-O.top+S),d.left!=null&&(j.left=d.left-O.left+E),"using"in d?d.using.call(l,j):Z.css(j)}},m.fn.extend({offset:function(l){if(arguments.length)return l===void 0?this:this.each(function(E){m.offset.setOffset(this,l,E)});var d,f,y=this[0];if(!!y)return y.getClientRects().length?(d=y.getBoundingClientRect(),f=y.ownerDocument.defaultView,{top:d.top+f.pageYOffset,left:d.left+f.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var l,d,f,y=this[0],E={top:0,left:0};if(m.css(y,"position")==="fixed")d=y.getBoundingClientRect();else{for(d=this.offset(),f=y.ownerDocument,l=y.offsetParent||f.documentElement;l&&(l===f.body||l===f.documentElement)&&m.css(l,"position")==="static";)l=l.parentNode;l&&l!==y&&l.nodeType===1&&(E=m(l).offset(),E.top+=m.css(l,"borderTopWidth",!0),E.left+=m.css(l,"borderLeftWidth",!0))}return{top:d.top-E.top-m.css(y,"marginTop",!0),left:d.left-E.left-m.css(y,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var l=this.offsetParent;l&&m.css(l,"position")==="static";)l=l.offsetParent;return l||As})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(l,d){var f=d==="pageYOffset";m.fn[l]=function(y){return Tr(this,function(E,I,S){var O;if(J(E)?O=E:E.nodeType===9&&(O=E.defaultView),S===void 0)return O?O[d]:E[I];O?O.scrollTo(f?O.pageXOffset:S,f?S:O.pageYOffset):E[I]=S},l,y,arguments.length)}}),m.each(["top","left"],function(l,d){m.cssHooks[d]=Zi(k.pixelPosition,function(f,y){if(y)return y=Qn(f,d),Su.test(y)?m(f).position()[d]+"px":y})}),m.each({Height:"height",Width:"width"},function(l,d){m.each({padding:"inner"+l,content:d,"":"outer"+l},function(f,y){m.fn[y]=function(E,I){var S=arguments.length&&(f||typeof E!="boolean"),O=f||(E===!0||I===!0?"margin":"border");return Tr(this,function(A,V,z){var Z;return J(A)?y.indexOf("outer")===0?A["inner"+l]:A.document.documentElement["client"+l]:A.nodeType===9?(Z=A.documentElement,Math.max(A.body["scroll"+l],Z["scroll"+l],A.body["offset"+l],Z["offset"+l],Z["client"+l])):z===void 0?m.css(A,V,O):m.style(A,V,z,O)},d,S?E:void 0,S)}})}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(l,d){m.fn[d]=function(f){return this.on(d,f)}}),m.fn.extend({bind:function(l,d,f){return this.on(l,null,d,f)},unbind:function(l,d){return this.off(l,null,d)},delegate:function(l,d,f,y){return this.on(d,l,f,y)},undelegate:function(l,d,f){return arguments.length===1?this.off(l,"**"):this.off(d,l||"**",f)},hover:function(l,d){return this.mouseenter(l).mouseleave(d||l)}}),m.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(l,d){m.fn[d]=function(f,y){return arguments.length>0?this.on(d,null,f,y):this.trigger(d)}});var S_=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;m.proxy=function(l,d){var f,y,E;if(typeof d=="string"&&(f=l[d],d=l,l=f),!!R(l))return y=s.call(arguments,2),E=function(){return l.apply(d||this,y.concat(s.call(arguments)))},E.guid=l.guid=l.guid||m.guid++,E},m.holdReady=function(l){l?m.readyWait++:m.ready(!0)},m.isArray=Array.isArray,m.parseJSON=JSON.parse,m.nodeName=Gt,m.isFunction=R,m.isWindow=J,m.camelCase=xe,m.type=Q,m.now=Date.now,m.isNumeric=function(l){var d=m.type(l);return(d==="number"||d==="string")&&!isNaN(l-parseFloat(l))},m.trim=function(l){return l==null?"":(l+"").replace(S_,"$1")};var Ou=e.jQuery,C_=e.$;return m.noConflict=function(l){return e.$===m&&(e.$=C_),l&&e.jQuery===m&&(e.jQuery=Ou),m},typeof n>"u"&&(e.jQuery=e.$=m),m})})(xF);const bc=xF.exports;class CY extends le.exports.Component{componentDidMount(){setTimeout(()=>{bc("#"+this.props.Convo).animate({scrollTop:7e4},1e3)},1e3)}constructor(e){super(e),this.state={Messages:[],Complete:!1},this.props.Convo&&de.database().ref("chats/"+this.props.Convo+"/messages").once("value").then(n=>{var r=n.val()||"Anonym";r!=="Anonym"&&(n.forEach(i=>{var s=i.val();Vx.push(s),this.setState({Messages:Vx})}),this.setState({Complete:!0}))})}render(){return this.state.Complete?$("div",{children:this.state.Messages.map(e=>(Bx++,e.By==this.props.User1.ID?zw=this.props.User1.Photo:zw=this.props.User2.Photo,Re("div",{className:"msgdiv",children:[$("img",{id:"Msgfaces",className:"rounded-circle",src:zw}),$("p",{className:"msgtexts",children:e.says}),$("br",{}),"      ",$("br",{})]},Bx)))}):$("div",{})}}var Vx=[],zw,Bx=1;class bY extends le.exports.Component{constructor(e){super(e),this.state={}}render(){return Re("div",{children:[$("img",{className:"rounded-circle",id:"X",src:this.props.X.Photo}),$("img",{className:"rounded-circle",id:"Y",src:this.props.Y.Photo})]})}}class kY extends le.exports.Component{constructor(e){super(e),this.state={Message:[],Complete:!1},this.props.Convo&&de.database().ref("chats/"+this.props.Convo+"/messages").limitToLast(1).on("child_added",n=>{var r=n.val();this.setState({Message:r})})}Jquery(e,n){bc("#"+this.props.Convo).append("  <div>  <div class = 'msgdiv' >  <img id = 'Msgfaces' class = 'rounded-circle' src = "+e+" ></img> <p class = 'msgtexts' > "+n.says+"</p>   <br></br>   </div>   </div> ")}render(){return this.state.Message&&(bc("#"+this.props.Convo).animate({scrollTop:7e3},1e3),this.state.Message.By==this.props.User1.ID?(Xg=this.props.User1.Photo,this.Jquery(Xg,this.state.Message)):(Xg=this.props.User2.Photo,this.Jquery(Xg,this.state.Message))),$("div",{})}}var Xg;class xY{construcor(){this.xperia=0}Set_Initial_Structure(){this.SetUsers().then(()=>{this.SetUserInbox()})}SetUserInbox(){var e=de.auth().currentUser.uid;const n="users/"+e+"/inbox";de.database().ref(n).once("value").then(r=>{var i=r.val()||"Anonym";console.log(i),i==="Anonym"&&this.NewSet().then(()=>{this.ReadLastkey("chats",e).then(s=>{this.Inform(e,s)})})})}Inform(e,n,r){console.log("u1: "+e),console.log("key: "+n),console.log("u2: "+r),r===void 0?(console.log("undef"),de.database().ref("storage").once("value").then(i=>{var s=i.val();r=s.value,de.database().ref("users/"+e+"/inbox").push({Partner:r,Convo:"$"+n}),alert("my inbox set"),de.database().ref("users/"+r+"/inbox").push({Partner:e,Convo:"$"+n})})):de.database().ref("users/"+e+"inbox").push({Partner:r,Convo:n})}async ReadLastkey(e,n){return de.database().ref(e).limitToLast(1).once("value").then(r=>{var i=r.val(),s=Object.keys(i);return console.log("last key : "+s),de.database().ref("chats/"+s+"/messages").push({By:n,says:"thanks"}),s})}NewSet(){return de.database().ref("chats").push({system:!0})}async SetUsers(){return this.SetSystem().then(()=>this.SetMe())}async SetMe(){var e=de.auth().currentUser.uid;this.RefExist("users/"+e).then(n=>{if(!n)return console.log("setme"),de.database().ref("users/"+e).set({ID:e,IP:"ip",Name:"My Name",Online:!1,Photo:"photo"})})}async SetSystem(){console.log("system"),de.database().ref("unique").push({created:!0}),this.LastRead("unique").then(e=>{console.log("key: "+e),e=e+"",de.database().ref("storage").set({value:e}),de.database().ref("users/"+e).set({Name:"System",ID:e,IP:"1.2.3.4.5",Photo:"hkhjkhjkhjk",Online:!0})})}Animate(e){bc("#"+e).animate({scrollTop:bc(document).height()},1e3)}Track_Online_Users(){this.RefExist("OnlineUsers").then(e=>{e?this.MyIP().then(n=>{this.SetKey("OnlineUsers/Existing",n.ip),setInterval(()=>{this.MyIP().then(r=>{this.Clean(),this.SetKey("OnlineUsers/Updating",r.ip),this.PatternMatch()})},7e3)}):(this.Createref("OnlineUsers"),this.Track_Online_Users())})}Clean(){de.database().ref("OnlineUsers/Updating").remove()}async RefExist(e){return de.database().ref(e).once("value").then(n=>{var r=n.val()||"Anonym";return r!=="Anonym"})}MyIP(){return bc.getJSON("https://api.ipify.org?format=json",function(e){return e})}Createref(e){de.database().ref(e).push({created:!0})}SetKey(e,n){var r=de.auth().currentUser.uid;de.database().ref(e).push({ID:r,IP:n})}PatternMatch(e){de.database().ref("OnlineUsers/Updating").on("value",n=>{n.forEach(r=>{var i=r.val();qx.push(i)}),this.MapArray("OnlineUsers/Existing",jx).then(()=>{qx.forEach(r=>{jx.forEach(i=>{r.IP,i.IP}),de.database().ref("users/"+r.ID).update({Online:!1}),console.log("updated")})})})}MapArray(e,n){return(e===void 0||n===void 0)&&console.error("MapArray :: Arguments Undefined "),de.database().ref(e).once("value",r=>{r.forEach(i=>{n.push(i.val())})})}async FindKey(e,n,r){const i=de.database(),s=e;var o="",a=!1;return i.ref("users/"+s+"/inbox").once("value").then(u=>{if(u.forEach(h=>{var p=h.val();if(p.Partner===n){var v=p.Convo;return o=v.slice(1,v.length),a=!0,o}}),a)return o;if(o==="")return alert("not found"),de.database().ref("chats").push({created:!0}),this.LastRead("chats").then(h=>(alert("lll"+h),this.Inform(e,h,n),this.Inform(n,h,e),h))})}iinform(e,n,r){r+="",n===void 0&&de.database().ref("storage").once("value").then(i=>{var s=i.val();n=s.value}),de.database().ref("users/"+e+"/inbox").push({Partner:n,Convo:"$"+r})}async CheckInbox(e,n){return de.database().ref("users/"+e+"/inbox").once("value").then(i=>i)}CreateNewKey(){return de.database().ref("chats").push({Created:!0}),this.ReadLast("chats")}async ReadLast(e,n){return console.log("created new , reading...."),de.database().ref(e).limitToLast(1).once("value").then(r=>{var i=r.val(),s=Object.keys(i);return console.log("last key : "+s),de.database().ref("chats/"+s+"/messages").push({By:n,says:"Connected"}),s})}async LastRead(e){return console.log("created new , reading...."),de.database().ref(e).limitToLast(1).once("value").then(n=>{var r=n.val(),i=Object.keys(r);return console.log("last key : "+i),i})}}var jx=[],qx=[];class My extends le.exports.Component{constructor(n){super(n);it(this,"keyPress",n=>{if(n.keyCode===13){var r=de.auth().currentUser.uid;de.database().ref("chats/"+this.state.ConvoKey+"/messages").push({By:r,says:n.target.value})}});it(this,"Hidez",()=>{this.props.Toggle(this.props.Left)});if(this.state={ConvoKey:!1,MyProps:!1,active:!0},this.props.Partner&&!this.state.ConvoKey){var r=new xY,i;r.FindKey(this.props.Me.ID,this.props.Partner.ID,i).then(s=>{alert(s),this.setState({ConvoKey:s})})}}render(){return this.state.ConvoKey?$("div",{children:Re("div",{style:{left:this.props.Left},className:"Chatbox",children:[$(SY,{hideme:this.Hidez,data:this.props.Partner}),Re("div",{onClick:()=>{alert(this.state.ConvoKey)},className:"ChatPad",id:this.state.ConvoKey,children:[$("br",{}),$("br",{}),$("br",{}),$("br",{}),$("br",{}),$(bY,{X:this.props.Me,Y:this.props.Partner}),$(CY,{Convo:this.state.ConvoKey,User1:this.props.Me,User2:this.props.Partner}),$(kY,{Convo:this.state.ConvoKey,User1:this.props.Me,User2:this.props.Partner})]}),$("input",{type:"text",onKeyDown:this.keyPress,className:"WritePad",placeholder:"Type a Message Here"})]})}):$("p",{})}}class NY extends le.exports.Component{constructor(e){super(e),this.state={};var n=de.auth().currentUser.uid;de.database().ref("users/"+n+"/inbox").limitToLast(1).on("child_added",r=>{var i=r.val();zx++,zx!==1&&(alert("time +"),console.log("1: "+i),console.log("2: "+i.Partner),alert("someone initialized a conversation "),de.database().ref("users/"+i.Partner).once("value",s=>{var o=s.val();console.log("3: "+o),console.log("4: "+o.ID),this.props.init(o)}))})}render(){return $("div",{})}}var zx=0;class AY extends le.exports.Component{constructor(n){super(n);it(this,"OCFEC",n=>{di=Hw,ll===1&&di===300&&(di=850),ll===1&&di===850&&(di=300),ll++,this.setState({Choosen:n,active:this.state.active+1})});it(this,"Toggle",n=>{Hw=n,ll-=1,this.setState({active:this.state.active-1})});it(this,"Initialized",()=>{});this.state={active:0,Choosen:[]}}Open_Command(n){di=Hw,ll===1&&di===300&&(di=850),ll===1&&di===850&&(di=300),ll++,this.setState({Choosen:this.props.Data,active:this.state.active+1})}render(){if(this.props.Data){var n=de.auth().currentUser.uid;return this.props.Data.ID==n&&(Ww=this.props.Data),Re("div",{children:[this.props.Launch&&$(NY,{init:this.OCFEC}),this.state.active===1&&$(My,{Me:Ww,Partner:this.state.Choosen,Toggle:this.Toggle,Left:di}),this.state.active===2&&$(My,{Me:Ww,Partner:this.state.Choosen,Toggle:this.Toggle,Left:di}),Re("div",{className:"Y",children:[this.state.Online&&$("div",{id:"GreenCircle",className:"rounded-circle"}),$("p",{className:"name",children:this.props.Data.Name}),$("img",{id:"pic",className:"rounded-circle",src:this.props.Data.Photo}),$("button",{className:"msgbtn",onClick:()=>{this.Open_Command()},children:"  message "})]})]})}return $("p",{})}}var Ww=[],ll=0,di,Hw=850;class DY extends le.exports.Component{constructor(n){super(n);it(this,"Open_Command",n=>{Zg=-20,ul=Kw,Jg===1&&ul===300&&(ul=850),Jg===1&&ul===850&&(ul=300),Jg++,alert(this.state.active),this.state.active===1&&this.setState({active:this.state.active-1}),this.setState({Choosen:this.props.Data,active:this.state.active+1})});it(this,"Toggle",n=>{Kw=n,alert(Kw),Jg-=1,this.setState({active:this.state.active-1})});this.state={Complete:!1,active:0},alert("convolist");var r=de.auth().currentUser.uid;this.props.Data&&de.database().ref("users/"+r+"/inbox").once("value",i=>{i.forEach(s=>{var o=s.val();this.props.Data.map(a=>{a.ID===o.Partner&&Wx.push(a),a.ID===r&&(Gw=a)})}),this.setState({Complete:!0})})}render(){return this.state.Complete?Re("div",{children:[this.state.active===1&&$(My,{Me:Gw,Partner:em,Toggle:this.Toggle,Left:ul}),this.state.active===2&&$(My,{Me:Gw,Partner:em,Toggle:this.Toggle,Left:ul}),$("div",{className:"unique",children:Wx.map(n=>(Zg+=50,$("div",{children:Re("div",{style:{top:Zg},className:"Slide",children:[$("img",{onClick:()=>{em=n},src:n.Photo,id:"abc",className:"rounded-circle"}),$("p",{onClick:()=>{em=n,this.Open_Command()},className:"Pname",children:n.Name})]})},Zg)))})]}):$("p",{})}}var ul,Jg=0,Kw=850,Wx=[],Zg=30,em,Gw;class PY extends le.exports.Component{componentDidMount(){}constructor(){super(),this.state={Info:tm,Complete:!1,Render:!1},de.database().ref("users").once("value").then(e=>{e.forEach(n=>{tm.push(n.val())}),this.setState({Complete:!0,Info:tm})})}render(){return this.state.Complete?Re("div",{children:[$(DY,{Data:tm}),this.state.Info.map(e=>(Kx++,Qw==!1&&(Hx+=300,Yw=!1),Qw==!0&&(Qw=!1,Yw=!0),$("div",{style:{top:Hx},className:"Dynamic",children:$(AY,{Data:e,Command:this.state.Render,Launch:Yw})},Kx)))]}):$("p",{})}}var Hx=30,Kx=0,Qw=!0,tm=[],Yw;function RY(t){return le.exports.useState({loggedIn:!1,count:0}),$("div",{children:Re(Q8,{children:[$(Ju,{exact:!0,path:"/",element:$(SF,{})}),$(Ju,{exact:!0,path:"/Profile/:id",element:$(EY,{})}),$(Ju,{exact:!0,path:"/Feed/:id",element:$(IY,{})}),$(Ju,{exact:!0,path:"/Groups/:id",element:$(TY,{})}),$(Ju,{exact:!0,path:"/Search/:id",element:$(PY,{})})]})})}var OY={exports:{}};/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,r){t.exports=r()})(Gx,function(){const n="transitionend",r=_=>{let c=_.getAttribute("data-bs-target");if(!c||c==="#"){let g=_.getAttribute("href");if(!g||!g.includes("#")&&!g.startsWith("."))return null;g.includes("#")&&!g.startsWith("#")&&(g=`#${g.split("#")[1]}`),c=g&&g!=="#"?g.trim():null}return c},i=_=>{const c=r(_);return c&&document.querySelector(c)?c:null},s=_=>{const c=r(_);return c?document.querySelector(c):null},o=_=>{_.dispatchEvent(new Event(n))},a=_=>!(!_||typeof _!="object")&&(_.jquery!==void 0&&(_=_[0]),_.nodeType!==void 0),u=_=>a(_)?_.jquery?_[0]:_:typeof _=="string"&&_.length>0?document.querySelector(_):null,h=_=>{if(!a(_)||_.getClientRects().length===0)return!1;const c=getComputedStyle(_).getPropertyValue("visibility")==="visible",g=_.closest("details:not([open])");if(!g)return c;if(g!==_){const T=_.closest("summary");if(T&&T.parentNode!==g||T===null)return!1}return c},p=_=>!_||_.nodeType!==Node.ELEMENT_NODE||!!_.classList.contains("disabled")||(_.disabled!==void 0?_.disabled:_.hasAttribute("disabled")&&_.getAttribute("disabled")!=="false"),v=_=>{if(!document.documentElement.attachShadow)return null;if(typeof _.getRootNode=="function"){const c=_.getRootNode();return c instanceof ShadowRoot?c:null}return _ instanceof ShadowRoot?_:_.parentNode?v(_.parentNode):null},w=()=>{},b=_=>{_.offsetHeight},k=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,R=[],J=()=>document.documentElement.dir==="rtl",N=_=>{var c;c=()=>{const g=k();if(g){const T=_.NAME,x=g.fn[T];g.fn[T]=_.jQueryInterface,g.fn[T].Constructor=_,g.fn[T].noConflict=()=>(g.fn[T]=x,_.jQueryInterface)}},document.readyState==="loading"?(R.length||document.addEventListener("DOMContentLoaded",()=>{for(const g of R)g()}),R.push(c)):c()},D=_=>{typeof _=="function"&&_()},M=(_,c,g=!0)=>{if(!g)return void D(_);const T=(U=>{if(!U)return 0;let{transitionDuration:B,transitionDelay:Y}=window.getComputedStyle(U);const ne=Number.parseFloat(B),X=Number.parseFloat(Y);return ne||X?(B=B.split(",")[0],Y=Y.split(",")[0],1e3*(Number.parseFloat(B)+Number.parseFloat(Y))):0})(c)+5;let x=!1;const L=({target:U})=>{U===c&&(x=!0,c.removeEventListener(n,L),D(_))};c.addEventListener(n,L),setTimeout(()=>{x||o(c)},T)},Q=(_,c,g,T)=>{const x=_.length;let L=_.indexOf(c);return L===-1?!g&&T?_[x-1]:_[0]:(L+=g?1:-1,T&&(L=(L+x)%x),_[Math.max(0,Math.min(L,x-1))])},re=/[^.]*(?=\..*)\.|.*/,m=/\..*/,ue=/::\d+$/,he={};let Ye=1;const Fe={mouseenter:"mouseover",mouseleave:"mouseout"},Kn=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Gt(_,c){return c&&`${c}::${Ye++}`||_.uidEvent||Ye++}function Ci(_){const c=Gt(_);return _.uidEvent=c,he[c]=he[c]||{},he[c]}function xs(_,c,g=null){return Object.values(_).find(T=>T.callable===c&&T.delegationSelector===g)}function qa(_,c,g){const T=typeof c=="string",x=T?g:c||g;let L=Oe(_);return Kn.has(L)||(L=_),[T,x,L]}function mo(_,c,g,T,x){if(typeof c!="string"||!_)return;let[L,U,B]=qa(c,g,T);c in Fe&&(U=(pe=>function(ke){if(!ke.relatedTarget||ke.relatedTarget!==ke.delegateTarget&&!ke.delegateTarget.contains(ke.relatedTarget))return pe.call(this,ke)})(U));const Y=Ci(_),ne=Y[B]||(Y[B]={}),X=xs(ne,U,L?g:null);if(X)return void(X.oneOff=X.oneOff&&x);const ie=Gt(U,c.replace(re,"")),Se=L?function(_e,pe,ke){return function Ne($e){const It=_e.querySelectorAll(pe);for(let{target:ze}=$e;ze&&ze!==this;ze=ze.parentNode)for(const ot of It)if(ot===ze)return He($e,{delegateTarget:ze}),Ne.oneOff&&W.off(_e,$e.type,pe,ke),ke.apply(ze,[$e])}}(_,g,U):function(_e,pe){return function ke(Ne){return He(Ne,{delegateTarget:_e}),ke.oneOff&&W.off(_e,Ne.type,pe),pe.apply(_e,[Ne])}}(_,U);Se.delegationSelector=L?g:null,Se.callable=U,Se.oneOff=x,Se.uidEvent=ie,ne[ie]=Se,_.addEventListener(B,Se,L)}function Ns(_,c,g,T,x){const L=xs(c[g],T,x);L&&(_.removeEventListener(g,L,Boolean(x)),delete c[g][L.uidEvent])}function ge(_,c,g,T){const x=c[g]||{};for(const L of Object.keys(x))if(L.includes(T)){const U=x[L];Ns(_,c,g,U.callable,U.delegationSelector)}}function Oe(_){return _=_.replace(m,""),Fe[_]||_}const W={on(_,c,g,T){mo(_,c,g,T,!1)},one(_,c,g,T){mo(_,c,g,T,!0)},off(_,c,g,T){if(typeof c!="string"||!_)return;const[x,L,U]=qa(c,g,T),B=U!==c,Y=Ci(_),ne=Y[U]||{},X=c.startsWith(".");if(L===void 0){if(X)for(const ie of Object.keys(Y))ge(_,Y,ie,c.slice(1));for(const ie of Object.keys(ne)){const Se=ie.replace(ue,"");if(!B||c.includes(Se)){const _e=ne[ie];Ns(_,Y,U,_e.callable,_e.delegationSelector)}}}else{if(!Object.keys(ne).length)return;Ns(_,Y,U,L,x?g:null)}},trigger(_,c,g){if(typeof c!="string"||!_)return null;const T=k();let x=null,L=!0,U=!0,B=!1;c!==Oe(c)&&T&&(x=T.Event(c,g),T(_).trigger(x),L=!x.isPropagationStopped(),U=!x.isImmediatePropagationStopped(),B=x.isDefaultPrevented());let Y=new Event(c,{bubbles:L,cancelable:!0});return Y=He(Y,g),B&&Y.preventDefault(),U&&_.dispatchEvent(Y),Y.defaultPrevented&&x&&x.preventDefault(),Y}};function He(_,c){for(const[g,T]of Object.entries(c||{}))try{_[g]=T}catch{Object.defineProperty(_,g,{configurable:!0,get:()=>T})}return _}const ut=new Map,or={set(_,c,g){ut.has(_)||ut.set(_,new Map);const T=ut.get(_);T.has(c)||T.size===0?T.set(c,g):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(T.keys())[0]}.`)},get:(_,c)=>ut.has(_)&&ut.get(_).get(c)||null,remove(_,c){if(!ut.has(_))return;const g=ut.get(_);g.delete(c),g.size===0&&ut.delete(_)}};function ar(_){if(_==="true")return!0;if(_==="false")return!1;if(_===Number(_).toString())return Number(_);if(_===""||_==="null")return null;if(typeof _!="string")return _;try{return JSON.parse(decodeURIComponent(_))}catch{return _}}function Qi(_){return _.replace(/[A-Z]/g,c=>`-${c.toLowerCase()}`)}const rn={setDataAttribute(_,c,g){_.setAttribute(`data-bs-${Qi(c)}`,g)},removeDataAttribute(_,c){_.removeAttribute(`data-bs-${Qi(c)}`)},getDataAttributes(_){if(!_)return{};const c={},g=Object.keys(_.dataset).filter(T=>T.startsWith("bs")&&!T.startsWith("bsConfig"));for(const T of g){let x=T.replace(/^bs/,"");x=x.charAt(0).toLowerCase()+x.slice(1,x.length),c[x]=ar(_.dataset[T])}return c},getDataAttribute:(_,c)=>ar(_.getAttribute(`data-bs-${Qi(c)}`))};class Ir{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(c){return c=this._mergeConfigObj(c),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}_configAfterMerge(c){return c}_mergeConfigObj(c,g){const T=a(g)?rn.getDataAttribute(g,"config"):{};return{...this.constructor.Default,...typeof T=="object"?T:{},...a(g)?rn.getDataAttributes(g):{},...typeof c=="object"?c:{}}}_typeCheckConfig(c,g=this.constructor.DefaultType){for(const x of Object.keys(g)){const L=g[x],U=c[x],B=a(U)?"element":(T=U)==null?`${T}`:Object.prototype.toString.call(T).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(L).test(B))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${x}" provided type "${B}" but expected type "${L}".`)}var T}}class Gn extends Ir{constructor(c,g){super(),(c=u(c))&&(this._element=c,this._config=this._getConfig(g),or.set(this._element,this.constructor.DATA_KEY,this))}dispose(){or.remove(this._element,this.constructor.DATA_KEY),W.off(this._element,this.constructor.EVENT_KEY);for(const c of Object.getOwnPropertyNames(this))this[c]=null}_queueCallback(c,g,T=!0){M(c,g,T)}_getConfig(c){return c=this._mergeConfigObj(c,this._element),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}static getInstance(c){return or.get(u(c),this.DATA_KEY)}static getOrCreateInstance(c,g={}){return this.getInstance(c)||new this(c,typeof g=="object"?g:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(c){return`${c}${this.EVENT_KEY}`}}const Tr=(_,c="hide")=>{const g=`click.dismiss${_.EVENT_KEY}`,T=_.NAME;W.on(document,g,`[data-bs-dismiss="${T}"]`,function(x){if(["A","AREA"].includes(this.tagName)&&x.preventDefault(),p(this))return;const L=s(this)||this.closest(`.${T}`);_.getOrCreateInstance(L)[c]()})};class za extends Gn{static get NAME(){return"alert"}close(){if(W.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const c=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,c)}_destroyElement(){this._element.remove(),W.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(c){return this.each(function(){const g=za.getOrCreateInstance(this);if(typeof c=="string"){if(g[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);g[c](this)}})}}Tr(za,"close"),N(za);const jp='[data-bs-toggle="button"]';class Wa extends Gn{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(c){return this.each(function(){const g=Wa.getOrCreateInstance(this);c==="toggle"&&g[c]()})}}W.on(document,"click.bs.button.data-api",jp,_=>{_.preventDefault();const c=_.target.closest(jp);Wa.getOrCreateInstance(c).toggle()}),N(Wa);const xe={find:(_,c=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(c,_)),findOne:(_,c=document.documentElement)=>Element.prototype.querySelector.call(c,_),children:(_,c)=>[].concat(..._.children).filter(g=>g.matches(c)),parents(_,c){const g=[];let T=_.parentNode.closest(c);for(;T;)g.push(T),T=T.parentNode.closest(c);return g},prev(_,c){let g=_.previousElementSibling;for(;g;){if(g.matches(c))return[g];g=g.previousElementSibling}return[]},next(_,c){let g=_.nextElementSibling;for(;g;){if(g.matches(c))return[g];g=g.nextElementSibling}return[]},focusableChildren(_){const c=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(g=>`${g}:not([tabindex^="-"])`).join(",");return this.find(c,_).filter(g=>!p(g)&&h(g))}},Ha={endCallback:null,leftCallback:null,rightCallback:null},Ka={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class be extends Ir{constructor(c,g){super(),this._element=c,c&&be.isSupported()&&(this._config=this._getConfig(g),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Ha}static get DefaultType(){return Ka}static get NAME(){return"swipe"}dispose(){W.off(this._element,".bs.swipe")}_start(c){this._supportPointerEvents?this._eventIsPointerPenTouch(c)&&(this._deltaX=c.clientX):this._deltaX=c.touches[0].clientX}_end(c){this._eventIsPointerPenTouch(c)&&(this._deltaX=c.clientX-this._deltaX),this._handleSwipe(),D(this._config.endCallback)}_move(c){this._deltaX=c.touches&&c.touches.length>1?0:c.touches[0].clientX-this._deltaX}_handleSwipe(){const c=Math.abs(this._deltaX);if(c<=40)return;const g=c/this._deltaX;this._deltaX=0,g&&D(g>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(W.on(this._element,"pointerdown.bs.swipe",c=>this._start(c)),W.on(this._element,"pointerup.bs.swipe",c=>this._end(c)),this._element.classList.add("pointer-event")):(W.on(this._element,"touchstart.bs.swipe",c=>this._start(c)),W.on(this._element,"touchmove.bs.swipe",c=>this._move(c)),W.on(this._element,"touchend.bs.swipe",c=>this._end(c)))}_eventIsPointerPenTouch(c){return this._supportPointerEvents&&(c.pointerType==="pen"||c.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const en="next",yo="prev",vo="left",wu="right",Eu="slid.bs.carousel",Ch="carousel",Yi="active",bi={ArrowLeft:wu,ArrowRight:vo},As={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},_o={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class wo extends Gn{constructor(c,g){super(c,g),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=xe.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Ch&&this.cycle()}static get Default(){return As}static get DefaultType(){return _o}static get NAME(){return"carousel"}next(){this._slide(en)}nextWhenVisible(){!document.hidden&&h(this._element)&&this.next()}prev(){this._slide(yo)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?W.one(this._element,Eu,()=>this.cycle()):this.cycle())}to(c){const g=this._getItems();if(c>g.length-1||c<0)return;if(this._isSliding)return void W.one(this._element,Eu,()=>this.to(c));const T=this._getItemIndex(this._getActive());if(T===c)return;const x=c>T?en:yo;this._slide(x,g[c])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(c){return c.defaultInterval=c.interval,c}_addEventListeners(){this._config.keyboard&&W.on(this._element,"keydown.bs.carousel",c=>this._keydown(c)),this._config.pause==="hover"&&(W.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),W.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&be.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const g of xe.find(".carousel-item img",this._element))W.on(g,"dragstart.bs.carousel",T=>T.preventDefault());const c={leftCallback:()=>this._slide(this._directionToOrder(vo)),rightCallback:()=>this._slide(this._directionToOrder(wu)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new be(this._element,c)}_keydown(c){if(/input|textarea/i.test(c.target.tagName))return;const g=bi[c.key];g&&(c.preventDefault(),this._slide(this._directionToOrder(g)))}_getItemIndex(c){return this._getItems().indexOf(c)}_setActiveIndicatorElement(c){if(!this._indicatorsElement)return;const g=xe.findOne(".active",this._indicatorsElement);g.classList.remove(Yi),g.removeAttribute("aria-current");const T=xe.findOne(`[data-bs-slide-to="${c}"]`,this._indicatorsElement);T&&(T.classList.add(Yi),T.setAttribute("aria-current","true"))}_updateInterval(){const c=this._activeElement||this._getActive();if(!c)return;const g=Number.parseInt(c.getAttribute("data-bs-interval"),10);this._config.interval=g||this._config.defaultInterval}_slide(c,g=null){if(this._isSliding)return;const T=this._getActive(),x=c===en,L=g||Q(this._getItems(),T,x,this._config.wrap);if(L===T)return;const U=this._getItemIndex(L),B=ie=>W.trigger(this._element,ie,{relatedTarget:L,direction:this._orderToDirection(c),from:this._getItemIndex(T),to:U});if(B("slide.bs.carousel").defaultPrevented||!T||!L)return;const Y=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(U),this._activeElement=L;const ne=x?"carousel-item-start":"carousel-item-end",X=x?"carousel-item-next":"carousel-item-prev";L.classList.add(X),b(L),T.classList.add(ne),L.classList.add(ne),this._queueCallback(()=>{L.classList.remove(ne,X),L.classList.add(Yi),T.classList.remove(Yi,X,ne),this._isSliding=!1,B(Eu)},T,this._isAnimated()),Y&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return xe.findOne(".active.carousel-item",this._element)}_getItems(){return xe.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(c){return J()?c===vo?yo:en:c===vo?en:yo}_orderToDirection(c){return J()?c===yo?vo:wu:c===yo?wu:vo}static jQueryInterface(c){return this.each(function(){const g=wo.getOrCreateInstance(this,c);if(typeof c!="number"){if(typeof c=="string"){if(g[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);g[c]()}}else g.to(c)})}}W.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(_){const c=s(this);if(!c||!c.classList.contains(Ch))return;_.preventDefault();const g=wo.getOrCreateInstance(c),T=this.getAttribute("data-bs-slide-to");return T?(g.to(T),void g._maybeEnableCycle()):rn.getDataAttribute(this,"slide")==="next"?(g.next(),void g._maybeEnableCycle()):(g.prev(),void g._maybeEnableCycle())}),W.on(window,"load.bs.carousel.data-api",()=>{const _=xe.find('[data-bs-ride="carousel"]');for(const c of _)wo.getOrCreateInstance(c)}),N(wo);const Eo="show",Ga="collapse",Qa="collapsing",bh='[data-bs-toggle="collapse"]',Io={parent:null,toggle:!0},Ya={parent:"(null|element)",toggle:"boolean"};class Ds extends Gn{constructor(c,g){super(c,g),this._isTransitioning=!1,this._triggerArray=[];const T=xe.find(bh);for(const x of T){const L=i(x),U=xe.find(L).filter(B=>B===this._element);L!==null&&U.length&&this._triggerArray.push(x)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Io}static get DefaultType(){return Ya}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let c=[];if(this._config.parent&&(c=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(x=>x!==this._element).map(x=>Ds.getOrCreateInstance(x,{toggle:!1}))),c.length&&c[0]._isTransitioning||W.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const x of c)x.hide();const g=this._getDimension();this._element.classList.remove(Ga),this._element.classList.add(Qa),this._element.style[g]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const T=`scroll${g[0].toUpperCase()+g.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Qa),this._element.classList.add(Ga,Eo),this._element.style[g]="",W.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[g]=`${this._element[T]}px`}hide(){if(this._isTransitioning||!this._isShown()||W.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const c=this._getDimension();this._element.style[c]=`${this._element.getBoundingClientRect()[c]}px`,b(this._element),this._element.classList.add(Qa),this._element.classList.remove(Ga,Eo);for(const g of this._triggerArray){const T=s(g);T&&!this._isShown(T)&&this._addAriaAndCollapsedClass([g],!1)}this._isTransitioning=!0,this._element.style[c]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Qa),this._element.classList.add(Ga),W.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(c=this._element){return c.classList.contains(Eo)}_configAfterMerge(c){return c.toggle=Boolean(c.toggle),c.parent=u(c.parent),c}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const c=this._getFirstLevelChildren(bh);for(const g of c){const T=s(g);T&&this._addAriaAndCollapsedClass([g],this._isShown(T))}}_getFirstLevelChildren(c){const g=xe.find(":scope .collapse .collapse",this._config.parent);return xe.find(c,this._config.parent).filter(T=>!g.includes(T))}_addAriaAndCollapsedClass(c,g){if(c.length)for(const T of c)T.classList.toggle("collapsed",!g),T.setAttribute("aria-expanded",g)}static jQueryInterface(c){const g={};return typeof c=="string"&&/show|hide/.test(c)&&(g.toggle=!1),this.each(function(){const T=Ds.getOrCreateInstance(this,g);if(typeof c=="string"){if(T[c]===void 0)throw new TypeError(`No method named "${c}"`);T[c]()}})}}W.on(document,"click.bs.collapse.data-api",bh,function(_){(_.target.tagName==="A"||_.delegateTarget&&_.delegateTarget.tagName==="A")&&_.preventDefault();const c=i(this),g=xe.find(c);for(const T of g)Ds.getOrCreateInstance(T,{toggle:!1}).toggle()}),N(Ds);var dn="top",wt="bottom",gt="right",sn="left",Iu="auto",Ps=[dn,wt,gt,sn],Xi="start",jr="end",Rs="clippingParents",kh="viewport",To="popper",Tu="reference",So=Ps.reduce(function(_,c){return _.concat([c+"-"+Xi,c+"-"+jr])},[]),xh=[].concat(Ps,[Iu]).reduce(function(_,c){return _.concat([c,c+"-"+Xi,c+"-"+jr])},[]),qp="beforeRead",zp="read",Nh="afterRead",Wp="beforeMain",Hp="main",Ah="afterMain",Kp="beforeWrite",Os="write",Dh="afterWrite",Su=[qp,zp,Nh,Wp,Hp,Ah,Kp,Os,Dh];function Sr(_){return _?(_.nodeName||"").toLowerCase():null}function Dn(_){if(_==null)return window;if(_.toString()!=="[object Window]"){var c=_.ownerDocument;return c&&c.defaultView||window}return _}function Ji(_){return _ instanceof Dn(_).Element||_ instanceof Element}function Cr(_){return _ instanceof Dn(_).HTMLElement||_ instanceof HTMLElement}function Cu(_){return typeof ShadowRoot<"u"&&(_ instanceof Dn(_).ShadowRoot||_ instanceof ShadowRoot)}const Ph={name:"applyStyles",enabled:!0,phase:"write",fn:function(_){var c=_.state;Object.keys(c.elements).forEach(function(g){var T=c.styles[g]||{},x=c.attributes[g]||{},L=c.elements[g];Cr(L)&&Sr(L)&&(Object.assign(L.style,T),Object.keys(x).forEach(function(U){var B=x[U];B===!1?L.removeAttribute(U):L.setAttribute(U,B===!0?"":B)}))})},effect:function(_){var c=_.state,g={popper:{position:c.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(c.elements.popper.style,g.popper),c.styles=g,c.elements.arrow&&Object.assign(c.elements.arrow.style,g.arrow),function(){Object.keys(c.elements).forEach(function(T){var x=c.elements[T],L=c.attributes[T]||{},U=Object.keys(c.styles.hasOwnProperty(T)?c.styles[T]:g[T]).reduce(function(B,Y){return B[Y]="",B},{});Cr(x)&&Sr(x)&&(Object.assign(x.style,U),Object.keys(L).forEach(function(B){x.removeAttribute(B)}))})}},requires:["computeStyles"]};function Qn(_){return _.split("-")[0]}var Zi=Math.max,Xa=Math.min,Ls=Math.round;function bu(){var _=navigator.userAgentData;return _!=null&&_.brands?_.brands.map(function(c){return c.brand+"/"+c.version}).join(" "):navigator.userAgent}function Gp(){return!/^((?!chrome|android).)*safari/i.test(bu())}function es(_,c,g){c===void 0&&(c=!1),g===void 0&&(g=!1);var T=_.getBoundingClientRect(),x=1,L=1;c&&Cr(_)&&(x=_.offsetWidth>0&&Ls(T.width)/_.offsetWidth||1,L=_.offsetHeight>0&&Ls(T.height)/_.offsetHeight||1);var U=(Ji(_)?Dn(_):window).visualViewport,B=!Gp()&&g,Y=(T.left+(B&&U?U.offsetLeft:0))/x,ne=(T.top+(B&&U?U.offsetTop:0))/L,X=T.width/x,ie=T.height/L;return{width:X,height:ie,top:ne,right:Y+X,bottom:ne+ie,left:Y,x:Y,y:ne}}function Rh(_){var c=es(_),g=_.offsetWidth,T=_.offsetHeight;return Math.abs(c.width-g)<=1&&(g=c.width),Math.abs(c.height-T)<=1&&(T=c.height),{x:_.offsetLeft,y:_.offsetTop,width:g,height:T}}function Qp(_,c){var g=c.getRootNode&&c.getRootNode();if(_.contains(c))return!0;if(g&&Cu(g)){var T=c;do{if(T&&_.isSameNode(T))return!0;T=T.parentNode||T.host}while(T)}return!1}function si(_){return Dn(_).getComputedStyle(_)}function Yp(_){return["table","td","th"].indexOf(Sr(_))>=0}function oi(_){return((Ji(_)?_.ownerDocument:_.document)||window.document).documentElement}function Ja(_){return Sr(_)==="html"?_:_.assignedSlot||_.parentNode||(Cu(_)?_.host:null)||oi(_)}function Pn(_){return Cr(_)&&si(_).position!=="fixed"?_.offsetParent:null}function ai(_){for(var c=Dn(_),g=Pn(_);g&&Yp(g)&&si(g).position==="static";)g=Pn(g);return g&&(Sr(g)==="html"||Sr(g)==="body"&&si(g).position==="static")?c:g||function(T){var x=/firefox/i.test(bu());if(/Trident/i.test(bu())&&Cr(T)&&si(T).position==="fixed")return null;var L=Ja(T);for(Cu(L)&&(L=L.host);Cr(L)&&["html","body"].indexOf(Sr(L))<0;){var U=si(L);if(U.transform!=="none"||U.perspective!=="none"||U.contain==="paint"||["transform","perspective"].indexOf(U.willChange)!==-1||x&&U.willChange==="filter"||x&&U.filter&&U.filter!=="none")return L;L=L.parentNode}return null}(_)||c}function Co(_){return["top","bottom"].indexOf(_)>=0?"x":"y"}function Za(_,c,g){return Zi(_,Xa(c,g))}function Xp(_){return Object.assign({},{top:0,right:0,bottom:0,left:0},_)}function ku(_,c){return c.reduce(function(g,T){return g[T]=_,g},{})}const Oh={name:"arrow",enabled:!0,phase:"main",fn:function(_){var c,g=_.state,T=_.name,x=_.options,L=g.elements.arrow,U=g.modifiersData.popperOffsets,B=Qn(g.placement),Y=Co(B),ne=[sn,gt].indexOf(B)>=0?"height":"width";if(L&&U){var X=function(mt,dt){return Xp(typeof(mt=typeof mt=="function"?mt(Object.assign({},dt.rects,{placement:dt.placement})):mt)!="number"?mt:ku(mt,Ps))}(x.padding,g),ie=Rh(L),Se=Y==="y"?dn:sn,_e=Y==="y"?wt:gt,pe=g.rects.reference[ne]+g.rects.reference[Y]-U[Y]-g.rects.popper[ne],ke=U[Y]-g.rects.reference[Y],Ne=ai(L),$e=Ne?Y==="y"?Ne.clientHeight||0:Ne.clientWidth||0:0,It=pe/2-ke/2,ze=X[Se],ot=$e-ie[ne]-X[_e],Be=$e/2-ie[ne]/2+It,Xe=Za(ze,Be,ot),ht=Y;g.modifiersData[T]=((c={})[ht]=Xe,c.centerOffset=Xe-Be,c)}},effect:function(_){var c=_.state,g=_.options.element,T=g===void 0?"[data-popper-arrow]":g;T!=null&&(typeof T!="string"||(T=c.elements.popper.querySelector(T)))&&Qp(c.elements.popper,T)&&(c.elements.arrow=T)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ki(_){return _.split("-")[1]}var Jp={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Zp(_){var c,g=_.popper,T=_.popperRect,x=_.placement,L=_.variation,U=_.offsets,B=_.position,Y=_.gpuAcceleration,ne=_.adaptive,X=_.roundOffsets,ie=_.isFixed,Se=U.x,_e=Se===void 0?0:Se,pe=U.y,ke=pe===void 0?0:pe,Ne=typeof X=="function"?X({x:_e,y:ke}):{x:_e,y:ke};_e=Ne.x,ke=Ne.y;var $e=U.hasOwnProperty("x"),It=U.hasOwnProperty("y"),ze=sn,ot=dn,Be=window;if(ne){var Xe=ai(g),ht="clientHeight",mt="clientWidth";Xe===Dn(g)&&si(Xe=oi(g)).position!=="static"&&B==="absolute"&&(ht="scrollHeight",mt="scrollWidth"),(x===dn||(x===sn||x===gt)&&L===jr)&&(ot=wt,ke-=(ie&&Xe===Be&&Be.visualViewport?Be.visualViewport.height:Xe[ht])-T.height,ke*=Y?1:-1),x!==sn&&(x!==dn&&x!==wt||L!==jr)||(ze=gt,_e-=(ie&&Xe===Be&&Be.visualViewport?Be.visualViewport.width:Xe[mt])-T.width,_e*=Y?1:-1)}var dt,Qt=Object.assign({position:B},ne&&Jp),qr=X===!0?function(Oi){var ur=Oi.x,ci=Oi.y,cr=window.devicePixelRatio||1;return{x:Ls(ur*cr)/cr||0,y:Ls(ci*cr)/cr||0}}({x:_e,y:ke}):{x:_e,y:ke};return _e=qr.x,ke=qr.y,Y?Object.assign({},Qt,((dt={})[ot]=It?"0":"",dt[ze]=$e?"0":"",dt.transform=(Be.devicePixelRatio||1)<=1?"translate("+_e+"px, "+ke+"px)":"translate3d("+_e+"px, "+ke+"px, 0)",dt)):Object.assign({},Qt,((c={})[ot]=It?ke+"px":"",c[ze]=$e?_e+"px":"",c.transform="",c))}const Lh={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(_){var c=_.state,g=_.options,T=g.gpuAcceleration,x=T===void 0||T,L=g.adaptive,U=L===void 0||L,B=g.roundOffsets,Y=B===void 0||B,ne={placement:Qn(c.placement),variation:ki(c.placement),popper:c.elements.popper,popperRect:c.rects.popper,gpuAcceleration:x,isFixed:c.options.strategy==="fixed"};c.modifiersData.popperOffsets!=null&&(c.styles.popper=Object.assign({},c.styles.popper,Zp(Object.assign({},ne,{offsets:c.modifiersData.popperOffsets,position:c.options.strategy,adaptive:U,roundOffsets:Y})))),c.modifiersData.arrow!=null&&(c.styles.arrow=Object.assign({},c.styles.arrow,Zp(Object.assign({},ne,{offsets:c.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Y})))),c.attributes.popper=Object.assign({},c.attributes.popper,{"data-popper-placement":c.placement})},data:{}};var Yn={passive:!0};const xu={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(_){var c=_.state,g=_.instance,T=_.options,x=T.scroll,L=x===void 0||x,U=T.resize,B=U===void 0||U,Y=Dn(c.elements.popper),ne=[].concat(c.scrollParents.reference,c.scrollParents.popper);return L&&ne.forEach(function(X){X.addEventListener("scroll",g.update,Yn)}),B&&Y.addEventListener("resize",g.update,Yn),function(){L&&ne.forEach(function(X){X.removeEventListener("scroll",g.update,Yn)}),B&&Y.removeEventListener("resize",g.update,Yn)}},data:{}};var el={left:"right",right:"left",bottom:"top",top:"bottom"};function Nu(_){return _.replace(/left|right|bottom|top/g,function(c){return el[c]})}var w_={start:"end",end:"start"};function ts(_){return _.replace(/start|end/g,function(c){return w_[c]})}function xi(_){var c=Dn(_);return{scrollLeft:c.pageXOffset,scrollTop:c.pageYOffset}}function tl(_){return es(oi(_)).left+xi(_).scrollLeft}function Mh(_){var c=si(_),g=c.overflow,T=c.overflowX,x=c.overflowY;return/auto|scroll|overlay|hidden/.test(g+x+T)}function Fh(_){return["html","body","#document"].indexOf(Sr(_))>=0?_.ownerDocument.body:Cr(_)&&Mh(_)?_:Fh(Ja(_))}function bo(_,c){var g;c===void 0&&(c=[]);var T=Fh(_),x=T===((g=_.ownerDocument)==null?void 0:g.body),L=Dn(T),U=x?[L].concat(L.visualViewport||[],Mh(T)?T:[]):T,B=c.concat(U);return x?B:B.concat(bo(Ja(U)))}function Ms(_){return Object.assign({},_,{left:_.x,top:_.y,right:_.x+_.width,bottom:_.y+_.height})}function $h(_,c,g){return c===kh?Ms(function(T,x){var L=Dn(T),U=oi(T),B=L.visualViewport,Y=U.clientWidth,ne=U.clientHeight,X=0,ie=0;if(B){Y=B.width,ne=B.height;var Se=Gp();(Se||!Se&&x==="fixed")&&(X=B.offsetLeft,ie=B.offsetTop)}return{width:Y,height:ne,x:X+tl(T),y:ie}}(_,g)):Ji(c)?function(T,x){var L=es(T,!1,x==="fixed");return L.top=L.top+T.clientTop,L.left=L.left+T.clientLeft,L.bottom=L.top+T.clientHeight,L.right=L.left+T.clientWidth,L.width=T.clientWidth,L.height=T.clientHeight,L.x=L.left,L.y=L.top,L}(c,g):Ms(function(T){var x,L=oi(T),U=xi(T),B=(x=T.ownerDocument)==null?void 0:x.body,Y=Zi(L.scrollWidth,L.clientWidth,B?B.scrollWidth:0,B?B.clientWidth:0),ne=Zi(L.scrollHeight,L.clientHeight,B?B.scrollHeight:0,B?B.clientHeight:0),X=-U.scrollLeft+tl(T),ie=-U.scrollTop;return si(B||L).direction==="rtl"&&(X+=Zi(L.clientWidth,B?B.clientWidth:0)-Y),{width:Y,height:ne,x:X,y:ie}}(oi(_)))}function Au(_){var c,g=_.reference,T=_.element,x=_.placement,L=x?Qn(x):null,U=x?ki(x):null,B=g.x+g.width/2-T.width/2,Y=g.y+g.height/2-T.height/2;switch(L){case dn:c={x:B,y:g.y-T.height};break;case wt:c={x:B,y:g.y+g.height};break;case gt:c={x:g.x+g.width,y:Y};break;case sn:c={x:g.x-T.width,y:Y};break;default:c={x:g.x,y:g.y}}var ne=L?Co(L):null;if(ne!=null){var X=ne==="y"?"height":"width";switch(U){case Xi:c[ne]=c[ne]-(g[X]/2-T[X]/2);break;case jr:c[ne]=c[ne]+(g[X]/2-T[X]/2)}}return c}function ko(_,c){c===void 0&&(c={});var g=c,T=g.placement,x=T===void 0?_.placement:T,L=g.strategy,U=L===void 0?_.strategy:L,B=g.boundary,Y=B===void 0?Rs:B,ne=g.rootBoundary,X=ne===void 0?kh:ne,ie=g.elementContext,Se=ie===void 0?To:ie,_e=g.altBoundary,pe=_e!==void 0&&_e,ke=g.padding,Ne=ke===void 0?0:ke,$e=Xp(typeof Ne!="number"?Ne:ku(Ne,Ps)),It=Se===To?Tu:To,ze=_.rects.popper,ot=_.elements[pe?It:Se],Be=function(ur,ci,cr,Ln){var ss=ci==="clippingParents"?function(vt){var hr=bo(Ja(vt)),hi=["absolute","fixed"].indexOf(si(vt).position)>=0&&Cr(vt)?ai(vt):vt;return Ji(hi)?hr.filter(function(Lo){return Ji(Lo)&&Qp(Lo,hi)&&Sr(Lo)!=="body"}):[]}(ur):[].concat(ci),os=[].concat(ss,[cr]),ju=os[0],pn=os.reduce(function(vt,hr){var hi=$h(ur,hr,Ln);return vt.top=Zi(hi.top,vt.top),vt.right=Xa(hi.right,vt.right),vt.bottom=Xa(hi.bottom,vt.bottom),vt.left=Zi(hi.left,vt.left),vt},$h(ur,ju,Ln));return pn.width=pn.right-pn.left,pn.height=pn.bottom-pn.top,pn.x=pn.left,pn.y=pn.top,pn}(Ji(ot)?ot:ot.contextElement||oi(_.elements.popper),Y,X,U),Xe=es(_.elements.reference),ht=Au({reference:Xe,element:ze,strategy:"absolute",placement:x}),mt=Ms(Object.assign({},ze,ht)),dt=Se===To?mt:Xe,Qt={top:Be.top-dt.top+$e.top,bottom:dt.bottom-Be.bottom+$e.bottom,left:Be.left-dt.left+$e.left,right:dt.right-Be.right+$e.right},qr=_.modifiersData.offset;if(Se===To&&qr){var Oi=qr[x];Object.keys(Qt).forEach(function(ur){var ci=[gt,wt].indexOf(ur)>=0?1:-1,cr=[dn,wt].indexOf(ur)>=0?"y":"x";Qt[ur]+=Oi[cr]*ci})}return Qt}function eg(_,c){c===void 0&&(c={});var g=c,T=g.placement,x=g.boundary,L=g.rootBoundary,U=g.padding,B=g.flipVariations,Y=g.allowedAutoPlacements,ne=Y===void 0?xh:Y,X=ki(T),ie=X?B?So:So.filter(function(pe){return ki(pe)===X}):Ps,Se=ie.filter(function(pe){return ne.indexOf(pe)>=0});Se.length===0&&(Se=ie);var _e=Se.reduce(function(pe,ke){return pe[ke]=ko(_,{placement:ke,boundary:x,rootBoundary:L,padding:U})[Qn(ke)],pe},{});return Object.keys(_e).sort(function(pe,ke){return _e[pe]-_e[ke]})}const tg={name:"flip",enabled:!0,phase:"main",fn:function(_){var c=_.state,g=_.options,T=_.name;if(!c.modifiersData[T]._skip){for(var x=g.mainAxis,L=x===void 0||x,U=g.altAxis,B=U===void 0||U,Y=g.fallbackPlacements,ne=g.padding,X=g.boundary,ie=g.rootBoundary,Se=g.altBoundary,_e=g.flipVariations,pe=_e===void 0||_e,ke=g.allowedAutoPlacements,Ne=c.options.placement,$e=Qn(Ne),It=Y||($e!==Ne&&pe?function(vt){if(Qn(vt)===Iu)return[];var hr=Nu(vt);return[ts(vt),hr,ts(hr)]}(Ne):[Nu(Ne)]),ze=[Ne].concat(It).reduce(function(vt,hr){return vt.concat(Qn(hr)===Iu?eg(c,{placement:hr,boundary:X,rootBoundary:ie,padding:ne,flipVariations:pe,allowedAutoPlacements:ke}):hr)},[]),ot=c.rects.reference,Be=c.rects.popper,Xe=new Map,ht=!0,mt=ze[0],dt=0;dt<ze.length;dt++){var Qt=ze[dt],qr=Qn(Qt),Oi=ki(Qt)===Xi,ur=[dn,wt].indexOf(qr)>=0,ci=ur?"width":"height",cr=ko(c,{placement:Qt,boundary:X,rootBoundary:ie,altBoundary:Se,padding:ne}),Ln=ur?Oi?gt:sn:Oi?wt:dn;ot[ci]>Be[ci]&&(Ln=Nu(Ln));var ss=Nu(Ln),os=[];if(L&&os.push(cr[qr]<=0),B&&os.push(cr[Ln]<=0,cr[ss]<=0),os.every(function(vt){return vt})){mt=Qt,ht=!1;break}Xe.set(Qt,os)}if(ht)for(var ju=function(vt){var hr=ze.find(function(hi){var Lo=Xe.get(hi);if(Lo)return Lo.slice(0,vt).every(function(mg){return mg})});if(hr)return mt=hr,"break"},pn=pe?3:1;pn>0&&ju(pn)!=="break";pn--);c.placement!==mt&&(c.modifiersData[T]._skip=!0,c.placement=mt,c.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ng(_,c,g){return g===void 0&&(g={x:0,y:0}),{top:_.top-c.height-g.y,right:_.right-c.width+g.x,bottom:_.bottom-c.height+g.y,left:_.left-c.width-g.x}}function Du(_){return[dn,gt,wt,sn].some(function(c){return _[c]>=0})}const rg={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(_){var c=_.state,g=_.name,T=c.rects.reference,x=c.rects.popper,L=c.modifiersData.preventOverflow,U=ko(c,{elementContext:"reference"}),B=ko(c,{altBoundary:!0}),Y=ng(U,T),ne=ng(B,x,L),X=Du(Y),ie=Du(ne);c.modifiersData[g]={referenceClippingOffsets:Y,popperEscapeOffsets:ne,isReferenceHidden:X,hasPopperEscaped:ie},c.attributes.popper=Object.assign({},c.attributes.popper,{"data-popper-reference-hidden":X,"data-popper-escaped":ie})}},ig={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(_){var c=_.state,g=_.options,T=_.name,x=g.offset,L=x===void 0?[0,0]:x,U=xh.reduce(function(X,ie){return X[ie]=function(Se,_e,pe){var ke=Qn(Se),Ne=[sn,dn].indexOf(ke)>=0?-1:1,$e=typeof pe=="function"?pe(Object.assign({},_e,{placement:Se})):pe,It=$e[0],ze=$e[1];return It=It||0,ze=(ze||0)*Ne,[sn,gt].indexOf(ke)>=0?{x:ze,y:It}:{x:It,y:ze}}(ie,c.rects,L),X},{}),B=U[c.placement],Y=B.x,ne=B.y;c.modifiersData.popperOffsets!=null&&(c.modifiersData.popperOffsets.x+=Y,c.modifiersData.popperOffsets.y+=ne),c.modifiersData[T]=U}},Uh={name:"popperOffsets",enabled:!0,phase:"read",fn:function(_){var c=_.state,g=_.name;c.modifiersData[g]=Au({reference:c.rects.reference,element:c.rects.popper,strategy:"absolute",placement:c.placement})},data:{}},sg={name:"preventOverflow",enabled:!0,phase:"main",fn:function(_){var c=_.state,g=_.options,T=_.name,x=g.mainAxis,L=x===void 0||x,U=g.altAxis,B=U!==void 0&&U,Y=g.boundary,ne=g.rootBoundary,X=g.altBoundary,ie=g.padding,Se=g.tether,_e=Se===void 0||Se,pe=g.tetherOffset,ke=pe===void 0?0:pe,Ne=ko(c,{boundary:Y,rootBoundary:ne,padding:ie,altBoundary:X}),$e=Qn(c.placement),It=ki(c.placement),ze=!It,ot=Co($e),Be=ot==="x"?"y":"x",Xe=c.modifiersData.popperOffsets,ht=c.rects.reference,mt=c.rects.popper,dt=typeof ke=="function"?ke(Object.assign({},c.rects,{placement:c.placement})):ke,Qt=typeof dt=="number"?{mainAxis:dt,altAxis:dt}:Object.assign({mainAxis:0,altAxis:0},dt),qr=c.modifiersData.offset?c.modifiersData.offset[c.placement]:null,Oi={x:0,y:0};if(Xe){if(L){var ur,ci=ot==="y"?dn:sn,cr=ot==="y"?wt:gt,Ln=ot==="y"?"height":"width",ss=Xe[ot],os=ss+Ne[ci],ju=ss-Ne[cr],pn=_e?-mt[Ln]/2:0,vt=It===Xi?ht[Ln]:mt[Ln],hr=It===Xi?-mt[Ln]:-ht[Ln],hi=c.elements.arrow,Lo=_e&&hi?Rh(hi):{width:0,height:0},mg=c.modifiersData["arrow#persistent"]?c.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},xC=mg[ci],NC=mg[cr],yg=Za(0,ht[Ln],Lo[Ln]),NF=ze?ht[Ln]/2-pn-yg-xC-Qt.mainAxis:vt-yg-xC-Qt.mainAxis,AF=ze?-ht[Ln]/2+pn+yg+NC+Qt.mainAxis:hr+yg+NC+Qt.mainAxis,O_=c.elements.arrow&&ai(c.elements.arrow),DF=O_?ot==="y"?O_.clientTop||0:O_.clientLeft||0:0,AC=(ur=qr==null?void 0:qr[ot])!=null?ur:0,PF=ss+AF-AC,DC=Za(_e?Xa(os,ss+NF-AC-DF):os,ss,_e?Zi(ju,PF):ju);Xe[ot]=DC,Oi[ot]=DC-ss}if(B){var PC,RF=ot==="x"?dn:sn,OF=ot==="x"?wt:gt,ol=Xe[Be],vg=Be==="y"?"height":"width",RC=ol+Ne[RF],OC=ol-Ne[OF],L_=[dn,sn].indexOf($e)!==-1,LC=(PC=qr==null?void 0:qr[Be])!=null?PC:0,MC=L_?RC:ol-ht[vg]-mt[vg]-LC+Qt.altAxis,FC=L_?ol+ht[vg]+mt[vg]-LC-Qt.altAxis:OC,$C=_e&&L_?function(LF,MF,M_){var UC=Za(LF,MF,M_);return UC>M_?M_:UC}(MC,ol,FC):Za(_e?MC:RC,ol,_e?FC:OC);Xe[Be]=$C,Oi[Be]=$C-ol}c.modifiersData[T]=Oi}},requiresIfExists:["offset"]};function E_(_,c,g){g===void 0&&(g=!1);var T,x,L=Cr(c),U=Cr(c)&&function(ie){var Se=ie.getBoundingClientRect(),_e=Ls(Se.width)/ie.offsetWidth||1,pe=Ls(Se.height)/ie.offsetHeight||1;return _e!==1||pe!==1}(c),B=oi(c),Y=es(_,U,g),ne={scrollLeft:0,scrollTop:0},X={x:0,y:0};return(L||!L&&!g)&&((Sr(c)!=="body"||Mh(B))&&(ne=(T=c)!==Dn(T)&&Cr(T)?{scrollLeft:(x=T).scrollLeft,scrollTop:x.scrollTop}:xi(T)),Cr(c)?((X=es(c,!0)).x+=c.clientLeft,X.y+=c.clientTop):B&&(X.x=tl(B))),{x:Y.left+ne.scrollLeft-X.x,y:Y.top+ne.scrollTop-X.y,width:Y.width,height:Y.height}}function I_(_){var c=new Map,g=new Set,T=[];function x(L){g.add(L.name),[].concat(L.requires||[],L.requiresIfExists||[]).forEach(function(U){if(!g.has(U)){var B=c.get(U);B&&x(B)}}),T.push(L)}return _.forEach(function(L){c.set(L.name,L)}),_.forEach(function(L){g.has(L.name)||x(L)}),T}var og={placement:"bottom",modifiers:[],strategy:"absolute"};function Vh(){for(var _=arguments.length,c=new Array(_),g=0;g<_;g++)c[g]=arguments[g];return!c.some(function(T){return!(T&&typeof T.getBoundingClientRect=="function")})}function xo(_){_===void 0&&(_={});var c=_,g=c.defaultModifiers,T=g===void 0?[]:g,x=c.defaultOptions,L=x===void 0?og:x;return function(U,B,Y){Y===void 0&&(Y=L);var ne,X,ie={placement:"bottom",orderedModifiers:[],options:Object.assign({},og,L),modifiersData:{},elements:{reference:U,popper:B},attributes:{},styles:{}},Se=[],_e=!1,pe={state:ie,setOptions:function(Ne){var $e=typeof Ne=="function"?Ne(ie.options):Ne;ke(),ie.options=Object.assign({},L,ie.options,$e),ie.scrollParents={reference:Ji(U)?bo(U):U.contextElement?bo(U.contextElement):[],popper:bo(B)};var It,ze,ot=function(Be){var Xe=I_(Be);return Su.reduce(function(ht,mt){return ht.concat(Xe.filter(function(dt){return dt.phase===mt}))},[])}((It=[].concat(T,ie.options.modifiers),ze=It.reduce(function(Be,Xe){var ht=Be[Xe.name];return Be[Xe.name]=ht?Object.assign({},ht,Xe,{options:Object.assign({},ht.options,Xe.options),data:Object.assign({},ht.data,Xe.data)}):Xe,Be},{}),Object.keys(ze).map(function(Be){return ze[Be]})));return ie.orderedModifiers=ot.filter(function(Be){return Be.enabled}),ie.orderedModifiers.forEach(function(Be){var Xe=Be.name,ht=Be.options,mt=ht===void 0?{}:ht,dt=Be.effect;if(typeof dt=="function"){var Qt=dt({state:ie,name:Xe,instance:pe,options:mt});Se.push(Qt||function(){})}}),pe.update()},forceUpdate:function(){if(!_e){var Ne=ie.elements,$e=Ne.reference,It=Ne.popper;if(Vh($e,It)){ie.rects={reference:E_($e,ai(It),ie.options.strategy==="fixed"),popper:Rh(It)},ie.reset=!1,ie.placement=ie.options.placement,ie.orderedModifiers.forEach(function(dt){return ie.modifiersData[dt.name]=Object.assign({},dt.data)});for(var ze=0;ze<ie.orderedModifiers.length;ze++)if(ie.reset!==!0){var ot=ie.orderedModifiers[ze],Be=ot.fn,Xe=ot.options,ht=Xe===void 0?{}:Xe,mt=ot.name;typeof Be=="function"&&(ie=Be({state:ie,options:ht,name:mt,instance:pe})||ie)}else ie.reset=!1,ze=-1}}},update:(ne=function(){return new Promise(function(Ne){pe.forceUpdate(),Ne(ie)})},function(){return X||(X=new Promise(function(Ne){Promise.resolve().then(function(){X=void 0,Ne(ne())})})),X}),destroy:function(){ke(),_e=!0}};if(!Vh(U,B))return pe;function ke(){Se.forEach(function(Ne){return Ne()}),Se=[]}return pe.setOptions(Y).then(function(Ne){!_e&&Y.onFirstUpdate&&Y.onFirstUpdate(Ne)}),pe}}var ag=xo(),Bh=xo({defaultModifiers:[xu,Uh,Lh,Ph]}),Pu=xo({defaultModifiers:[xu,Uh,Lh,Ph,ig,tg,sg,Oh,rg]});const jh=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:xo,detectOverflow:ko,createPopperBase:ag,createPopper:Pu,createPopperLite:Bh,top:dn,bottom:wt,right:gt,left:sn,auto:Iu,basePlacements:Ps,start:Xi,end:jr,clippingParents:Rs,viewport:kh,popper:To,reference:Tu,variationPlacements:So,placements:xh,beforeRead:qp,read:zp,afterRead:Nh,beforeMain:Wp,main:Hp,afterMain:Ah,beforeWrite:Kp,write:Os,afterWrite:Dh,modifierPhases:Su,applyStyles:Ph,arrow:Oh,computeStyles:Lh,eventListeners:xu,flip:tg,hide:rg,offset:ig,popperOffsets:Uh,preventOverflow:sg},Symbol.toStringTag,{value:"Module"})),Ru="dropdown",T_="ArrowUp",lg="ArrowDown",ug="click.bs.dropdown.data-api",No="keydown.bs.dropdown.data-api",Ao="show",Ni='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',S_=`${Ni}.show`,Ou=".dropdown-menu",C_=J()?"top-end":"top-start",l=J()?"top-start":"top-end",d=J()?"bottom-end":"bottom-start",f=J()?"bottom-start":"bottom-end",y=J()?"left-start":"right-start",E=J()?"right-start":"left-start",I={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},S={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class O extends Gn{constructor(c,g){super(c,g),this._popper=null,this._parent=this._element.parentNode,this._menu=xe.next(this._element,Ou)[0]||xe.prev(this._element,Ou)[0]||xe.findOne(Ou,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return I}static get DefaultType(){return S}static get NAME(){return Ru}toggle(){return this._isShown()?this.hide():this.show()}show(){if(p(this._element)||this._isShown())return;const c={relatedTarget:this._element};if(!W.trigger(this._element,"show.bs.dropdown",c).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const g of[].concat(...document.body.children))W.on(g,"mouseover",w);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ao),this._element.classList.add(Ao),W.trigger(this._element,"shown.bs.dropdown",c)}}hide(){if(p(this._element)||!this._isShown())return;const c={relatedTarget:this._element};this._completeHide(c)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(c){if(!W.trigger(this._element,"hide.bs.dropdown",c).defaultPrevented){if("ontouchstart"in document.documentElement)for(const g of[].concat(...document.body.children))W.off(g,"mouseover",w);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ao),this._element.classList.remove(Ao),this._element.setAttribute("aria-expanded","false"),rn.removeDataAttribute(this._menu,"popper"),W.trigger(this._element,"hidden.bs.dropdown",c)}}_getConfig(c){if(typeof(c=super._getConfig(c)).reference=="object"&&!a(c.reference)&&typeof c.reference.getBoundingClientRect!="function")throw new TypeError(`${Ru.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return c}_createPopper(){if(jh===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let c=this._element;this._config.reference==="parent"?c=this._parent:a(this._config.reference)?c=u(this._config.reference):typeof this._config.reference=="object"&&(c=this._config.reference);const g=this._getPopperConfig();this._popper=Pu(c,this._menu,g)}_isShown(){return this._menu.classList.contains(Ao)}_getPlacement(){const c=this._parent;if(c.classList.contains("dropend"))return y;if(c.classList.contains("dropstart"))return E;if(c.classList.contains("dropup-center"))return"top";if(c.classList.contains("dropdown-center"))return"bottom";const g=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return c.classList.contains("dropup")?g?l:C_:g?f:d}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:c}=this._config;return typeof c=="string"?c.split(",").map(g=>Number.parseInt(g,10)):typeof c=="function"?g=>c(g,this._element):c}_getPopperConfig(){const c={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(rn.setDataAttribute(this._menu,"popper","static"),c.modifiers=[{name:"applyStyles",enabled:!1}]),{...c,...typeof this._config.popperConfig=="function"?this._config.popperConfig(c):this._config.popperConfig}}_selectMenuItem({key:c,target:g}){const T=xe.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(x=>h(x));T.length&&Q(T,g,c===lg,!T.includes(g)).focus()}static jQueryInterface(c){return this.each(function(){const g=O.getOrCreateInstance(this,c);if(typeof c=="string"){if(g[c]===void 0)throw new TypeError(`No method named "${c}"`);g[c]()}})}static clearMenus(c){if(c.button===2||c.type==="keyup"&&c.key!=="Tab")return;const g=xe.find(S_);for(const T of g){const x=O.getInstance(T);if(!x||x._config.autoClose===!1)continue;const L=c.composedPath(),U=L.includes(x._menu);if(L.includes(x._element)||x._config.autoClose==="inside"&&!U||x._config.autoClose==="outside"&&U||x._menu.contains(c.target)&&(c.type==="keyup"&&c.key==="Tab"||/input|select|option|textarea|form/i.test(c.target.tagName)))continue;const B={relatedTarget:x._element};c.type==="click"&&(B.clickEvent=c),x._completeHide(B)}}static dataApiKeydownHandler(c){const g=/input|textarea/i.test(c.target.tagName),T=c.key==="Escape",x=[T_,lg].includes(c.key);if(!x&&!T||g&&!T)return;c.preventDefault();const L=this.matches(Ni)?this:xe.prev(this,Ni)[0]||xe.next(this,Ni)[0]||xe.findOne(Ni,c.delegateTarget.parentNode),U=O.getOrCreateInstance(L);if(x)return c.stopPropagation(),U.show(),void U._selectMenuItem(c);U._isShown()&&(c.stopPropagation(),U.hide(),L.focus())}}W.on(document,No,Ni,O.dataApiKeydownHandler),W.on(document,No,Ou,O.dataApiKeydownHandler),W.on(document,ug,O.clearMenus),W.on(document,"keyup.bs.dropdown.data-api",O.clearMenus),W.on(document,ug,Ni,function(_){_.preventDefault(),O.getOrCreateInstance(this).toggle()}),N(O);const A=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",V=".sticky-top",z="padding-right",Z="margin-right";class j{constructor(){this._element=document.body}getWidth(){const c=document.documentElement.clientWidth;return Math.abs(window.innerWidth-c)}hide(){const c=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,z,g=>g+c),this._setElementAttributes(A,z,g=>g+c),this._setElementAttributes(V,Z,g=>g-c)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,z),this._resetElementAttributes(A,z),this._resetElementAttributes(V,Z)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(c,g,T){const x=this.getWidth();this._applyManipulationCallback(c,L=>{if(L!==this._element&&window.innerWidth>L.clientWidth+x)return;this._saveInitialAttribute(L,g);const U=window.getComputedStyle(L).getPropertyValue(g);L.style.setProperty(g,`${T(Number.parseFloat(U))}px`)})}_saveInitialAttribute(c,g){const T=c.style.getPropertyValue(g);T&&rn.setDataAttribute(c,g,T)}_resetElementAttributes(c,g){this._applyManipulationCallback(c,T=>{const x=rn.getDataAttribute(T,g);x!==null?(rn.removeDataAttribute(T,g),T.style.setProperty(g,x)):T.style.removeProperty(g)})}_applyManipulationCallback(c,g){if(a(c))g(c);else for(const T of xe.find(c,this._element))g(T)}}const K="show",we="mousedown.bs.backdrop",Le={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ee={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Bt extends Ir{constructor(c){super(),this._config=this._getConfig(c),this._isAppended=!1,this._element=null}static get Default(){return Le}static get DefaultType(){return Ee}static get NAME(){return"backdrop"}show(c){if(!this._config.isVisible)return void D(c);this._append();const g=this._getElement();this._config.isAnimated&&b(g),g.classList.add(K),this._emulateAnimation(()=>{D(c)})}hide(c){this._config.isVisible?(this._getElement().classList.remove(K),this._emulateAnimation(()=>{this.dispose(),D(c)})):D(c)}dispose(){this._isAppended&&(W.off(this._element,we),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const c=document.createElement("div");c.className=this._config.className,this._config.isAnimated&&c.classList.add("fade"),this._element=c}return this._element}_configAfterMerge(c){return c.rootElement=u(c.rootElement),c}_append(){if(this._isAppended)return;const c=this._getElement();this._config.rootElement.append(c),W.on(c,we,()=>{D(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(c){M(c,this._getElement(),this._config.isAnimated)}}const Lt=".bs.focustrap",Xn="backward",at={autofocus:!0,trapElement:null},Pe={autofocus:"boolean",trapElement:"element"};class Rn extends Ir{constructor(c){super(),this._config=this._getConfig(c),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return at}static get DefaultType(){return Pe}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),W.off(document,Lt),W.on(document,"focusin.bs.focustrap",c=>this._handleFocusin(c)),W.on(document,"keydown.tab.bs.focustrap",c=>this._handleKeydown(c)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,W.off(document,Lt))}_handleFocusin(c){const{trapElement:g}=this._config;if(c.target===document||c.target===g||g.contains(c.target))return;const T=xe.focusableChildren(g);T.length===0?g.focus():this._lastTabNavDirection===Xn?T[T.length-1].focus():T[0].focus()}_handleKeydown(c){c.key==="Tab"&&(this._lastTabNavDirection=c.shiftKey?Xn:"forward")}}const Ke="hidden.bs.modal",Et="show.bs.modal",Do="modal-open",nl="show",On="modal-static",Fs={backdrop:!0,focus:!0,keyboard:!0},$s={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class jt extends Gn{constructor(c,g){super(c,g),this._dialog=xe.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new j,this._addEventListeners()}static get Default(){return Fs}static get DefaultType(){return $s}static get NAME(){return"modal"}toggle(c){return this._isShown?this.hide():this.show(c)}show(c){this._isShown||this._isTransitioning||W.trigger(this._element,Et,{relatedTarget:c}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Do),this._adjustDialog(),this._backdrop.show(()=>this._showElement(c)))}hide(){this._isShown&&!this._isTransitioning&&(W.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(nl),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){for(const c of[window,this._dialog])W.off(c,".bs.modal");this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Bt({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Rn({trapElement:this._element})}_showElement(c){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const g=xe.findOne(".modal-body",this._dialog);g&&(g.scrollTop=0),b(this._element),this._element.classList.add(nl),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,W.trigger(this._element,"shown.bs.modal",{relatedTarget:c})},this._dialog,this._isAnimated())}_addEventListeners(){W.on(this._element,"keydown.dismiss.bs.modal",c=>{if(c.key==="Escape")return this._config.keyboard?(c.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),W.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),W.on(this._element,"mousedown.dismiss.bs.modal",c=>{W.one(this._element,"click.dismiss.bs.modal",g=>{this._element===c.target&&this._element===g.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Do),this._resetAdjustments(),this._scrollBar.reset(),W.trigger(this._element,Ke)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(W.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const c=this._element.scrollHeight>document.documentElement.clientHeight,g=this._element.style.overflowY;g==="hidden"||this._element.classList.contains(On)||(c||(this._element.style.overflowY="hidden"),this._element.classList.add(On),this._queueCallback(()=>{this._element.classList.remove(On),this._queueCallback(()=>{this._element.style.overflowY=g},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const c=this._element.scrollHeight>document.documentElement.clientHeight,g=this._scrollBar.getWidth(),T=g>0;if(T&&!c){const x=J()?"paddingLeft":"paddingRight";this._element.style[x]=`${g}px`}if(!T&&c){const x=J()?"paddingRight":"paddingLeft";this._element.style[x]=`${g}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(c,g){return this.each(function(){const T=jt.getOrCreateInstance(this,c);if(typeof c=="string"){if(T[c]===void 0)throw new TypeError(`No method named "${c}"`);T[c](g)}})}}W.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(_){const c=s(this);["A","AREA"].includes(this.tagName)&&_.preventDefault(),W.one(c,Et,T=>{T.defaultPrevented||W.one(c,Ke,()=>{h(this)&&this.focus()})});const g=xe.findOne(".modal.show");g&&jt.getInstance(g).hide(),jt.getOrCreateInstance(c).toggle(this)}),Tr(jt),N(jt);const Ai="show",lr="showing",Di="hiding",qh=".offcanvas.show",ns="hidePrevented.bs.offcanvas",Lu="hidden.bs.offcanvas",rt={backdrop:!0,keyboard:!0,scroll:!1},Us={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class li extends Gn{constructor(c,g){super(c,g),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return rt}static get DefaultType(){return Us}static get NAME(){return"offcanvas"}toggle(c){return this._isShown?this.hide():this.show(c)}show(c){this._isShown||W.trigger(this._element,"show.bs.offcanvas",{relatedTarget:c}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new j().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(lr),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Ai),this._element.classList.remove(lr),W.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:c})},this._element,!0))}hide(){this._isShown&&(W.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Di),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Ai,Di),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new j().reset(),W.trigger(this._element,Lu)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const c=Boolean(this._config.backdrop);return new Bt({className:"offcanvas-backdrop",isVisible:c,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:c?()=>{this._config.backdrop!=="static"?this.hide():W.trigger(this._element,ns)}:null})}_initializeFocusTrap(){return new Rn({trapElement:this._element})}_addEventListeners(){W.on(this._element,"keydown.dismiss.bs.offcanvas",c=>{c.key==="Escape"&&(this._config.keyboard?this.hide():W.trigger(this._element,ns))})}static jQueryInterface(c){return this.each(function(){const g=li.getOrCreateInstance(this,c);if(typeof c=="string"){if(g[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);g[c](this)}})}}W.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(_){const c=s(this);if(["A","AREA"].includes(this.tagName)&&_.preventDefault(),p(this))return;W.one(c,Lu,()=>{h(this)&&this.focus()});const g=xe.findOne(qh);g&&g!==c&&li.getInstance(g).hide(),li.getOrCreateInstance(c).toggle(this)}),W.on(window,"load.bs.offcanvas.data-api",()=>{for(const _ of xe.find(qh))li.getOrCreateInstance(_).show()}),W.on(window,"resize.bs.offcanvas",()=>{for(const _ of xe.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(_).position!=="fixed"&&li.getOrCreateInstance(_).hide()}),Tr(li),N(li);const zh=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),b_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Mu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,k_=(_,c)=>{const g=_.nodeName.toLowerCase();return c.includes(g)?!zh.has(g)||Boolean(b_.test(_.nodeValue)||Mu.test(_.nodeValue)):c.filter(T=>T instanceof RegExp).some(T=>T.test(g))},Wh={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},x_={allowList:Wh,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},N_={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},A_={entry:"(string|element|function|null)",selector:"(string|element)"};class Fu extends Ir{constructor(c){super(),this._config=this._getConfig(c)}static get Default(){return x_}static get DefaultType(){return N_}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(c=>this._resolvePossibleFunction(c)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(c){return this._checkContent(c),this._config.content={...this._config.content,...c},this}toHtml(){const c=document.createElement("div");c.innerHTML=this._maybeSanitize(this._config.template);for(const[x,L]of Object.entries(this._config.content))this._setContent(c,L,x);const g=c.children[0],T=this._resolvePossibleFunction(this._config.extraClass);return T&&g.classList.add(...T.split(" ")),g}_typeCheckConfig(c){super._typeCheckConfig(c),this._checkContent(c.content)}_checkContent(c){for(const[g,T]of Object.entries(c))super._typeCheckConfig({selector:g,entry:T},A_)}_setContent(c,g,T){const x=xe.findOne(T,c);x&&((g=this._resolvePossibleFunction(g))?a(g)?this._putElementInTemplate(u(g),x):this._config.html?x.innerHTML=this._maybeSanitize(g):x.textContent=g:x.remove())}_maybeSanitize(c){return this._config.sanitize?function(g,T,x){if(!g.length)return g;if(x&&typeof x=="function")return x(g);const L=new window.DOMParser().parseFromString(g,"text/html"),U=[].concat(...L.body.querySelectorAll("*"));for(const B of U){const Y=B.nodeName.toLowerCase();if(!Object.keys(T).includes(Y)){B.remove();continue}const ne=[].concat(...B.attributes),X=[].concat(T["*"]||[],T[Y]||[]);for(const ie of ne)k_(ie,X)||B.removeAttribute(ie.nodeName)}return L.body.innerHTML}(c,this._config.allowList,this._config.sanitizeFn):c}_resolvePossibleFunction(c){return typeof c=="function"?c(this):c}_putElementInTemplate(c,g){if(this._config.html)return g.innerHTML="",void g.append(c);g.textContent=c.textContent}}const D_=new Set(["sanitize","allowList","sanitizeFn"]),Hh="fade",$u="show",Po=".modal",cg="hide.bs.modal",Ro="hover",ui="focus",Pi={AUTO:"auto",TOP:"top",RIGHT:J()?"left":"right",BOTTOM:"bottom",LEFT:J()?"right":"left"},hg={allowList:Wh,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},dg={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class rs extends Gn{constructor(c,g){if(jh===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(c,g),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return hg}static get DefaultType(){return dg}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),W.off(this._element.closest(Po),cg,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const c=W.trigger(this._element,this.constructor.eventName("show")),g=(v(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(c.defaultPrevented||!g)return;this._disposePopper();const T=this._getTipElement();this._element.setAttribute("aria-describedby",T.getAttribute("id"));const{container:x}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(x.append(T),W.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(T),T.classList.add($u),"ontouchstart"in document.documentElement)for(const L of[].concat(...document.body.children))W.on(L,"mouseover",w);this._queueCallback(()=>{W.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!W.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove($u),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))W.off(c,"mouseover",w);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),W.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(c){const g=this._getTemplateFactory(c).toHtml();if(!g)return null;g.classList.remove(Hh,$u),g.classList.add(`bs-${this.constructor.NAME}-auto`);const T=(x=>{do x+=Math.floor(1e6*Math.random());while(document.getElementById(x));return x})(this.constructor.NAME).toString();return g.setAttribute("id",T),this._isAnimated()&&g.classList.add(Hh),g}setContent(c){this._newContent=c,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(c){return this._templateFactory?this._templateFactory.changeContent(c):this._templateFactory=new Fu({...this._config,content:c,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(c){return this.constructor.getOrCreateInstance(c.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Hh)}_isShown(){return this.tip&&this.tip.classList.contains($u)}_createPopper(c){const g=typeof this._config.placement=="function"?this._config.placement.call(this,c,this._element):this._config.placement,T=Pi[g.toUpperCase()];return Pu(this._element,c,this._getPopperConfig(T))}_getOffset(){const{offset:c}=this._config;return typeof c=="string"?c.split(",").map(g=>Number.parseInt(g,10)):typeof c=="function"?g=>c(g,this._element):c}_resolvePossibleFunction(c){return typeof c=="function"?c.call(this._element):c}_getPopperConfig(c){const g={placement:c,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:T=>{this._getTipElement().setAttribute("data-popper-placement",T.state.placement)}}]};return{...g,...typeof this._config.popperConfig=="function"?this._config.popperConfig(g):this._config.popperConfig}}_setListeners(){const c=this._config.trigger.split(" ");for(const g of c)if(g==="click")W.on(this._element,this.constructor.eventName("click"),this._config.selector,T=>{this._initializeOnDelegatedTarget(T).toggle()});else if(g!=="manual"){const T=g===Ro?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),x=g===Ro?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");W.on(this._element,T,this._config.selector,L=>{const U=this._initializeOnDelegatedTarget(L);U._activeTrigger[L.type==="focusin"?ui:Ro]=!0,U._enter()}),W.on(this._element,x,this._config.selector,L=>{const U=this._initializeOnDelegatedTarget(L);U._activeTrigger[L.type==="focusout"?ui:Ro]=U._element.contains(L.relatedTarget),U._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},W.on(this._element.closest(Po),cg,this._hideModalHandler)}_fixTitle(){const c=this._element.getAttribute("title");c&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",c),this._element.setAttribute("data-bs-original-title",c),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(c,g){clearTimeout(this._timeout),this._timeout=setTimeout(c,g)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(c){const g=rn.getDataAttributes(this._element);for(const T of Object.keys(g))D_.has(T)&&delete g[T];return c={...g,...typeof c=="object"&&c?c:{}},c=this._mergeConfigObj(c),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}_configAfterMerge(c){return c.container=c.container===!1?document.body:u(c.container),typeof c.delay=="number"&&(c.delay={show:c.delay,hide:c.delay}),typeof c.title=="number"&&(c.title=c.title.toString()),typeof c.content=="number"&&(c.content=c.content.toString()),c}_getDelegateConfig(){const c={};for(const g in this._config)this.constructor.Default[g]!==this._config[g]&&(c[g]=this._config[g]);return c.selector=!1,c.trigger="manual",c}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(c){return this.each(function(){const g=rs.getOrCreateInstance(this,c);if(typeof c=="string"){if(g[c]===void 0)throw new TypeError(`No method named "${c}"`);g[c]()}})}}N(rs);const P_={...rs.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},ct={...rs.DefaultType,content:"(null|string|element|function)"};class Vs extends rs{static get Default(){return P_}static get DefaultType(){return ct}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(c){return this.each(function(){const g=Vs.getOrCreateInstance(this,c);if(typeof c=="string"){if(g[c]===void 0)throw new TypeError(`No method named "${c}"`);g[c]()}})}}N(Vs);const br="click.bs.scrollspy",fn="active",Uu="[href]",fg={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},R_={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class rl extends Gn{constructor(c,g){super(c,g),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return fg}static get DefaultType(){return R_}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const c of this._observableSections.values())this._observer.observe(c)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(c){return c.target=u(c.target)||document.body,c.rootMargin=c.offset?`${c.offset}px 0px -30%`:c.rootMargin,typeof c.threshold=="string"&&(c.threshold=c.threshold.split(",").map(g=>Number.parseFloat(g))),c}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(W.off(this._config.target,br),W.on(this._config.target,br,Uu,c=>{const g=this._observableSections.get(c.target.hash);if(g){c.preventDefault();const T=this._rootElement||window,x=g.offsetTop-this._element.offsetTop;if(T.scrollTo)return void T.scrollTo({top:x,behavior:"smooth"});T.scrollTop=x}}))}_getNewObserver(){const c={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(g=>this._observerCallback(g),c)}_observerCallback(c){const g=U=>this._targetLinks.get(`#${U.target.id}`),T=U=>{this._previousScrollData.visibleEntryTop=U.target.offsetTop,this._process(g(U))},x=(this._rootElement||document.documentElement).scrollTop,L=x>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=x;for(const U of c){if(!U.isIntersecting){this._activeTarget=null,this._clearActiveClass(g(U));continue}const B=U.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(L&&B){if(T(U),!x)return}else L||B||T(U)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const c=xe.find(Uu,this._config.target);for(const g of c){if(!g.hash||p(g))continue;const T=xe.findOne(g.hash,this._element);h(T)&&(this._targetLinks.set(g.hash,g),this._observableSections.set(g.hash,T))}}_process(c){this._activeTarget!==c&&(this._clearActiveClass(this._config.target),this._activeTarget=c,c.classList.add(fn),this._activateParents(c),W.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:c}))}_activateParents(c){if(c.classList.contains("dropdown-item"))xe.findOne(".dropdown-toggle",c.closest(".dropdown")).classList.add(fn);else for(const g of xe.parents(c,".nav, .list-group"))for(const T of xe.prev(g,".nav-link, .nav-item > .nav-link, .list-group-item"))T.classList.add(fn)}_clearActiveClass(c){c.classList.remove(fn);const g=xe.find("[href].active",c);for(const T of g)T.classList.remove(fn)}static jQueryInterface(c){return this.each(function(){const g=rl.getOrCreateInstance(this,c);if(typeof c=="string"){if(g[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);g[c]()}})}}W.on(window,"load.bs.scrollspy.data-api",()=>{for(const _ of xe.find('[data-bs-spy="scroll"]'))rl.getOrCreateInstance(_)}),N(rl);const pg="ArrowLeft",is="ArrowRight",Kh="ArrowUp",Gh="ArrowDown",Bs="active",il="fade",sl="show",gg='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Oo=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${gg}`;class Ri extends Gn{constructor(c){super(c),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),W.on(this._element,"keydown.bs.tab",g=>this._keydown(g)))}static get NAME(){return"tab"}show(){const c=this._element;if(this._elemIsActive(c))return;const g=this._getActiveElem(),T=g?W.trigger(g,"hide.bs.tab",{relatedTarget:c}):null;W.trigger(c,"show.bs.tab",{relatedTarget:g}).defaultPrevented||T&&T.defaultPrevented||(this._deactivate(g,c),this._activate(c,g))}_activate(c,g){c&&(c.classList.add(Bs),this._activate(s(c)),this._queueCallback(()=>{c.getAttribute("role")==="tab"?(c.removeAttribute("tabindex"),c.setAttribute("aria-selected",!0),this._toggleDropDown(c,!0),W.trigger(c,"shown.bs.tab",{relatedTarget:g})):c.classList.add(sl)},c,c.classList.contains(il)))}_deactivate(c,g){c&&(c.classList.remove(Bs),c.blur(),this._deactivate(s(c)),this._queueCallback(()=>{c.getAttribute("role")==="tab"?(c.setAttribute("aria-selected",!1),c.setAttribute("tabindex","-1"),this._toggleDropDown(c,!1),W.trigger(c,"hidden.bs.tab",{relatedTarget:g})):c.classList.remove(sl)},c,c.classList.contains(il)))}_keydown(c){if(![pg,is,Kh,Gh].includes(c.key))return;c.stopPropagation(),c.preventDefault();const g=[is,Gh].includes(c.key),T=Q(this._getChildren().filter(x=>!p(x)),c.target,g,!0);T&&(T.focus({preventScroll:!0}),Ri.getOrCreateInstance(T).show())}_getChildren(){return xe.find(Oo,this._parent)}_getActiveElem(){return this._getChildren().find(c=>this._elemIsActive(c))||null}_setInitialAttributes(c,g){this._setAttributeIfNotExists(c,"role","tablist");for(const T of g)this._setInitialAttributesOnChild(T)}_setInitialAttributesOnChild(c){c=this._getInnerElement(c);const g=this._elemIsActive(c),T=this._getOuterElement(c);c.setAttribute("aria-selected",g),T!==c&&this._setAttributeIfNotExists(T,"role","presentation"),g||c.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(c,"role","tab"),this._setInitialAttributesOnTargetPanel(c)}_setInitialAttributesOnTargetPanel(c){const g=s(c);g&&(this._setAttributeIfNotExists(g,"role","tabpanel"),c.id&&this._setAttributeIfNotExists(g,"aria-labelledby",`#${c.id}`))}_toggleDropDown(c,g){const T=this._getOuterElement(c);if(!T.classList.contains("dropdown"))return;const x=(L,U)=>{const B=xe.findOne(L,T);B&&B.classList.toggle(U,g)};x(".dropdown-toggle",Bs),x(".dropdown-menu",sl),T.setAttribute("aria-expanded",g)}_setAttributeIfNotExists(c,g,T){c.hasAttribute(g)||c.setAttribute(g,T)}_elemIsActive(c){return c.classList.contains(Bs)}_getInnerElement(c){return c.matches(Oo)?c:xe.findOne(Oo,c)}_getOuterElement(c){return c.closest(".nav-item, .list-group-item")||c}static jQueryInterface(c){return this.each(function(){const g=Ri.getOrCreateInstance(this);if(typeof c=="string"){if(g[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);g[c]()}})}}W.on(document,"click.bs.tab",gg,function(_){["A","AREA"].includes(this.tagName)&&_.preventDefault(),p(this)||Ri.getOrCreateInstance(this).show()}),W.on(window,"load.bs.tab",()=>{for(const _ of xe.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))Ri.getOrCreateInstance(_)}),N(Ri);const Vu="hide",Bu="show",C="showing",P={animation:"boolean",autohide:"boolean",delay:"number"},F={animation:!0,autohide:!0,delay:5e3};class G extends Gn{constructor(c,g){super(c,g),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return F}static get DefaultType(){return P}static get NAME(){return"toast"}show(){W.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Vu),b(this._element),this._element.classList.add(Bu,C),this._queueCallback(()=>{this._element.classList.remove(C),W.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(W.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(C),this._queueCallback(()=>{this._element.classList.add(Vu),this._element.classList.remove(C,Bu),W.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Bu),super.dispose()}isShown(){return this._element.classList.contains(Bu)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(c,g){switch(c.type){case"mouseover":case"mouseout":this._hasMouseInteraction=g;break;case"focusin":case"focusout":this._hasKeyboardInteraction=g}if(g)return void this._clearTimeout();const T=c.relatedTarget;this._element===T||this._element.contains(T)||this._maybeScheduleHide()}_setListeners(){W.on(this._element,"mouseover.bs.toast",c=>this._onInteraction(c,!0)),W.on(this._element,"mouseout.bs.toast",c=>this._onInteraction(c,!1)),W.on(this._element,"focusin.bs.toast",c=>this._onInteraction(c,!0)),W.on(this._element,"focusout.bs.toast",c=>this._onInteraction(c,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(c){return this.each(function(){const g=G.getOrCreateInstance(this,c);if(typeof c=="string"){if(g[c]===void 0)throw new TypeError(`No method named "${c}"`);g[c](this)}})}}return Tr(G),N(G),{Alert:za,Button:Wa,Carousel:wo,Collapse:Ds,Dropdown:O,Modal:jt,Offcanvas:li,Popover:Vs,ScrollSpy:rl,Tab:Ri,Toast:G,Tooltip:rs}})})(OY);Jw.createRoot(document.getElementById("root")).render($(nN.StrictMode,{children:$(eY,{children:$(RY,{})})}));
